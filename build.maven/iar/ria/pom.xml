<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<groupId>ch.ivyteam.ivy.project</groupId>
	<artifactId>build.maven.iar.ria</artifactId>
	<packaging>pom</packaging>

	<parent>
		<groupId>ch.ivyteam.ivy.project</groupId>
		<artifactId>build.maven.iar</artifactId>
		<version>6.5.0-SNAPSHOT</version>
		<relativePath>..</relativePath>
	</parent>

	<build>
		<plugins>
			<plugin>
				<groupId>com.google.code.maven-svn-revision-number-plugin</groupId>
				<artifactId>svn-revision-number-maven-plugin</artifactId>
				<version>1.13</version>
				<executions>
					<execution>
						<goals><goal>revision</goal></goals>
						<configuration>
							<entries>
								<entry><prefix>svn</prefix></entry>
							</entries>
						</configuration>
					</execution>
				</executions>
				<dependencies>
					<dependency>
						<groupId>org.tmatesoft.svnkit</groupId>
						<artifactId>svnkit</artifactId>
						<version>1.8.5</version>
					</dependency>
				</dependencies>
          </plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-antrun-plugin</artifactId>
				<version>${antrun.version}</version>
				<executions>
					<execution>
						<phase>compile</phase>
						<goals><goal>run</goal></goals>
						<configuration>
							<target>
								<property file="../../ant.properties" /> <!-- global trunk properties with version info -->
								<tstamp><format property="build.date.iso" pattern="yyyy-MM-dd" locale="en" /></tstamp>
							
								<filterset id="ria.property.filter">
									<!-- RIA application name and application short name are not changed by the build -->
									<filter token="VendorName" value="${vendor.name}" />
									<filter token="MajorVersion" value="${ivy-major-version}" />
									<filter token="MinorVersion" value="${ivy-minor-version}" />
									<filter token="PatchVersion" value="${ivy-service-version}" />
									<filter token="RevisionNumber" value="${svn.revision}" />
									<filter token="Copyright" value="${application.copyright}" />
									<filter token="BuildDate" value="${build.date.iso}" />
								</filterset>
								
								<!-- configure advisor properties -->
								<copy overwrite="true" failonerror="false"
									file=".settings/riaProjectAdvisor_Build.properties"
									tofile=".settings/riaProjectAdvisor.properties">
									<filterset refid="ria.property.filter" />
								</copy>
							</target>
						</configuration>
					</execution>
				</executions>
			</plugin>
		</plugins>
		<pluginManagement>
		 	<plugins>
		 		<plugin>
					<groupId>ch.ivyteam.ivy</groupId>
					<artifactId>project-build-plugin</artifactId>
					<version>[0.0.3-SNAPSHOT,)</version>
					<configuration>
						<iarExcludes combine.children="append">
							<iarExclude>.settings/riaProjectAdvisor_Build.properties</iarExclude>
						</iarExcludes>
					</configuration>
				</plugin>
		 	</plugins>
		</pluginManagement>
	</build>
</project>