[Ivy]
[>Created: Thu Jun 09 16:23:16 CEST 2011]
11A9B75F7E57BD13 3.17 #module
>Proto >Proto Collection #zClass
Cs0 CaseSearchProcess Big #zClass
Cs0 RD #cInfo
Cs0 #process
Cs0 @TextInP .resExport .resExport #zField
Cs0 @TextInP .type .type #zField
Cs0 @TextInP .processKind .processKind #zField
Cs0 @TextInP .ui2RdDataAction .ui2RdDataAction #zField
Cs0 @TextInP .rdData2UIAction .rdData2UIAction #zField
Cs0 @TextInP .xml .xml #zField
Cs0 @TextInP .responsibility .responsibility #zField
Cs0 @MessageFlowInP-0n messageIn messageIn #zField
Cs0 @MessageFlowOutP-0n messageOut messageOut #zField
Cs0 @AnnotationInP-0n ai ai #zField
Cs0 @RichDialogInitStart f0 '' #zField
Cs0 @RichDialogProcessEnd f1 '' #zField
Cs0 @RichDialogProcessStart f3 '' #zField
Cs0 @RichDialogProcessEnd f4 '' #zField
Cs0 @Alternative f6 '' #zField
Cs0 @RichDialogProcessStep f10 '' #zField
Cs0 @PushWFArc f11 '' #zField
Cs0 @RichDialogProcessStep f9 '' #zField
Cs0 @RichDialogProcessStep f12 '' #zField
Cs0 @RichDialogProcessStep f13 '' #zField
Cs0 @RichDialogProcessStep f14 '' #zField
Cs0 @PushWFArc f15 '' #zField
Cs0 @PushWFArc f18 '' #zField
Cs0 @PushWFArc f20 '' #zField
Cs0 @PushWFArc f22 '' #zField
Cs0 @RichDialogProcessStep f24 '' #zField
Cs0 @RichDialogProcessStep f25 '' #zField
Cs0 @PushWFArc f26 '' #zField
Cs0 @PushWFArc f28 '' #zField
Cs0 @RichDialogProcessStep f30 '' #zField
Cs0 @PushWFArc f2 '' #zField
Cs0 @RichDialogProcessStart f32 '' #zField
Cs0 @RichDialogProcessStart f33 '' #zField
Cs0 @RichDialogProcessStart f34 '' #zField
Cs0 @RichDialogProcessStep f68 '' #zField
Cs0 @PushWFArc f35 '' #zField
Cs0 @RichDialogProcessStart f39 '' #zField
Cs0 @PushWFArc f40 '' #zField
Cs0 @Alternative f42 '' #zField
Cs0 @RichDialogProcessStep f44 '' #zField
Cs0 @PushWFArc f45 '' #zField
Cs0 @PushWFArc f46 '' #zField
Cs0 @PushWFArc f7 '' #zField
Cs0 @Alternative f47 '' #zField
Cs0 @PushWFArc f48 '' #zField
Cs0 @PushWFArc f43 '' #zField
Cs0 @RichDialogProcessStart f49 '' #zField
Cs0 @RichDialogProcessStep f51 '' #zField
Cs0 @PushWFArc f52 '' #zField
Cs0 @PushWFArc f31 '' #zField
Cs0 @RichDialogInitStart f53 '' #zField
Cs0 @PushWFArc f55 '' #zField
Cs0 @RichDialogMethodStart f54 '' #zField
Cs0 @RichDialogProcessStart f57 '' #zField
Cs0 @RichDialogProcessEnd f58 '' #zField
Cs0 @Alternative f60 '' #zField
Cs0 @PushWFArc f61 '' #zField
Cs0 @Alternative f62 '' #zField
Cs0 @PushWFArc f63 '' #zField
Cs0 @PushWFArc f64 '' #zField
Cs0 @RichDialogProcessStep f65 '' #zField
Cs0 @PushWFArc f66 '' #zField
Cs0 @PushWFArc f67 '' #zField
Cs0 @RichDialogProcessStep f69 '' #zField
Cs0 @PushWFArc f70 '' #zField
Cs0 @PushWFArc f59 '' #zField
Cs0 @RichDialogProcessStart f71 '' #zField
Cs0 @RichDialogProcessEnd f72 '' #zField
Cs0 @Alternative f74 '' #zField
Cs0 @Alternative f77 '' #zField
Cs0 @PushWFArc f78 '' #zField
Cs0 @RichDialogProcessStep f79 '' #zField
Cs0 @PushWFArc f80 '' #zField
Cs0 @Alternative f81 '' #zField
Cs0 @PushWFArc f83 '' #zField
Cs0 @RichDialogProcessStep f84 '' #zField
Cs0 @PushWFArc f85 '' #zField
Cs0 @RichDialog f86 '' #zField
Cs0 @PushWFArc f73 '' #zField
Cs0 @RichDialogProcessStep f96 '' #zField
Cs0 @PushWFArc f97 '' #zField
Cs0 @PushWFArc f82 '' #zField
Cs0 @Alternative f98 '' #zField
Cs0 @PushWFArc f87 '' #zField
Cs0 @RichDialog f88 '' #zField
Cs0 @PushWFArc f101 '' #zField
Cs0 @PushWFArc f102 '' #zField
Cs0 @RichDialogProcessStep f89 '' #zField
Cs0 @PushWFArc f109 '' #zField
Cs0 @Alternative f110 '' #zField
Cs0 @PushWFArc f111 '' #zField
Cs0 @PushWFArc f112 '' #zField
Cs0 @RichDialogProcessStart f113 '' #zField
Cs0 @RichDialogProcessEnd f114 '' #zField
Cs0 @Alternative f115 '' #zField
Cs0 @PushWFArc f116 '' #zField
Cs0 @RichDialogProcessStep f118 '' #zField
Cs0 @PushWFArc f117 '' #zField
Cs0 @RichDialogProcessStep f120 '' #zField
Cs0 @PushWFArc f122 '' #zField
Cs0 @Alternative f121 '' #zField
Cs0 @PushWFArc f124 '' #zField
Cs0 @PushWFArc f119 '' #zField
Cs0 @PushWFArc f125 '' #zField
Cs0 @RichDialogProcessStep f126 '' #zField
Cs0 @PushWFArc f127 '' #zField
Cs0 @PushWFArc f123 '' #zField
Cs0 @RichDialogProcessStart f128 '' #zField
Cs0 @RichDialogProcessEnd f129 '' #zField
Cs0 @Alternative f131 '' #zField
Cs0 @PushWFArc f132 '' #zField
Cs0 @RichDialogProcessStep f133 '' #zField
Cs0 @PushWFArc f135 '' #zField
Cs0 @RichDialogProcessStep f136 '' #zField
Cs0 @PushWFArc f137 '' #zField
Cs0 @Alternative f138 '' #zField
Cs0 @PushWFArc f139 '' #zField
Cs0 @RichDialog f140 '' #zField
Cs0 @PushWFArc f141 '' #zField
Cs0 @PushWFArc f130 '' #zField
Cs0 @PushWFArc f142 '' #zField
Cs0 @RichDialogProcessStart f143 '' #zField
Cs0 @RichDialogProcessEnd f144 '' #zField
Cs0 @Alternative f146 '' #zField
Cs0 @PushWFArc f147 '' #zField
Cs0 @RichDialogProcessStep f148 '' #zField
Cs0 @PushWFArc f150 '' #zField
Cs0 @Alternative f145 '' #zField
Cs0 @PushWFArc f152 '' #zField
Cs0 @Alternative f155 '' #zField
Cs0 @PushWFArc f158 '' #zField
Cs0 @PushWFArc f134 '' #zField
Cs0 @PushWFArc f38 '' #zField
Cs0 @PushWFArc f163 '' #zField
Cs0 @PushWFArc f164 '' #zField
Cs0 @RichDialogProcessStep f184 '' #zField
Cs0 @RichDialogProcessStart f37 '' #zField
Cs0 @RichDialogProcessStart f165 '' #zField
Cs0 @RichDialogProcessStep f166 '' #zField
Cs0 @RichDialogProcessEnd f167 '' #zField
Cs0 @RichDialogProcessStart f168 '' #zField
Cs0 @RichDialogProcessStep f170 '' #zField
Cs0 @PushWFArc f173 '' #zField
Cs0 @PushWFArc f174 '' #zField
Cs0 @PushWFArc f175 '' #zField
Cs0 @RichDialogProcessStep f176 '' #zField
Cs0 @PushWFArc f177 '' #zField
Cs0 @PushWFArc f75 '' #zField
Cs0 @RichDialogProcessStep f91 '' #zField
Cs0 @PushWFArc f179 '' #zField
Cs0 @PushWFArc f95 '' #zField
Cs0 @PushWFArc f90 '' #zField
Cs0 @PushWFArc f94 '' #zField
Cs0 @RichDialog f92 '' #zField
Cs0 @PushWFArc f99 '' #zField
Cs0 @Alternative f103 '' #zField
Cs0 @PushWFArc f104 '' #zField
Cs0 @PushWFArc f100 '' #zField
Cs0 @PushWFArc f105 '' #zField
Cs0 @RichDialogProcessStart f106 '' #zField
Cs0 @RichDialogProcessEnd f107 '' #zField
Cs0 @PushWFArc f108 '' #zField
Cs0 @RichDialogBroadcastStart f149 '' #zField
Cs0 @RichDialogProcessEnd f151 '' #zField
Cs0 @PushWFArc f178 '' #zField
Cs0 @Alternative f180 '' #zField
Cs0 @PushWFArc f181 '' #zField
Cs0 @PushWFArc f154 '' #zField
Cs0 @RichDialog f182 '' #zField
Cs0 @PushWFArc f183 '' #zField
Cs0 @PushWFArc f185 '' #zField
Cs0 @RichDialogMethodStart f186 '' #zField
Cs0 @RichDialogProcessEnd f187 '' #zField
Cs0 @RichDialogProcessStep f189 '' #zField
Cs0 @PushWFArc f190 '' #zField
Cs0 @PushWFArc f188 '' #zField
Cs0 @RichDialogProcessStep f191 '' #zField
Cs0 @PushWFArc f192 '' #zField
Cs0 @PushWFArc f171 '' #zField
Cs0 @RichDialogProcessStep f193 '' #zField
Cs0 @PushWFArc f161 '' #zField
Cs0 @PushWFArc f160 '' #zField
Cs0 @RichDialogProcessStep f159 '' #zField
Cs0 @PushWFArc f153 '' #zField
Cs0 @PushWFArc f195 '' #zField
Cs0 @Alternative f76 '' #zField
Cs0 @PushWFArc f156 '' #zField
Cs0 @PushWFArc f93 '' #zField
Cs0 @PushWFArc f157 '' #zField
Cs0 @PushWFArc f172 '' #zField
Cs0 @RichDialogProcessStart f36 '' #zField
Cs0 @RichDialogProcessStep f169 '' #zField
Cs0 @PushWFArc f194 '' #zField
Cs0 @PushWFArc f162 '' #zField
Cs0 @Alternative f196 '' #zField
Cs0 @PushWFArc f197 '' #zField
Cs0 @PushWFArc f19 '' #zField
Cs0 @PushWFArc f17 '' #zField
Cs0 @PushWFArc f16 '' #zField
Cs0 @PushWFArc f23 '' #zField
Cs0 @PushWFArc f27 '' #zField
Cs0 @PushWFArc f29 '' #zField
Cs0 @PushWFArc f41 '' #zField
Cs0 @PushWFArc f21 '' #zField
Cs0 @RichDialogProcessEnd f5 '' #zField
Cs0 @RichDialogProcessEnd f8 '' #zField
Cs0 @PushWFArc f198 '' #zField
Cs0 @PushWFArc f56 '' #zField
>Proto Cs0 Cs0 CaseSearchProcess #zField
Cs0 f0 guid 11A9B75F890E6929 #txt
Cs0 f0 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f0 method start() #txt
Cs0 f0 disableUIEvents false #txt
Cs0 f0 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Cs0 f0 outParameterDecl '<> result;
' #txt
Cs0 f0 embeddedRdInitializations '{/caseHierarchyLayoutSelectRDC {/fieldName "caseHierarchyLayoutSelectRDC"/startMethod "start()"/parameterMapping ""/initScript ""}/caseFiltersSelectRDC {/fieldName "caseFiltersSelectRDC"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
Cs0 f0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start()</name>
        <nameStyle>7,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f0 54 54 20 20 13 0 #rect
Cs0 f0 @|RichDialogInitStartIcon #fIcon
Cs0 f1 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f1 51 275 26 26 14 0 #rect
Cs0 f1 @|RichDialogProcessEndIcon #fIcon
Cs0 f3 guid 11AB5A0B6496A867 #txt
Cs0 f3 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f3 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f3 actionTable 'out=in;
' #txt
Cs0 f3 actionCode 'out.caseHierarchyLayoutSelectedIndex = panel.caseHierarchyLayoutSelectRDC.getSelectedCaseHierarchyLayoutIndex();' #txt
Cs0 f3 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>displaySelectedCaseHierarchyLayout</name>
        <nameStyle>34,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f3 1422 62 20 20 12 -17 #rect
Cs0 f3 @|RichDialogProcessStartIcon #fIcon
Cs0 f4 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f4 1419 587 26 26 14 0 #rect
Cs0 f4 @|RichDialogProcessEndIcon #fIcon
Cs0 f6 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f6 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Cs0 f6 1418 322 28 28 14 0 #rect
Cs0 f6 @|AlternativeIcon #fIcon
Cs0 f10 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f10 actionTable 'out=in;
' #txt
Cs0 f10 actionCode 'import ch.ivyteam.ivy.persistence.OrderDirection;
import ch.ivyteam.ivy.workflow.CaseProperty;
import ch.ivyteam.ivy.workflow.ui.utils.WorkflowUIAccessPermissionHandler;

import ch.ivyteam.ivy.workflow.ui.data.cases.CaseHierarchyTreeNodeValue;
import ch.ivyteam.ivy.workflow.ICase;
import ch.ivyteam.ivy.workflow.IPropertyFilter;
import ch.ivyteam.ivy.persistence.IGroup;



List<IGroup> caseProcessCategoriesIGroup;
List<IGroup> caseProcessesIGroup;
List<IGroup> caseTypesIGroup;
List<IGroup> caseSubTypesIGroup;

ICase elementOfCaseProcessCategoriesICase;
ICase elementOfCaseProcessesICase;
ICase elementOfCaseTypesICase;
ICase elementOfCaseSubTypesICase;


IPropertyFilter filter;

Tree rootTree = in.caseHierarchyLayoutTree;
Tree caseProcessCategoryTree;
Tree caseProcessTree;
Tree caseTypeTree;
Tree caseSubTypeTree;
List<Tree> parentsListOfTree;		// list of priorities nodes or just root node


parentsListOfTree = [];

if (in.sortByPriority)
{
	parentsListOfTree.addAll(rootTree.getChildren());
}
else
{
	parentsListOfTree.add(in.caseHierarchyLayoutTree);
}


for(Tree currentParent: parentsListOfTree)
{
   CaseHierarchyTreeNodeValue currentPriorityNodeValue;

   if (currentParent.value instanceof CaseHierarchyTreeNodeValue)
   {
      // filter must consider the Property.PRIORITY
      currentPriorityNodeValue = currentParent.value as CaseHierarchyTreeNodeValue;
   }


// consider the case state(s)
filter = in.caseStatePropertyFilter;

// consider the filter set by user
filter = (in.filterEnabled? filter.and(in.caseAvailableFilters.propertyFilter): filter);

// consider the priority sorting
filter = (in.sortByPriority? filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode): filter);



caseProcessCategoriesIGroup.clear();

caseProcessCategoriesIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.PROCESS_CATEGORY_CODE, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));



ivy.log.debug("The caseProcessCategory size is {0}.", caseProcessCategoriesIGroup.size());




// read process categories
for (IGroup caseProcessCategory: caseProcessCategoriesIGroup)
{
ivy.log.debug("The #{0} caseProcessCategory is {1}.", (caseProcessCategory.getFirstObjectInGroup() as ICase).getProcessCategoryCode());	
   elementOfCaseProcessCategoriesICase = caseProcessCategory.getFirstObjectInGroup() as ICase;
   
   CaseHierarchyTreeNodeValue processCategoryTreeNodeValue = new CaseHierarchyTreeNodeValue();
   processCategoryTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE;
   processCategoryTreeNodeValue.categoryCode = elementOfCaseProcessCategoriesICase.getProcessCategoryCode();
   processCategoryTreeNodeValue.categoryName = (elementOfCaseProcessCategoriesICase.getProcessName() is initialized? elementOfCaseProcessCategoriesICase.getProcessCategoryName(): 
					(elementOfCaseProcessCategoriesICase.getProcessCategoryCode() is initialized? elementOfCaseProcessCategoriesICase.getProcessCategoryCode(): out.unclassifiedCaseTitle ));

   caseProcessCategoryTree = currentParent.createChild(processCategoryTreeNodeValue, "PROCESS_CATEGORY_CODE");
   


   filter = ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessCategoriesICase.getProcessCategoryCode());


	// consider the case state(s)
	filter = filter.and(in.caseStatePropertyFilter);

	// consider the filter set by user
	filter = (in.filterEnabled? filter.and(in.caseAvailableFilters.propertyFilter): filter);

	// consider the priority sorting
	filter = (in.sortByPriority? filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode): filter);


   caseProcessesIGroup.clear();

	 caseProcessesIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.PROCESS_CODE, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));




   // read process names of the given caseProcessCategory
   for (IGroup caseProcess: caseProcessesIGroup)
   {
      elementOfCaseProcessesICase = caseProcess.getFirstObjectInGroup() as ICase;

      CaseHierarchyTreeNodeValue caseProcessTreeNodeValue = new CaseHierarchyTreeNodeValue();
      caseProcessTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CODE;
      caseProcessTreeNodeValue.categoryCode = elementOfCaseProcessesICase.getProcessCode();
      caseProcessTreeNodeValue.categoryName = (elementOfCaseProcessesICase.getProcessName() is initialized? elementOfCaseProcessesICase.getProcessName(): "" + caseProcessTreeNodeValue.categoryCode);
      caseProcessTree = caseProcessCategoryTree.createChild(caseProcessTreeNodeValue, "PROCESS_CODE");

      caseTypesIGroup.clear();


      filter = ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessCategoriesICase.getProcessCategoryCode()).and(
                                                                              ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessesICase.getProcessCode());

			// consider the case state(s)
			filter = filter.and(in.caseStatePropertyFilter);

			// consider the filter set by user
			filter = (in.filterEnabled? filter.and(in.caseAvailableFilters.propertyFilter): filter);

			// consider the priority sorting
			filter = (in.sortByPriority? filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode): filter);

			
			caseTypesIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.TYPE_CODE, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));




      
      // read type name of the process names of the given caseProcessCategory
      for (IGroup caseType: caseTypesIGroup)
      {
         elementOfCaseTypesICase = caseType.getFirstObjectInGroup() as ICase;

         CaseHierarchyTreeNodeValue caseTypeTreeNodeValue = new CaseHierarchyTreeNodeValue();
         caseTypeTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.TYPE_CODE;
         caseTypeTreeNodeValue.categoryCode = elementOfCaseTypesICase.getTypeCode();
         caseTypeTreeNodeValue.categoryName = (elementOfCaseTypesICase.getTypeName() is initialized? elementOfCaseTypesICase.getTypeName(): "" + caseTypeTreeNodeValue.categoryCode);
         caseTypeTree = caseProcessTree.createChild(caseTypeTreeNodeValue,"TYPE_CODE");

         caseSubTypesIGroup.clear();


         filter = ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessCategoriesICase.getProcessCategoryCode()).and(
                                                                                       ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessesICase.getProcessCode()).and(
                                                                                          ch.ivyteam.ivy.workflow.CaseProperty.TYPE_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseTypesICase.getTypeCode());

					// consider the case state(s)
					filter = filter.and(in.caseStatePropertyFilter);

					// consider the filter set by user
					filter = (in.filterEnabled? filter.and(in.caseAvailableFilters.propertyFilter): filter);

					// consider the priority sorting
					filter = (in.sortByPriority? filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode): filter);
				
				  caseSubTypesIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.SUB_TYPE_CODE, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));
				
				
         // read the subtype of the given type name of the given process names of the given caseProcessCategory         
         for (IGroup caseSubType: caseSubTypesIGroup)
         {
            elementOfCaseSubTypesICase = caseSubType.getFirstObjectInGroup() as ICase;
						
            CaseHierarchyTreeNodeValue caseSubTypeTreeNodeValue = new CaseHierarchyTreeNodeValue();
            caseSubTypeTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.SUB_TYPE_CODE;
            caseSubTypeTreeNodeValue.categoryCode = elementOfCaseSubTypesICase.getSubTypeCode();
            caseSubTypeTreeNodeValue.categoryName = (elementOfCaseSubTypesICase.getSubTypeName() is initialized? elementOfCaseSubTypesICase.getSubTypeName(): "" + caseSubTypeTreeNodeValue.categoryCode);
            caseSubTypeTree = caseTypeTree.createChild(caseSubTypeTreeNodeValue,"SUB_TYPE_CODE");

            }// end for sub types
      }// end for types      
   }// end for processes
}// end for categories


}// end for parentsListOfTree' #txt
Cs0 f10 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f10 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Case process category/
Case process/
Case type/
Case sub type</name>
        <nameStyle>61,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f10 838 412 36 24 20 -2 #rect
Cs0 f10 @|RichDialogProcessStepIcon #fIcon
Cs0 f11 expr in #txt
Cs0 f11 outCond 'in.caseHierarchyLayoutSelectedIndex == 0' #txt
Cs0 f11 1418 336 856 412 #arcP
Cs0 f11 1 856 336 #addKink
Cs0 f11 0 0.7004937571257567 0 0 #arcLabel
Cs0 f9 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f9 actionTable 'out=in;
' #txt
Cs0 f9 actionCode 'import ch.ivyteam.ivy.persistence.OrderDirection;
import ch.ivyteam.ivy.workflow.CaseProperty;
import ch.ivyteam.ivy.workflow.ui.utils.WorkflowUIAccessPermissionHandler;
import ch.ivyteam.ivy.workflow.ui.data.cases.CaseHierarchyTreeNodeValue;
import ch.ivyteam.ivy.workflow.ICase;
import ch.ivyteam.ivy.workflow.IPropertyFilter;
import ch.ivyteam.ivy.persistence.IGroup;


List<IGroup> caseProcessCategoriesIGroup;
List<IGroup> caseProcessesIGroup;
List<IGroup> caseTypesIGroup;
List<IGroup> caseSubTypesIGroup;

ICase elementOfCaseProcessCategoriesICase;
ICase elementOfCaseProcessesICase;
ICase elementOfCaseTypesICase;
ICase elementOfCaseSubTypesICase;


IPropertyFilter filter;

Tree rootTree = in.caseHierarchyLayoutTree;
Tree caseProcessCategoryTree;
Tree caseProcessTree;
Tree caseTypeTree;
List<Tree> parentsListOfTree;		// list of priorities nodes or just root node


parentsListOfTree = [];

if (in.sortByPriority)
{
	parentsListOfTree.addAll(rootTree.getChildren());
}
else
{
	parentsListOfTree.add(in.caseHierarchyLayoutTree);
}


for(Tree currentParent: parentsListOfTree)
{
   CaseHierarchyTreeNodeValue currentPriorityNodeValue;

   if (currentParent.value instanceof CaseHierarchyTreeNodeValue)
   {
      // filter must consider the Property.PRIORITY
      currentPriorityNodeValue = currentParent.value as CaseHierarchyTreeNodeValue;
   }


caseProcessCategoriesIGroup.clear();

// consider the case state(s)
filter = in.caseStatePropertyFilter;

// consider the filter set by user
filter = (in.filterEnabled? filter.and(in.caseAvailableFilters.propertyFilter): filter);

// consider the priority sorting
filter = (in.sortByPriority? filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode): filter);


caseProcessCategoriesIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.PROCESS_CATEGORY_CODE, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));



// read process categories
for (IGroup caseProcessCategory: caseProcessCategoriesIGroup)
{
	
   elementOfCaseProcessCategoriesICase = caseProcessCategory.getFirstObjectInGroup() as ICase;
   
   CaseHierarchyTreeNodeValue processCategoryTreeNodeValue = new CaseHierarchyTreeNodeValue();
   processCategoryTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE;
   processCategoryTreeNodeValue.categoryCode = elementOfCaseProcessCategoriesICase.getProcessCategoryCode();
   processCategoryTreeNodeValue.categoryName = (elementOfCaseProcessCategoriesICase.getProcessName() is initialized? elementOfCaseProcessCategoriesICase.getProcessCategoryName(): 
					(elementOfCaseProcessCategoriesICase.getProcessCategoryCode() is initialized? elementOfCaseProcessCategoriesICase.getProcessCategoryCode(): out.unclassifiedCaseTitle));

   caseProcessCategoryTree = currentParent.createChild(processCategoryTreeNodeValue, "PROCESS_CATEGORY_CODE");
   
   caseProcessesIGroup.clear();


   filter = ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessCategoriesICase.getProcessCategoryCode());


	// consider the case state(s)
	filter = filter.and(in.caseStatePropertyFilter);

	// consider the filter set by user
	filter = (in.filterEnabled? filter.and(in.caseAvailableFilters.propertyFilter): filter);

	// consider the priority sorting
	filter = (in.sortByPriority? filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode): filter);
	
	caseProcessesIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.PROCESS_CODE, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));



   // read process names of the given caseProcessCategory
   for (IGroup caseProcess: caseProcessesIGroup)
   {
      elementOfCaseProcessesICase = caseProcess.getFirstObjectInGroup() as ICase;

      CaseHierarchyTreeNodeValue caseProcessTreeNodeValue = new CaseHierarchyTreeNodeValue();
      caseProcessTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CODE;
      caseProcessTreeNodeValue.categoryCode = elementOfCaseProcessesICase.getProcessCode();
      caseProcessTreeNodeValue.categoryName = (elementOfCaseProcessesICase.getProcessName() is initialized? elementOfCaseProcessesICase.getProcessName(): "" + caseProcessTreeNodeValue.categoryCode);
      caseProcessTree = caseProcessCategoryTree.createChild(caseProcessTreeNodeValue, "PROCESS_CODE");

      caseTypesIGroup.clear();


      filter = ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessCategoriesICase.getProcessCategoryCode()).and(
                                                                              ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessesICase.getProcessCode());

			// consider the case state(s)
			filter = filter.and(in.caseStatePropertyFilter);

			// consider the filter set by user
			filter = (in.filterEnabled? filter.and(in.caseAvailableFilters.propertyFilter): filter);

			// consider the priority sorting
			filter = (in.sortByPriority? filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode): filter);

			
			caseTypesIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.TYPE_CODE, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));

      
      // read type name of the process names of the given caseProcessCategory
      for (IGroup caseType: caseTypesIGroup)
      {
         elementOfCaseTypesICase = caseType.getFirstObjectInGroup() as ICase;

         CaseHierarchyTreeNodeValue caseTypeTreeNodeValue = new CaseHierarchyTreeNodeValue();
         caseTypeTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.TYPE_CODE;
         caseTypeTreeNodeValue.categoryCode = elementOfCaseTypesICase.getTypeCode();
         caseTypeTreeNodeValue.categoryName = (elementOfCaseTypesICase.getTypeName() is initialized? elementOfCaseTypesICase.getTypeName(): "" + caseTypeTreeNodeValue.categoryCode);
         caseTypeTree = caseProcessTree.createChild(caseTypeTreeNodeValue,"TYPE_CODE");

      }// end for types      
   }// end for processes
}// end for categories


}// end for parentsListOfTree' #txt
Cs0 f9 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f9 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Case process category/
Case process/
Case type/</name>
        <nameStyle>47,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f9 1022 420 36 24 20 -2 #rect
Cs0 f9 @|RichDialogProcessStepIcon #fIcon
Cs0 f12 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f12 actionTable 'out=in;
' #txt
Cs0 f12 actionCode 'import ch.ivyteam.ivy.persistence.OrderDirection;
import ch.ivyteam.ivy.workflow.CaseProperty;
import ch.ivyteam.ivy.workflow.ui.utils.WorkflowUIAccessPermissionHandler;
import ch.ivyteam.ivy.workflow.ui.data.cases.CaseHierarchyTreeNodeValue;
import ch.ivyteam.ivy.workflow.ICase;
import ch.ivyteam.ivy.workflow.IPropertyFilter;
import ch.ivyteam.ivy.persistence.IGroup;



List<IGroup> caseProcessCategoriesIGroup;
List<IGroup> caseProcessesIGroup;
List<IGroup> businessMainContactsIGroup;

ICase elementOfCaseProcessCategoriesICase;
ICase elementOfCaseProcessesICase;
ICase elementOfBusinessMainContactsICase;


IPropertyFilter filter;

Tree rootTree = in.caseHierarchyLayoutTree;
Tree caseProcessCategoryTree;
Tree caseProcessTree;
Tree businessMainContactTree;
List<Tree> parentsListOfTree;		// list of priorities nodes or just root node


parentsListOfTree = [];

if (in.sortByPriority)
{
	parentsListOfTree.addAll(rootTree.getChildren());
}
else
{
	parentsListOfTree.add(in.caseHierarchyLayoutTree);
}


for(Tree currentParent: parentsListOfTree)
{
   CaseHierarchyTreeNodeValue currentPriorityNodeValue;

   if (currentParent.value instanceof CaseHierarchyTreeNodeValue)
   {
      // filter must consider the Property.PRIORITY
      currentPriorityNodeValue = currentParent.value as CaseHierarchyTreeNodeValue;
   }


caseProcessCategoriesIGroup.clear();

// consider the case state(s)
filter = in.caseStatePropertyFilter;

// consider the filter set by user
filter = (in.filterEnabled? filter.and(in.caseAvailableFilters.propertyFilter): filter);

// consider the priority sorting
filter = (in.sortByPriority? filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode): filter);

caseProcessCategoriesIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.PROCESS_CATEGORY_CODE, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));


// read process categories
for (IGroup caseProcessCategory: caseProcessCategoriesIGroup)
{
	
   elementOfCaseProcessCategoriesICase = caseProcessCategory.getFirstObjectInGroup() as ICase;
   
   CaseHierarchyTreeNodeValue processCategoryTreeNodeValue = new CaseHierarchyTreeNodeValue();
   processCategoryTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE;
   processCategoryTreeNodeValue.categoryCode = elementOfCaseProcessCategoriesICase.getProcessCategoryCode();
   processCategoryTreeNodeValue.categoryName = (elementOfCaseProcessCategoriesICase.getProcessName() is initialized? elementOfCaseProcessCategoriesICase.getProcessCategoryName(): 
					(elementOfCaseProcessCategoriesICase.getProcessCategoryCode() is initialized? elementOfCaseProcessCategoriesICase.getProcessCategoryCode(): out.unclassifiedCaseTitle));

   caseProcessCategoryTree = currentParent.createChild(processCategoryTreeNodeValue, "PROCESS_CATEGORY_CODE");
   
   caseProcessesIGroup.clear();


   filter = ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessCategoriesICase.getProcessCategoryCode());


	// consider the case state(s)
	filter = filter.and(in.caseStatePropertyFilter);

	// consider the filter set by user
	filter = (in.filterEnabled? filter.and(in.caseAvailableFilters.propertyFilter): filter);

	// consider the priority sorting
	filter = (in.sortByPriority? filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode): filter);
	
	caseProcessesIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.PROCESS_CODE, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));



   // read process names of the given caseProcessCategory
   for (IGroup caseProcess: caseProcessesIGroup)
   {
      elementOfCaseProcessesICase = caseProcess.getFirstObjectInGroup() as ICase;

      CaseHierarchyTreeNodeValue caseProcessTreeNodeValue = new CaseHierarchyTreeNodeValue();
      caseProcessTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CODE;
      caseProcessTreeNodeValue.categoryCode = elementOfCaseProcessesICase.getProcessCode();
      caseProcessTreeNodeValue.categoryName = (elementOfCaseProcessesICase.getProcessName() is initialized? elementOfCaseProcessesICase.getProcessName(): "" + caseProcessTreeNodeValue.categoryCode);
      caseProcessTree = caseProcessCategoryTree.createChild(caseProcessTreeNodeValue, "PROCESS_CODE");

      


      filter = ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessCategoriesICase.getProcessCategoryCode()).and(
                                                                              ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessesICase.getProcessCode());

			// consider the case state(s)
			filter = filter.and(in.caseStatePropertyFilter);

			// consider the filter set by user
			filter = (in.filterEnabled? filter.and(in.caseAvailableFilters.propertyFilter): filter);

			// consider the priority sorting
			filter = (in.sortByPriority? filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode): filter);



			
			businessMainContactsIGroup.clear();
			
			businessMainContactsIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.BUSINESS_MAIN_CONTACT_ID, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));

      
      for (IGroup businessMainContact: businessMainContactsIGroup)
      {
         elementOfBusinessMainContactsICase = businessMainContact.getFirstObjectInGroup() as ICase;

         CaseHierarchyTreeNodeValue businessMainContactTreeNodeValue = new CaseHierarchyTreeNodeValue();
         businessMainContactTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.BUSINESS_MAIN_CONTACT_ID;
         businessMainContactTreeNodeValue.categoryCode = (elementOfBusinessMainContactsICase.getBusinessMainContactId() is initialized? elementOfBusinessMainContactsICase.getBusinessMainContactId().toString(): null);
         businessMainContactTreeNodeValue.categoryName = (elementOfBusinessMainContactsICase.getBusinessMainContactName() is initialized? elementOfBusinessMainContactsICase.getBusinessMainContactName(): "" + businessMainContactTreeNodeValue.categoryCode);
         businessMainContactTree = caseProcessTree.createChild(businessMainContactTreeNodeValue,"BUSINESS_MAIN_CONTACT_ID");      

      }// end for bus main contacts     
   }// end for processes
}// end for categories


}// end for parentsListOfTree' #txt
Cs0 f12 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f12 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Case process category/
Case process/
Business main contact</name>
        <nameStyle>58,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f12 1214 420 36 24 20 -2 #rect
Cs0 f12 @|RichDialogProcessStepIcon #fIcon
Cs0 f13 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f13 actionTable 'out=in;
' #txt
Cs0 f13 actionCode 'import ch.ivyteam.ivy.persistence.OrderDirection;
import ch.ivyteam.ivy.workflow.CaseProperty;
import ch.ivyteam.ivy.workflow.ui.utils.WorkflowUIAccessPermissionHandler;
import ch.ivyteam.ivy.workflow.ui.data.cases.CaseHierarchyTreeNodeValue;
import ch.ivyteam.ivy.workflow.ICase;
import ch.ivyteam.ivy.workflow.IPropertyFilter;
import ch.ivyteam.ivy.persistence.IGroup;



List<IGroup> caseProcessCategoriesIGroup;
List<IGroup> caseProcessesIGroup;
List<IGroup> businessMainContactsIGroup;


ICase elementOfCaseProcessCategoriesICase;
ICase elementOfCaseProcessesICase;
ICase elementOfBusinessMainContactsICase;



IPropertyFilter filter;

Tree rootTree = in.caseHierarchyLayoutTree;
Tree caseProcessCategoryTree;
Tree caseProcessTree;
Tree businessMainContactTree;
List<Tree> parentsListOfTree = [];



if (in.sortByPriority)
{
	parentsListOfTree.addAll(rootTree.getChildren());
}
else
{
	parentsListOfTree.add(in.caseHierarchyLayoutTree);
}


for(Tree currentParent: parentsListOfTree)
{
   CaseHierarchyTreeNodeValue currentPriorityNodeValue;

   if (currentParent.value instanceof CaseHierarchyTreeNodeValue)
   {
      // filter must consider the Property.PRIORITY
      currentPriorityNodeValue = currentParent.value as CaseHierarchyTreeNodeValue;
   }   



	// consider the case state(s)
	filter = in.caseStatePropertyFilter;

	// consider the filter set by user
	if (in.filterEnabled)
	{
		filter = filter.and(in.caseAvailableFilters.propertyFilter);
	}		

	// consider the priority sorting
	if (in.sortByPriority)
	{
		filter = filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode);
	}
	
	caseProcessCategoriesIGroup.clear();
	
	caseProcessCategoriesIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.PROCESS_CATEGORY_CODE, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));
	
	

// read process categories
for (IGroup caseProcessCategory: caseProcessCategoriesIGroup)
{
   elementOfCaseProcessCategoriesICase = caseProcessCategory.getFirstObjectInGroup() as ICase;
   
   CaseHierarchyTreeNodeValue caseProcessCategoryTreeNodeValue = new CaseHierarchyTreeNodeValue();
   caseProcessCategoryTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE;
   caseProcessCategoryTreeNodeValue.categoryCode = elementOfCaseProcessCategoriesICase.getProcessCategoryCode();
   caseProcessCategoryTreeNodeValue.categoryName = (elementOfCaseProcessCategoriesICase.getProcessName() is initialized? elementOfCaseProcessCategoriesICase.getProcessCategoryName(): 
					(elementOfCaseProcessCategoriesICase.getProcessCategoryCode() is initialized? elementOfCaseProcessCategoriesICase.getProcessCategoryCode(): out.unclassifiedCaseTitle));

   caseProcessCategoryTree = currentParent.createChild(caseProcessCategoryTreeNodeValue, "PROCESS_CATEGORY_CODE");

   
   businessMainContactsIGroup.clear();

   filter = ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessCategoriesICase.getProcessCategoryCode());

		// consider the case state(s)
		filter = filter.and(in.caseStatePropertyFilter);

		// consider the filter set by user
		if (in.filterEnabled)
		{
			filter = filter.and(in.caseAvailableFilters.propertyFilter);
		}		

		// consider the priority sorting
		if (in.sortByPriority)
		{
			filter = filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode);
		}

		
		businessMainContactsIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.BUSINESS_MAIN_CONTACT_ID, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));

   for (IGroup businessMainContact: businessMainContactsIGroup)
   {
      elementOfBusinessMainContactsICase = businessMainContact.getFirstObjectInGroup() as ICase;

      CaseHierarchyTreeNodeValue businessMainContactTreeNodeValue = new CaseHierarchyTreeNodeValue();
      businessMainContactTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.BUSINESS_MAIN_CONTACT_ID;
      businessMainContactTreeNodeValue.categoryCode = elementOfBusinessMainContactsICase.getBusinessMainContactId() ;
      businessMainContactTreeNodeValue.categoryName = (elementOfBusinessMainContactsICase.getBusinessMainContactName() is initialized? elementOfBusinessMainContactsICase.getBusinessMainContactName(): "" + businessMainContactTreeNodeValue.categoryCode);
      businessMainContactTree = caseProcessCategoryTree.createChild(businessMainContactTreeNodeValue,"BUSINESS_MAIN_CONTACT_ID");      


      caseProcessesIGroup.clear();

      filter = ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessCategoriesICase.getProcessCategoryCode()).and(
                                                                           ch.ivyteam.ivy.workflow.CaseProperty.BUSINESS_MAIN_CONTACT_ID, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfBusinessMainContactsICase.getBusinessMainContactId());

			// consider the case state(s)
			filter = filter.and(in.caseStatePropertyFilter);

			// consider the filter set by user
			if (in.filterEnabled)
			{
				filter = filter.and(in.caseAvailableFilters.propertyFilter);
			}		

			// consider the priority sorting
			if (in.sortByPriority)
			{
				filter = filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode);
			}
			
			caseProcessesIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.PROCESS_CODE, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));
	
  
      for (IGroup caseProcess: caseProcessesIGroup)
      {
         elementOfCaseProcessesICase = caseProcess.getFirstObjectInGroup() as ICase;

         CaseHierarchyTreeNodeValue caseProcessTreeNodeValue = new CaseHierarchyTreeNodeValue();
         caseProcessTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CODE;
         caseProcessTreeNodeValue.categoryCode = elementOfCaseProcessesICase.getProcessCode();
         caseProcessTreeNodeValue.categoryName = (elementOfCaseProcessesICase.getProcessName() is initialized? elementOfCaseProcessesICase.getProcessName(): "" + caseProcessTreeNodeValue.categoryCode);
         caseProcessTree = businessMainContactTree.createChild(caseProcessTreeNodeValue, "PROCESS_CODE");

      }// end for processes
   }// end for bus main contacts
}// end for categories
}// end for priorities

out.caseHierarchyLayoutTree = rootTree;' #txt
Cs0 f13 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f13 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Case process category/
Business main contact/
Case process</name>
        <nameStyle>58,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f13 1414 420 36 24 20 -2 #rect
Cs0 f13 @|RichDialogProcessStepIcon #fIcon
Cs0 f14 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f14 actionTable 'out=in;
' #txt
Cs0 f14 actionCode 'import ch.ivyteam.ivy.persistence.OrderDirection;
import ch.ivyteam.ivy.workflow.CaseProperty;
import ch.ivyteam.ivy.workflow.ui.utils.WorkflowUIAccessPermissionHandler;
import ch.ivyteam.ivy.workflow.ui.data.cases.CaseHierarchyTreeNodeValue;
import ch.ivyteam.ivy.workflow.ICase;
import ch.ivyteam.ivy.workflow.IPropertyFilter;
import ch.ivyteam.ivy.persistence.IGroup;



List<IGroup> caseProcessCategoriesIGroup;
List<IGroup> businessStartTimeStampsIGroup;
List<IGroup> businessMainContactsIGroup;
List<IGroup> caseProcessesIGroup;


ICase elementOfCaseProcessCategoriesICase;
ICase elementOfBusinessStartTimeStampsICase;
ICase elementOfBusinessMainContactsICase;
ICase elementOfCaseProcessesICase;


IPropertyFilter filter;

Tree rootTree = in.caseHierarchyLayoutTree;
Tree caseProcessCategoryTree;
Tree businessStartTimeStampTree;
Tree businessMainContactTree;
Tree caseProcessTree;
List<Tree> parentsListOfTree = [];


if (in.sortByPriority)
{
	parentsListOfTree.addAll(rootTree.getChildren());
}
else
{
	parentsListOfTree.add(in.caseHierarchyLayoutTree);
}



for(Tree currentParent: parentsListOfTree)
{
   CaseHierarchyTreeNodeValue currentPriorityNodeValue;

   if (currentParent.value instanceof CaseHierarchyTreeNodeValue)
   {
      // filter must consider the Property.PRIORITY
      currentPriorityNodeValue = currentParent.value as CaseHierarchyTreeNodeValue;
   }   



	// consider the case state(s)
	filter = in.caseStatePropertyFilter;

	// consider the filter set by user
	if (in.filterEnabled)
	{
		filter = filter.and(in.caseAvailableFilters.propertyFilter);
	}		

	// consider the priority sorting
	if (in.sortByPriority)
	{
		filter = filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode);
	}	
	
	caseProcessCategoriesIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.PROCESS_CATEGORY_CODE, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));


// read process categories
for (IGroup caseProcessCategory: caseProcessCategoriesIGroup)
{
   elementOfCaseProcessCategoriesICase = caseProcessCategory.getFirstObjectInGroup() as ICase;


   CaseHierarchyTreeNodeValue caseProcessCategoryTreeNodeValue = new CaseHierarchyTreeNodeValue();
   caseProcessCategoryTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE;
   caseProcessCategoryTreeNodeValue.categoryCode = elementOfCaseProcessCategoriesICase.getProcessCategoryCode();
   caseProcessCategoryTreeNodeValue.categoryName = (elementOfCaseProcessCategoriesICase.getProcessName() is initialized? elementOfCaseProcessCategoriesICase.getProcessCategoryName(): 
					(elementOfCaseProcessCategoriesICase.getProcessCategoryCode() is initialized? elementOfCaseProcessCategoriesICase.getProcessCategoryCode(): out.unclassifiedCaseTitle));

   caseProcessCategoryTree = currentParent.createChild(caseProcessCategoryTreeNodeValue, "PROCESS_CATEGORY_CODE");




   filter = ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessCategoriesICase.getProcessCategoryCode());

		// consider the case state(s)
		filter = filter.and(in.caseStatePropertyFilter);

		// consider the filter set by user
		if (in.filterEnabled)
		{
			filter = filter.and(in.caseAvailableFilters.propertyFilter);
		}		

		// consider the priority sorting
		if (in.sortByPriority)
		{
			filter = filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode);
		}	


   businessStartTimeStampsIGroup.clear();
	
	 businessStartTimeStampsIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.BUSINESS_START_TIMESTAMP, OrderDirection.DESCENDING, in.runningCaseMode, in.caseDisplayMode));


   for (IGroup businessStartTimeStamp: businessStartTimeStampsIGroup)
   {
      elementOfBusinessStartTimeStampsICase = businessStartTimeStamp.getFirstObjectInGroup() as ICase;

      CaseHierarchyTreeNodeValue businessStartTimeStampTreeNodeValue = new CaseHierarchyTreeNodeValue();
      businessStartTimeStampTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.BUSINESS_START_TIMESTAMP;
      businessStartTimeStampTreeNodeValue.categoryCode = elementOfBusinessStartTimeStampsICase.getBusinessStartTimestamp();
      businessStartTimeStampTreeNodeValue.categoryName = (elementOfBusinessStartTimeStampsICase.getBusinessStartTimestamp() is initialized? elementOfBusinessStartTimeStampsICase.getBusinessStartTimestamp().format(ivy.var.xivy_workflow_ui_restricted_dateTimeFormatPattern): "");
      businessStartTimeStampTree = caseProcessCategoryTree.createChild(businessStartTimeStampTreeNodeValue,"BUSINESS_START_TIMESTAMP");

   

      filter = ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessCategoriesICase.getProcessCategoryCode()).and(
                                                                           ch.ivyteam.ivy.workflow.CaseProperty.BUSINESS_START_TIMESTAMP, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfBusinessStartTimeStampsICase.getBusinessStartTimestamp());

			// consider the case state(s)
			filter = filter.and(in.caseStatePropertyFilter);

			// consider the filter set by user
			if (in.filterEnabled)
			{
				filter = filter.and(in.caseAvailableFilters.propertyFilter);
			}		

			// consider the priority sorting
			if (in.sortByPriority)
			{
				filter = filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode);
			}	

      businessMainContactsIGroup.clear();

			businessMainContactsIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.BUSINESS_MAIN_CONTACT_ID, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));


      for (IGroup businessMainContact: businessMainContactsIGroup)
      {
         elementOfBusinessMainContactsICase = businessMainContact.getFirstObjectInGroup() as ICase;
   
         CaseHierarchyTreeNodeValue businessMainContactTreeNodeValue = new CaseHierarchyTreeNodeValue();
         businessMainContactTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.BUSINESS_MAIN_CONTACT_ID;
         businessMainContactTreeNodeValue.categoryCode = elementOfBusinessMainContactsICase.getBusinessMainContactId();
         businessMainContactTreeNodeValue.categoryName = (elementOfBusinessMainContactsICase.getBusinessMainContactName() is initialized? elementOfBusinessMainContactsICase.getBusinessMainContactName(): "" + businessMainContactTreeNodeValue.categoryCode);
         businessMainContactTree = businessStartTimeStampTree.createChild(businessMainContactTreeNodeValue,"BUSINESS_MAIN_CONTACT_ID");      




         filter = ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessCategoriesICase.getProcessCategoryCode()).and(
                                                                              ch.ivyteam.ivy.workflow.CaseProperty.BUSINESS_START_TIMESTAMP, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfBusinessStartTimeStampsICase.getBusinessStartTimestamp()).and(
                                                                                 ch.ivyteam.ivy.workflow.CaseProperty.BUSINESS_MAIN_CONTACT_ID, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfBusinessMainContactsICase.getBusinessMainContactId());

					// consider the case state(s)
					filter = filter.and(in.caseStatePropertyFilter);

					// consider the filter set by user
					if (in.filterEnabled)
					{
						filter = filter.and(in.caseAvailableFilters.propertyFilter);
					}		

					// consider the priority sorting
					if (in.sortByPriority)
					{
						filter = filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode);
					}	
         

         caseProcessesIGroup.clear();


				
				 caseProcessesIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.PROCESS_CODE, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));

   
         for (IGroup caseProcess: caseProcessesIGroup)
         {
            elementOfCaseProcessesICase = caseProcess.getFirstObjectInGroup() as ICase;

            CaseHierarchyTreeNodeValue caseProcessTreeNodeValue = new CaseHierarchyTreeNodeValue();
            caseProcessTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CODE;
            caseProcessTreeNodeValue.categoryCode = elementOfCaseProcessesICase.getProcessCode();
            caseProcessTreeNodeValue.categoryName = (elementOfCaseProcessesICase.getProcessName() is initialized? elementOfCaseProcessesICase.getProcessName(): "" + caseProcessTreeNodeValue.categoryCode);
            caseProcessTree = businessMainContactTree.createChild(caseProcessTreeNodeValue, "PROCESS_CODE");

         }// end for processes
      }// end for bus main contacts
   }// end for bus start time stamps
}// end for categories

}// end for priorities

out.caseHierarchyLayoutTree = rootTree;
' #txt
Cs0 f14 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f14 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Case process category/
Business start timestamp/
Business main contact/
Case process</name>
        <nameStyle>84,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f14 1598 420 36 24 20 -2 #rect
Cs0 f14 @|RichDialogProcessStepIcon #fIcon
Cs0 f15 expr in #txt
Cs0 f15 outCond 'in.caseHierarchyLayoutSelectedIndex == 1' #txt
Cs0 f15 1419 337 1040 420 #arcP
Cs0 f15 1 1040 352 #addKink
Cs0 f15 0 0.7321248043353128 0 0 #arcLabel
Cs0 f18 expr in #txt
Cs0 f18 outCond 'in.caseHierarchyLayoutSelectedIndex == 2' #txt
Cs0 f18 1420 338 1232 420 #arcP
Cs0 f18 1 1232 360 #addKink
Cs0 f18 0 0.6920545645180359 0 0 #arcLabel
Cs0 f20 expr in #txt
Cs0 f20 outCond 'in.caseHierarchyLayoutSelectedIndex == 3' #txt
Cs0 f20 1432 350 1432 420 #arcP
Cs0 f20 0 0.32753262063191424 0 0 #arcLabel
Cs0 f22 expr in #txt
Cs0 f22 outCond 'in.caseHierarchyLayoutSelectedIndex == 4' #txt
Cs0 f22 1444 339 1616 420 #arcP
Cs0 f22 1 1616 376 #addKink
Cs0 f22 0 0.6350626509682887 0 0 #arcLabel
Cs0 f24 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f24 actionTable 'out=in;
' #txt
Cs0 f24 actionCode 'import ch.ivyteam.ivy.persistence.OrderDirection;
import ch.ivyteam.ivy.workflow.CaseProperty;
import ch.ivyteam.ivy.workflow.ui.utils.WorkflowUIAccessPermissionHandler;
import ch.ivyteam.ivy.workflow.ui.data.cases.CaseHierarchyTreeNodeValue;
import ch.ivyteam.ivy.workflow.ICase;
import ch.ivyteam.ivy.workflow.IPropertyFilter;
import ch.ivyteam.ivy.persistence.IGroup;


List<IGroup> caseProcessCategoriesIGroup;
List<IGroup> businessStartTimeStampsIGroup;
List<IGroup> businessMainContactsIGroup;
List<IGroup> caseProcessesIGroup;


ICase elementOfCaseProcessCategoriesICase;
ICase elementOfBusinessStartTimeStampsICase;
ICase elementOfBusinessMainContactsICase;
ICase elementOfCaseProcessesICase;


IPropertyFilter filter;

Tree rootTree = in.caseHierarchyLayoutTree;
Tree caseProcessCategoryTree;
Tree businessStartTimeStampTree;
Tree businessMainContactTree;
Tree caseProcessTree;
List<Tree> parentsListOfTree = [];


if (in.sortByPriority)
{
	parentsListOfTree.addAll(rootTree.getChildren());
}
else
{
	parentsListOfTree.add(in.caseHierarchyLayoutTree);
}



for(Tree currentParent: parentsListOfTree)
{
   CaseHierarchyTreeNodeValue currentPriorityNodeValue;

   if (currentParent.value instanceof CaseHierarchyTreeNodeValue)
   {
      // filter must consider the Property.PRIORITY
      currentPriorityNodeValue = currentParent.value as CaseHierarchyTreeNodeValue;
   }   



	// consider the case state(s)
	filter = in.caseStatePropertyFilter;

	// consider the filter set by user
	if (in.filterEnabled)
	{
		filter = filter.and(in.caseAvailableFilters.propertyFilter);
	}		

	// consider the priority sorting
	if (in.sortByPriority)
	{
		filter = filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode);
	}	
	
	
	caseProcessCategoriesIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.PROCESS_CATEGORY_CODE, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));


// read process categories
for (IGroup caseProcessCategory: caseProcessCategoriesIGroup)
{
   elementOfCaseProcessCategoriesICase = caseProcessCategory.getFirstObjectInGroup() as ICase;


   CaseHierarchyTreeNodeValue caseProcessCategoryTreeNodeValue = new CaseHierarchyTreeNodeValue();
   caseProcessCategoryTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE;
   caseProcessCategoryTreeNodeValue.categoryCode = elementOfCaseProcessCategoriesICase.getProcessCategoryCode();
   caseProcessCategoryTreeNodeValue.categoryName = (elementOfCaseProcessCategoriesICase.getProcessName() is initialized? elementOfCaseProcessCategoriesICase.getProcessCategoryName(): 
					(elementOfCaseProcessCategoriesICase.getProcessCategoryCode() is initialized? elementOfCaseProcessCategoriesICase.getProcessCategoryCode(): out.unclassifiedCaseTitle));

   caseProcessCategoryTree = currentParent.createChild(caseProcessCategoryTreeNodeValue, "PROCESS_CATEGORY_CODE");




   filter = ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessCategoriesICase.getProcessCategoryCode());

		// consider the case state(s)
		filter = filter.and(in.caseStatePropertyFilter);

		// consider the filter set by user
		if (in.filterEnabled)
		{
			filter = filter.and(in.caseAvailableFilters.propertyFilter);
		}		

		// consider the priority sorting
		if (in.sortByPriority)
		{
			filter = filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode);
		}	


   businessStartTimeStampsIGroup.clear();

		
	 businessStartTimeStampsIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.BUSINESS_START_TIMESTAMP, OrderDirection.DESCENDING, in.runningCaseMode, in.caseDisplayMode));


   for (IGroup businessStartTimeStamp: businessStartTimeStampsIGroup)
   {
      elementOfBusinessStartTimeStampsICase = businessStartTimeStamp.getFirstObjectInGroup() as ICase;

      CaseHierarchyTreeNodeValue businessStartTimeStampTreeNodeValue = new CaseHierarchyTreeNodeValue();
      businessStartTimeStampTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.BUSINESS_START_TIMESTAMP;
      businessStartTimeStampTreeNodeValue.categoryCode = elementOfBusinessStartTimeStampsICase.getBusinessStartTimestamp();
      businessStartTimeStampTreeNodeValue.categoryName = (elementOfBusinessStartTimeStampsICase.getBusinessStartTimestamp() is initialized? elementOfBusinessStartTimeStampsICase.getBusinessStartTimestamp().format(ivy.var.xivy_workflow_ui_restricted_dateTimeFormatPattern): "");
      businessStartTimeStampTree = caseProcessCategoryTree.createChild(businessStartTimeStampTreeNodeValue,"BUSINESS_START_TIMESTAMP");

   

      filter = ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessCategoriesICase.getProcessCategoryCode()).and(
                                                                           ch.ivyteam.ivy.workflow.CaseProperty.BUSINESS_START_TIMESTAMP, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfBusinessStartTimeStampsICase.getBusinessStartTimestamp());

			// consider the case state(s)
			filter = filter.and(in.caseStatePropertyFilter);

			// consider the filter set by user
			if (in.filterEnabled)
			{
				filter = filter.and(in.caseAvailableFilters.propertyFilter);
			}		

			// consider the priority sorting
			if (in.sortByPriority)
			{
				filter = filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode);
			}	
			
			
			  caseProcessesIGroup.clear();

				caseProcessesIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.PROCESS_CODE, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));

   
         for (IGroup caseProcess: caseProcessesIGroup)
         {
            elementOfCaseProcessesICase = caseProcess.getFirstObjectInGroup() as ICase;

            CaseHierarchyTreeNodeValue caseProcessTreeNodeValue = new CaseHierarchyTreeNodeValue();
            caseProcessTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CODE;
            caseProcessTreeNodeValue.categoryCode = elementOfCaseProcessesICase.getProcessCode();
            caseProcessTreeNodeValue.categoryName = (elementOfCaseProcessesICase.getProcessName() is initialized? elementOfCaseProcessesICase.getProcessName(): "" + caseProcessTreeNodeValue.categoryCode);
            caseProcessTree = businessStartTimeStampTree.createChild(caseProcessTreeNodeValue, "PROCESS_CODE");



			      filter = ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessCategoriesICase.getProcessCategoryCode()).and(
			                                                                              ch.ivyteam.ivy.workflow.CaseProperty.BUSINESS_START_TIMESTAMP, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfBusinessStartTimeStampsICase.getBusinessStartTimestamp()).and(
			                                                                                 ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessesICase.getProcessCode());



			      businessMainContactsIGroup.clear();
						
						
						businessMainContactsIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.BUSINESS_MAIN_CONTACT_ID, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));
			
			
			      for (IGroup businessMainContact: businessMainContactsIGroup)
			      {
			         elementOfBusinessMainContactsICase = businessMainContact.getFirstObjectInGroup() as ICase;
			   
			         CaseHierarchyTreeNodeValue businessMainContactTreeNodeValue = new CaseHierarchyTreeNodeValue();
			         businessMainContactTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.BUSINESS_MAIN_CONTACT_ID;
			         businessMainContactTreeNodeValue.categoryCode = elementOfBusinessMainContactsICase.getBusinessMainContactId();
			         businessMainContactTreeNodeValue.categoryName = (elementOfBusinessMainContactsICase.getBusinessMainContactName() is initialized? elementOfBusinessMainContactsICase.getBusinessMainContactName(): "" + businessMainContactTreeNodeValue.categoryCode);
			         businessMainContactTree = caseProcessTree.createChild(businessMainContactTreeNodeValue,"BUSINESS_MAIN_CONTACT_ID");      
			         			
			      }// end for bus main contacts


         }// end for processes


   }// end for bus start time stamps
}// end for categories

}// end for priorities

out.caseHierarchyLayoutTree = rootTree;' #txt
Cs0 f24 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f24 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Case process category/
Business start timestamp/
Case process/
Business main contact</name>
        <nameStyle>84,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f24 1798 420 36 24 20 -2 #rect
Cs0 f24 @|RichDialogProcessStepIcon #fIcon
Cs0 f25 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f25 actionTable 'out=in;
' #txt
Cs0 f25 actionCode 'import ch.ivyteam.ivy.persistence.OrderDirection;
import ch.ivyteam.ivy.workflow.CaseProperty;
import ch.ivyteam.ivy.workflow.ui.utils.WorkflowUIAccessPermissionHandler;
import ch.ivyteam.ivy.workflow.ui.data.cases.CaseHierarchyTreeNodeValue;
import ch.ivyteam.ivy.workflow.ICase;
import ch.ivyteam.ivy.workflow.IPropertyFilter;
import ch.ivyteam.ivy.persistence.IGroup;


List<IGroup> caseProcessCategoriesIGroup;
List<IGroup> businessCreatorUsersIGroup;
List<IGroup> businessStartTimeStampsIGroup;
List<IGroup> caseProcessesIGroup;



ICase elementOfCaseProcessCategoriesICase;
ICase elementOfBusinessCreatorUsersICase;
ICase elementOfBusinessStartTimeStampsICase;
ICase elementOfCaseProcessesICase;



IPropertyFilter filter;


Tree rootTree = in.caseHierarchyLayoutTree;
Tree caseProcessCategoryTree;
Tree businessCreatorUserTree;
Tree businessStartTimeStampTree;
Tree caseProcessTree;
List<Tree> parentsListOfTree = [];


if (in.sortByPriority)
{
	parentsListOfTree.addAll(rootTree.getChildren());
}
else
{
	parentsListOfTree.add(in.caseHierarchyLayoutTree);	
}


for(Tree currentParent: parentsListOfTree)
{
   CaseHierarchyTreeNodeValue currentPriorityNodeValue;

   if (currentParent.value instanceof CaseHierarchyTreeNodeValue)
   {
      // filter must consider the Property.PRIORITY
      currentPriorityNodeValue = currentParent.value as CaseHierarchyTreeNodeValue;
   }   


	// consider the case state(s)
	filter = in.caseStatePropertyFilter;

	// consider the filter set by user
	if (in.filterEnabled)
	{
		filter = filter.and(in.caseAvailableFilters.propertyFilter);
	}		

	// consider the priority sorting
	if (in.sortByPriority)
	{
		filter = filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode);
	}
	
	caseProcessCategoriesIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.PROCESS_CATEGORY_CODE, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));


// read process categories
for (IGroup caseProcessCategory: caseProcessCategoriesIGroup)
{
   elementOfCaseProcessCategoriesICase = caseProcessCategory.getFirstObjectInGroup() as ICase;

   CaseHierarchyTreeNodeValue caseProcessCategoryTreeNodeValue = new CaseHierarchyTreeNodeValue();
   caseProcessCategoryTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE;
   caseProcessCategoryTreeNodeValue.categoryCode = elementOfCaseProcessCategoriesICase.getProcessCategoryCode();
   caseProcessCategoryTreeNodeValue.categoryName = (elementOfCaseProcessCategoriesICase.getProcessName() is initialized? elementOfCaseProcessCategoriesICase.getProcessCategoryName(): 
					(elementOfCaseProcessCategoriesICase.getProcessCategoryCode() is initialized? elementOfCaseProcessCategoriesICase.getProcessCategoryCode(): out.unclassifiedCaseTitle));

   caseProcessCategoryTree = currentParent.createChild(caseProcessCategoryTreeNodeValue, "PROCESS_CATEGORY_CODE");


   filter = ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessCategoriesICase.getProcessCategoryCode());

		// consider the case state(s)
		filter = filter.and(in.caseStatePropertyFilter);

		// consider the filter set by user
		if (in.filterEnabled)
		{
			filter = filter.and(in.caseAvailableFilters.propertyFilter);
		}		

		// consider the priority sorting
		if (in.sortByPriority)
		{
			filter = filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode);
		}
	
	
	  businessCreatorUsersIGroup.clear();
		
		businessCreatorUsersIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.BUSINESS_CREATOR_USER, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));
		


   for (IGroup businessCreatorUser: businessCreatorUsersIGroup)
   {
      elementOfBusinessCreatorUsersICase = businessCreatorUser.getFirstObjectInGroup() as ICase;

      CaseHierarchyTreeNodeValue businessCreatorUserTreeNodeValue = new CaseHierarchyTreeNodeValue();
      businessCreatorUserTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.BUSINESS_CREATOR_USER;
      businessCreatorUserTreeNodeValue.categoryCode = elementOfBusinessCreatorUsersICase.getBusinessCreatorUser();
      businessCreatorUserTreeNodeValue.categoryName = "" + businessCreatorUserTreeNodeValue.categoryCode + " (" + businessCreatorUser.getNumberOfObjectsInGroup() + ")";
      businessCreatorUserTree = caseProcessCategoryTree.createChild(businessCreatorUserTreeNodeValue,"BUSINESS_CREATOR_USER");




      filter = ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessCategoriesICase.getProcessCategoryCode()).and(
                                                                           ch.ivyteam.ivy.workflow.CaseProperty.BUSINESS_CREATOR_USER, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfBusinessCreatorUsersICase.getBusinessCreatorUser());

			// consider the case state(s)
			filter = filter.and(in.caseStatePropertyFilter);

			// consider the filter set by user
			if (in.filterEnabled)
			{
				filter = filter.and(in.caseAvailableFilters.propertyFilter);
			}		

			// consider the priority sorting
			if (in.sortByPriority)
			{
				filter = filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode);
			}
		
		
		
			businessStartTimeStampsIGroup.clear();
		
			businessStartTimeStampsIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.BUSINESS_START_TIMESTAMP, OrderDirection.DESCENDING, in.runningCaseMode, in.caseDisplayMode));


      for (IGroup businessStartTimeStamp: businessStartTimeStampsIGroup)
      {
         elementOfBusinessStartTimeStampsICase = businessStartTimeStamp.getFirstObjectInGroup() as ICase;

         CaseHierarchyTreeNodeValue businessStartTimeStampTreeNodeValue = new CaseHierarchyTreeNodeValue();
         businessStartTimeStampTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.BUSINESS_START_TIMESTAMP;
         businessStartTimeStampTreeNodeValue.categoryCode = elementOfBusinessStartTimeStampsICase.getBusinessStartTimestamp();
         businessStartTimeStampTreeNodeValue.categoryName = (elementOfBusinessStartTimeStampsICase.getBusinessStartTimestamp() is initialized? elementOfBusinessStartTimeStampsICase.getBusinessStartTimestamp().format(ivy.var.xivy_workflow_ui_restricted_dateTimeFormatPattern): "");
         businessStartTimeStampTree = businessCreatorUserTree.createChild(businessStartTimeStampTreeNodeValue,"BUSINESS_START_TIMESTAMP");
   


         filter = ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfCaseProcessCategoriesICase.getProcessCategoryCode()).and(
                                                                              ch.ivyteam.ivy.workflow.CaseProperty.BUSINESS_CREATOR_USER, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfBusinessCreatorUsersICase.getBusinessCreatorUser()).and(
                                                                                 ch.ivyteam.ivy.workflow.CaseProperty.BUSINESS_START_TIMESTAMP, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, elementOfBusinessStartTimeStampsICase.getBusinessStartTimestamp());

				// consider the case state(s)
				filter = filter.and(in.caseStatePropertyFilter);

				// consider the filter set by user
				if (in.filterEnabled)
				{
					filter = filter.and(in.caseAvailableFilters.propertyFilter);
				}		

				// consider the priority sorting
				if (in.sortByPriority)
				{
					filter = filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, currentPriorityNodeValue.categoryCode);
				}
				

         caseProcessesIGroup.clear();
				
				 caseProcessesIGroup.addAll(WorkflowUIAccessPermissionHandler.findCaseCategories(filter, CaseProperty.PROCESS_CODE, OrderDirection.ASCENDING, in.runningCaseMode, in.caseDisplayMode));				
   
         for (IGroup caseProcess: caseProcessesIGroup)
         {
            elementOfCaseProcessesICase = caseProcess.getFirstObjectInGroup() as ICase;

            CaseHierarchyTreeNodeValue caseProcessTreeNodeValue = new CaseHierarchyTreeNodeValue();
            caseProcessTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CODE;
            caseProcessTreeNodeValue.categoryCode = elementOfCaseProcessesICase.getProcessCode();
            caseProcessTreeNodeValue.categoryName = (elementOfCaseProcessesICase.getProcessName() is initialized? elementOfCaseProcessesICase.getProcessName(): "" + caseProcessTreeNodeValue.categoryCode);
            caseProcessTree = businessStartTimeStampTree.createChild(caseProcessTreeNodeValue, "PROCESS_CODE");
      
         }// end for case processes
      }// end for bus start time stamps
   }// end for bus creator users
}// end for case process categories

}// end for priorities


out.caseHierarchyLayoutTree = rootTree;' #txt
Cs0 f25 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f25 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Case process category/
Business creator/
Business start time stamp/
Case process</name>
        <nameStyle>80,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f25 1998 420 36 24 20 -2 #rect
Cs0 f25 @|RichDialogProcessStepIcon #fIcon
Cs0 f26 expr in #txt
Cs0 f26 outCond 'in.caseHierarchyLayoutSelectedIndex == 5' #txt
Cs0 f26 1445 337 1816 420 #arcP
Cs0 f26 1 1816 360 #addKink
Cs0 f26 0 0.6231640838022615 0 0 #arcLabel
Cs0 f28 expr in #txt
Cs0 f28 outCond 'in.caseHierarchyLayoutSelectedIndex == 6' #txt
Cs0 f28 1446 336 2016 420 #arcP
Cs0 f28 1 2016 352 #addKink
Cs0 f28 0 0.6180625399490141 0 0 #arcLabel
Cs0 f30 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f30 actionTable 'out=in;
' #txt
Cs0 f30 actionCode 'import ch.ivyteam.ivy.event.SystemEventCategory;
import ch.ivyteam.ivy.workflow.ui.data.common.HierarchyLayout;
import ch.ivyteam.ivy.workflow.ui.utils.WorkflowUIAccessPermissionHandler;
import ch.ivyteam.ivy.workflow.IPropertyFilter;

import ch.ivyteam.ivy.workflow.ui.utils.UniqueDisplayIdFactory;
import ch.ivyteam.ivy.richdialog.widgets.displays.RTabbedDisplay;


// get permissions
out.hasPermissionCaseDestroy = ivy.session.hasPermission(ivy.request.getApplication().getSecurityDescriptor(), 
																										ch.ivyteam.ivy.security.IPermission.CASE_DESTROY);
																										
out.hasPermissionCaseRead = ivy.session.hasPermission(ivy.request.getApplication().getSecurityDescriptor(), ch.ivyteam.ivy.security.IPermission.CASE_READ_OWN_CASE_OF_TASK) ||
														ivy.session.hasPermission(ivy.request.getApplication().getSecurityDescriptor(), ch.ivyteam.ivy.security.IPermission.CASE_READ_ALL_OWN_ROLE_STARTED) ||
														ivy.session.hasPermission(ivy.request.getApplication().getSecurityDescriptor(), ch.ivyteam.ivy.security.IPermission.CASE_READ_ALL_OWN_STARTED) ||
														ivy.session.hasPermission(ivy.request.getApplication().getSecurityDescriptor(), ch.ivyteam.ivy.security.IPermission.CASE_READ_ALL_OWN_INVOLVED) ||
														ivy.session.hasPermission(ivy.request.getApplication().getSecurityDescriptor(), ch.ivyteam.ivy.security.IPermission.CASE_READ_ALL_OWN_ROLE_INVOLVED) ||
														ivy.session.hasPermission(ivy.request.getApplication().getSecurityDescriptor(), ch.ivyteam.ivy.security.IPermission.CASE_READ) || 
														ivy.session.hasPermission(ivy.request.getApplication().getSecurityDescriptor(), ch.ivyteam.ivy.security.IPermission.CASE_READ_ALL);
																										


//
out.caseDisplayMode = 0;
out.filterEnabled = false;

out.unclassifiedCaseTitle = ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/uncategorizedCases").toString();


// root node
out.caseHierarchyLayoutTree = new Tree();
out.caseHierarchyLayoutTree.info = "Root";
out.caseHierarchyLayoutTree.value = "Cases hierarchy";


// set case states property filter for case list
out.caseStatePropertyFilter = (in.runningCaseMode? 
																	ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.STATE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, ch.ivyteam.ivy.workflow.CaseState.RUNNING.intValue()):
																	ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.STATE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, ch.ivyteam.ivy.workflow.CaseState.DONE.intValue()));
																	
																																
out.confirmation = ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/common/plainStrings/confirmation");																	


// register to System events of Workflow category
ivy.rd.subscribeToSystemEvents(SystemEventCategory.WORKFLOW);' #txt
Cs0 f30 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f30 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>init the data
define if user has permissions (case read, case destroy),
set confirmation text from CMS,
register to the system events Workflow</name>
        <nameStyle>142,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f30 46 156 36 24 20 -2 #rect
Cs0 f30 @|RichDialogProcessStepIcon #fIcon
Cs0 f2 expr out #txt
Cs0 f2 64 180 64 275 #arcP
Cs0 f32 guid 11AB61156DE337C2 #txt
Cs0 f32 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f32 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f32 actionTable 'out=in;
' #txt
Cs0 f32 actionCode 'out.caseDisplayMode = 0;' #txt
Cs0 f32 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>findInvolvedCases</name>
        <nameStyle>17,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f32 1718 62 20 20 13 0 #rect
Cs0 f32 @|RichDialogProcessStartIcon #fIcon
Cs0 f33 guid 11AB61160C1CCBD4 #txt
Cs0 f33 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f33 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f33 actionTable 'out=in;
' #txt
Cs0 f33 actionCode 'out.caseDisplayMode = 1;' #txt
Cs0 f33 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>findInvolvedCasesByRole</name>
        <nameStyle>23,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f33 1854 62 20 20 13 0 #rect
Cs0 f33 @|RichDialogProcessStartIcon #fIcon
Cs0 f34 guid 11AB61176BA4488C #txt
Cs0 f34 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f34 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f34 actionTable 'out=in;
' #txt
Cs0 f34 actionCode 'out.caseDisplayMode = 2;' #txt
Cs0 f34 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>findAllEnvironmentCases</name>
        <nameStyle>23,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f34 1990 62 20 20 13 0 #rect
Cs0 f34 @|RichDialogProcessStartIcon #fIcon
Cs0 f68 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f68 actionTable 'out=in;
' #txt
Cs0 f68 actionCode 'out.caseHierarchyLayoutTree = new Tree();
out.caseHierarchyLayoutTree.info = "Root";
out.caseHierarchyLayoutTree.value = ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/allCases");
' #txt
Cs0 f68 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f68 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Create a new root tree node 
on the cases hierarchy layout tree</name>
        <nameStyle>63,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f68 1414 140 36 24 8 11 #rect
Cs0 f68 @|RichDialogProcessStepIcon #fIcon
Cs0 f35 expr out #txt
Cs0 f35 1432 82 1432 140 #arcP
Cs0 f39 guid 11ABB3474C13F239 #txt
Cs0 f39 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f39 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f39 actionTable 'out=in;
' #txt
Cs0 f39 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>sortByPriorityChanged</name>
        <nameStyle>21,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f39 1606 62 20 20 13 0 #rect
Cs0 f39 @|RichDialogProcessStartIcon #fIcon
Cs0 f40 expr out #txt
Cs0 f40 1616 82 1450 152 #arcP
Cs0 f40 1 1616 152 #addKink
Cs0 f40 1 0.3346589585634533 0 0 #arcLabel
Cs0 f42 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f42 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Cs0 f42 1418 242 28 28 14 0 #rect
Cs0 f42 @|AlternativeIcon #fIcon
Cs0 f44 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f44 actionTable 'out=in;
' #txt
Cs0 f44 actionCode '// Priority
import ch.ivyteam.ivy.workflow.ui.data.cases.CaseHierarchyTreeNodeValue;
import ch.ivyteam.ivy.workflow.ICase;
import ch.ivyteam.ivy.persistence.IGroup;
import ch.ivyteam.ivy.workflow.IPropertyFilter;


IPropertyFilter filter;
List<IGroup> prioritiesIGroup;
ICase elementOfPrioritiesICase;



Tree rootTree = in.caseHierarchyLayoutTree;
Tree categoryTree;
Tree priorityTree;



rootTree.removeAllChildren();

prioritiesIGroup.clear();

filter = in.caseStatePropertyFilter;

if (in.filterEnabled)
{
	filter = filter.and(in.caseAvailableFilters.propertyFilter);	
}
	
	
	
	if (in.caseDisplayMode == 0)
	{
		prioritiesIGroup.addAll(ivy.session.findInvolvedCasesCategories(filter, ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, null));
	}
	else
	{
		if (in.caseDisplayMode == 1)
		{
			prioritiesIGroup.addAll(ivy.session.findInvolvedCasesByRoleCategories(ivy.session.getSessionUser().getRoles(), filter, ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, null));
		}
		else
		{
			if (in.caseDisplayMode == 2)
			{
				prioritiesIGroup.addAll(ivy.wf.findCaseCategories(filter, ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, null));
			}
		}
		
	}
	
	


for (IGroup priority: prioritiesIGroup)
{
   elementOfPrioritiesICase = priority.getFirstObjectInGroup() as ICase;
   
   CaseHierarchyTreeNodeValue priorityTreeNodeValue = new CaseHierarchyTreeNodeValue();
   priorityTreeNodeValue.property = ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY;
   priorityTreeNodeValue.categoryCode = elementOfPrioritiesICase.getPriority().intValue().toString();
   priorityTreeNodeValue.categoryName = elementOfPrioritiesICase.getPriority().toString();

   priorityTree = rootTree.createChild(priorityTreeNodeValue, "PRIORITY");   
}

out.caseHierarchyLayoutTree = rootTree;' #txt
Cs0 f44 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f44 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Build all 
available priorities
considering (ON/OFF) the user filter</name>
        <nameStyle>68,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f44 1502 276 36 24 20 -2 #rect
Cs0 f44 @|RichDialogProcessStepIcon #fIcon
Cs0 f45 expr in #txt
Cs0 f45 outCond in.sortByPriority #txt
Cs0 f45 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>sort by 
priority</name>
        <nameStyle>17,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f45 1446 256 1520 276 #arcP
Cs0 f45 1 1520 256 #addKink
Cs0 f45 0 0.7979555173134776 0 0 #arcLabel
Cs0 f46 expr out #txt
Cs0 f46 1520 300 1444 334 #arcP
Cs0 f46 1 1520 320 #addKink
Cs0 f46 0 0.8687109049763829 0 0 #arcLabel
Cs0 f7 expr in #txt
Cs0 f7 1432 270 1432 322 #arcP
Cs0 f47 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f47 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Cs0 f47 1418 194 28 28 14 0 #rect
Cs0 f47 @|AlternativeIcon #fIcon
Cs0 f48 expr out #txt
Cs0 f48 1432 164 1432 194 #arcP
Cs0 f43 expr in #txt
Cs0 f43 1432 222 1432 242 #arcP
Cs0 f49 guid 11AC0501E4A8E488 #txt
Cs0 f49 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f49 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f49 actionTable 'out=in;
' #txt
Cs0 f49 actionCode 'import ch.ivyteam.ivy.workflow.ui.utils.UserPropertyKeys;


import com.ulcjava.base.application.border.ULCTitledBorder;
if (panel.getBorder() is initialized && panel.getBorder() instanceof ULCTitledBorder)
{
	(panel.getBorder() as ULCTitledBorder).title = (in.runningCaseMode? "Running ": "Finished ") + "case list search";
}






if (panel.getBorder() != null && panel.getBorder() instanceof ULCTitledBorder)
{
		String title = (in.runningCaseMode? ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/runningCasesShortDesc"):
																					ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/finishedCasesShortDesc"));
																									
		(panel.getBorder() as ULCTitledBorder).setTitle(title);
}

' #txt
Cs0 f49 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>onLoad</name>
        <nameStyle>6,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f49 1014 46 20 20 13 0 #rect
Cs0 f49 @|RichDialogProcessStartIcon #fIcon
Cs0 f51 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f51 actionTable 'out=in;
' #txt
Cs0 f51 actionCode 'out.runningCaseMode = true;' #txt
Cs0 f51 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f51 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set running case 
mode to true</name>
        <nameStyle>30,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f51 46 100 36 24 20 -2 #rect
Cs0 f51 @|RichDialogProcessStepIcon #fIcon
Cs0 f52 expr out #txt
Cs0 f52 64 74 64 100 #arcP
Cs0 f31 expr out #txt
Cs0 f31 64 124 64 156 #arcP
Cs0 f53 guid 11AC3F5F94D5900C #txt
Cs0 f53 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f53 method start(Boolean,ch.ivyteam.ivy.richdialog.widgets.displays.RTabbedDisplay,Boolean,Boolean) #txt
Cs0 f53 disableUIEvents true #txt
Cs0 f53 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Boolean aMultipleCaseListMode,ch.ivyteam.ivy.richdialog.widgets.displays.RTabbedDisplay aDestinationDisplay,java.lang.Boolean aRunningCaseMode,java.lang.Boolean aHasWfAdministratorPermissions> param = methodEvent.getInputArguments();
' #txt
Cs0 f53 inParameterMapAction 'out.destinationDisplay=param.aDestinationDisplay;
out.hasWfAdministratorPermissions=param.aHasWfAdministratorPermissions;
out.runningCaseMode=param.aRunningCaseMode;
' #txt
Cs0 f53 inActionCode 'import ch.ivyteam.ivy.workflow.ui.utils.UserPropertyKeys;

Boolean hasUserReadPropertyPermission = ivy.session.hasPermission(ivy.request.getApplication().getSecurityDescriptor(), ch.ivyteam.ivy.security.IPermission.USER_READ_PROPERTY);

// cases
out.caseHierarchyLayoutSelectedIndex = 
	(hasUserReadPropertyPermission && ivy.session.getSessionUser().getProperty(UserPropertyKeys.CASES_HIERARCHY_LAYOUT_INDEX_PROPERTY_KEY) is initialized && ivy.session.getSessionUser().getProperty(UserPropertyKeys.CASES_HIERARCHY_LAYOUT_INDEX_PROPERTY_KEY).length() > 0)?
		ivy.session.getSessionUser().getProperty(UserPropertyKeys.CASES_HIERARCHY_LAYOUT_INDEX_PROPERTY_KEY).toNumber():
		ivy.cms.co(UserPropertyKeys.CASES_HIERARCHY_LAYOUT_INDEX_PROPERTY_CMS_DEFAULT_VALUE).toNumber();



out.sortByPriority = 
	(hasUserReadPropertyPermission && ivy.session.getSessionUser().getProperty(UserPropertyKeys.CASES_SORTED_BY_PRIORITY_PROPERTY_KEY) is initialized && ivy.session.getSessionUser().getProperty(UserPropertyKeys.CASES_SORTED_BY_PRIORITY_PROPERTY_KEY).length() > 0)?
		"true".equals(ivy.session.getSessionUser().getProperty(UserPropertyKeys.CASES_SORTED_BY_PRIORITY_PROPERTY_KEY)):
		"true".equals(ivy.cms.co(UserPropertyKeys.CASES_SORTED_BY_PRIORITY_PROPERTY_CMS_DEFAULT_VALUE));



out.multipleCaseListMode = 
	(hasUserReadPropertyPermission && ivy.session.getSessionUser().getProperty(UserPropertyKeys.IS_MULTIPLE_CASELIST_MODE_PROPERTY_KEY) is initialized && ivy.session.getSessionUser().getProperty(UserPropertyKeys.IS_MULTIPLE_CASELIST_MODE_PROPERTY_KEY).length() > 0)?
		"true".equals(ivy.session.getSessionUser().getProperty(UserPropertyKeys.IS_MULTIPLE_CASELIST_MODE_PROPERTY_KEY)):
		"true".equals(ivy.cms.co(UserPropertyKeys.IS_MULTIPLE_CASELIST_MODE_PROPERTY_CMS_DEFAULT_VALUE));' #txt
Cs0 f53 outParameterDecl '<> result;
' #txt
Cs0 f53 embeddedRdInitializations '{/caseHierarchyLayoutSelectRDC {/fieldName "caseHierarchyLayoutSelectRDC"/startMethod "start()"/parameterMapping ""/initScript "\n/*\nimport ch.ivyteam.ivy.workflow.ui.utils.UserPropertyKeys;\n\nBoolean hasUserReadPropertyPermission = ivy.session.hasPermission(ivy.request.getApplication().getSecurityDescriptor(), ch.ivyteam.ivy.security.IPermission.USER_READ_PROPERTY);\n\n// cases\nparam.aCaseHierarchyLayoutPrefferedIndex = \n\t(hasUserReadPropertyPermission && ivy.session.getSessionUser().getProperty(UserPropertyKeys.CASES_HIERARCHY_LAYOUT_INDEX_PROPERTY_KEY).length() > 0)?\n\tivy.session.getSessionUser().getProperty(UserPropertyKeys.CASES_HIERARCHY_LAYOUT_INDEX_PROPERTY_KEY).toNumber():\n\tivy.cms.co(UserPropertyKeys.CASES_HIERARCHY_LAYOUT_INDEX_PROPERTY_CMS_DEFAULT_VALUE).toNumber();\n*/"}/caseFiltersSelectRDC {/fieldName "caseFiltersSelectRDC"/startMethod "start(ch.ivyteam.ivy.workflow.IPropertyFilter)"/parameterMapping ""/initScript "// set case states property filter for case list\nparam.aCaseStateFilter = (in.runningCaseMode? \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.STATE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, ch.ivyteam.ivy.workflow.CaseState.RUNNING.intValue()):\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.STATE, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, ch.ivyteam.ivy.workflow.CaseState.DONE.intValue()));"}}' #txt
Cs0 f53 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start(Boolean,RTabbedDisplay,Boolean,Boolean)</name>
        <nameStyle>45,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f53 166 54 20 20 -22 -31 #rect
Cs0 f53 @|RichDialogInitStartIcon #fIcon
Cs0 f55 expr out #txt
Cs0 f55 176 74 82 168 #arcP
Cs0 f55 1 176 168 #addKink
Cs0 f55 1 0.16952658429974443 0 0 #arcLabel
Cs0 f54 guid 11AC432EBF67E27F #txt
Cs0 f54 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f54 method isRunningCaseMode() #txt
Cs0 f54 disableUIEvents false #txt
Cs0 f54 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Cs0 f54 outParameterDecl '<java.lang.Boolean aRunningCaseMode> result;
' #txt
Cs0 f54 outParameterMapAction 'result.aRunningCaseMode=in.runningCaseMode;
' #txt
Cs0 f54 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>isRunningCaseMode()</name>
        <nameStyle>19,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f54 422 54 20 20 13 0 #rect
Cs0 f54 @|RichDialogMethodStartIcon #fIcon
Cs0 f57 guid 11AC55E486080498 #txt
Cs0 f57 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f57 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f57 actionTable 'out=in;
' #txt
Cs0 f57 actionCode 'out.treeLoadEvent = event as ch.ivyteam.ivy.richdialog.component.event.TreeLoadEvent;' #txt
Cs0 f57 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>expandTreeNodeAndFindCases</name>
        <nameStyle>26,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f57 878 638 20 20 13 0 #rect
Cs0 f57 @|RichDialogProcessStartIcon #fIcon
Cs0 f58 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f58 875 1051 26 26 14 0 #rect
Cs0 f58 @|RichDialogProcessEndIcon #fIcon
Cs0 f60 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f60 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Cs0 f60 874 706 28 28 14 0 #rect
Cs0 f60 @|AlternativeIcon #fIcon
Cs0 f61 expr out #txt
Cs0 f61 888 658 888 706 #arcP
Cs0 f62 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f62 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>it''s process category and empty?</name>
        <nameStyle>32,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f62 874 794 28 28 8 -21 #rect
Cs0 f62 @|AlternativeIcon #fIcon
Cs0 f63 expr in #txt
Cs0 f63 outCond '(in.#treeLoadEvent!= null) && (in.treeLoadEvent.getTreeNode().value instanceof ch.ivyteam.ivy.workflow.ui.data.cases.CaseHierarchyTreeNodeValue)' #txt
Cs0 f63 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>explanded node != null
and it is not a root node</name>
        <nameStyle>48,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f63 888 734 888 794 #arcP
Cs0 f64 expr in #txt
Cs0 f64 902 720 901 1064 #arcP
Cs0 f64 1 1320 720 #addKink
Cs0 f64 2 1320 1064 #addKink
Cs0 f64 1 0.28920835504972936 0 0 #arcLabel
Cs0 f65 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f65 actionTable 'out=in;
' #txt
Cs0 f65 actionCode 'import ch.ivyteam.ivy.persistence.OrderDirection;
import ch.ivyteam.ivy.workflow.ui.utils.WorkflowUIAccessPermissionHandler;
import ch.ivyteam.ivy.workflow.ui.data.cases.CaseHierarchyTreeNodeValue;
import ch.ivyteam.ivy.workflow.IPropertyFilter;
import ch.ivyteam.ivy.persistence.IQueryResult;
import ch.ivyteam.ivy.workflow.ICase;
import ch.ivyteam.ivy.workflow.PropertyOrder;


List<ICase> result= [];
List<PropertyOrder> order = [];
IPropertyFilter filter;

int startIndex = 0;
int count = -1;
Boolean returnAllCount = true;
int allCount;


Tree caseTree;

Tree unclassifiedCaseTree;
CaseHierarchyTreeNodeValue unclassifiedCaseTreeNodeValue;


// get the node "unclassified Cases" under the root node
unclassifiedCaseTree = in.treeLoadEvent.getTreeNode();
unclassifiedCaseTreeNodeValue = unclassifiedCaseTree.value as CaseHierarchyTreeNodeValue;



// setup order
order.add(new PropertyOrder(ch.ivyteam.ivy.workflow.CaseProperty.NAME, OrderDirection.ASCENDING));
// order.add(new PropertyOrder(ch.ivyteam.ivy.workflow.CaseProperty.BUSINESS_START_TIMESTAMP, ch.ivyteam.ivy.persistence.OrderDirection.DESCENDING));
// order.add(new PropertyOrder(ch.ivyteam.ivy.workflow.CaseProperty.BUSINESS_MAIN_CONTACT_NAME, ch.ivyteam.ivy.persistence.OrderDirection.ASCENDING));



// setup filter
filter = in.caseStatePropertyFilter.and(ivy.wf.createCasePropertyFilter(unclassifiedCaseTreeNodeValue.property, ch.ivyteam.logicalexpression.RelationalOperator.IS, null));

// consider the sort by priority for "unclassified tasks"
if (in.sortByPriority && unclassifiedCaseTree.getParent().value instanceof CaseHierarchyTreeNodeValue)
{
	//ch.ivyteam.ivy.workflow.TaskProperty.PRIORITY
	filter = filter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, (unclassifiedCaseTree.getParent().value as CaseHierarchyTreeNodeValue).categoryCode);
}


// consider the user defined filter
if (in.filterDefined && in.filterEnabled)
{
	filter = filter.and(in.caseAvailableFilters.propertyFilter);
}


// WorkflowUIAccessPermissionHandler.findCases(IPropertyFilter<CaseProperty> filter, List<PropertyOrder<CaseProperty>> order, int startIndex, int count, Boolean returnAllCount, int caseDisplayMode, boolean runningCaseMode)
result.clear();
result.addAll(WorkflowUIAccessPermissionHandler.findCases(filter, order, startIndex, count, returnAllCount, in.caseDisplayMode, in.runningCaseMode));



// read the Cases and add them to "unclassified Cases" tree node
for (ICase wfCase: result)
{
	caseTree = new Tree(wfCase , "ID");
	caseTree.setMayHaveChildren(false);
	unclassifiedCaseTree.add(caseTree);			
}// end for Case


' #txt
Cs0 f65 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f65 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>build the 
unclassified cases</name>
        <nameStyle>29,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f65 1142 884 36 24 20 -2 #rect
Cs0 f65 @|RichDialogProcessStepIcon #fIcon
Cs0 f66 expr in #txt
Cs0 f66 outCond '(in.treeLoadEvent.getTreeNode().value as ch.ivyteam.ivy.workflow.ui.data.cases.CaseHierarchyTreeNodeValue).property.equals(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE) &&
(in.treeLoadEvent.getTreeNode().value as ch.ivyteam.ivy.workflow.ui.data.cases.CaseHierarchyTreeNodeValue).categoryCode.equals("")' #txt
Cs0 f66 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes
(used for unclassified cases)</name>
        <nameStyle>33,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f66 902 808 1160 884 #arcP
Cs0 f66 1 1160 808 #addKink
Cs0 f66 1 0.5 32 0 #arcLabel
Cs0 f67 expr out #txt
Cs0 f67 1160 908 901 1064 #arcP
Cs0 f67 1 1160 1064 #addKink
Cs0 f67 0 0.9812125823658793 0 0 #arcLabel
Cs0 f69 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f69 actionTable 'out=in;
' #txt
Cs0 f69 actionCode 'import ch.ivyteam.ivy.persistence.OrderDirection;
import ch.ivyteam.ivy.workflow.ui.utils.WorkflowUIAccessPermissionHandler;
import ch.ivyteam.ivy.workflow.ui.data.cases.CaseHierarchyTreeNodeValue;
import ch.ivyteam.ivy.workflow.IPropertyFilter;
import ch.ivyteam.ivy.persistence.IQueryResult;
import ch.ivyteam.ivy.workflow.ICase;
import ch.ivyteam.ivy.workflow.PropertyOrder;
import ch.ivyteam.ivy.workflow.IPropertyFilter;


IQueryResult queryResult;
List<ICase> result= [];
List<PropertyOrder> order = [];
java.util.EnumSet states;
IPropertyFilter filter;

int startIndex = 0;
int count = -1;
Boolean returnAllCount = true;
int allCount;

Tree caseTree;





// path from root to this tree
List<Tree>  pathTreeList = out.treeLoadEvent.getTreeNode().getPath();

// setup order
order.add(new PropertyOrder(ch.ivyteam.ivy.workflow.CaseProperty.NAME, OrderDirection.ASCENDING));
// order.add(new PropertyOrder(ch.ivyteam.ivy.workflow.TaskProperty.BUSINESS_START_TIMESTAMP, ch.ivyteam.ivy.persistence.OrderDirection.DESCENDING));
// order.add(new PropertyOrder(ch.ivyteam.ivy.workflow.TaskProperty.BUSINESS_MAIN_CONTACT_NAME, ch.ivyteam.ivy.persistence.OrderDirection.ASCENDING));



// consider the case''s state to find
filter = in.caseStatePropertyFilter;

// setup filter
for (int i=1; i<pathTreeList.size(); i++)
{
	CaseHierarchyTreeNodeValue currentCaseHierarchyTreeNodeValue = pathTreeList.get(i).value as CaseHierarchyTreeNodeValue;
	
	if(currentCaseHierarchyTreeNodeValue.categoryCode is initialized)
	{
		filter = filter.and(currentCaseHierarchyTreeNodeValue.property, 
											ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, 
											currentCaseHierarchyTreeNodeValue.categoryCode);
	}
	else
	{
		filter = filter.and(currentCaseHierarchyTreeNodeValue.property, 
											ch.ivyteam.logicalexpression.RelationalOperator.IS, 
											null);									
	}	
	
}


// consider the user defined filter
if (in.filterDefined && in.filterEnabled)
{
	filter = filter.and(in.caseAvailableFilters.propertyFilter);
}



// WorkflowUIAccessPermissionHandler.findCases(IPropertyFilter<CaseProperty> filter, List<PropertyOrder<CaseProperty>> order, int startIndex, int count, Boolean returnAllCount, int caseDisplayMode, boolean runningCaseMode)
result.clear();
result.addAll(WorkflowUIAccessPermissionHandler.findCases(filter, order, startIndex, count, returnAllCount, in.caseDisplayMode, in.runningCaseMode));

// read the cases 
for (ICase wfCase: result)
{
	caseTree = new Tree(wfCase , "ID");
	caseTree.setMayHaveChildren(false);
	out.treeLoadEvent.getTreeNode().add(caseTree);
}
' #txt
Cs0 f69 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f69 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>find the cases
that fit to selected tree path
and created tree with node value ICase</name>
        <nameStyle>84,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f69 870 884 36 24 21 -2 #rect
Cs0 f69 @|RichDialogProcessStepIcon #fIcon
Cs0 f70 expr in #txt
Cs0 f70 888 822 888 884 #arcP
Cs0 f59 expr out #txt
Cs0 f59 888 908 888 1051 #arcP
Cs0 f71 guid 11ACA59A2BCAD1C6 #txt
Cs0 f71 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f71 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f71 actionTable 'out=in;
' #txt
Cs0 f71 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>loadCasesByCaseHierarchySelection</name>
        <nameStyle>33,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f71 1422 638 20 20 13 0 #rect
Cs0 f71 @|RichDialogProcessStartIcon #fIcon
Cs0 f72 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f72 1419 1123 26 26 14 0 #rect
Cs0 f72 @|RichDialogProcessEndIcon #fIcon
Cs0 f74 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f74 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Cs0 f74 1418 786 28 28 14 0 #rect
Cs0 f74 @|AlternativeIcon #fIcon
Cs0 f77 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f77 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Cs0 f77 1418 834 28 28 14 0 #rect
Cs0 f77 @|AlternativeIcon #fIcon
Cs0 f78 expr in #txt
Cs0 f78 outCond 'panel.caseHierarchyLayoutTree.selectedTreeNode.getPath().size() > 1' #txt
Cs0 f78 1432 814 1432 834 #arcP
Cs0 f79 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f79 actionTable 'out=in;
' #txt
Cs0 f79 actionCode 'import ch.ivyteam.ivy.workflow.ui.data.cases.CaseHierarchyTreeNodeValue;
import ch.ivyteam.ivy.workflow.IPropertyFilter;



Tree selectedTree;
IPropertyFilter propertyFilter;


// set the title and tooltip of the case list instance
selectedTree = panel.caseHierarchyLayoutTree.getSelectedTreeNode();



// set the filter for unclassified cases
propertyFilter = ivy.wf.createCasePropertyFilter(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE, ch.ivyteam.logicalexpression.RelationalOperator.IS, null);



// consider the sort by priority for "unclassified cases"
if (in.sortByPriority && selectedTree.getParent().value instanceof CaseHierarchyTreeNodeValue)
{
	//ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY
	propertyFilter = propertyFilter.and(ch.ivyteam.ivy.workflow.CaseProperty.PRIORITY, 
																			ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, 
																			(selectedTree.getParent().value as CaseHierarchyTreeNodeValue).categoryCode);
}


String displayedNodeValue = (selectedTree.value as CaseHierarchyTreeNodeValue).categoryName;

out.caseHierarchyContext.propertyFilter = out.caseHierarchyContext.propertyFilter.and(propertyFilter);
out.caseHierarchyContext.title += " - " + displayedNodeValue;
out.caseHierarchyContext.icon = "";
out.caseHierarchyContext.toolTipText = displayedNodeValue;
' #txt
Cs0 f79 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f79 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>build the filter for 
unclassified cases</name>
        <nameStyle>40,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f79 1630 876 36 24 20 -2 #rect
Cs0 f79 @|RichDialogProcessStepIcon #fIcon
Cs0 f80 expr in #txt
Cs0 f80 outCond '(panel.caseHierarchyLayoutTree.selectedTreeNode.value as ch.ivyteam.ivy.workflow.ui.data.cases.CaseHierarchyTreeNodeValue).property.equals(ch.ivyteam.ivy.workflow.CaseProperty.PROCESS_CATEGORY_CODE) &&
(panel.caseHierarchyLayoutTree.selectedTreeNode.value as ch.ivyteam.ivy.workflow.ui.data.cases.CaseHierarchyTreeNodeValue).categoryCode.equals("")' #txt
Cs0 f80 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>selected tree node
is a &quot;uncategorized cases&quot;</name>
        <nameStyle>45,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f80 1446 848 1648 876 #arcP
Cs0 f80 1 1648 848 #addKink
Cs0 f80 0 0.8462265356532642 0 0 #arcLabel
Cs0 f81 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f81 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Cs0 f81 1418 954 28 28 14 0 #rect
Cs0 f81 @|AlternativeIcon #fIcon
Cs0 f83 expr out #txt
Cs0 f83 1648 900 1446 968 #arcP
Cs0 f83 1 1648 968 #addKink
Cs0 f83 1 0.1622801463950738 0 0 #arcLabel
Cs0 f84 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f84 actionTable 'out=in;
' #txt
Cs0 f84 actionCode 'import ch.ivyteam.ivy.workflow.ui.cases.RunningCaseDisplayList.RunningCaseDisplayListPanel;
import ch.ivyteam.ivy.workflow.ui.cases.FinishedCaseDisplayList.FinishedCaseDisplayListPanel;
import com.ulcjava.base.application.ULCComponent;
import ch.ivyteam.ivy.richdialog.exec.panel.IRichDialogPanel;


// check if some instance of task list is already available
if (in.destinationDisplay.getComponentCount() > 0)
{
	List<ULCComponent> componentsList = in.destinationDisplay.getComponents().toList();
	Boolean found = false;

	for (ULCComponent currentComponent: componentsList)
	{
		if ((in.runningCaseMode && currentComponent instanceof RunningCaseDisplayListPanel) || 
			(!in.runningCaseMode && currentComponent instanceof FinishedCaseDisplayListPanel))
		{
			IRichDialogPanel currentPanel = currentComponent as IRichDialogPanel;
			currentPanel.getPanelAPI().unload();
		}
	}
}' #txt
Cs0 f84 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f84 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>close existing
case list 
instances</name>
        <nameStyle>35,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f84 1630 996 36 24 20 -2 #rect
Cs0 f84 @|RichDialogProcessStepIcon #fIcon
Cs0 f85 expr in #txt
Cs0 f85 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>unique case list
mode required</name>
        <nameStyle>30,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f85 1445 969 1648 996 #arcP
Cs0 f85 1 1648 984 #addKink
Cs0 f85 0 0.6582142830146315 0 17 #arcLabel
Cs0 f86 targetWindow THIS #txt
Cs0 f86 targetDisplay EXISTING:<%=in.destinationDisplay.displayId%> #txt
Cs0 f86 richDialogId ch.ivyteam.ivy.workflow.ui.cases.RunningCaseDisplayList #txt
Cs0 f86 startMethod start(ch.ivyteam.ivy.richdialog.widgets.displays.RTabbedDisplay,ch.ivyteam.ivy.workflow.IPropertyFilter,Number,Boolean) #txt
Cs0 f86 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f86 panelName <%=in.caseHierarchyContext.title%> #txt
Cs0 f86 requestActionDecl '<ch.ivyteam.ivy.richdialog.widgets.displays.RTabbedDisplay aCaseDisplayListParentDisplay, ch.ivyteam.ivy.workflow.IPropertyFilter aPropertyFilter, Number aCaseDisplayMode, Boolean aHasWfAdministratorPermissions> param;' #txt
Cs0 f86 requestActionCode 'param.aCaseDisplayListParentDisplay = in.destinationDisplay;
param.aPropertyFilter = in.caseHierarchyContext.propertyFilter;
param.aCaseDisplayMode = in.caseDisplayMode;
param.aHasWfAdministratorPermissions = in.hasWfAdministratorPermissions;' #txt
Cs0 f86 responseActionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f86 responseMappingAction 'out=in;
' #txt
Cs0 f86 windowConfiguration '* ' #txt
Cs0 f86 isAsynch true #txt
Cs0 f86 isInnerRd true #txt
Cs0 f86 isDialog false #txt
Cs0 f86 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>load 
running cases</name>
        <nameStyle>19,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f86 1414 1076 36 24 20 -2 #rect
Cs0 f86 @|RichDialogIcon #fIcon
Cs0 f73 expr out #txt
Cs0 f73 1432 1100 1432 1123 #arcP
Cs0 f96 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f96 actionTable 'out=in;
' #txt
Cs0 f96 actionCode 'import ch.ivyteam.ivy.workflow.ui.data.cases.CaseHierarchyTreeNodeValue;
import ch.ivyteam.ivy.workflow.IPropertyFilter;

Tree selectedTree = panel.caseHierarchyLayoutTree.selectedTreeNode;



if (selectedTree.value instanceof CaseHierarchyTreeNodeValue)
{

   // path from root to this tree
   List<Tree>  pathTreeList = selectedTree.getPath();


   // do not consider the root tree
   for (int i=1; i<pathTreeList.size(); i++)
   {
      Tree currentTree = pathTreeList.get(i);

      CaseHierarchyTreeNodeValue currentTreeNodeValue = currentTree.value as CaseHierarchyTreeNodeValue;


      if (currentTreeNodeValue.categoryCode is initialized)
      {
				out.caseHierarchyContext.propertyFilter = out.caseHierarchyContext.propertyFilter.and(
																											currentTreeNodeValue.property, 
																											ch.ivyteam.logicalexpression.RelationalOperator.EQUAL, 
																											currentTreeNodeValue.categoryCode);
      }
			else
			{
				out.caseHierarchyContext.propertyFilter = out.caseHierarchyContext.propertyFilter.and(
																											currentTreeNodeValue.property, 
																											ch.ivyteam.logicalexpression.RelationalOperator.IS, 
																											null);

			}


   }// end for

//(entry as ch.ivyteam.ivy.workflow.ui.data.task.TaskHierarchyTreeNodeValue).categoryName

	String displayedNodeValue = (selectedTree.value as CaseHierarchyTreeNodeValue).categoryName;
																
	out.caseHierarchyContext.title += " - " + displayedNodeValue;
	out.caseHierarchyContext.icon = "";
	out.caseHierarchyContext.toolTipText = out.caseHierarchyContext.title;

}' #txt
Cs0 f96 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f96 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>build the caseHierarchyContext 
and propertyFilter
accroding to node value object
from root to selected Tree</name>
        <nameStyle>108,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f96 1414 876 36 24 20 -2 #rect
Cs0 f96 @|RichDialogProcessStepIcon #fIcon
Cs0 f97 expr in #txt
Cs0 f97 1432 862 1432 876 #arcP
Cs0 f82 expr out #txt
Cs0 f82 1432 900 1432 954 #arcP
Cs0 f98 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f98 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Cs0 f98 1418 1026 28 28 14 0 #rect
Cs0 f98 @|AlternativeIcon #fIcon
Cs0 f87 expr in #txt
Cs0 f87 outCond in.runningCaseMode #txt
Cs0 f87 1432 1054 1432 1076 #arcP
Cs0 f88 targetWindow THIS #txt
Cs0 f88 targetDisplay <%=in.destinationDisplay.displayId%> #txt
Cs0 f88 richDialogId ch.ivyteam.ivy.workflow.ui.cases.FinishedCaseDisplayList #txt
Cs0 f88 startMethod start(ch.ivyteam.ivy.richdialog.widgets.displays.RTabbedDisplay,ch.ivyteam.ivy.workflow.IPropertyFilter,Number,Boolean) #txt
Cs0 f88 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f88 panelName <%=in.caseHierarchyContext.title%> #txt
Cs0 f88 requestActionDecl '<ch.ivyteam.ivy.richdialog.widgets.displays.RTabbedDisplay aCaseDisplayListParentDisplay, ch.ivyteam.ivy.workflow.IPropertyFilter aPropertyFilter, Number aCaseDisplayMode, Boolean aHasWfAdministratorPermissions> param;' #txt
Cs0 f88 requestMappingAction 'param.aCaseDisplayListParentDisplay=in.destinationDisplay;
param.aPropertyFilter=in.caseHierarchyContext.propertyFilter;
param.aCaseDisplayMode=in.caseDisplayMode;
param.aHasWfAdministratorPermissions=in.hasWfAdministratorPermissions;
' #txt
Cs0 f88 responseActionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f88 responseMappingAction 'out=in;
' #txt
Cs0 f88 windowConfiguration '#Fri Jul 18 18:14:07 CEST 2008
use_default=true
' #txt
Cs0 f88 isAsynch true #txt
Cs0 f88 isInnerRd true #txt
Cs0 f88 isDialog false #txt
Cs0 f88 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>load 
finished cases</name>
        <nameStyle>20,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f88 1630 1076 36 24 20 -2 #rect
Cs0 f88 @|RichDialogIcon #fIcon
Cs0 f101 expr in #txt
Cs0 f101 1445 1041 1648 1076 #arcP
Cs0 f101 1 1648 1056 #addKink
Cs0 f101 0 0.6249219481659769 0 0 #arcLabel
Cs0 f102 expr out #txt
Cs0 f102 1648 1088 1444 1133 #arcP
Cs0 f102 1 1648 1096 #addKink
Cs0 f102 1 0.37721589804476763 0 0 #arcLabel
Cs0 f89 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f89 actionTable 'out=in;
' #txt
Cs0 f89 actionCode 'import com.ulcjava.base.application.border.ULCTitledBorder;

panel.loadCaseListMenuItem.setText(ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/loadCaseListShortDesc"));
// panel.loadCaseListMenuItem.setToolTipText(ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/loadCaseListLongDesc"));
// panel.loadCaseListMenuItem.setIconUri("/ch/ivyteam/ivy/workflow/ui/case/images/loadCaseList16");


panel.refreshCaseListMenuItem.setText(ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/refreshCaseListShortDesc"));
// panel.refreshCaseListMenuItem.setToolTipText(ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/refreshCaseListLongDesc"));
// panel.refreshCaseListMenuItem.setIconUri("/ch/ivyteam/ivy/workflow/ui/case/images/refreshCaseList16");


panel.informOnCaseMenuItem.setText(ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/informOnCaseShortDesc"));
// panel.informOnCaseMenuItem.setToolTipText(ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/informOnCaseLongDesc"));
// panel.informOnCaseMenuItem.setIconUri("/ch/ivyteam/ivy/workflow/ui/case/images/informOnCase16");


panel.destroyCaseMenuItem.setText(ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/destroyCaseShortDesc"));
// panel.destroyCaseMenuItem.setToolTipText(ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/destroyCaseLongDesc"));
// panel.destroyCaseMenuItem.setIconUri("/ch/ivyteam/ivy/workflow/ui/case/images/destroyCase16");


panel.expandAllMenuItem.setText(ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/expandAllCasesShortDesc"));
// panel.expandAllMenuItem.setToolTipText(ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/expandAllCasesLongDesc"));
// panel.expandAllMenuItem.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/workflow/ui/case/images/expandAllCases16"));



// team cases
Boolean enableFindInvolvedCasesByRole = ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/parameters/enableFindInvolvedCasesByRole").equalsIgnoreCase("true");
panel.findInvolvedCasesByRoleRadioButton.visible = enableFindInvolvedCasesByRole;


// all environment''s cases
panel.findAllEnvironmentCasesRadioButton.visible = in.hasWfAdministratorPermissions;



// 
// panel.informOnCaseButton.visible = (in.hasPermissionCaseRead || in.hasWfAdministratorPermissions);
panel.destroyCaseButton.visible = (in.hasPermissionCaseDestroy || in.hasWfAdministratorPermissions);
' #txt
Cs0 f89 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f89 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>build popup menu (text, icons),
titled border with
CMS resources
display/hide team cases radio button
display/hide administrator radio button</name>
        <nameStyle>141,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f89 1006 124 36 24 20 -2 #rect
Cs0 f89 @|RichDialogProcessStepIcon #fIcon
Cs0 f109 expr out #txt
Cs0 f109 1024 66 1024 124 #arcP
Cs0 f109 0 0.281762103998495 0 0 #arcLabel
Cs0 f110 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f110 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Cs0 f110 1418 674 28 28 14 0 #rect
Cs0 f110 @|AlternativeIcon #fIcon
Cs0 f111 expr out #txt
Cs0 f111 1432 658 1432 674 #arcP
Cs0 f112 expr in #txt
Cs0 f112 1446 688 1445 1136 #arcP
Cs0 f112 1 1920 688 #addKink
Cs0 f112 2 1920 1136 #addKink
Cs0 f112 1 0.1488854958864925 0 0 #arcLabel
Cs0 f113 guid 11ADED5FE475E81F #txt
Cs0 f113 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f113 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f113 actionTable 'out=in;
' #txt
Cs0 f113 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>updateActionsForSelectedTreeNode</name>
        <nameStyle>32,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f113 2102 654 20 20 13 0 #rect
Cs0 f113 @|RichDialogProcessStartIcon #fIcon
Cs0 f114 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f114 2099 1075 26 26 14 0 #rect
Cs0 f114 @|RichDialogProcessEndIcon #fIcon
Cs0 f115 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f115 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Cs0 f115 2098 722 28 28 14 0 #rect
Cs0 f115 @|AlternativeIcon #fIcon
Cs0 f116 expr out #txt
Cs0 f116 2112 674 2112 722 #arcP
Cs0 f118 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f118 actionTable 'out=in;
' #txt
Cs0 f118 actionCode 'import ch.ivyteam.ivy.workflow.ui.utils.WorkflowUIAccessPermissionHandler;
import ch.ivyteam.ivy.workflow.ICase;
import ch.ivyteam.ivy.workflow.CaseState;

// load cases
panel.loadCaseListButton.enabled = false;
panel.loadCaseListMenuItem.enabled = false;

// refresh
panel.refreshButton.enabled = true;
panel.refreshCaseListMenuItem.enabled = true;


ICase selectedCase = (panel.caseHierarchyLayoutTree.getSelectedTreeNode().value as ICase);

// inform on case
panel.informOnCaseButton.enabled = in.hasPermissionCaseRead || in.hasWfAdministratorPermissions;
panel.informOnCaseMenuItem.enabled = panel.informOnCaseButton.enabled;


// destroy case
panel.destroyCaseButton.enabled = (in.hasPermissionCaseDestroy || in.hasWfAdministratorPermissions) && 
																	(selectedCase.getState().equals(CaseState.CREATED) || selectedCase.getState().equals(CaseState.RUNNING));
panel.destroyCaseMenuItem.enabled = panel.destroyCaseButton.enabled;' #txt
Cs0 f118 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f118 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>update actions 
to Case</name>
        <nameStyle>23,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f118 2094 892 36 24 20 -2 #rect
Cs0 f118 @|RichDialogProcessStepIcon #fIcon
Cs0 f117 expr out #txt
Cs0 f117 2112 916 2112 1075 #arcP
Cs0 f120 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f120 actionTable 'out=in;
' #txt
Cs0 f120 actionCode 'panel.loadCaseListButton.enabled = true;
panel.loadCaseListMenuItem.enabled = true;

panel.refreshButton.enabled = true;
panel.refreshCaseListMenuItem.enabled = true;

panel.informOnCaseButton.enabled = false;
panel.informOnCaseMenuItem.enabled = panel.informOnCaseButton.enabled;

panel.destroyCaseButton.enabled = panel.destroyCaseButton.enabled;
panel.destroyCaseMenuItem.enabled = false;' #txt
Cs0 f120 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f120 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>update actions to
case hierarchy node</name>
        <nameStyle>37,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f120 2214 932 36 24 20 -2 #rect
Cs0 f120 @|RichDialogProcessStepIcon #fIcon
Cs0 f122 expr out #txt
Cs0 f122 2232 956 2125 1088 #arcP
Cs0 f122 1 2232 1088 #addKink
Cs0 f122 0 0.718641775952403 0 0 #arcLabel
Cs0 f121 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f121 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Cs0 f121 2098 794 28 28 14 0 #rect
Cs0 f121 @|AlternativeIcon #fIcon
Cs0 f124 expr in #txt
Cs0 f124 outCond 'panel.caseHierarchyLayoutTree.getSelectedTreeNode() != null' #txt
Cs0 f124 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>selected 
tree node != null</name>
        <nameStyle>27,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f124 2112 750 2112 794 #arcP
Cs0 f119 expr in #txt
Cs0 f119 outCond 'panel.caseHierarchyLayoutTree.getSelectedTreeNode().value instanceof ch.ivyteam.ivy.workflow.ICase' #txt
Cs0 f119 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>it''s a ICase</name>
        <nameStyle>12,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f119 2112 822 2112 892 #arcP
Cs0 f125 expr in #txt
Cs0 f125 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>it''s a case hierarchy node
but not a ICase type</name>
        <nameStyle>47,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f125 2126 808 2232 932 #arcP
Cs0 f125 1 2232 808 #addKink
Cs0 f125 0 0.7596214839282894 0 0 #arcLabel
Cs0 f126 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f126 actionTable 'out=in;
' #txt
Cs0 f126 actionCode 'panel.loadCaseListButton.enabled = false;
panel.loadCaseListMenuItem.enabled = false;

panel.refreshButton.enabled = false;
panel.refreshCaseListMenuItem.enabled = false;

panel.informOnCaseButton.enabled = false;
panel.informOnCaseMenuItem.enabled = false;

panel.destroyCaseButton.enabled = false;
panel.destroyCaseMenuItem.enabled = false;' #txt
Cs0 f126 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f126 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>disable all 
actions buttons</name>
        <nameStyle>28,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f126 2318 988 36 24 20 -2 #rect
Cs0 f126 @|RichDialogProcessStepIcon #fIcon
Cs0 f127 expr in #txt
Cs0 f127 2126 736 2336 988 #arcP
Cs0 f127 1 2336 736 #addKink
Cs0 f127 1 0.2085490996230524 0 0 #arcLabel
Cs0 f123 expr out #txt
Cs0 f123 2336 1012 2125 1088 #arcP
Cs0 f123 1 2336 1088 #addKink
Cs0 f123 0 0.9528348028852178 0 0 #arcLabel
Cs0 f128 guid 11ADEF3A84644DB8 #txt
Cs0 f128 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f128 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f128 actionTable 'out=in;
' #txt
Cs0 f128 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>showCaseDetails</name>
        <nameStyle>15,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f128 2510 654 20 20 13 0 #rect
Cs0 f128 @|RichDialogProcessStartIcon #fIcon
Cs0 f129 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f129 2507 1075 26 26 14 0 #rect
Cs0 f129 @|RichDialogProcessEndIcon #fIcon
Cs0 f131 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f131 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Cs0 f131 2506 690 28 28 14 0 #rect
Cs0 f131 @|AlternativeIcon #fIcon
Cs0 f132 expr out #txt
Cs0 f132 2520 674 2520 690 #arcP
Cs0 f133 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f133 actionTable 'out=in;
' #txt
Cs0 f133 actionCode 'out.selectedCase = panel.caseHierarchyLayoutTree.getSelectedTreeNode().value as ch.ivyteam.ivy.workflow.ICase;' #txt
Cs0 f133 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f133 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get the selected case</name>
        <nameStyle>21,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f133 2502 796 36 24 20 -2 #rect
Cs0 f133 @|RichDialogProcessStepIcon #fIcon
Cs0 f135 expr in #txt
Cs0 f135 2534 704 2533 1088 #arcP
Cs0 f135 1 2816 704 #addKink
Cs0 f135 2 2816 1088 #addKink
Cs0 f135 1 0.42084049866237977 0 0 #arcLabel
Cs0 f136 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f136 actionTable 'out=in;
' #txt
Cs0 f136 actionCode 'import ch.ivyteam.ivy.workflow.ui.cases.CaseDisplay.CaseDisplayPanel;
import com.ulcjava.base.application.ULCComponent;
import ch.ivyteam.ivy.richdialog.widgets.displays.RTabbedDisplay;


RTabbedDisplay selectedTabbedDisplay;
List<ULCComponent> componentsList;


// display under this tab
selectedTabbedDisplay = in.destinationDisplay;
componentsList = in.destinationDisplay.getComponents().toList();

// reset the flag (task found on display to false)
out.caseAlreadyLoadedOnDisplay = false;


for (int i=0; i< componentsList.size(); i++)
{
	ULCComponent currentComponent = componentsList.get(i);
	
	if (currentComponent instanceof CaseDisplayPanel && (currentComponent as CaseDisplayPanel).getCaseIdentifier() == in.selectedCase.getIdentifier().intValue())
	{
		// task has been already loaded
		// it should be selected and refresh
		(currentComponent as CaseDisplayPanel).refresh();
		selectedTabbedDisplay.setSelectedComponent(currentComponent);
		out.caseAlreadyLoadedOnDisplay = true;
		
		// exit from the loop
		i = componentsList.size();
	}
	
}


' #txt
Cs0 f136 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f136 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check that 
this case has 
already be loaded 
if yes , refresh it, otherwise load it</name>
        <nameStyle>84,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f136 2502 852 36 24 20 -2 #rect
Cs0 f136 @|RichDialogProcessStepIcon #fIcon
Cs0 f137 expr out #txt
Cs0 f137 2520 820 2520 852 #arcP
Cs0 f138 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f138 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Cs0 f138 2506 914 28 28 14 0 #rect
Cs0 f138 @|AlternativeIcon #fIcon
Cs0 f139 expr out #txt
Cs0 f139 2520 876 2520 914 #arcP
Cs0 f140 targetWindow THIS #txt
Cs0 f140 targetDisplay EXISTING:<%=in.destinationDisplay.displayId%> #txt
Cs0 f140 richDialogId ch.ivyteam.ivy.workflow.ui.cases.CaseDisplay #txt
Cs0 f140 startMethod start(ch.ivyteam.ivy.workflow.ICase,ch.ivyteam.ivy.richdialog.widgets.displays.RTabbedDisplay) #txt
Cs0 f140 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f140 panelName <%=in.tabTitle%> #txt
Cs0 f140 requestActionDecl '<ch.ivyteam.ivy.workflow.ICase aCase, ch.ivyteam.ivy.richdialog.widgets.displays.RTabbedDisplay aParentDisplay> param;' #txt
Cs0 f140 requestMappingAction 'param.aCase=in.selectedCase;
param.aParentDisplay=in.destinationDisplay;
' #txt
Cs0 f140 requestActionCode 'in.tabTitle = in.selectedCase.getName() is initialized? 
						in.selectedCase.getName(): 
						ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/case") + " " + in.selectedCase.getIdentifier();' #txt
Cs0 f140 responseActionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f140 responseMappingAction 'out=in;
' #txt
Cs0 f140 windowConfiguration '* ' #txt
Cs0 f140 isAsynch true #txt
Cs0 f140 isInnerRd true #txt
Cs0 f140 isDialog false #txt
Cs0 f140 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Cs0 f140 2502 980 36 24 20 -2 #rect
Cs0 f140 @|RichDialogIcon #fIcon
Cs0 f141 expr in #txt
Cs0 f141 outCond !in.caseAlreadyLoadedOnDisplay #txt
Cs0 f141 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>load case information</name>
        <nameStyle>21,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f141 2520 942 2520 980 #arcP
Cs0 f130 expr out #txt
Cs0 f130 2520 1004 2520 1075 #arcP
Cs0 f142 expr in #txt
Cs0 f142 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>alredy loaded
and refreshed</name>
        <nameStyle>27,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f142 2534 928 2533 1088 #arcP
Cs0 f142 1 2624 928 #addKink
Cs0 f142 2 2624 1088 #addKink
Cs0 f142 1 0.29933833626150363 0 0 #arcLabel
Cs0 f143 guid 11ADF4A5A6D381BC #txt
Cs0 f143 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f143 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f143 actionTable 'out=in;
' #txt
Cs0 f143 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>destroyCase</name>
        <nameStyle>11,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f143 2902 654 20 20 13 0 #rect
Cs0 f143 @|RichDialogProcessStartIcon #fIcon
Cs0 f144 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f144 2899 1075 26 26 14 0 #rect
Cs0 f144 @|RichDialogProcessEndIcon #fIcon
Cs0 f146 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f146 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Cs0 f146 2898 690 28 28 14 0 #rect
Cs0 f146 @|AlternativeIcon #fIcon
Cs0 f147 expr out #txt
Cs0 f147 2912 674 2912 690 #arcP
Cs0 f148 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f148 actionTable 'out=in;
' #txt
Cs0 f148 actionCode 'import ch.ivyteam.ivy.workflow.ICase;

try
{
	out.selectedCase = panel.caseHierarchyLayoutTree.getSelectedTreeNode().value as ICase;
	
	out.selectedCase.destroy();
	
	// update the tree
	panel.caseHierarchyLayoutTree.getSelectedTreeNode().treeValueChanged();
}
catch (Exception ex)
{
	out.exception = ex;
}' #txt
Cs0 f148 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f148 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get the selected case
destroy it,
update the current case hierarchy tree node</name>
        <nameStyle>77,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f148 2894 940 36 24 22 -18 #rect
Cs0 f148 @|RichDialogProcessStepIcon #fIcon
Cs0 f150 expr in #txt
Cs0 f150 2926 704 2924 1087 #arcP
Cs0 f150 1 3232 704 #addKink
Cs0 f150 2 3232 1072 #addKink
Cs0 f150 1 0.3349687085773761 0 0 #arcLabel
Cs0 f145 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f145 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Cs0 f145 2898 770 28 28 14 0 #rect
Cs0 f145 @|AlternativeIcon #fIcon
Cs0 f152 expr in #txt
Cs0 f152 outCond 'panel.caseHierarchyLayoutTree.getSelectedTreeNode() != null && 
panel.caseHierarchyLayoutTree.getSelectedTreeNode().value instanceof ch.ivyteam.ivy.workflow.ICase' #txt
Cs0 f152 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>selection != null
and selection is a ICase type</name>
        <nameStyle>47,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f152 2912 718 2912 770 #arcP
Cs0 f155 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f155 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Cs0 f155 2506 738 28 28 14 0 #rect
Cs0 f155 @|AlternativeIcon #fIcon
Cs0 f158 expr in #txt
Cs0 f158 outCond 'panel.caseHierarchyLayoutTree.getSelectedTreeNode() != null && 
panel.caseHierarchyLayoutTree.getSelectedTreeNode().value instanceof ch.ivyteam.ivy.workflow.ICase' #txt
Cs0 f158 2520 718 2520 738 #arcP
Cs0 f134 expr in #txt
Cs0 f134 outCond in.hasPermissionCaseRead #txt
Cs0 f134 2520 766 2520 796 #arcP
Cs0 f38 expr out #txt
Cs0 f38 1728 82 1450 152 #arcP
Cs0 f38 1 1728 152 #addKink
Cs0 f38 1 0.3617086354357857 0 0 #arcLabel
Cs0 f163 expr out #txt
Cs0 f163 1864 82 1450 152 #arcP
Cs0 f163 1 1864 152 #addKink
Cs0 f163 1 0.4201433628302493 0 0 #arcLabel
Cs0 f164 expr out #txt
Cs0 f164 2000 82 1450 152 #arcP
Cs0 f164 1 2000 152 #addKink
Cs0 f164 1 0.0 0 0 #arcLabel
Cs0 f184 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f184 actionTable 'out=in;
' #txt
Cs0 f184 actionCode 'if (panel.caseFiltersSelectCollapsiblePane.collapsed)
{
	panel.caseFiltersSelectCollapsiblePane.collapsed = false;	
	panel.caseFiltersSelectRDC.setCaseDisplayMode(in.caseDisplayMode);
}
else
{
	panel.caseFiltersSelectCollapsiblePane.collapsed = true;
}' #txt
Cs0 f184 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f184 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set the new case display mode 
to caseFiltersRDC and expand it
if filter is currently enabled, disable it</name>
        <nameStyle>105,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f184 2582 308 36 24 20 -2 #rect
Cs0 f184 @|RichDialogProcessStepIcon #fIcon
Cs0 f37 guid 11B02C6D9A6CFDC8 #txt
Cs0 f37 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f37 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f37 actionTable 'out=in;
' #txt
Cs0 f37 actionCode panel.caseFiltersToggleButton.setSelected(false); #txt
Cs0 f37 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>filterDefinitionCanceled</name>
        <nameStyle>24,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f37 2174 46 20 20 13 0 #rect
Cs0 f37 @|RichDialogProcessStartIcon #fIcon
Cs0 f165 guid 11B02C6D9A66EB58 #txt
Cs0 f165 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f165 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f165 actionTable 'out=in;
' #txt
Cs0 f165 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>toggleCaseFilters</name>
        <nameStyle>17,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f165 2590 166 20 20 13 0 #rect
Cs0 f165 @|RichDialogProcessStartIcon #fIcon
Cs0 f166 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f166 actionTable 'out=in;
' #txt
Cs0 f166 actionCode 'panel.caseFiltersSelectCollapsiblePane.collapsed = true;' #txt
Cs0 f166 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f166 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>colapse
the filter area</name>
        <nameStyle>23,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f166 2166 116 36 24 20 -2 #rect
Cs0 f166 @|RichDialogProcessStepIcon #fIcon
Cs0 f167 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f167 2587 379 26 26 14 0 #rect
Cs0 f167 @|RichDialogProcessEndIcon #fIcon
Cs0 f168 guid 11B02C6D9A6AB699 #txt
Cs0 f168 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f168 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f168 actionTable 'out=in;
' #txt
Cs0 f168 actionCode 'import ch.ivyteam.ivy.workflow.ui.data.cases.CaseAvailableFilters;
import ch.ivyteam.ivy.richdialog.exec.restricted.RdPanelEvent;


Object attachment = (event as RdPanelEvent).getAttachment();

if (attachment instanceof CaseAvailableFilters)
{
	out.filterDefined = true;
	out.caseAvailableFilters = attachment as CaseAvailableFilters;
}' #txt
Cs0 f168 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>filterDefinitionConfirmed</name>
        <nameStyle>25,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f168 2334 46 20 20 13 0 #rect
Cs0 f168 @|RichDialogProcessStartIcon #fIcon
Cs0 f170 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f170 actionTable 'out=in;
' #txt
Cs0 f170 actionCode 'out.filterDefined = false;
out.filterEnabled = false;
' #txt
Cs0 f170 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f170 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>filter defined to false
filter enabled to false</name>
        <nameStyle>47,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f170 2166 76 36 24 20 -2 #rect
Cs0 f170 @|RichDialogProcessStepIcon #fIcon
Cs0 f173 expr out #txt
Cs0 f173 2184 66 2184 76 #arcP
Cs0 f174 expr out #txt
Cs0 f174 2184 100 2184 116 #arcP
Cs0 f175 expr out #txt
Cs0 f175 2600 332 2600 379 #arcP
Cs0 f176 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f176 actionTable 'out=in;
' #txt
Cs0 f176 actionCode 'out.caseHierarchyContext.propertyFilter = in.caseStatePropertyFilter;

// consider the user defined filter
if (in.filterDefined && in.filterEnabled)
{
	out.caseHierarchyContext.propertyFilter = in.caseHierarchyContext.propertyFilter.and(in.caseAvailableFilters.propertyFilter);
}

out.caseHierarchyContext.title = (in.runningCaseMode? 
																	ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/runningCasesShortDesc"):
																	ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/finishedCasesShortDesc"));' #txt
Cs0 f176 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f176 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set the case state to property filter
consider the user defined filter,
build the prefix (Running|Finished cases)</name>
        <nameStyle>113,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f176 1414 724 36 24 16 -8 #rect
Cs0 f176 @|RichDialogProcessStepIcon #fIcon
Cs0 f177 expr in #txt
Cs0 f177 outCond 'panel.caseHierarchyLayoutTree.getSelectedTreeNode() != null &&
!(panel.caseHierarchyLayoutTree.selectedTreeNode.value instanceof ch.ivyteam.ivy.workflow.ICase)' #txt
Cs0 f177 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>selection node != null</name>
        <nameStyle>22,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f177 1432 702 1432 724 #arcP
Cs0 f75 expr out #txt
Cs0 f75 1432 748 1432 786 #arcP
Cs0 f91 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f91 actionTable 'out=in;
' #txt
Cs0 f91 actionCode 'String displayedNodeValue = ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/allCases");
out.caseHierarchyContext.title += " - " + displayedNodeValue;
out.caseHierarchyContext.icon = "";
out.caseHierarchyContext.toolTipText = out.caseHierarchyContext.title;' #txt
Cs0 f91 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f91 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>build the title 
of &quot;All cases&quot;</name>
        <nameStyle>31,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f91 1774 876 36 24 20 -2 #rect
Cs0 f91 @|RichDialogProcessStepIcon #fIcon
Cs0 f179 expr in #txt
Cs0 f179 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>selected tree node
is a root</name>
        <nameStyle>28,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f179 1446 800 1792 876 #arcP
Cs0 f179 1 1792 800 #addKink
Cs0 f179 0 0.5907649637008802 0 0 #arcLabel
Cs0 f95 expr in #txt
Cs0 f95 outCond in.multipleCaseListMode #txt
Cs0 f95 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>multiple case list
mode required</name>
        <nameStyle>32,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f95 1432 982 1432 1026 #arcP
Cs0 f90 expr out #txt
Cs0 f90 1648 1020 1446 1040 #arcP
Cs0 f90 1 1648 1040 #addKink
Cs0 f90 1 0.403812593187997 0 0 #arcLabel
Cs0 f94 expr out #txt
Cs0 f94 1792 900 1446 968 #arcP
Cs0 f94 1 1792 968 #addKink
Cs0 f94 1 0.3139410645672364 0 0 #arcLabel
Cs0 f92 targetWindow NEW #txt
Cs0 f92 targetDisplay TOP #txt
Cs0 f92 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
Cs0 f92 startMethod askQuestionWithTitle(String,String,String,List<String>) #txt
Cs0 f92 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f92 panelName <%=in.confirmation%> #txt
Cs0 f92 requestActionDecl '<String icon, String questionTitle, String questionText, List<String> buttons> param;' #txt
Cs0 f92 requestMappingAction 'param.icon="question";
param.buttons=["yes", "no"];
' #txt
Cs0 f92 requestActionCode 'param.questionTitle = 
			ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/common/plainStrings/confirmation");
			
param.questionText = 
			ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/confirmDestroyCaseShortDesc");' #txt
Cs0 f92 responseActionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f92 responseMappingAction 'out=in;
' #txt
Cs0 f92 responseActionCode 'out.questionDialogPressedButton = result.pressedButton;' #txt
Cs0 f92 windowConfiguration '#Fri Aug 01 16:02:16 CEST 2008
height=150
maximized=false
centered=true
close_after_last_rd=true
resizable=true
width=500
title=<%\\=in.confirmation%>
' #txt
Cs0 f92 isAsynch false #txt
Cs0 f92 isInnerRd true #txt
Cs0 f92 isDialog true #txt
Cs0 f92 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>confirmation 
for destroy a case</name>
        <nameStyle>32,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f92 2894 844 36 24 20 -2 #rect
Cs0 f92 @|RichDialogIcon #fIcon
Cs0 f99 expr in #txt
Cs0 f99 outCond in.hasPermissionCaseDestroy #txt
Cs0 f99 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>permission
case destroy ok</name>
        <nameStyle>26,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f99 2912 798 2912 844 #arcP
Cs0 f103 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f103 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Cs0 f103 2898 890 28 28 14 0 #rect
Cs0 f103 @|AlternativeIcon #fIcon
Cs0 f104 expr out #txt
Cs0 f104 2912 868 2912 890 #arcP
Cs0 f100 expr in #txt
Cs0 f100 outCond in.questionDialogPressedButton.equalsIgnoreCase("yes") #txt
Cs0 f100 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>confirmed</name>
        <nameStyle>9,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f100 2912 918 2912 940 #arcP
Cs0 f105 expr in #txt
Cs0 f105 2926 904 2924 1085 #arcP
Cs0 f105 1 3048 904 #addKink
Cs0 f105 2 3048 1056 #addKink
Cs0 f105 1 0.285958549015051 0 0 #arcLabel
Cs0 f106 guid 11E456C63043A6F1 #txt
Cs0 f106 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f106 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f106 actionTable 'out=in;
' #txt
Cs0 f106 actionCode panel.caseHierarchyLayoutTree.expandAll(); #txt
Cs0 f106 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>expandAllTreeNodes</name>
        <nameStyle>18,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f106 2926 158 20 20 13 0 #rect
Cs0 f106 @|RichDialogProcessStartIcon #fIcon
Cs0 f107 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f107 2923 371 26 26 14 0 #rect
Cs0 f107 @|RichDialogProcessEndIcon #fIcon
Cs0 f108 expr out #txt
Cs0 f108 2936 178 2936 371 #arcP
Cs0 f149 guid 11E45FC772CCDCC7 #txt
Cs0 f149 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f149 broadcast ivy_systemevent_workflow_case_changed #txt
Cs0 f149 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f149 actionTable 'out=in;
' #txt
Cs0 f149 actionCode 'import ch.ivyteam.ivy.workflow.WorkflowSystemEventParameter;
import ch.ivyteam.ivy.workflow.ICase;
import java.util.Iterator;


Number broadcastedCaseStateChangedCaseId = param.workflowSystemEventParameter.getIdentifiers().get(0) as Number;

	// some ICase tree node should be updated
	Iterator iterator = in.caseHierarchyLayoutTree.iterator();
	
	Tree currentTree;
	Boolean found = false;
	while (iterator.hasNext() && !found)
	{
		currentTree = iterator.next() as Tree;
		if (currentTree.getValue() instanceof ICase)
		{
			if ((currentTree.getValue() as ICase).getIdentifier().compareTo(broadcastedCaseStateChangedCaseId) == 0)
			{
				currentTree.treeValueChanged();
				found = true;
			}
		}
	}' #txt
Cs0 f149 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>ivy_systemevent_workflow_case_changed</name>
        <nameStyle>37,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f149 3374 70 20 20 13 0 #rect
Cs0 f149 @|RichDialogBroadcastStartIcon #fIcon
Cs0 f151 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f151 3371 283 26 26 14 0 #rect
Cs0 f151 @|RichDialogProcessEndIcon #fIcon
Cs0 f178 expr out #txt
Cs0 f178 3384 90 3384 283 #arcP
Cs0 f180 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f180 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>exception ?</name>
        <nameStyle>11,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f180 2898 978 28 28 14 -10 #rect
Cs0 f180 @|AlternativeIcon #fIcon
Cs0 f181 expr out #txt
Cs0 f181 2912 964 2912 978 #arcP
Cs0 f154 expr in #txt
Cs0 f154 outCond 'in.#exception == null' #txt
Cs0 f154 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>no</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f154 2912 1006 2912 1075 #arcP
Cs0 f182 targetWindow NEW #txt
Cs0 f182 targetDisplay TOP #txt
Cs0 f182 richDialogId ch.ivyteam.ivy.addons.commondialogs.ErrorDialog #txt
Cs0 f182 startMethod showError(java.lang.Throwable,Boolean,Boolean) #txt
Cs0 f182 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f182 requestActionDecl '<java.lang.Throwable error, Boolean showCopyButton, Boolean showDetailButton> param;' #txt
Cs0 f182 requestMappingAction 'param.showCopyButton=true;
param.showDetailButton=true;
' #txt
Cs0 f182 requestActionCode 'param.error = new Exception(
	ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/destroyCaseFailed").toString() + ": " + in.selectedCase.getIdentifier(),
	in.exception);
	
ivy.log.error(ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/destroyCaseFailed").toString() + ": " + in.selectedCase.getIdentifier(),
	in.exception);' #txt
Cs0 f182 responseActionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f182 responseMappingAction 'out=in;
' #txt
Cs0 f182 windowConfiguration '#Mon Apr 27 00:40:49 CEST 2009
height=0
maximized=false
centered=true
close_after_last_rd=true
resizable=true
width=0
title=Error
' #txt
Cs0 f182 isAsynch false #txt
Cs0 f182 isInnerRd true #txt
Cs0 f182 isDialog true #txt
Cs0 f182 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>show
error dialog</name>
        <nameStyle>17,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f182 2950 1028 36 24 20 -2 #rect
Cs0 f182 @|RichDialogIcon #fIcon
Cs0 f183 expr in #txt
Cs0 f183 2920 998 2954 1028 #arcP
Cs0 f185 expr out #txt
Cs0 f185 2954 1052 2921 1079 #arcP
Cs0 f186 guid 120E7FB4EC3F82AE #txt
Cs0 f186 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f186 method initializeCaseHierarchyLayoutPrefferedIndex() #txt
Cs0 f186 disableUIEvents false #txt
Cs0 f186 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Cs0 f186 outParameterDecl '<> result;
' #txt
Cs0 f186 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>initializeCaseHierarchyLayoutPrefferedIndex()</name>
        <nameStyle>45,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f186 542 54 20 20 -37 -32 #rect
Cs0 f186 @|RichDialogMethodStartIcon #fIcon
Cs0 f187 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f187 539 275 26 26 14 0 #rect
Cs0 f187 @|RichDialogProcessEndIcon #fIcon
Cs0 f189 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f189 actionTable 'out=in;
' #txt
Cs0 f189 actionCode 'import ch.ivyteam.ivy.workflow.ui.utils.UserPropertyKeys;

Boolean hasUserReadPropertyPermission = ivy.session.hasPermission(ivy.request.getApplication().getSecurityDescriptor(), ch.ivyteam.ivy.security.IPermission.USER_READ_PROPERTY);

// cases
panel.caseHierarchyLayoutSelectRDC.setSelectedCaseHierarchyLayoutIndex(
	(hasUserReadPropertyPermission && ivy.session.getSessionUser().getProperty(UserPropertyKeys.CASES_HIERARCHY_LAYOUT_INDEX_PROPERTY_KEY).length() > 0)?
		ivy.session.getSessionUser().getProperty(UserPropertyKeys.CASES_HIERARCHY_LAYOUT_INDEX_PROPERTY_KEY).toNumber():
		ivy.cms.co(UserPropertyKeys.CASES_HIERARCHY_LAYOUT_INDEX_PROPERTY_CMS_DEFAULT_VALUE).toNumber());
		
		panel.caseHierarchyLayoutTree.autoSelectFirstEntry  = true;' #txt
Cs0 f189 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f189 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>initialize with preffered 
case hierarchy layout index</name>
        <nameStyle>54,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f189 534 148 36 24 20 -2 #rect
Cs0 f189 @|RichDialogProcessStepIcon #fIcon
Cs0 f190 expr out #txt
Cs0 f190 552 74 552 148 #arcP
Cs0 f188 expr out #txt
Cs0 f188 552 172 552 275 #arcP
Cs0 f191 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f191 actionTable 'out=in;
' #txt
Cs0 f191 actionCode 'if(in.caseAvailableFilters.#propertyFilter is initialized)
{
	out.filterDefined = true;
	out.filterEnabled = true;
}
else
{
	out.filterDefined = false;
	out.filterEnabled = false;
}' #txt
Cs0 f191 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f191 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>if defined
filter defined to false
filter enabled to false</name>
        <nameStyle>58,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f191 2326 76 36 24 20 -2 #rect
Cs0 f191 @|RichDialogProcessStepIcon #fIcon
Cs0 f192 expr out #txt
Cs0 f192 2344 66 2344 76 #arcP
Cs0 f192 0 0.9031232173067381 0 0 #arcLabel
Cs0 f171 expr out #txt
Cs0 f171 2344 100 2202 128 #arcP
Cs0 f171 1 2344 128 #addKink
Cs0 f171 1 0.29844628883517316 0 0 #arcLabel
Cs0 f193 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f193 actionTable 'out=in;
' #txt
Cs0 f193 actionCode '// ' #txt
Cs0 f193 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f193 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>infom the user
permission denied</name>
        <nameStyle>32,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f193 2678 876 36 24 20 -2 #rect
Cs0 f193 @|RichDialogProcessStepIcon #fIcon
Cs0 f161 expr in #txt
Cs0 f161 2534 752 2696 876 #arcP
Cs0 f161 1 2696 752 #addKink
Cs0 f161 0 0.7030924776439416 0 0 #arcLabel
Cs0 f160 expr out #txt
Cs0 f160 2696 900 2533 1088 #arcP
Cs0 f160 1 2696 1088 #addKink
Cs0 f160 0 0.9468351354077693 0 0 #arcLabel
Cs0 f159 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f159 actionTable 'out=in;
' #txt
Cs0 f159 actionCode '// ' #txt
Cs0 f159 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f159 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>infom the user
permission denied</name>
        <nameStyle>32,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f159 3086 932 36 24 20 -2 #rect
Cs0 f159 @|RichDialogProcessStepIcon #fIcon
Cs0 f153 expr out #txt
Cs0 f153 3104 956 2924 1086 #arcP
Cs0 f153 1 3104 1064 #addKink
Cs0 f153 1 0.2473346949921866 0 0 #arcLabel
Cs0 f195 expr in #txt
Cs0 f195 2926 784 3104 932 #arcP
Cs0 f195 1 3104 784 #addKink
Cs0 f195 0 0.7294135661252886 0 0 #arcLabel
Cs0 f76 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f76 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>case filters
is selected?</name>
        <nameStyle>25,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f76 2586 218 28 28 14 0 #rect
Cs0 f76 @|AlternativeIcon #fIcon
Cs0 f156 expr out #txt
Cs0 f156 2600 186 2600 218 #arcP
Cs0 f93 expr in #txt
Cs0 f93 outCond panel.caseFiltersToggleButton.isSelected() #txt
Cs0 f93 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f93 2600 246 2600 308 #arcP
Cs0 f157 expr out #txt
Cs0 f157 2184 140 1450 152 #arcP
Cs0 f157 1 2184 152 #addKink
Cs0 f157 1 0.48243559718969553 0 0 #arcLabel
Cs0 f172 expr in #txt
Cs0 f172 2586 232 2202 96 #arcP
Cs0 f172 1 2512 232 #addKink
Cs0 f172 1 0.04019693874620635 0 0 #arcLabel
Cs0 f36 guid 1292753B9B02B3B1 #txt
Cs0 f36 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f36 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f36 actionTable 'out=in;
' #txt
Cs0 f36 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh</name>
        <nameStyle>7,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f36 1534 70 20 20 13 0 #rect
Cs0 f36 @|RichDialogProcessStartIcon #fIcon
Cs0 f169 actionDecl 'ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData out;
' #txt
Cs0 f169 actionTable 'out=in;
' #txt
Cs0 f169 actionCode panel.caseFiltersSelectRDC.refreshCaseProcessCategories(); #txt
Cs0 f169 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f169 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh case categories
of filters</name>
        <nameStyle>34,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f169 1526 108 36 24 20 -2 #rect
Cs0 f169 @|RichDialogProcessStepIcon #fIcon
Cs0 f194 expr out #txt
Cs0 f194 1544 90 1544 108 #arcP
Cs0 f162 expr out #txt
Cs0 f162 1544 132 1450 151 #arcP
Cs0 f162 1 1544 144 #addKink
Cs0 f162 1 0.34100031799904607 0 0 #arcLabel
Cs0 f196 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f196 1418 538 28 28 14 0 #rect
Cs0 f196 @|AlternativeIcon #fIcon
Cs0 f197 expr out #txt
Cs0 f197 1232 444 1420 550 #arcP
Cs0 f197 1 1232 512 #addKink
Cs0 f197 1 0.27630520271975495 0 0 #arcLabel
Cs0 f19 expr out #txt
Cs0 f19 1040 444 1419 551 #arcP
Cs0 f19 1 1040 528 #addKink
Cs0 f19 1 0.1978495288359874 0 0 #arcLabel
Cs0 f17 expr out #txt
Cs0 f17 856 436 1418 552 #arcP
Cs0 f17 1 856 552 #addKink
Cs0 f17 1 0.3092412166948326 0 0 #arcLabel
Cs0 f16 expr out #txt
Cs0 f16 1616 444 1444 550 #arcP
Cs0 f16 1 1616 512 #addKink
Cs0 f16 1 0.29670705027713784 0 0 #arcLabel
Cs0 f23 expr out #txt
Cs0 f23 1816 444 1445 551 #arcP
Cs0 f23 1 1816 520 #addKink
Cs0 f23 1 0.33194152072124145 0 0 #arcLabel
Cs0 f27 expr out #txt
Cs0 f27 2016 444 1445 551 #arcP
Cs0 f27 1 2016 528 #addKink
Cs0 f27 1 0.3609044357048956 0 0 #arcLabel
Cs0 f29 expr in #txt
Cs0 f29 outCond 'in.caseHierarchyLayoutSelectedIndex < 0 || in.caseHierarchyLayoutSelectedIndex > 6' #txt
Cs0 f29 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>case hierarchy layout index 
has invalid value  &lt; 0 || &gt; 6</name>
        <nameStyle>58,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Cs0 f29 1446 208 1446 552 #arcP
Cs0 f29 1 2192 208 #addKink
Cs0 f29 2 2192 552 #addKink
Cs0 f29 0 0.7472924187725631 0 -1 #arcLabel
Cs0 f41 expr out #txt
Cs0 f41 1432 444 1432 538 #arcP
Cs0 f41 0 0.40592719056425014 0 0 #arcLabel
Cs0 f21 expr in #txt
Cs0 f21 1432 566 1432 587 #arcP
Cs0 f5 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f5 1014 270 20 20 13 0 #rect
Cs0 f5 @|RichDialogProcessEndIcon #fIcon
Cs0 f8 type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
Cs0 f8 422 278 20 20 13 0 #rect
Cs0 f8 @|RichDialogProcessEndIcon #fIcon
Cs0 f198 expr out #txt
Cs0 f198 432 74 432 278 #arcP
Cs0 f198 0 0.25262471631581684 0 0 #arcLabel
Cs0 f56 expr out #txt
Cs0 f56 1024 148 1024 270 #arcP
Cs0 f56 0 0.3476171239975997 0 0 #arcLabel
>Proto Cs0 .type ch.ivyteam.ivy.workflow.ui.cases.CaseSearch.CaseSearchData #txt
>Proto Cs0 .processKind RICH_DIALOG #txt
>Proto Cs0 .ui2RdDataAction 'out.sortByPriority=panel.sortByPriorityCheckBox.selected;
' #txt
>Proto Cs0 .rdData2UIAction 'panel.caseFiltersToggleButton.toolTipText=(in.#filterDefined? 

ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/common/plainStrings/youDefinedFollowingFilters") +
"<table>" + 

	"<tr><th align=''left''>" + ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/caseDisplayMode") + "</th><td>" + 
	+ ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/caseDisplayMode" + in.caseAvailableFilters.caseDisplayMode +  "ShortDesc") + "</td></tr>" +  

IF((in.caseAvailableFilters.caseNameFilterIsDefined), 
   "<tr><th align=''left''>" + ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/common/plainStrings/nameContains") + "</th><td>" + 
      in.caseAvailableFilters.caseNameFilter.value + "<br>",
   "")
+

IF((in.caseAvailableFilters.businessStartTimestampFilterIsDefined), 
   "<tr><th align=''left''>" + ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/common/plainStrings/startedFrom") + "</th><td>" + 
      in.caseAvailableFilters.businessStartTimestampFilter.value + "</td></tr>",
   "")
+
   
IF((in.caseAvailableFilters.businessMilestoneTimestampFilterIsDefined), 
   "<tr><th align=''left''>" + ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/common/plainStrings/toFinishBefore") + "</th><td>" + 
      in.caseAvailableFilters.businessMilestoneTimestampFilter.value + "</td></tr>",
   "")
+

IF((in.caseAvailableFilters.businessCreatorUserFilterIsDefined), 
   "<tr><th align=''left''>" + ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/otherBusinessData/plainStrings/businessCreatorUserShortContains") + "</th><td>" + 
      in.caseAvailableFilters.businessCreatorUserFilter.value + "</td></tr>",
   "")
+ 

IF((in.caseAvailableFilters.caseProcessCategoriesFilterIsDefined), 
   "<tr><th align=''left''>" + ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/caseProcessCategoryName") + "</th><td>" + 
      in.caseAvailableFilters.caseProcessCategoriesFilter.category.categoryName + "</td></tr>",
   "")
+

IF ((in.caseAvailableFilters.caseProcessesFilterIsDefined),
   "<tr><th align=''left''>" + ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/caseProcessName") + "</th><td>" + 
      in.caseAvailableFilters.caseProcessesFilter.category.categoryName + "</td></tr>", 
   "")
+

IF ((in.caseAvailableFilters.caseTypesFilterIsDefined),
   "<tr><th align=''left''>" + ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/caseTypeName") + "</th><td>" + 
      in.caseAvailableFilters.caseTypesFilter.category.categoryName + "</td></tr>",
   "")
+

IF ((in.caseAvailableFilters.caseSubTypesFilterIsDefined),
   "<tr><th align=''left''>" + ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/plainStrings/caseSubTypeName") + "</th><td>" + 
      in.caseAvailableFilters.caseSubTypesFilter.category.categoryName + "</td></tr>", 
   "")
+

IF((in.caseAvailableFilters.businessMainContactTypeFilterIsDefined), 
   "<tr><th align=''left''>" + ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/businessMainContact/plainStrings/typeLong") + "</th><td>" + 
      (in.caseAvailableFilters.businessMainContactTypeFilter.relationalOperator.compareTo(ch.ivyteam.logicalexpression.RelationalOperator.LIKE) == 0? "=":
		(in.caseAvailableFilters.businessMainContactTypeFilter.relationalOperator.compareTo(ch.ivyteam.logicalexpression.RelationalOperator.UNEQUAL) == 0? "<>": in.caseAvailableFilters.businessMainContactTypeFilter.relationalOperator.toString())) + " " + 
      in.caseAvailableFilters.businessMainContactTypeFilter.value + "</td></tr>",
   "")
+ 

IF((in.caseAvailableFilters.businessMainContactIdFilterIsDefined), 
   "<tr><th align=''left''>" + ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/businessMainContact/plainStrings/idLong") + "</th><td>" + 
      (in.caseAvailableFilters.businessMainContactIdFilter.relationalOperator.compareTo(ch.ivyteam.logicalexpression.RelationalOperator.LIKE) == 0? "=":
		(in.caseAvailableFilters.businessMainContactIdFilter.relationalOperator.compareTo(ch.ivyteam.logicalexpression.RelationalOperator.UNEQUAL) == 0? "<>": in.caseAvailableFilters.businessMainContactIdFilter.relationalOperator.toString())) + " " + 
      in.caseAvailableFilters.businessMainContactIdFilter.value + "</td></tr>",
   "")
+   

IF((in.caseAvailableFilters.businessMainContactNameFilterIsDefined), 
   "<tr><th align=''left''>" + ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/businessMainContact/plainStrings/nameContains") + "</th><td>" + 
      in.caseAvailableFilters.businessMainContactNameFilter.value + "</td></tr>",
   "")
+   

IF((in.caseAvailableFilters.businessCorrespondentContactIdFilterIsDefined), 
   "<tr><th align=''left''>" + ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/correspondentContact/plainStrings/id") + "</th><td>" + 
      (in.caseAvailableFilters.businessCorrespondentContactIdFilter.relationalOperator.compareTo(ch.ivyteam.logicalexpression.RelationalOperator.LIKE) == 0? "=":
	(in.caseAvailableFilters.businessCorrespondentContactIdFilter.relationalOperator.compareTo(ch.ivyteam.logicalexpression.RelationalOperator.UNEQUAL) == 0? "<>": in.caseAvailableFilters.businessCorrespondentContactIdFilter.relationalOperator.toString())) + " " + 
      in.caseAvailableFilters.businessCorrespondentContactIdFilter.value + "</td></tr>",
   "")
+

IF((in.caseAvailableFilters.businessObjectCodeFilterIsDefined), 
   "<tr><th align=''left''>" + ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/businessObject/plainStrings/codeShort") + "</th><td>" + 
      (in.caseAvailableFilters.businessObjectCodeFilter.relationalOperator.compareTo(ch.ivyteam.logicalexpression.RelationalOperator.LIKE) == 0? "=":
		(in.caseAvailableFilters.businessObjectCodeFilter.relationalOperator.compareTo(ch.ivyteam.logicalexpression.RelationalOperator.UNEQUAL) == 0? "<>": in.caseAvailableFilters.businessObjectCodeFilter.relationalOperator.toString())) + " " + 
      in.caseAvailableFilters.businessObjectCodeFilter.value + "</td></tr>",
   "")
+

IF((in.caseAvailableFilters.businessObjectNameFilterIsDefined), 
   "<tr><th align=''left''>" + ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/case/businessObject/plainStrings/nameContains") + "</th><td>" + 
      in.caseAvailableFilters.businessObjectNameFilter.value + "</td></tr>",
   "")
+

"</table>"

   :
   
   ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/common/plainStrings/filterNotDefined"));
panel.caseHierarchyLayoutTree.treeData=in.caseHierarchyLayoutTree;
panel.destroyCaseButton.visible=in.runningCaseMode;
panel.destroyCaseMenuItem.visible=in.runningCaseMode;
panel.footerLabel.text=in.footerMessage;
panel.sortByPriorityCheckBox.selected=in.sortByPriority;
' #txt
>Proto Cs0 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <swimlaneLabel>Start methods</swimlaneLabel>
        <swimlaneLabel>Methods</swimlaneLabel>
        <swimlaneLabel>Events</swimlaneLabel>
        <swimlaneLabel>Accepted broadcasts</swimlaneLabel>
        <swimlaneLabel></swimlaneLabel>
    </language>
    <swimlaneSize>398</swimlaneSize>
    <swimlaneSize>400</swimlaneSize>
    <swimlaneSize>2534</swimlaneSize>
    <swimlaneSize>358</swimlaneSize>
    <swimlaneColor>-16711732</swimlaneColor>
    <swimlaneColor>-16737895</swimlaneColor>
    <swimlaneColor>-3355393</swimlaneColor>
    <swimlaneColor>-6710785</swimlaneColor>
</elementInfo>
' #txt
>Proto Cs0 -8 -8 16 16 16 26 #rect
>Proto Cs0 '' #fIcon
Cs0 f6 out f11 tail #connect
Cs0 f11 head f10 mainIn #connect
Cs0 f6 out f15 tail #connect
Cs0 f15 head f9 mainIn #connect
Cs0 f6 out f18 tail #connect
Cs0 f18 head f12 mainIn #connect
Cs0 f6 out f20 tail #connect
Cs0 f20 head f13 mainIn #connect
Cs0 f6 out f22 tail #connect
Cs0 f22 head f14 mainIn #connect
Cs0 f6 out f26 tail #connect
Cs0 f26 head f24 mainIn #connect
Cs0 f6 out f28 tail #connect
Cs0 f28 head f25 mainIn #connect
Cs0 f30 mainOut f2 tail #connect
Cs0 f2 head f1 mainIn #connect
Cs0 f3 mainOut f35 tail #connect
Cs0 f35 head f68 mainIn #connect
Cs0 f39 mainOut f40 tail #connect
Cs0 f40 head f68 mainIn #connect
Cs0 f42 out f45 tail #connect
Cs0 f45 head f44 mainIn #connect
Cs0 f44 mainOut f46 tail #connect
Cs0 f46 head f6 in #connect
Cs0 f42 out f7 tail #connect
Cs0 f7 head f6 in #connect
Cs0 f68 mainOut f48 tail #connect
Cs0 f48 head f47 in #connect
Cs0 f43 head f42 in #connect
Cs0 f0 mainOut f52 tail #connect
Cs0 f52 head f51 mainIn #connect
Cs0 f51 mainOut f31 tail #connect
Cs0 f31 head f30 mainIn #connect
Cs0 f53 mainOut f55 tail #connect
Cs0 f55 head f30 mainIn #connect
Cs0 f57 mainOut f61 tail #connect
Cs0 f61 head f60 in #connect
Cs0 f60 out f63 tail #connect
Cs0 f63 head f62 in #connect
Cs0 f60 out f64 tail #connect
Cs0 f64 head f58 mainIn #connect
Cs0 f62 out f66 tail #connect
Cs0 f66 head f65 mainIn #connect
Cs0 f65 mainOut f67 tail #connect
Cs0 f67 head f58 mainIn #connect
Cs0 f62 out f70 tail #connect
Cs0 f70 head f69 mainIn #connect
Cs0 f69 mainOut f59 tail #connect
Cs0 f59 head f58 mainIn #connect
Cs0 f74 out f78 tail #connect
Cs0 f78 head f77 in #connect
Cs0 f80 head f79 mainIn #connect
Cs0 f77 out f80 tail #connect
Cs0 f79 mainOut f83 tail #connect
Cs0 f83 head f81 in #connect
Cs0 f85 head f84 mainIn #connect
Cs0 f86 mainOut f73 tail #connect
Cs0 f73 head f72 mainIn #connect
Cs0 f77 out f97 tail #connect
Cs0 f97 head f96 mainIn #connect
Cs0 f96 mainOut f82 tail #connect
Cs0 f82 head f81 in #connect
Cs0 f98 out f87 tail #connect
Cs0 f87 head f86 mainIn #connect
Cs0 f98 out f101 tail #connect
Cs0 f101 head f88 mainIn #connect
Cs0 f88 mainOut f102 tail #connect
Cs0 f102 head f72 mainIn #connect
Cs0 f49 mainOut f109 tail #connect
Cs0 f109 head f89 mainIn #connect
Cs0 f71 mainOut f111 tail #connect
Cs0 f111 head f110 in #connect
Cs0 f112 head f72 mainIn #connect
Cs0 f113 mainOut f116 tail #connect
Cs0 f116 head f115 in #connect
Cs0 f118 mainOut f117 tail #connect
Cs0 f117 head f114 mainIn #connect
Cs0 f120 mainOut f122 tail #connect
Cs0 f122 head f114 mainIn #connect
Cs0 f115 out f124 tail #connect
Cs0 f124 head f121 in #connect
Cs0 f121 out f119 tail #connect
Cs0 f119 head f118 mainIn #connect
Cs0 f121 out f125 tail #connect
Cs0 f125 head f120 mainIn #connect
Cs0 f115 out f127 tail #connect
Cs0 f127 head f126 mainIn #connect
Cs0 f126 mainOut f123 tail #connect
Cs0 f123 head f114 mainIn #connect
Cs0 f128 mainOut f132 tail #connect
Cs0 f132 head f131 in #connect
Cs0 f135 head f129 mainIn #connect
Cs0 f133 mainOut f137 tail #connect
Cs0 f137 head f136 mainIn #connect
Cs0 f136 mainOut f139 tail #connect
Cs0 f139 head f138 in #connect
Cs0 f138 out f141 tail #connect
Cs0 f141 head f140 mainIn #connect
Cs0 f140 mainOut f130 tail #connect
Cs0 f130 head f129 mainIn #connect
Cs0 f138 out f142 tail #connect
Cs0 f142 head f129 mainIn #connect
Cs0 f143 mainOut f147 tail #connect
Cs0 f147 head f146 in #connect
Cs0 f150 head f144 mainIn #connect
Cs0 f146 out f152 tail #connect
Cs0 f152 head f145 in #connect
Cs0 f146 out f150 tail #connect
Cs0 f131 out f158 tail #connect
Cs0 f158 head f155 in #connect
Cs0 f131 out f135 tail #connect
Cs0 f155 out f134 tail #connect
Cs0 f134 head f133 mainIn #connect
Cs0 f32 mainOut f38 tail #connect
Cs0 f38 head f68 mainIn #connect
Cs0 f33 mainOut f163 tail #connect
Cs0 f163 head f68 mainIn #connect
Cs0 f34 mainOut f164 tail #connect
Cs0 f164 head f68 mainIn #connect
Cs0 f37 mainOut f173 tail #connect
Cs0 f173 head f170 mainIn #connect
Cs0 f170 mainOut f174 tail #connect
Cs0 f174 head f166 mainIn #connect
Cs0 f184 mainOut f175 tail #connect
Cs0 f175 head f167 mainIn #connect
Cs0 f110 out f177 tail #connect
Cs0 f177 head f176 mainIn #connect
Cs0 f110 out f112 tail #connect
Cs0 f176 mainOut f75 tail #connect
Cs0 f75 head f74 in #connect
Cs0 f74 out f179 tail #connect
Cs0 f179 head f91 mainIn #connect
Cs0 f81 out f95 tail #connect
Cs0 f95 head f98 in #connect
Cs0 f81 out f85 tail #connect
Cs0 f84 mainOut f90 tail #connect
Cs0 f90 head f98 in #connect
Cs0 f91 mainOut f94 tail #connect
Cs0 f94 head f81 in #connect
Cs0 f145 out f99 tail #connect
Cs0 f99 head f92 mainIn #connect
Cs0 f92 mainOut f104 tail #connect
Cs0 f104 head f103 in #connect
Cs0 f103 out f100 tail #connect
Cs0 f100 head f148 mainIn #connect
Cs0 f103 out f105 tail #connect
Cs0 f105 head f144 mainIn #connect
Cs0 f106 mainOut f108 tail #connect
Cs0 f108 head f107 mainIn #connect
Cs0 f149 mainOut f178 tail #connect
Cs0 f178 head f151 mainIn #connect
Cs0 f148 mainOut f181 tail #connect
Cs0 f181 head f180 in #connect
Cs0 f180 out f154 tail #connect
Cs0 f154 head f144 mainIn #connect
Cs0 f180 out f183 tail #connect
Cs0 f183 head f182 mainIn #connect
Cs0 f182 mainOut f185 tail #connect
Cs0 f185 head f144 mainIn #connect
Cs0 f186 mainOut f190 tail #connect
Cs0 f190 head f189 mainIn #connect
Cs0 f189 mainOut f188 tail #connect
Cs0 f188 head f187 mainIn #connect
Cs0 f168 mainOut f192 tail #connect
Cs0 f192 head f191 mainIn #connect
Cs0 f191 mainOut f171 tail #connect
Cs0 f171 head f166 mainIn #connect
Cs0 f155 out f161 tail #connect
Cs0 f161 head f193 mainIn #connect
Cs0 f193 mainOut f160 tail #connect
Cs0 f160 head f129 mainIn #connect
Cs0 f159 mainOut f153 tail #connect
Cs0 f153 head f144 mainIn #connect
Cs0 f145 out f195 tail #connect
Cs0 f195 head f159 mainIn #connect
Cs0 f165 mainOut f156 tail #connect
Cs0 f156 head f76 in #connect
Cs0 f76 out f93 tail #connect
Cs0 f93 head f184 mainIn #connect
Cs0 f166 mainOut f157 tail #connect
Cs0 f157 head f68 mainIn #connect
Cs0 f76 out f172 tail #connect
Cs0 f172 head f170 mainIn #connect
Cs0 f36 mainOut f194 tail #connect
Cs0 f194 head f169 mainIn #connect
Cs0 f169 mainOut f162 tail #connect
Cs0 f162 head f68 mainIn #connect
Cs0 f12 mainOut f197 tail #connect
Cs0 f197 head f196 in #connect
Cs0 f9 mainOut f19 tail #connect
Cs0 f19 head f196 in #connect
Cs0 f10 mainOut f17 tail #connect
Cs0 f17 head f196 in #connect
Cs0 f14 mainOut f16 tail #connect
Cs0 f16 head f196 in #connect
Cs0 f24 mainOut f23 tail #connect
Cs0 f23 head f196 in #connect
Cs0 f25 mainOut f27 tail #connect
Cs0 f27 head f196 in #connect
Cs0 f47 out f29 tail #connect
Cs0 f29 head f196 in #connect
Cs0 f47 out f43 tail #connect
Cs0 f13 mainOut f41 tail #connect
Cs0 f41 head f196 in #connect
Cs0 f196 out f21 tail #connect
Cs0 f21 head f4 mainIn #connect
Cs0 f54 mainOut f198 tail #connect
Cs0 f198 head f8 mainIn #connect
Cs0 f89 mainOut f56 tail #connect
Cs0 f56 head f5 mainIn #connect
