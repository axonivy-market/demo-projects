[Ivy]
[>Created: Tue Jan 25 09:59:32 CET 2011]
116A9BF16D47762C 3.15 #module
>Proto >Proto Collection #zClass
Ts0 TaskInformationDisplayProcess Big #zClass
Ts0 RD #cInfo
Ts0 #process
Ts0 @AnnotationInP-0n ai ai #zField
Ts0 @TextInP .xml .xml #zField
Ts0 @TextInP .responsibility .responsibility #zField
Ts0 @TextInP .resExport .resExport #zField
Ts0 @TextInP .type .type #zField
Ts0 @TextInP .processKind .processKind #zField
Ts0 @TextInP .ui2RdDataAction .ui2RdDataAction #zField
Ts0 @TextInP .rdData2UIAction .rdData2UIAction #zField
Ts0 @MessageFlowInP-0n messageIn messageIn #zField
Ts0 @MessageFlowOutP-0n messageOut messageOut #zField
Ts0 @RichDialogInitStart f0 '' #zField
Ts0 @RichDialogProcessEnd f1 '' #zField
Ts0 @RichDialogProcessEnd f6 '' #zField
Ts0 @RichDialogMethodStart f22 '' #zField
Ts0 @RichDialogProcessStep f31 '' #zField
Ts0 @RichDialogProcessStart f37 '' #zField
Ts0 @RichDialogProcessEnd f38 '' #zField
Ts0 @Alternative f73 '' #zField
Ts0 @RichDialogBroadcastStart f76 '' #zField
Ts0 @RichDialogEnd f77 '' #zField
Ts0 @Alternative f79 '' #zField
Ts0 @PushWFArc f80 '' #zField
Ts0 @PushWFArc f78 '' #zField
Ts0 @RichDialogProcessEnd f81 '' #zField
Ts0 @RichDialogBroadcastStart f83 '' #zField
Ts0 @RichDialogEnd f87 '' #zField
Ts0 @Alternative f93 '' #zField
Ts0 @PushWFArc f94 '' #zField
Ts0 @PushWFArc f88 '' #zField
Ts0 @RichDialogProcessEnd f95 '' #zField
Ts0 @PushWFArc f96 '' #zField
Ts0 @RichDialogMethodStart f111 '' #zField
Ts0 @RichDialogMethodStart f116 '' #zField
Ts0 @PushWFArc f117 '' #zField
Ts0 @RichDialogProcessStart f118 '' #zField
Ts0 @RichDialogProcessStep f121 '' #zField
Ts0 @Alternative f122 '' #zField
Ts0 @PushWFArc f123 '' #zField
Ts0 @PushWFArc f124 '' #zField
Ts0 @RichDialogProcessStep f126 '' #zField
Ts0 @PushWFArc f127 '' #zField
Ts0 @RichDialogProcessStart f128 '' #zField
Ts0 @RichDialog f131 '' #zField
Ts0 @RichDialogProcessStep f135 '' #zField
Ts0 @Alternative f137 '' #zField
Ts0 @PushWFArc f138 '' #zField
Ts0 @PushWFArc f136 '' #zField
Ts0 @RichDialogFireEvent f140 '' #zField
Ts0 @RichDialogProcessStep f142 '' #zField
Ts0 @RichDialogEnd f144 '' #zField
Ts0 @PushWFArc f145 '' #zField
Ts0 @RichDialogEnd f129 '' #zField
Ts0 @RichDialogProcessEnd f119 '' #zField
Ts0 @RichDialogProcessEnd f125 '' #zField
Ts0 @PushWFArc f130 '' #zField
Ts0 @RichDialogProcessStart f120 '' #zField
Ts0 @RichDialog f11 '' #zField
Ts0 @Alternative f12 '' #zField
Ts0 @PushWFArc f13 '' #zField
Ts0 @PushWFArc f23 '' #zField
Ts0 @PushWFArc f24 '' #zField
Ts0 @RichDialogProcessStart f27 '' #zField
Ts0 @PushWFArc f47 '' #zField
Ts0 @PushWFArc f35 '' #zField
Ts0 @Alternative f52 '' #zField
Ts0 @PushWFArc f53 '' #zField
Ts0 @PushWFArc f21 '' #zField
Ts0 @PushWFArc f74 '' #zField
Ts0 @RichDialogBroadcastStart f75 '' #zField
Ts0 @PushWFArc f97 '' #zField
Ts0 @Alternative f7 '' #zField
Ts0 @PushWFArc f17 '' #zField
Ts0 @Alternative f18 '' #zField
Ts0 @PushWFArc f19 '' #zField
Ts0 @PushWFArc f20 '' #zField
Ts0 @PushWFArc f49 '' #zField
Ts0 @RichDialogEnd f66 '' #zField
Ts0 @Alternative f67 '' #zField
Ts0 @RichDialogProcessStart f68 '' #zField
Ts0 @RichDialogProcessEnd f91 '' #zField
Ts0 @RichDialogProcessStep f92 '' #zField
Ts0 @RichDialogProcessStep f98 '' #zField
Ts0 @PushWFArc f100 '' #zField
Ts0 @PushWFArc f101 '' #zField
Ts0 @PushWFArc f104 '' #zField
Ts0 @PushWFArc f105 '' #zField
Ts0 @Alternative f86 '' #zField
Ts0 @RichDialog f89 '' #zField
Ts0 @PushWFArc f107 '' #zField
Ts0 @PushWFArc f99 '' #zField
Ts0 @PushWFArc f108 '' #zField
Ts0 @PushWFArc f110 '' #zField
Ts0 @RichDialogMethodStart f174 '' #zField
Ts0 @PushWFArc f175 '' #zField
Ts0 @RichDialogProcessStep f173 '' #zField
Ts0 @RichDialog f59 '' #zField
Ts0 @RichDialogProcessStep f146 '' #zField
Ts0 @Alternative f169 '' #zField
Ts0 @Alternative f182 '' #zField
Ts0 @PushWFArc f183 '' #zField
Ts0 @PushWFArc f185 '' #zField
Ts0 @RichDialogEnd f179 '' #zField
Ts0 @PushWFArc f176 '' #zField
Ts0 @PushWFArc f181 '' #zField
Ts0 @PushWFArc f167 '' #zField
Ts0 @PushWFArc f184 '' #zField
Ts0 @PushWFArc f186 '' #zField
Ts0 @RichDialogProcessEnd f193 '' #zField
Ts0 @PushWFArc f204 '' #zField
Ts0 @PushWFArc f205 '' #zField
Ts0 @RichDialogEnd f210 '' #zField
Ts0 @PushWFArc f71 '' #zField
Ts0 @RichDialogProcessStep f65 '' #zField
Ts0 @PushWFArc f206 '' #zField
Ts0 @PushWFArc f8 '' #zField
Ts0 @PushWFArc f112 '' #zField
Ts0 @PushWFArc f113 '' #zField
Ts0 @PushWFArc f198 '' #zField
Ts0 @RichDialogProcessEnd f217 '' #zField
Ts0 @PushWFArc f4 '' #zField
Ts0 @RichDialog f3 '' #zField
Ts0 @PushWFArc f5 '' #zField
Ts0 @RichDialogInitStart f14 '' #zField
Ts0 @PushWFArc f34 '' #zField
Ts0 @RichDialogEnd f57 '' #zField
Ts0 @RichDialogProcessEnd f58 '' #zField
Ts0 @PushWFArc f60 '' #zField
Ts0 @PushWFArc f9 '' #zField
Ts0 @RichDialogUiSync f61 '' #zField
Ts0 @RichDialog f63 '' #zField
Ts0 @RichDialogUiSync f70 '' #zField
Ts0 @RichDialog f84 '' #zField
Ts0 @PushWFArc f85 '' #zField
Ts0 @RichDialogUiSync f90 '' #zField
Ts0 @RichDialog f106 '' #zField
Ts0 @PushWFArc f109 '' #zField
Ts0 @RichDialog f114 '' #zField
Ts0 @RichDialogUiSync f132 '' #zField
Ts0 @PushWFArc f115 '' #zField
Ts0 @RichDialogUiSync f15 '' #zField
Ts0 @RichDialog f25 '' #zField
Ts0 @RichDialogUiSync f29 '' #zField
Ts0 @RichDialog f30 '' #zField
Ts0 @RichDialogUiSync f32 '' #zField
Ts0 @RichDialog f33 '' #zField
Ts0 @PushWFArc f36 '' #zField
Ts0 @PushWFArc f54 '' #zField
Ts0 @PushWFArc f55 '' #zField
Ts0 @PushWFArc f56 '' #zField
Ts0 @PushWFArc f139 '' #zField
Ts0 @PushWFArc f10 '' #zField
Ts0 @RichDialogProcessStart f28 '' #zField
Ts0 @RichDialogProcessEnd f133 '' #zField
Ts0 @RichDialogProcessStep f147 '' #zField
Ts0 @PushWFArc f141 '' #zField
Ts0 @Alternative f149 '' #zField
Ts0 @PushWFArc f150 '' #zField
Ts0 @PushWFArc f148 '' #zField
Ts0 @PushWFArc f166 '' #zField
Ts0 @RichDialogMethodStart f151 '' #zField
Ts0 @RichDialogProcessEnd f152 '' #zField
Ts0 @RichDialogFireEvent f153 '' #zField
Ts0 @RichDialogProcessStep f154 '' #zField
Ts0 @RichDialog f155 '' #zField
Ts0 @Alternative f156 '' #zField
Ts0 @Alternative f157 '' #zField
Ts0 @RichDialogProcessStep f158 '' #zField
Ts0 @RichDialogProcessStep f159 '' #zField
Ts0 @Alternative f170 '' #zField
Ts0 @PushWFArc f187 '' #zField
Ts0 @PushWFArc f188 '' #zField
Ts0 @PushWFArc f189 '' #zField
Ts0 @PushWFArc f190 '' #zField
Ts0 @PushWFArc f191 '' #zField
Ts0 @PushWFArc f192 '' #zField
Ts0 @PushWFArc f194 '' #zField
Ts0 @PushWFArc f195 '' #zField
Ts0 @PushWFArc f196 '' #zField
Ts0 @PushWFArc f197 '' #zField
Ts0 @PushWFArc f199 '' #zField
Ts0 @PushWFArc f200 '' #zField
Ts0 @RichDialogProcessStep f168 '' #zField
Ts0 @PushWFArc f177 '' #zField
Ts0 @RichDialogProcessStep f2 '' #zField
Ts0 @PushWFArc f40 '' #zField
Ts0 @PushWFArc f16 '' #zField
Ts0 @RichDialogProcessEnd f41 '' #zField
Ts0 @PushWFArc f42 '' #zField
Ts0 @RichDialogProcessStep f26 '' #zField
Ts0 @PushWFArc f43 '' #zField
Ts0 @PushWFArc f44 '' #zField
Ts0 @PushWFArc f103 '' #zField
Ts0 @PushWFArc f48 '' #zField
Ts0 @PushWFArc f50 '' #zField
Ts0 @PushWFArc f39 '' #zField
Ts0 @PushWFArc f45 '' #zField
>Proto Ts0 Ts0 TaskInformationDisplayProcess #zField
Ts0 f0 guid 116A9C07145A35CE #txt
Ts0 f0 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f0 method start() #txt
Ts0 f0 disableUIEvents false #txt
Ts0 f0 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Ts0 f0 outParameterDecl '<> result;
' #txt
Ts0 f0 embeddedRdInitializations '{/fileManagerRDC {/fieldName "fileManagerRDC"/startMethod "start()"/parameterMapping ""/initScript ""}/caseDetailsDisplayRDC {/fieldName "caseDetailsDisplayRDC"/startMethod "start()"/parameterMapping ""/initScript ""}/caseNoteDisplayListRDC {/fieldName "caseNoteDisplayListRDC"/startMethod "start()"/parameterMapping ""/initScript ""}/eventLogDisplayListRDC {/fieldName "eventLogDisplayListRDC"/startMethod "start()"/parameterMapping ""/initScript ""}/taskNoteDisplayListRDC {/fieldName "taskNoteDisplayListRDC"/startMethod "start()"/parameterMapping ""/initScript ""}/workflowEventsDisplayListRDC {/fieldName "workflowEventsDisplayListRDC"/startMethod "start()"/parameterMapping ""/initScript ""}/taskDetailsDisplayRDC {/fieldName "taskDetailsDisplayRDC"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
Ts0 f0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start()</name>
        <nameStyle>7,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f0 38 70 20 20 13 0 #rect
Ts0 f0 @|RichDialogInitStartIcon #fIcon
Ts0 f1 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f1 123 227 26 26 14 0 #rect
Ts0 f1 @|RichDialogProcessEndIcon #fIcon
Ts0 f6 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f6 651 227 26 26 14 0 #rect
Ts0 f6 @|RichDialogProcessEndIcon #fIcon
Ts0 f22 guid 116E86F43DDC86FA #txt
Ts0 f22 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f22 method setTask(ch.ivyteam.ivy.workflow.ITask) #txt
Ts0 f22 disableUIEvents false #txt
Ts0 f22 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.workflow.ITask aTask> param = methodEvent.getInputArguments();
' #txt
Ts0 f22 inParameterMapAction 'out.task=param.aTask;
out.taskIdentifier=param.aTask.getIdentifier();
' #txt
Ts0 f22 outParameterDecl '<> result;
' #txt
Ts0 f22 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setTask(ITask)</name>
        <nameStyle>14,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f22 654 70 20 20 13 0 #rect
Ts0 f22 @|RichDialogMethodStartIcon #fIcon
Ts0 f31 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f31 actionTable 'out=in;
' #txt
Ts0 f31 actionCode 'import ch.ivyteam.ivy.addons.util.GuidGenerator;
import ch.ivyteam.ivy.security.IPermission;
import ch.ivyteam.ivy.workflow.ui.utils.UniqueDisplayIdFactory;
import ch.ivyteam.ivy.event.SystemEventCategory;


// display ids
out.taskExecutionDisplayId = GuidGenerator.generateID();
panel.taskExecutionDisplay.setDisplayId(out.taskExecutionDisplayId);

out.documentsDisplayId = GuidGenerator.generateID();
panel.documentsDisplay.setDisplayId(out.documentsDisplayId);

out.annotationsDisplayId = GuidGenerator.generateID();
panel.annotationsDisplay.setDisplayId(out.annotationsDisplayId);

out.eventsDisplayId = GuidGenerator.generateID();
panel.eventLogsDisplay.setDisplayId(out.eventsDisplayId);

out.detailsDisplayId = GuidGenerator.generateID();
panel.detailsDisplay.setDisplayId(out.detailsDisplayId);

// has permission to delegate?
out.hasPermissionDelegateTasks = ivy.session.hasPermission(ivy.request.getApplication().getSecurityDescriptor(), IPermission.DELEGATE_TASKS);

out.taskDelegateWindowTitle = ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/task/plainStrings/delegateTaskShortDesc");

// register to System events of Workflow category
ivy.rd.subscribeToSystemEvents(SystemEventCategory.WORKFLOW);' #txt
Ts0 f31 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f31 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>calculate the displayIds,
check if user has permission 
to delegate tasks,
register to system events</name>
        <nameStyle>100,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f31 118 132 36 24 22 -16 #rect
Ts0 f31 @|RichDialogProcessStepIcon #fIcon
Ts0 f37 guid 118BD7D1B6D995AF #txt
Ts0 f37 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f37 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f37 actionTable 'out=in;
' #txt
Ts0 f37 actionCode 'out.footerMessage = "";' #txt
Ts0 f37 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startTask</name>
        <nameStyle>9,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f37 990 70 20 20 13 0 #rect
Ts0 f37 @|RichDialogProcessStartIcon #fIcon
Ts0 f38 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f38 1075 539 26 26 14 0 #rect
Ts0 f38 @|RichDialogProcessEndIcon #fIcon
Ts0 f73 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f73 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start task requested ?</name>
        <nameStyle>22,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f73 1274 114 28 28 5 -35 #rect
Ts0 f73 @|AlternativeIcon #fIcon
Ts0 f76 guid 118C2C4A5D8A19A4 #txt
Ts0 f76 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f76 broadcast xivyTaskDone #txt
Ts0 f76 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f76 actionTable 'out=in;
' #txt
Ts0 f76 actionCode 'out.broadcastedTaskIdentifiers.clear();
out.broadcastedTaskIdentifiers.add(param.aTaskIdentifier);' #txt
Ts0 f76 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Accepted broadcast: xivyTaskDone</name>
        <nameStyle>32,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f76 2814 94 20 20 13 0 #rect
Ts0 f76 @|RichDialogBroadcastStartIcon #fIcon
Ts0 f77 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f77 guid 118C2C52CA3F8377 #txt
Ts0 f77 2811 219 26 26 14 0 #rect
Ts0 f77 @|RichDialogEndIcon #fIcon
Ts0 f79 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f79 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>is this task concerned?</name>
        <nameStyle>23,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f79 2810 146 28 28 14 0 #rect
Ts0 f79 @|AlternativeIcon #fIcon
Ts0 f80 expr out #txt
Ts0 f80 2824 114 2824 146 #arcP
Ts0 f78 expr in #txt
Ts0 f78 outCond in.broadcastedTaskIdentifiers.contains(in.taskIdentifier) #txt
Ts0 f78 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f78 2824 174 2824 219 #arcP
Ts0 f78 0 0.8497071731343026 0 0 #arcLabel
Ts0 f81 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f81 3147 339 26 26 14 0 #rect
Ts0 f81 @|RichDialogProcessEndIcon #fIcon
Ts0 f83 guid 118C63B937FB9980 #txt
Ts0 f83 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f83 broadcast xivyTaskDelegated #txt
Ts0 f83 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f83 actionTable 'out=in;
' #txt
Ts0 f83 actionCode 'out.broadcastedTaskIdentifiers.clear();
out.broadcastedTaskIdentifiers.add(param.aTaskIdentifier);' #txt
Ts0 f83 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>xivyTaskDelegated</name>
        <nameStyle>17,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f83 3446 94 20 20 13 0 #rect
Ts0 f83 @|RichDialogBroadcastStartIcon #fIcon
Ts0 f87 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f87 guid 118C63C987D87F03 #txt
Ts0 f87 3443 219 26 26 14 0 #rect
Ts0 f87 @|RichDialogEndIcon #fIcon
Ts0 f93 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f93 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>is this task concerned?</name>
        <nameStyle>23,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f93 3442 146 28 28 14 0 #rect
Ts0 f93 @|AlternativeIcon #fIcon
Ts0 f94 expr out #txt
Ts0 f94 3456 114 3456 146 #arcP
Ts0 f88 expr in #txt
Ts0 f88 outCond in.broadcastedTaskIdentifiers.contains(in.task.getIdentifier()) #txt
Ts0 f88 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f88 3456 174 3456 219 #arcP
Ts0 f95 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f95 3531 219 26 26 14 0 #rect
Ts0 f95 @|RichDialogProcessEndIcon #fIcon
Ts0 f96 expr in #txt
Ts0 f96 3470 160 3544 219 #arcP
Ts0 f96 1 3544 160 #addKink
Ts0 f96 1 0.329675373511861 0 0 #arcLabel
Ts0 f111 guid 118C672C7FC9B4FC #txt
Ts0 f111 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f111 method close() #txt
Ts0 f111 disableUIEvents false #txt
Ts0 f111 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Ts0 f111 outParameterDecl '<java.lang.Boolean closeCanceled> result;
' #txt
Ts0 f111 outActionCode 'result.closeCanceled = in.pressedButtonToDoWithTask.equals("cancel");
ivy.log.debug("Task display panel on task {0}-{1} is canceled?{2}",
						in.task.getIdentifier(), in.task.getName(), result.closeCanceled);
' #txt
Ts0 f111 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>close()</name>
        <nameStyle>7,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f111 678 334 20 20 13 0 #rect
Ts0 f111 @|RichDialogMethodStartIcon #fIcon
Ts0 f116 guid 118E5FE0435A97FC #txt
Ts0 f116 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f116 method getTaskIdentifier() #txt
Ts0 f116 disableUIEvents false #txt
Ts0 f116 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Ts0 f116 outParameterDecl '<java.lang.Number aTaskIdentifier> result;
' #txt
Ts0 f116 outParameterMapAction 'result.aTaskIdentifier=in.task.getIdentifier();
' #txt
Ts0 f116 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getTaskIdentifier()</name>
        <nameStyle>19,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f116 838 70 20 20 13 0 #rect
Ts0 f116 @|RichDialogMethodStartIcon #fIcon
Ts0 f117 expr out #txt
Ts0 f117 848 90 676 238 #arcP
Ts0 f117 1 848 216 #addKink
Ts0 f117 0 0.7897293796270857 0 0 #arcLabel
Ts0 f118 guid 118EB5DB6F66B87A #txt
Ts0 f118 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f118 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f118 actionTable 'out=in;
' #txt
Ts0 f118 actionCode 'out.footerMessage = "";' #txt
Ts0 f118 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>parkTask</name>
        <nameStyle>8,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f118 2118 70 20 20 13 0 #rect
Ts0 f118 @|RichDialogProcessStartIcon #fIcon
Ts0 f121 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f121 actionTable 'out=in;
' #txt
Ts0 f121 actionCode 'import ch.ivyteam.ivy.workflow.ITask;


ITask currentTask = in.task;

// park the task
ivy.session.parkTask(currentTask);

' #txt
Ts0 f121 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f121 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>park task</name>
        <nameStyle>9,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f121 2110 212 36 24 20 -2 #rect
Ts0 f121 @|RichDialogProcessStepIcon #fIcon
Ts0 f122 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f122 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Ts0 f122 2114 138 28 28 14 0 #rect
Ts0 f122 @|AlternativeIcon #fIcon
Ts0 f123 expr out #txt
Ts0 f123 2128 90 2128 138 #arcP
Ts0 f124 expr in #txt
Ts0 f124 outCond 'in.task.getState().equals( ch.ivyteam.ivy.workflow.TaskState.RESUMED)' #txt
Ts0 f124 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>task is RESUMED</name>
        <nameStyle>15,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f124 2128 166 2128 212 #arcP
Ts0 f126 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f126 actionTable 'out=in;
' #txt
Ts0 f126 actionCode '//out.footerMessage = "Task must have state RESUMED in order to be parked";

out.footerMessage = ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/common/plainStrings/invalidSelection");' #txt
Ts0 f126 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f126 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>inform the user
(invalid selection)</name>
        <nameStyle>35,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f126 2214 204 36 24 20 -2 #rect
Ts0 f126 @|RichDialogProcessStepIcon #fIcon
Ts0 f127 expr in #txt
Ts0 f127 2142 152 2232 204 #arcP
Ts0 f127 1 2232 152 #addKink
Ts0 f127 0 0.5295767123319552 0 0 #arcLabel
Ts0 f128 guid 118EB694AFDBA1B7 #txt
Ts0 f128 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f128 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f128 actionTable 'out=in;
out.securityMemberToDelegate=null;
' #txt
Ts0 f128 actionCode 'out.footerMessage = "";' #txt
Ts0 f128 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delegateTask</name>
        <nameStyle>12,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f128 2398 70 20 20 13 0 #rect
Ts0 f128 @|RichDialogProcessStartIcon #fIcon
Ts0 f131 targetWindow NEW #txt
Ts0 f131 targetDisplay TOP #txt
Ts0 f131 richDialogId ch.ivyteam.ivy.workflow.ui.security.SecurityMemberSelect #txt
Ts0 f131 startMethod startAndChooseSecurityMember() #txt
Ts0 f131 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f131 requestActionDecl '<> param;' #txt
Ts0 f131 responseActionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f131 responseMappingAction 'out=in;
out.securityMemberToDelegate=result.aSecurityMember;
out.securityMemberToDelegateSelected=result.aSecurityMemberSelected;
' #txt
Ts0 f131 windowConfiguration '#Fri Aug 01 20:33:30 CEST 2008
height=0
maximized=false
centered=true
close_after_last_rd=true
resizable=true
width=0
title=<%\\=in.taskDelegateWindowTitle%>
' #txt
Ts0 f131 isAsynch false #txt
Ts0 f131 isInnerRd true #txt
Ts0 f131 isDialog true #txt
Ts0 f131 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>load the Rich Dialog
and choose the security member</name>
        <nameStyle>51,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f131 2390 228 36 24 20 -2 #rect
Ts0 f131 @|RichDialogIcon #fIcon
Ts0 f135 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f135 actionTable 'out=in;
' #txt
Ts0 f135 actionCode 'import ch.ivyteam.ivy.workflow.ITask;


ITask currentTask;


currentTask = in.task;

if (currentTask.isExpired())
{
	currentTask.setExpiryActivator(in.securityMemberToDelegate);
}
else
{
	currentTask.setOriginalActivator(in.securityMemberToDelegate);
}' #txt
Ts0 f135 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f135 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delegate the task</name>
        <nameStyle>17,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f135 2390 340 36 24 20 -2 #rect
Ts0 f135 @|RichDialogProcessStepIcon #fIcon
Ts0 f137 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f137 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Ts0 f137 2394 266 28 28 14 0 #rect
Ts0 f137 @|AlternativeIcon #fIcon
Ts0 f138 expr out #txt
Ts0 f138 2408 252 2408 266 #arcP
Ts0 f136 expr in #txt
Ts0 f136 outCond in.securityMemberToDelegateSelected #txt
Ts0 f136 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>security member
selected</name>
        <nameStyle>24,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f136 2408 294 2408 340 #arcP
Ts0 f140 actionDecl 'Number aTaskIdentifier;
' #txt
Ts0 f140 actionTable 'aTaskIdentifier=in.task.getIdentifier();
' #txt
Ts0 f140 actionCode panel.fireXivyTaskDelegated(aTaskIdentifier); #txt
Ts0 f140 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f140 fireEvent xivyTaskDelegated(Number) #txt
Ts0 f140 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>fire the bc event
&quot;xivyTaskDelegated&quot;</name>
        <nameStyle>37,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f140 2390 388 36 24 20 -2 #rect
Ts0 f140 @|RichDialogFireEventIcon #fIcon
Ts0 f142 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f142 actionTable 'out=in;
' #txt
Ts0 f142 actionCode '// out.footerMessage = "No role or user has been selected. Delegate task canceled.";

out.footerMessage = ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/common/plainStrings/invalidSelection");' #txt
Ts0 f142 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f142 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>inform 
the user</name>
        <nameStyle>16,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f142 2542 308 36 24 20 -2 #rect
Ts0 f142 @|RichDialogProcessStepIcon #fIcon
Ts0 f144 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f144 guid 118EB7595CDF0AEF #txt
Ts0 f144 2395 451 26 26 14 0 #rect
Ts0 f144 @|RichDialogEndIcon #fIcon
Ts0 f145 expr out #txt
Ts0 f145 2408 412 2408 451 #arcP
Ts0 f129 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f129 guid 118EB75D219F8AEF #txt
Ts0 f129 2115 283 26 26 14 0 #rect
Ts0 f129 @|RichDialogEndIcon #fIcon
Ts0 f119 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f119 2219 283 26 26 14 0 #rect
Ts0 f119 @|RichDialogProcessEndIcon #fIcon
Ts0 f125 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f125 2547 451 26 26 14 0 #rect
Ts0 f125 @|RichDialogProcessEndIcon #fIcon
Ts0 f130 expr out #txt
Ts0 f130 2232 228 2232 283 #arcP
Ts0 f130 0 0.4182708839231334 0 0 #arcLabel
Ts0 f120 guid 118EB8463A07C44A #txt
Ts0 f120 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f120 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f120 actionTable 'out=in;
' #txt
Ts0 f120 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>close</name>
        <nameStyle>5,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f120 990 318 20 20 -15 -36 #rect
Ts0 f120 @|RichDialogProcessStartIcon #fIcon
Ts0 f11 targetWindow NEW #txt
Ts0 f11 targetDisplay TOP #txt
Ts0 f11 richDialogId ch.ivyteam.ivy.addons.commondialogs.MessageDialog #txt
Ts0 f11 startMethod showMessageWithTitle(String,String) #txt
Ts0 f11 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f11 requestActionDecl '<String aMessageTitle, String aMessageText> param;' #txt
Ts0 f11 requestMappingAction 'param.aMessageTitle="Permission denied to delegate the tasks";
param.aMessageText="You don''t have the permission called ''" + ch.ivyteam.ivy.security.IPermission.DELEGATE_TASKS.getName() + "'' that will gives you possibility to do that action. \nContact your Workflow Administrator for that.";
' #txt
Ts0 f11 responseActionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f11 responseMappingAction 'out=in;
' #txt
Ts0 f11 windowConfiguration '#Tue May 20 14:11:10 CEST 2008
height=200
maximized=false
centered=true
close_after_last_rd=true
resizable=true
width=550
title=Information
' #txt
Ts0 f11 isAsynch false #txt
Ts0 f11 isInnerRd true #txt
Ts0 f11 isDialog true #txt
Ts0 f11 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>inform the user
permission denied</name>
        <nameStyle>33,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f11 2622 300 36 24 20 -2 #rect
Ts0 f11 @|RichDialogIcon #fIcon
Ts0 f12 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f12 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Ts0 f12 2394 130 28 28 14 0 #rect
Ts0 f12 @|AlternativeIcon #fIcon
Ts0 f13 expr out #txt
Ts0 f13 2408 90 2408 130 #arcP
Ts0 f23 expr in #txt
Ts0 f23 2422 144 2640 300 #arcP
Ts0 f23 1 2640 144 #addKink
Ts0 f23 0 0.8108697642399247 0 0 #arcLabel
Ts0 f24 expr out #txt
Ts0 f24 2640 324 2573 464 #arcP
Ts0 f24 1 2640 464 #addKink
Ts0 f24 1 0.5283737905401229 0 0 #arcLabel
Ts0 f27 guid 11B7A82C0DBAE332 #txt
Ts0 f27 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f27 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f27 actionTable 'out=in;
' #txt
Ts0 f27 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>onLoad</name>
        <nameStyle>6,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f27 1278 70 20 20 13 0 #rect
Ts0 f27 @|RichDialogProcessStartIcon #fIcon
Ts0 f47 expr in #txt
Ts0 f47 2422 280 2560 308 #arcP
Ts0 f47 1 2560 280 #addKink
Ts0 f47 0 0.5630606876192814 0 0 #arcLabel
Ts0 f35 expr out #txt
Ts0 f35 2560 332 2560 451 #arcP
Ts0 f35 0 0.7978311662093814 0 0 #arcLabel
Ts0 f52 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f52 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Ts0 f52 2394 178 28 28 14 0 #rect
Ts0 f52 @|AlternativeIcon #fIcon
Ts0 f53 expr in #txt
Ts0 f53 outCond 'ivy.session.hasPermission(ivy.request.getApplication().getSecurityDescriptor(), ch.ivyteam.ivy.security.IPermission.DELEGATE_TASKS)' #txt
Ts0 f53 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>permission ok</name>
        <nameStyle>13,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f53 2408 158 2408 178 #arcP
Ts0 f21 expr in #txt
Ts0 f21 outCond '(in.task.getState().equals(ch.ivyteam.ivy.workflow.TaskState.SUSPENDED) 
	|| in.task.getState().equals(ch.ivyteam.ivy.workflow.TaskState.PARKED)
		|| in.task.getState().equals(ch.ivyteam.ivy.workflow.TaskState.UNASSIGNED))' #txt
Ts0 f21 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>task state ok for delegate</name>
        <nameStyle>26,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f21 2408 206 2408 228 #arcP
Ts0 f74 expr in #txt
Ts0 f74 2422 192 2560 308 #arcP
Ts0 f74 1 2560 192 #addKink
Ts0 f74 0 0.9294295042907013 0 0 #arcLabel
Ts0 f75 guid 11E40E845FE6609C #txt
Ts0 f75 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f75 broadcast ivy_systemevent_workflow_task_changed #txt
Ts0 f75 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f75 actionTable 'out=in;
' #txt
Ts0 f75 actionCode 'import ch.ivyteam.ivy.workflow.TaskState;
import ch.ivyteam.ivy.workflow.ui.utils.WorkflowUIAccessPermissionHandler;
import java.util.Collections;
import ch.ivyteam.ivy.workflow.ITask;

out.broadcastedTaskIdentifiers.clear();
out.broadcastedTaskIdentifiers.addAll(param.aWorkflowSystemEventParameter.getIdentifiers());

Collections.sort(out.broadcastedTaskIdentifiers);

for (Number taskId: out.broadcastedTaskIdentifiers)
{
	ITask task = WorkflowUIAccessPermissionHandler.wfFindTaskAsSystemUser(taskId);
	ivy.log.debug("Task {0}-{1} changed to <{2}>.", task.getIdentifier(), task.getName(), task.getState());
}


// if the param.aWorkflowSystemEventParameter.getIdentifiers() is like
// [127, 129]
// where 127 changed to DONE and 129 changed to RESUMED 
// and both tasks belongs to the same case
// keep the 129 as broadcastedTaskAssignedToSelf1Identifier
if (out.broadcastedTaskIdentifiers.size() == 2)
{
	ITask taskA = WorkflowUIAccessPermissionHandler.wfFindTaskAsSystemUser(out.broadcastedTaskIdentifiers.get(0));
	ITask taskB = WorkflowUIAccessPermissionHandler.wfFindTaskAsSystemUser(out.broadcastedTaskIdentifiers.get(1));
	
	if (taskA.getCase().getIdentifier().equals(taskB.getCase().getIdentifier()) && 
			taskA.getState().compareTo(TaskState.DONE) == 0 && taskB.getState().compareTo(TaskState.RESUMED) == 0)
	{
		out.broadcastedTaskAssignedToSelf1Identifier = out.broadcastedTaskIdentifiers.get(1);	
	}	
}
' #txt
Ts0 f75 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>ivy_systemevent_workflow_task_changed</name>
        <nameStyle>37,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f75 3014 102 20 20 13 0 #rect
Ts0 f75 @|RichDialogBroadcastStartIcon #fIcon
Ts0 f97 expr out #txt
Ts0 f97 2128 236 2128 283 #arcP
Ts0 f7 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f7 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>(task is done or ready for join or parked and 
	broadcasted identifiers size is 1 and it''s contains this task)
or
(broadcasted identifiers size is 1 and the task assigned to sefl1 is done)?</name>
        <nameStyle>189,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f7 3010 250 28 28 14 0 #rect
Ts0 f7 @|AlternativeIcon #fIcon
Ts0 f17 expr in #txt
Ts0 f17 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>no</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f17 3038 264 3160 339 #arcP
Ts0 f17 1 3160 264 #addKink
Ts0 f17 1 0.17499608409501777 0 0 #arcLabel
Ts0 f18 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f18 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>is this task concerned or 
some of sub tasks assigned to self1?</name>
        <nameStyle>63,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f18 3010 146 28 28 14 0 #rect
Ts0 f18 @|AlternativeIcon #fIcon
Ts0 f19 expr out #txt
Ts0 f19 3024 122 3024 146 #arcP
Ts0 f19 0 0.7752765942615939 0 0 #arcLabel
Ts0 f20 expr in #txt
Ts0 f20 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>no</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f20 3038 160 3172 347 #arcP
Ts0 f20 1 3200 160 #addKink
Ts0 f20 2 3200 336 #addKink
Ts0 f20 1 0.27266271342670456 0 0 #arcLabel
Ts0 f49 expr out #txt
Ts0 f49 2408 364 2408 388 #arcP
Ts0 f66 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f66 guid 118EB75D219F8AEF #txt
Ts0 f66 1779 291 26 26 14 0 #rect
Ts0 f66 @|RichDialogEndIcon #fIcon
Ts0 f67 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f67 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Ts0 f67 1778 162 28 28 14 0 #rect
Ts0 f67 @|AlternativeIcon #fIcon
Ts0 f68 guid 1205BDFF970279BD #txt
Ts0 f68 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f68 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f68 actionTable 'out=in;
' #txt
Ts0 f68 actionCode 'out.footerMessage = "";' #txt
Ts0 f68 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>cancelTask</name>
        <nameStyle>10,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f68 1782 70 20 20 13 0 #rect
Ts0 f68 @|RichDialogProcessStartIcon #fIcon
Ts0 f91 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f91 1883 291 26 26 14 0 #rect
Ts0 f91 @|RichDialogProcessEndIcon #fIcon
Ts0 f92 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f92 actionTable 'out=in;
' #txt
Ts0 f92 actionCode 'import ch.ivyteam.ivy.workflow.ITask;

ITask currentTask = in.task;

// cancel the task -> set to SUSPENDED
currentTask.reset();

' #txt
Ts0 f92 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f92 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>cancel task</name>
        <nameStyle>11,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f92 1774 236 36 24 20 -2 #rect
Ts0 f92 @|RichDialogProcessStepIcon #fIcon
Ts0 f98 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f98 actionTable 'out=in;
' #txt
Ts0 f98 actionCode '//out.footerMessage = "Task must have state RESUMED in order to be parked";

out.footerMessage = ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/common/plainStrings/invalidSelection");' #txt
Ts0 f98 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f98 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>inform the user
(invalid selection)</name>
        <nameStyle>35,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f98 1878 236 36 24 20 -2 #rect
Ts0 f98 @|RichDialogProcessStepIcon #fIcon
Ts0 f100 expr in #txt
Ts0 f100 outCond 'in.task.getState().equals( ch.ivyteam.ivy.workflow.TaskState.RESUMED) || 
in.task.getState().equals( ch.ivyteam.ivy.workflow.TaskState.CREATED) ||
in.task.getState().equals( ch.ivyteam.ivy.workflow.TaskState.PARKED) ||
in.task.getState().equals( ch.ivyteam.ivy.workflow.TaskState.READY_FOR_JOIN) ||
in.task.getState().equals( ch.ivyteam.ivy.workflow.TaskState.FAILED) ' #txt
Ts0 f100 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>task is RESUMED
or and can be reset </name>
        <nameStyle>36,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f100 1792 190 1792 236 #arcP
Ts0 f101 expr in #txt
Ts0 f101 1806 176 1896 236 #arcP
Ts0 f101 1 1896 176 #addKink
Ts0 f101 0 0.824168763059249 0 0 #arcLabel
Ts0 f104 expr out #txt
Ts0 f104 1896 260 1896 291 #arcP
Ts0 f105 expr out #txt
Ts0 f105 1792 260 1792 291 #arcP
Ts0 f86 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f86 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Ts0 f86 1778 114 28 28 14 0 #rect
Ts0 f86 @|AlternativeIcon #fIcon
Ts0 f89 targetWindow NEW #txt
Ts0 f89 targetDisplay TOP #txt
Ts0 f89 richDialogId ch.ivyteam.ivy.addons.commondialogs.MessageDialog #txt
Ts0 f89 startMethod showMessageWithTitle(String,String) #txt
Ts0 f89 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f89 requestActionDecl '<String aMessageTitle, String aMessageText> param;' #txt
Ts0 f89 requestMappingAction 'param.aMessageTitle="Permission denied to reset the task";
param.aMessageText="You don''t have the permission called ''" + ch.ivyteam.ivy.security.IPermission.TASK_CATEGORIES_READ_ALL_WORKED_ON.getName() + "'' that will gives you possibility to do that action. \nContact your Workflow Administrator for that.";
' #txt
Ts0 f89 responseActionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f89 responseMappingAction 'out=in;
' #txt
Ts0 f89 windowConfiguration '#Mon May 04 14:33:37 CEST 2009
height=200
maximized=false
centered=true
close_after_last_rd=true
resizable=true
width=550
title=Information
' #txt
Ts0 f89 isAsynch false #txt
Ts0 f89 isInnerRd true #txt
Ts0 f89 isDialog true #txt
Ts0 f89 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>inform the user
permission denied</name>
        <nameStyle>33,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f89 1950 116 36 24 20 -2 #rect
Ts0 f89 @|RichDialogIcon #fIcon
Ts0 f107 expr out #txt
Ts0 f107 1792 90 1792 114 #arcP
Ts0 f99 expr in #txt
Ts0 f99 outCond 'ivy.session.hasPermission(ivy.request.getApplication().getSecurityDescriptor(), ch.ivyteam.ivy.security.IPermission.TASK_RESET)' #txt
Ts0 f99 1792 142 1792 162 #arcP
Ts0 f108 expr in #txt
Ts0 f108 1806 128 1950 128 #arcP
Ts0 f110 expr out #txt
Ts0 f110 1968 140 1908 299 #arcP
Ts0 f110 1 1968 280 #addKink
Ts0 f110 0 0.6236092282422254 0 0 #arcLabel
Ts0 f174 guid 12312E0B315E6DF0 #txt
Ts0 f174 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f174 method getTask() #txt
Ts0 f174 disableUIEvents false #txt
Ts0 f174 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Ts0 f174 outParameterDecl '<ch.ivyteam.ivy.workflow.ITask task> result;
' #txt
Ts0 f174 outParameterMapAction 'result.task=in.task;
' #txt
Ts0 f174 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getTask()</name>
        <nameStyle>9,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f174 750 70 20 20 9 3 #rect
Ts0 f174 @|RichDialogMethodStartIcon #fIcon
Ts0 f175 expr out #txt
Ts0 f175 760 90 676 235 #arcP
Ts0 f175 1 760 208 #addKink
Ts0 f175 0 0.9648943058460099 0 0 #arcLabel
Ts0 f173 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f173 actionTable 'out=in;
' #txt
Ts0 f173 actionCode 'import ch.ivyteam.ivy.workflow.ui.utils.WorkflowUIAccessPermissionHandler;

WorkflowUIAccessPermissionHandler.resetTaskAsSystemUser(in.task);' #txt
Ts0 f173 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f173 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>cancel
task</name>
        <nameStyle>11,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f173 774 596 36 24 21 -15 #rect
Ts0 f173 @|RichDialogProcessStepIcon #fIcon
Ts0 f59 targetDisplay TOP #txt
Ts0 f59 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
Ts0 f59 startMethod askQuestion(String,String,List<String>) #txt
Ts0 f59 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f59 requestActionDecl '<String icon, String question, List<String> buttons> param;' #txt
Ts0 f59 requestActionCode 'param.question = ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/task/plainStrings/doYouWantToBookTheTask") + 
									"\n " + in.task.getName() + " - " + in.task.getIdentifier() + " ?";

param.buttons = ["yes", "no", "cancel"];' #txt
Ts0 f59 responseActionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f59 responseMappingAction 'out=in;
out.pressedButtonToDoWithTask=result.pressedButton;
' #txt
Ts0 f59 windowConfiguration '{/title "Question"/width 450 /height 150 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Ts0 f59 isAsynch false #txt
Ts0 f59 isInnerRd true #txt
Ts0 f59 isDialog true #txt
Ts0 f59 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>ask question:
do you want to
book (park) the task?</name>
        <nameStyle>50,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f59 670 468 36 24 29 -9 #rect
Ts0 f59 @|RichDialogIcon #fIcon
Ts0 f146 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f146 actionTable 'out=in;
' #txt
Ts0 f146 actionCode '//TIFAM - 13.08.2009 - park current task
ivy.session.parkTask(in.task) ;
' #txt
Ts0 f146 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f146 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>park
task</name>
        <nameStyle>9,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f146 670 596 36 24 21 -13 #rect
Ts0 f146 @|RichDialogProcessStepIcon #fIcon
Ts0 f169 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f169 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>park the task?</name>
        <nameStyle>14,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f169 674 522 28 28 23 -18 #rect
Ts0 f169 @|AlternativeIcon #fIcon
Ts0 f182 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f182 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>is task RESUMED ?</name>
        <nameStyle>17,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f182 674 418 28 28 9 -22 #rect
Ts0 f182 @|AlternativeIcon #fIcon
Ts0 f183 expr out #txt
Ts0 f183 688 492 688 522 #arcP
Ts0 f185 expr in #txt
Ts0 f185 outCond 'in.task.getState().compareTo(ch.ivyteam.ivy.workflow.TaskState.RESUMED) == 0' #txt
Ts0 f185 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f185 688 446 688 468 #arcP
Ts0 f185 0 0.2857142857142857 -20 0 #arcLabel
Ts0 f179 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f179 guid 123138DD69CA5BE2 #txt
Ts0 f179 678 678 20 20 13 0 #rect
Ts0 f179 @|RichDialogEndIcon #fIcon
Ts0 f176 expr in #txt
Ts0 f176 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>no</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f176 702 432 698 688 #arcP
Ts0 f176 1 928 432 #addKink
Ts0 f176 2 928 688 #addKink
Ts0 f176 0 0.13978494623655913 1 11 #arcLabel
Ts0 f181 expr out #txt
Ts0 f181 688 620 688 678 #arcP
Ts0 f181 0 0.6132250232946252 0 0 #arcLabel
Ts0 f167 expr out #txt
Ts0 f167 792 620 697 686 #arcP
Ts0 f167 1 792 672 #addKink
Ts0 f167 0 0.6810514021189923 0 0 #arcLabel
Ts0 f184 expr in #txt
Ts0 f184 outCond in.pressedButtonToDoWithTask.equals("yes") #txt
Ts0 f184 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f184 688 550 688 596 #arcP
Ts0 f186 expr in #txt
Ts0 f186 outCond in.pressedButtonToDoWithTask.equals("no") #txt
Ts0 f186 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>no</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f186 700 538 792 596 #arcP
Ts0 f186 1 792 552 #addKink
Ts0 f186 1 0.1618023027821841 0 0 #arcLabel
Ts0 f193 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f193 870 630 20 20 13 0 #rect
Ts0 f193 @|RichDialogProcessEndIcon #fIcon
Ts0 f204 expr in #txt
Ts0 f204 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>cancel</name>
        <nameStyle>6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f204 702 536 880 630 #arcP
Ts0 f204 1 880 536 #addKink
Ts0 f204 1 0.10981499853660062 0 0 #arcLabel
Ts0 f205 expr out #txt
Ts0 f205 1000 338 701 431 #arcP
Ts0 f205 1 1000 400 #addKink
Ts0 f205 1 0.18248407047134302 0 0 #arcLabel
Ts0 f210 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f210 guid 12927317941C4346 #txt
Ts0 f210 38 230 20 20 13 0 #rect
Ts0 f210 @|RichDialogEndIcon #fIcon
Ts0 f71 expr out #txt
Ts0 f71 48 90 48 230 #arcP
Ts0 f65 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f65 actionTable 'out=in;
' #txt
Ts0 f65 actionCode 'ivy.log.debug("Task {0} state is {1}.", in.task.getIdentifier(), in.task.getState());' #txt
Ts0 f65 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f65 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>printout the task state</name>
        <nameStyle>23,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f65 3006 204 36 24 20 -2 #rect
Ts0 f65 @|RichDialogProcessStepIcon #fIcon
Ts0 f206 expr in #txt
Ts0 f206 outCond 'in.broadcastedTaskIdentifiers.contains(in.taskIdentifier) ||
in.broadcastedTaskIdentifiers.contains(in.broadcastedTaskAssignedToSelf1Identifier)' #txt
Ts0 f206 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f206 3024 174 3024 204 #arcP
Ts0 f8 expr out #txt
Ts0 f8 3024 228 3024 250 #arcP
Ts0 f112 expr out #txt
Ts0 f112 688 354 688 418 #arcP
Ts0 f113 expr out #txt
Ts0 f113 664 90 664 227 #arcP
Ts0 f198 expr out #txt
Ts0 f198 1288 90 1288 114 #arcP
Ts0 f217 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f217 1462 510 20 20 13 0 #rect
Ts0 f217 @|RichDialogProcessEndIcon #fIcon
Ts0 f4 expr out #txt
Ts0 f4 136 156 136 227 #arcP
Ts0 f3 targetWindow THIS #txt
Ts0 f3 targetDisplay EXISTING:<%=in.detailsDisplayId%> #txt
Ts0 f3 richDialogId ch.ivyteam.ivy.workflow.ui.task.DetailsWrapper #txt
Ts0 f3 startMethod start(ch.ivyteam.ivy.workflow.ITask,Boolean) #txt
Ts0 f3 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f3 requestActionDecl '<ch.ivyteam.ivy.workflow.ITask aTask, Boolean hasWfAdministratorPermissions> param;' #txt
Ts0 f3 requestActionCode 'param.aTask = in.task;
param.hasWfAdministratorPermissions = in.hasWfAdministratorPermissions;

ivy.log.debug("Details wrapper task set with {0}, has wf admin permissions.", param.aTask.getIdentifier(), param.hasWfAdministratorPermissions);' #txt
Ts0 f3 responseActionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f3 responseMappingAction 'out=in;
' #txt
Ts0 f3 windowConfiguration '* ' #txt
Ts0 f3 isAsynch true #txt
Ts0 f3 isInnerRd true #txt
Ts0 f3 isDialog false #txt
Ts0 f3 userContext '* ' #txt
Ts0 f3 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>load dynamically
task details</name>
        <nameStyle>5,7,9
11,0,7,9
1,7,9
12,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f3 1454 156 36 24 20 -2 #rect
Ts0 f3 @|RichDialogIcon #fIcon
Ts0 f5 expr in #txt
Ts0 f5 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>no</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f5 1300 131 1454 164 #arcP
Ts0 f5 0 0.7344562518250658 0 0 #arcLabel
Ts0 f14 guid 12C4FACC4719186F #txt
Ts0 f14 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f14 method start(ch.ivyteam.ivy.workflow.ITask,Boolean,Boolean) #txt
Ts0 f14 disableUIEvents true #txt
Ts0 f14 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.workflow.ITask aTask,java.lang.Boolean aStartTaskRequested,java.lang.Boolean aHasWfAdministratorPermissions> param = methodEvent.getInputArguments();
' #txt
Ts0 f14 inParameterMapAction 'out.hasPermissionDelegateTasks=param.aHasWfAdministratorPermissions;
out.startTaskRequested=param.aStartTaskRequested;
out.task=param.aTask;
out.taskIdentifier=param.aTask.getIdentifier();
' #txt
Ts0 f14 outParameterDecl '<> result;
' #txt
Ts0 f14 embeddedRdInitializations '* ' #txt
Ts0 f14 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start(ITask,Boolean,Boolean)</name>
        <nameStyle>28,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f14 126 70 20 20 13 0 #rect
Ts0 f14 @|RichDialogInitStartIcon #fIcon
Ts0 f34 expr out #txt
Ts0 f34 136 90 136 132 #arcP
Ts0 f57 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f57 guid 12C9D649A0E2EB47 #txt
Ts0 f57 3014 342 20 20 13 0 #rect
Ts0 f57 @|RichDialogEndIcon #fIcon
Ts0 f58 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f58 2910 222 20 20 13 0 #rect
Ts0 f58 @|RichDialogProcessEndIcon #fIcon
Ts0 f60 expr in #txt
Ts0 f60 outCond '(in.task.getState().equals(ch.ivyteam.ivy.workflow.TaskState.DONE) || 
in.task.getState().equals(ch.ivyteam.ivy.workflow.TaskState.READY_FOR_JOIN) || in.task.getState().equals(ch.ivyteam.ivy.workflow.TaskState.PARKED)) &&  (in.broadcastedTaskIdentifiers.size() == 1 && in.task.getIdentifier() == in.broadcastedTaskIdentifiers.get(0)) ||
(in.broadcastedTaskIdentifiers.size() == 1 && in.#broadcastedTaskAssignedToSelf1Identifier is initialized && ch.ivyteam.ivy.workflow.ui.utils.WorkflowUIAccessPermissionHandler.wfFindTaskAsSystemUser(in.broadcastedTaskAssignedToSelf1Identifier).getState().equals(ch.ivyteam.ivy.workflow.TaskState.DONE))' #txt
Ts0 f60 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f60 3024 278 3024 342 #arcP
Ts0 f60 0 0.48444796027833964 -1 0 #arcLabel
Ts0 f9 expr in #txt
Ts0 f9 2838 160 2920 222 #arcP
Ts0 f9 1 2920 160 #addKink
Ts0 f9 1 0.3621785577329729 0 0 #arcLabel
Ts0 f61 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f61 guid 12D7F2CCC285C6EE #txt
Ts0 f61 1075 211 26 26 13 0 #rect
Ts0 f61 @|RichDialogUiSyncIcon #fIcon
Ts0 f63 targetWindow THIS #txt
Ts0 f63 targetDisplay EXISTING:<%=in.documentsDisplayId%> #txt
Ts0 f63 richDialogId ch.ivyteam.ivy.workflow.ui.task.DocumentsWrapper #txt
Ts0 f63 startMethod start(ch.ivyteam.ivy.workflow.ICase) #txt
Ts0 f63 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f63 requestActionDecl '<ch.ivyteam.ivy.workflow.ICase wfCase> param;' #txt
Ts0 f63 requestActionCode 'param.wfCase = in.task.getCase();
' #txt
Ts0 f63 responseActionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f63 responseMappingAction 'out=in;
' #txt
Ts0 f63 windowConfiguration '* ' #txt
Ts0 f63 isAsynch true #txt
Ts0 f63 isInnerRd true #txt
Ts0 f63 isDialog false #txt
Ts0 f63 userContext '* ' #txt
Ts0 f63 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>load dynamically and asynchronously
documents</name>
        <nameStyle>5,7,9
30,0,7,9
1,7,9
9,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f63 1070 252 36 24 20 -2 #rect
Ts0 f63 @|RichDialogIcon #fIcon
Ts0 f70 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f70 guid 12D7F313FB856450 #txt
Ts0 f70 1075 291 26 26 13 0 #rect
Ts0 f70 @|RichDialogUiSyncIcon #fIcon
Ts0 f84 targetWindow THIS #txt
Ts0 f84 targetDisplay EXISTING:<%=in.annotationsDisplayId%> #txt
Ts0 f84 richDialogId ch.ivyteam.ivy.workflow.ui.task.AnnotationsWrapper #txt
Ts0 f84 startMethod start(ch.ivyteam.ivy.workflow.ITask) #txt
Ts0 f84 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f84 requestActionDecl '<ch.ivyteam.ivy.workflow.ITask aTask> param;' #txt
Ts0 f84 requestActionCode 'param.aTask = in.task;
' #txt
Ts0 f84 responseActionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f84 responseMappingAction 'out=in;
' #txt
Ts0 f84 windowConfiguration '* ' #txt
Ts0 f84 isAsynch true #txt
Ts0 f84 isInnerRd true #txt
Ts0 f84 isDialog false #txt
Ts0 f84 userContext '* ' #txt
Ts0 f84 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>load dynamically and asynchronously
annotations</name>
        <nameStyle>5,7,9
30,0,7,9
1,7,9
11,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f84 1070 332 36 24 20 -2 #rect
Ts0 f84 @|RichDialogIcon #fIcon
Ts0 f85 expr out #txt
Ts0 f85 1088 317 1088 332 #arcP
Ts0 f90 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f90 guid 12D7F3393C18FB4E #txt
Ts0 f90 1075 371 26 26 13 0 #rect
Ts0 f90 @|RichDialogUiSyncIcon #fIcon
Ts0 f106 targetWindow THIS #txt
Ts0 f106 targetDisplay EXISTING:<%=in.eventsDisplayId%> #txt
Ts0 f106 richDialogId ch.ivyteam.ivy.workflow.ui.task.EventsWrapper #txt
Ts0 f106 startMethod start(ch.ivyteam.ivy.workflow.ICase) #txt
Ts0 f106 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f106 requestActionDecl '<ch.ivyteam.ivy.workflow.ICase wfCase> param;' #txt
Ts0 f106 requestActionCode 'param.wfCase = in.task.getCase();
' #txt
Ts0 f106 responseActionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f106 responseMappingAction 'out=in;
' #txt
Ts0 f106 windowConfiguration '* ' #txt
Ts0 f106 isAsynch true #txt
Ts0 f106 isInnerRd true #txt
Ts0 f106 isDialog false #txt
Ts0 f106 userContext '* ' #txt
Ts0 f106 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>load dynamically and asynchronously
events</name>
        <nameStyle>5,7,9
30,0,7,9
1,7,9
6,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f106 1070 412 36 24 20 -2 #rect
Ts0 f106 @|RichDialogIcon #fIcon
Ts0 f109 expr out #txt
Ts0 f109 1088 397 1088 412 #arcP
Ts0 f114 targetWindow THIS #txt
Ts0 f114 targetDisplay EXISTING:<%=in.detailsDisplayId%> #txt
Ts0 f114 richDialogId ch.ivyteam.ivy.workflow.ui.task.DetailsWrapper #txt
Ts0 f114 startMethod start(ch.ivyteam.ivy.workflow.ITask,Boolean) #txt
Ts0 f114 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f114 requestActionDecl '<ch.ivyteam.ivy.workflow.ITask aTask, Boolean hasWfAdministratorPermissions> param;' #txt
Ts0 f114 requestActionCode 'param.aTask = in.task;
param.hasWfAdministratorPermissions = in.hasWfAdministratorPermissions;' #txt
Ts0 f114 responseActionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f114 responseMappingAction 'out=in;
' #txt
Ts0 f114 windowConfiguration '* ' #txt
Ts0 f114 isAsynch true #txt
Ts0 f114 isInnerRd true #txt
Ts0 f114 isDialog false #txt
Ts0 f114 userContext '* ' #txt
Ts0 f114 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>load dynamically
task details</name>
        <nameStyle>5,7,9
11,0,7,9
1,7,9
12,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f114 1070 492 36 24 20 -2 #rect
Ts0 f114 @|RichDialogIcon #fIcon
Ts0 f132 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f132 guid 12D7F34F743A760F #txt
Ts0 f132 1075 451 26 26 13 0 #rect
Ts0 f132 @|RichDialogUiSyncIcon #fIcon
Ts0 f115 expr out #txt
Ts0 f115 1088 477 1088 492 #arcP
Ts0 f15 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f15 guid 12D83C40F874BED5 #txt
Ts0 f15 1459 251 26 26 13 0 #rect
Ts0 f15 @|RichDialogUiSyncIcon #fIcon
Ts0 f25 targetWindow THIS #txt
Ts0 f25 targetDisplay EXISTING:<%=in.eventsDisplayId%> #txt
Ts0 f25 richDialogId ch.ivyteam.ivy.workflow.ui.task.EventsWrapper #txt
Ts0 f25 startMethod start(ch.ivyteam.ivy.workflow.ICase) #txt
Ts0 f25 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f25 requestActionDecl '<ch.ivyteam.ivy.workflow.ICase wfCase> param;' #txt
Ts0 f25 requestActionCode 'param.wfCase = in.task.getCase();
' #txt
Ts0 f25 responseActionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f25 responseMappingAction 'out=in;
' #txt
Ts0 f25 windowConfiguration '* ' #txt
Ts0 f25 isAsynch true #txt
Ts0 f25 isInnerRd true #txt
Ts0 f25 isDialog false #txt
Ts0 f25 userContext '* ' #txt
Ts0 f25 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>load dynamically and asynchronously
events</name>
        <nameStyle>5,7,9
30,0,7,9
1,7,9
6,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f25 1454 460 36 24 20 -2 #rect
Ts0 f25 @|RichDialogIcon #fIcon
Ts0 f29 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f29 guid 12D83C4B4A1E60CD #txt
Ts0 f29 1459 419 26 26 13 0 #rect
Ts0 f29 @|RichDialogUiSyncIcon #fIcon
Ts0 f30 targetWindow THIS #txt
Ts0 f30 targetDisplay EXISTING:<%=in.documentsDisplayId%> #txt
Ts0 f30 richDialogId ch.ivyteam.ivy.workflow.ui.task.DocumentsWrapper #txt
Ts0 f30 startMethod start(ch.ivyteam.ivy.workflow.ICase) #txt
Ts0 f30 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f30 requestActionDecl '<ch.ivyteam.ivy.workflow.ICase wfCase> param;' #txt
Ts0 f30 requestActionCode 'param.wfCase = in.task.getCase();
' #txt
Ts0 f30 responseActionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f30 responseMappingAction 'out=in;
' #txt
Ts0 f30 windowConfiguration '* ' #txt
Ts0 f30 isAsynch true #txt
Ts0 f30 isInnerRd true #txt
Ts0 f30 isDialog false #txt
Ts0 f30 userContext '* ' #txt
Ts0 f30 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>load dynamically and asynchronously
documents</name>
        <nameStyle>5,7,9
30,0,7,9
1,7,9
9,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f30 1454 300 36 24 20 -2 #rect
Ts0 f30 @|RichDialogIcon #fIcon
Ts0 f32 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f32 guid 12D83C4B4A09D0F2 #txt
Ts0 f32 1459 339 26 26 13 0 #rect
Ts0 f32 @|RichDialogUiSyncIcon #fIcon
Ts0 f33 targetWindow THIS #txt
Ts0 f33 targetDisplay EXISTING:<%=in.annotationsDisplayId%> #txt
Ts0 f33 richDialogId ch.ivyteam.ivy.workflow.ui.task.AnnotationsWrapper #txt
Ts0 f33 startMethod start(ch.ivyteam.ivy.workflow.ITask) #txt
Ts0 f33 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f33 requestActionDecl '<ch.ivyteam.ivy.workflow.ITask aTask> param;' #txt
Ts0 f33 requestActionCode 'param.aTask = in.task;
' #txt
Ts0 f33 responseActionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f33 responseMappingAction 'out=in;
' #txt
Ts0 f33 windowConfiguration '* ' #txt
Ts0 f33 isAsynch true #txt
Ts0 f33 isInnerRd true #txt
Ts0 f33 isDialog false #txt
Ts0 f33 userContext '* ' #txt
Ts0 f33 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>load dynamically and asynchronously
annotations</name>
        <nameStyle>5,7,9
30,0,7,9
1,7,9
11,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f33 1454 380 36 24 20 -2 #rect
Ts0 f33 @|RichDialogIcon #fIcon
Ts0 f36 expr out #txt
Ts0 f36 1472 324 1472 339 #arcP
Ts0 f54 expr out #txt
Ts0 f54 1472 365 1472 380 #arcP
Ts0 f55 expr out #txt
Ts0 f55 1472 404 1472 419 #arcP
Ts0 f56 expr out #txt
Ts0 f56 1472 445 1472 460 #arcP
Ts0 f139 expr out #txt
Ts0 f139 1472 277 1472 300 #arcP
Ts0 f10 expr out #txt
Ts0 f10 1472 484 1472 510 #arcP
Ts0 f28 guid 12D83D1988C5E6F9 #txt
Ts0 f28 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f28 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f28 actionTable 'out=in;
' #txt
Ts0 f28 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh</name>
        <nameStyle>7,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f28 1950 422 20 20 13 0 #rect
Ts0 f28 @|RichDialogProcessStartIcon #fIcon
Ts0 f133 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f133 1950 622 20 20 13 0 #rect
Ts0 f133 @|RichDialogProcessEndIcon #fIcon
Ts0 f147 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f147 actionTable 'out=in;
' #txt
Ts0 f147 actionCode 'import ch.ivyteam.ivy.richdialog.widgets.displays.RCardDisplay;
import ch.ivyteam.ivy.richdialog.exec.panel.IRichDialogPanel;


// get the display which is selected tab on tabbedpane container
// get its selected panel and call "refresh" method on it

if (panel.centerTabbedPane.getSelectedComponent() instanceof RCardDisplay)
{
	IRichDialogPanel rdPanelOnCardDisplay = (panel.centerTabbedPane.getSelectedComponent() as RCardDisplay).getSelectedPanel();
	ivy.log.debug("Invoking the \"refresh\" method on Rich Dialog {0}.", rdPanelOnCardDisplay.toString());
	rdPanelOnCardDisplay.getPanelAPI().callMethod("refresh", new List());
}' #txt
Ts0 f147 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f147 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>call 
refresh method</name>
        <nameStyle>20,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f147 1942 572 36 24 20 -2 #rect
Ts0 f147 @|RichDialogProcessStepIcon #fIcon
Ts0 f141 expr out #txt
Ts0 f141 1960 596 1960 622 #arcP
Ts0 f149 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f149 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>which tab is selected?</name>
        <nameStyle>22,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f149 1946 474 28 28 11 -28 #rect
Ts0 f149 @|AlternativeIcon #fIcon
Ts0 f150 expr out #txt
Ts0 f150 1960 442 1960 474 #arcP
Ts0 f148 expr in #txt
Ts0 f148 outCond 'panel.centerTabbedPane.getSelectedComponent().equals(panel.documentsDisplay) || 
panel.centerTabbedPane.getSelectedComponent().equals(panel.annotationsDisplay) || 
panel.centerTabbedPane.getSelectedComponent().equals(panel.eventLogsDisplay) || 
panel.centerTabbedPane.getSelectedComponent().equals(panel.detailsDisplay)' #txt
Ts0 f148 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>documents or
annotations or
events or
details</name>
        <nameStyle>45,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f148 1960 502 1960 572 #arcP
Ts0 f166 expr in #txt
Ts0 f166 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name></name>
    </language>
</elementInfo>
' #txt
Ts0 f166 1974 488 1970 632 #arcP
Ts0 f166 1 2072 488 #addKink
Ts0 f166 2 2072 632 #addKink
Ts0 f166 1 0.06985102898008527 0 0 #arcLabel
Ts0 f151 guid 12D8465D31A583A0 #txt
Ts0 f151 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f151 method _startTask() #txt
Ts0 f151 disableUIEvents true #txt
Ts0 f151 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Ts0 f151 outParameterDecl '<> result;
' #txt
Ts0 f151 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_startTask()</name>
        <nameStyle>12,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f151 358 70 20 20 13 0 #rect
Ts0 f151 @|RichDialogMethodStartIcon #fIcon
Ts0 f152 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f152 358 438 20 20 13 0 #rect
Ts0 f152 @|RichDialogProcessEndIcon #fIcon
Ts0 f153 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f153 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>fire the
&quot;xivyTaskStarted&quot;</name>
        <nameStyle>26,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f153 350 380 36 24 21 -10 #rect
Ts0 f153 @|RichDialogFireEventIcon #fIcon
Ts0 f154 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f154 actionTable 'out=in;
' #txt
Ts0 f154 actionCode 'out.startTaskRequested = true;

' #txt
Ts0 f154 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f154 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start requested 
to true</name>
        <nameStyle>24,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f154 350 108 36 24 20 -2 #rect
Ts0 f154 @|RichDialogProcessStepIcon #fIcon
Ts0 f155 targetWindow NEW #txt
Ts0 f155 targetDisplay TOP #txt
Ts0 f155 richDialogId ch.ivyteam.ivy.addons.commondialogs.MessageDialog #txt
Ts0 f155 startMethod showMessage(String) #txt
Ts0 f155 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f155 requestActionDecl '<String message> param;' #txt
Ts0 f155 requestMappingAction 'param.message=ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/common/plainStrings/alreadyOneTaskRunning");
' #txt
Ts0 f155 responseActionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f155 responseMappingAction 'out=in;
' #txt
Ts0 f155 windowConfiguration '{/title "Message"/width 300 /height 150 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Ts0 f155 isAsynch false #txt
Ts0 f155 isInnerRd true #txt
Ts0 f155 isDialog true #txt
Ts0 f155 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Display
message
info</name>
        <nameStyle>20,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f155 502 372 36 24 22 -27 #rect
Ts0 f155 @|RichDialogIcon #fIcon
Ts0 f156 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f156 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>task is initialized and 
task could be started?</name>
        <nameStyle>47,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f156 354 170 28 28 11 -31 #rect
Ts0 f156 @|AlternativeIcon #fIcon
Ts0 f157 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f157 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>more than one
task running ?</name>
        <nameStyle>28,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f157 506 274 28 28 -37 -50 #rect
Ts0 f157 @|AlternativeIcon #fIcon
Ts0 f158 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f158 actionTable 'out=in;
' #txt
Ts0 f158 actionCode 'import ch.ivyteam.ivy.workflow.ui.utils.StartConfigurationCreator;

StartConfigurationCreator.startTask(in.taskExecutionDisplayId, panel, in.task);
in.taskIsExecuting = true;

String tabTitle = ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/task/plainStrings/taskExecution") + " \u2022";

int executionTabDisplayIndex = panel.centerTabbedPane.indexOfComponent(panel.taskExecutionDisplay);


panel.centerTabbedPane.setEnabledAt(executionTabDisplayIndex, true);
panel.centerTabbedPane.setTitleAt(executionTabDisplayIndex, tabTitle);
panel.centerTabbedPane.setSelectedComponent(panel.taskExecutionDisplay);

' #txt
Ts0 f158 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f158 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start task
and enable its tab and switch to it</name>
        <nameStyle>46,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f158 350 332 36 24 24 -18 #rect
Ts0 f158 @|RichDialogProcessStepIcon #fIcon
Ts0 f159 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f159 actionTable 'out=in;
' #txt
Ts0 f159 actionCode 'import ch.ivyteam.ivy.workflow.ui.utils.UserPropertyKeys;

//TIFAM - 12.08.2009 - store initial divider posision
//test if user has read property permission otherwise get CMS value
if (ivy.session.hasPermission(ivy.request.getApplication().getSecurityDescriptor(), ch.ivyteam.ivy.security.IPermission.USER_READ_PROPERTY) && ivy.session.getSessionUser().getProperty(UserPropertyKeys.MENU_AUTO_HIDE_PROPERTY_KEY).length() > 0)
	{
	in.autoHideMenuParameter = ivy.session.getSessionUser().getProperty(UserPropertyKeys.MENU_AUTO_HIDE_PROPERTY_KEY) ;						
	}
else
	{
	in.autoHideMenuParameter = ivy.cms.co("/ch/ivyteam/ivy/workflow/ui/task/parameters/menuAutoHide") ;
	}' #txt
Ts0 f159 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f159 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set auto hide 
menu parameter</name>
        <nameStyle>29,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f159 350 220 36 24 22 -14 #rect
Ts0 f159 @|RichDialogProcessStepIcon #fIcon
Ts0 f170 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f170 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>auto hide menu mode ?</name>
        <nameStyle>21,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f170 354 274 28 28 13 -21 #rect
Ts0 f170 @|AlternativeIcon #fIcon
Ts0 f187 expr in #txt
Ts0 f187 outCond 'in.#task is initialized && (
in.task.getState().equals(ch.ivyteam.ivy.workflow.TaskState.SUSPENDED) ||
in.task.getState().equals(ch.ivyteam.ivy.workflow.TaskState.PARKED) || 
in.task.getState().equals(ch.ivyteam.ivy.workflow.TaskState.DELAYED))' #txt
Ts0 f187 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f187 368 198 368 220 #arcP
Ts0 f188 expr out #txt
Ts0 f188 368 244 368 274 #arcP
Ts0 f189 expr in #txt
Ts0 f189 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>no</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f189 516 298 386 344 #arcP
Ts0 f189 1 496 344 #addKink
Ts0 f189 1 0.25571391060333826 0 0 #arcLabel
Ts0 f190 expr in #txt
Ts0 f190 outCond in.autoHideMenuParameter.equalsIgnoreCase("true") #txt
Ts0 f190 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f190 382 288 506 288 #arcP
Ts0 f191 expr in #txt
Ts0 f191 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>no</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f191 368 302 368 332 #arcP
Ts0 f192 expr in #txt
Ts0 f192 outCond 'ivy.session.findResumedWorkTasks(0,-1).size() > 0' #txt
Ts0 f192 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f192 520 302 520 372 #arcP
Ts0 f194 expr out #txt
Ts0 f194 368 356 368 380 #arcP
Ts0 f195 expr out #txt
Ts0 f195 368 90 368 108 #arcP
Ts0 f196 expr out #txt
Ts0 f196 520 396 377 446 #arcP
Ts0 f196 1 520 432 #addKink
Ts0 f196 1 0.3471685517924726 0 0 #arcLabel
Ts0 f197 expr in #txt
Ts0 f197 382 184 378 448 #arcP
Ts0 f197 1 592 184 #addKink
Ts0 f197 2 592 448 #addKink
Ts0 f197 1 0.3597930841217812 0 0 #arcLabel
Ts0 f199 expr out #txt
Ts0 f199 368 404 368 438 #arcP
Ts0 f200 expr out #txt
Ts0 f200 368 132 368 170 #arcP
Ts0 f168 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f168 actionTable 'out=in;
' #txt
Ts0 f168 actionCode panel._startTask(); #txt
Ts0 f168 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f168 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>call start task</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f168 982 108 36 24 20 -2 #rect
Ts0 f168 @|RichDialogProcessStepIcon #fIcon
Ts0 f177 expr out #txt
Ts0 f177 1000 90 1000 108 #arcP
Ts0 f2 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f2 actionTable 'out=in;
' #txt
Ts0 f2 actionCode panel.centerTabbedPane.setSelectedComponent(panel.detailsDisplay); #txt
Ts0 f2 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f2 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>select the details tab</name>
        <nameStyle>22,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f2 1454 204 36 24 20 -2 #rect
Ts0 f2 @|RichDialogProcessStepIcon #fIcon
Ts0 f40 expr out #txt
Ts0 f40 1472 180 1472 204 #arcP
Ts0 f16 expr out #txt
Ts0 f16 1472 228 1472 251 #arcP
Ts0 f41 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f41 990 158 20 20 13 0 #rect
Ts0 f41 @|RichDialogProcessEndIcon #fIcon
Ts0 f42 expr out #txt
Ts0 f42 1000 132 1000 158 #arcP
Ts0 f26 actionDecl 'ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData out;
' #txt
Ts0 f26 actionTable 'out=in;
' #txt
Ts0 f26 actionCode panel._startTask(); #txt
Ts0 f26 type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
Ts0 f26 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>call start task</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f26 1070 164 36 24 20 -2 #rect
Ts0 f26 @|RichDialogProcessStepIcon #fIcon
Ts0 f43 expr in #txt
Ts0 f43 outCond in.startTaskRequested #txt
Ts0 f43 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f43 1277 131 1106 172 #arcP
Ts0 f43 0 0.27472050808278337 0 0 #arcLabel
Ts0 f44 expr out #txt
Ts0 f44 1088 188 1088 211 #arcP
Ts0 f103 expr out #txt
Ts0 f103 1088 237 1088 252 #arcP
Ts0 f48 expr out #txt
Ts0 f48 1088 516 1088 539 #arcP
Ts0 f50 expr out #txt
Ts0 f50 1088 276 1088 291 #arcP
Ts0 f39 expr out #txt
Ts0 f39 1088 356 1088 371 #arcP
Ts0 f45 expr out #txt
Ts0 f45 1088 436 1088 451 #arcP
>Proto Ts0 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <swimlaneLabel>Start methods</swimlaneLabel>
        <swimlaneLabel>Private methods</swimlaneLabel>
        <swimlaneLabel>Methods</swimlaneLabel>
        <swimlaneLabel>Events</swimlaneLabel>
        <swimlaneLabel>Accepted Broadcasts</swimlaneLabel>
        <swimlaneLabel></swimlaneLabel>
    </language>
    <swimlaneSize>327</swimlaneSize>
    <swimlaneSize>306</swimlaneSize>
    <swimlaneSize>311</swimlaneSize>
    <swimlaneSize>1776</swimlaneSize>
    <swimlaneSize>893</swimlaneSize>
    <swimlaneColor>-16711732</swimlaneColor>
    <swimlaneColor>-16737793</swimlaneColor>
    <swimlaneColor>-6697729</swimlaneColor>
    <swimlaneColor>-6684673</swimlaneColor>
    <swimlaneColor>-16711681</swimlaneColor>
</elementInfo>
' #txt
>Proto Ts0 .type ch.ivyteam.ivy.workflow.ui.task.TaskDisplay.TaskDisplayData #txt
>Proto Ts0 .processKind RICH_DIALOG #txt
>Proto Ts0 .rdData2UIAction 'panel.delegateTaskButton.enabled=in.task.getState().equals(ch.ivyteam.ivy.workflow.TaskState.SUSPENDED)||
 in.task.getState().equals(ch.ivyteam.ivy.workflow.TaskState.PARKED)||
  in.task.getState().equals(ch.ivyteam.ivy.workflow.TaskState.UNASSIGNED);
panel.delegateTaskButton.visible=!in.taskIsExecuting;
panel.footerLabel.text=in.footerMessage;
panel.parkTaskButton.enabled=in.task.getState().equals(ch.ivyteam.ivy.workflow.TaskState.RESUMED);
panel.parkTaskButton.visible=in.taskIsExecuting;
panel.startTaskToggleButton.enabled=in.task.getState().equals(ch.ivyteam.ivy.workflow.TaskState.SUSPENDED) || 
in.task.getState().equals(ch.ivyteam.ivy.workflow.TaskState.PARKED);
panel.startTaskToggleButton.visible=!in.taskIsExecuting;
' #txt
>Proto Ts0 -8 -8 16 16 16 26 #rect
>Proto Ts0 '' #fIcon
Ts0 f76 mainOut f80 tail #connect
Ts0 f80 head f79 in #connect
Ts0 f79 out f78 tail #connect
Ts0 f78 head f77 mainIn #connect
Ts0 f83 mainOut f94 tail #connect
Ts0 f94 head f93 in #connect
Ts0 f93 out f88 tail #connect
Ts0 f88 head f87 mainIn #connect
Ts0 f93 out f96 tail #connect
Ts0 f96 head f95 mainIn #connect
Ts0 f116 mainOut f117 tail #connect
Ts0 f117 head f6 mainIn #connect
Ts0 f118 mainOut f123 tail #connect
Ts0 f123 head f122 in #connect
Ts0 f122 out f124 tail #connect
Ts0 f124 head f121 mainIn #connect
Ts0 f122 out f127 tail #connect
Ts0 f127 head f126 mainIn #connect
Ts0 f131 mainOut f138 tail #connect
Ts0 f138 head f137 in #connect
Ts0 f137 out f136 tail #connect
Ts0 f136 head f135 mainIn #connect
Ts0 f140 mainOut f145 tail #connect
Ts0 f145 head f144 mainIn #connect
Ts0 f126 mainOut f130 tail #connect
Ts0 f130 head f119 mainIn #connect
Ts0 f128 mainOut f13 tail #connect
Ts0 f13 head f12 in #connect
Ts0 f23 head f11 mainIn #connect
Ts0 f11 mainOut f24 tail #connect
Ts0 f24 head f125 mainIn #connect
Ts0 f137 out f47 tail #connect
Ts0 f47 head f142 mainIn #connect
Ts0 f142 mainOut f35 tail #connect
Ts0 f35 head f125 mainIn #connect
Ts0 f12 out f53 tail #connect
Ts0 f53 head f52 in #connect
Ts0 f12 out f23 tail #connect
Ts0 f52 out f21 tail #connect
Ts0 f21 head f131 mainIn #connect
Ts0 f52 out f74 tail #connect
Ts0 f74 head f142 mainIn #connect
Ts0 f121 mainOut f97 tail #connect
Ts0 f97 head f129 mainIn #connect
Ts0 f17 head f81 mainIn #connect
Ts0 f75 mainOut f19 tail #connect
Ts0 f19 head f18 in #connect
Ts0 f20 head f81 mainIn #connect
Ts0 f135 mainOut f49 tail #connect
Ts0 f49 head f140 mainIn #connect
Ts0 f67 out f100 tail #connect
Ts0 f100 head f92 mainIn #connect
Ts0 f67 out f101 tail #connect
Ts0 f101 head f98 mainIn #connect
Ts0 f98 mainOut f104 tail #connect
Ts0 f104 head f91 mainIn #connect
Ts0 f92 mainOut f105 tail #connect
Ts0 f105 head f66 mainIn #connect
Ts0 f68 mainOut f107 tail #connect
Ts0 f107 head f86 in #connect
Ts0 f86 out f99 tail #connect
Ts0 f99 head f67 in #connect
Ts0 f86 out f108 tail #connect
Ts0 f108 head f89 mainIn #connect
Ts0 f89 mainOut f110 tail #connect
Ts0 f110 head f91 mainIn #connect
Ts0 f174 mainOut f175 tail #connect
Ts0 f175 head f6 mainIn #connect
Ts0 f59 mainOut f183 tail #connect
Ts0 f183 head f169 in #connect
Ts0 f182 out f185 tail #connect
Ts0 f185 head f59 mainIn #connect
Ts0 f182 out f176 tail #connect
Ts0 f176 head f179 mainIn #connect
Ts0 f146 mainOut f181 tail #connect
Ts0 f181 head f179 mainIn #connect
Ts0 f173 mainOut f167 tail #connect
Ts0 f167 head f179 mainIn #connect
Ts0 f169 out f184 tail #connect
Ts0 f184 head f146 mainIn #connect
Ts0 f169 out f186 tail #connect
Ts0 f186 head f173 mainIn #connect
Ts0 f169 out f204 tail #connect
Ts0 f204 head f193 mainIn #connect
Ts0 f120 mainOut f205 tail #connect
Ts0 f205 head f182 in #connect
Ts0 f0 mainOut f71 tail #connect
Ts0 f71 head f210 mainIn #connect
Ts0 f18 out f206 tail #connect
Ts0 f206 head f65 mainIn #connect
Ts0 f18 out f20 tail #connect
Ts0 f65 mainOut f8 tail #connect
Ts0 f8 head f7 in #connect
Ts0 f111 mainOut f112 tail #connect
Ts0 f112 head f182 in #connect
Ts0 f22 mainOut f113 tail #connect
Ts0 f113 head f6 mainIn #connect
Ts0 f27 mainOut f198 tail #connect
Ts0 f198 head f73 in #connect
Ts0 f31 mainOut f4 tail #connect
Ts0 f4 head f1 mainIn #connect
Ts0 f5 head f3 mainIn #connect
Ts0 f14 mainOut f34 tail #connect
Ts0 f34 head f31 mainIn #connect
Ts0 f7 out f60 tail #connect
Ts0 f60 head f57 mainIn #connect
Ts0 f7 out f17 tail #connect
Ts0 f79 out f9 tail #connect
Ts0 f9 head f58 mainIn #connect
Ts0 f70 mainOut f85 tail #connect
Ts0 f85 head f84 mainIn #connect
Ts0 f90 mainOut f109 tail #connect
Ts0 f109 head f106 mainIn #connect
Ts0 f132 mainOut f115 tail #connect
Ts0 f115 head f114 mainIn #connect
Ts0 f30 mainOut f36 tail #connect
Ts0 f36 head f32 mainIn #connect
Ts0 f32 mainOut f54 tail #connect
Ts0 f54 head f33 mainIn #connect
Ts0 f33 mainOut f55 tail #connect
Ts0 f55 head f29 mainIn #connect
Ts0 f29 mainOut f56 tail #connect
Ts0 f56 head f25 mainIn #connect
Ts0 f15 mainOut f139 tail #connect
Ts0 f139 head f30 mainIn #connect
Ts0 f25 mainOut f10 tail #connect
Ts0 f10 head f217 mainIn #connect
Ts0 f147 mainOut f141 tail #connect
Ts0 f141 head f133 mainIn #connect
Ts0 f28 mainOut f150 tail #connect
Ts0 f150 head f149 in #connect
Ts0 f149 out f148 tail #connect
Ts0 f148 head f147 mainIn #connect
Ts0 f149 out f166 tail #connect
Ts0 f166 head f133 mainIn #connect
Ts0 f156 out f187 tail #connect
Ts0 f187 head f159 mainIn #connect
Ts0 f159 mainOut f188 tail #connect
Ts0 f188 head f170 in #connect
Ts0 f189 head f158 mainIn #connect
Ts0 f170 out f190 tail #connect
Ts0 f190 head f157 in #connect
Ts0 f170 out f191 tail #connect
Ts0 f191 head f158 mainIn #connect
Ts0 f157 out f192 tail #connect
Ts0 f192 head f155 mainIn #connect
Ts0 f157 out f189 tail #connect
Ts0 f158 mainOut f194 tail #connect
Ts0 f194 head f153 mainIn #connect
Ts0 f151 mainOut f195 tail #connect
Ts0 f195 head f154 mainIn #connect
Ts0 f155 mainOut f196 tail #connect
Ts0 f196 head f152 mainIn #connect
Ts0 f156 out f197 tail #connect
Ts0 f197 head f152 mainIn #connect
Ts0 f153 mainOut f199 tail #connect
Ts0 f199 head f152 mainIn #connect
Ts0 f154 mainOut f200 tail #connect
Ts0 f200 head f156 in #connect
Ts0 f37 mainOut f177 tail #connect
Ts0 f177 head f168 mainIn #connect
Ts0 f3 mainOut f40 tail #connect
Ts0 f40 head f2 mainIn #connect
Ts0 f2 mainOut f16 tail #connect
Ts0 f16 head f15 mainIn #connect
Ts0 f168 mainOut f42 tail #connect
Ts0 f42 head f41 mainIn #connect
Ts0 f73 out f43 tail #connect
Ts0 f43 head f26 mainIn #connect
Ts0 f73 out f5 tail #connect
Ts0 f26 mainOut f44 tail #connect
Ts0 f44 head f61 mainIn #connect
Ts0 f61 mainOut f103 tail #connect
Ts0 f103 head f63 mainIn #connect
Ts0 f114 mainOut f48 tail #connect
Ts0 f48 head f38 mainIn #connect
Ts0 f63 mainOut f50 tail #connect
Ts0 f50 head f70 mainIn #connect
Ts0 f84 mainOut f39 tail #connect
Ts0 f39 head f90 mainIn #connect
Ts0 f106 mainOut f45 tail #connect
Ts0 f45 head f132 mainIn #connect
