<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:cc="http://xmlns.jcp.org/jsf/composite" xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions">

<cc:interface componentType="IvyComponent">
  <cc:attribute name="tableRowSelected"
    shortDescription="TableRowSelected will be invoked on the callback when a person is selected."
    method-signature="void handleEvent(javax.faces.event.FacesEvent)" required="true" />
  <cc:attribute name="buttonClicked"
    shortDescription="Click event will be fired on the callback when the button is cklicked."
    method-signature="void handleEvent(javax.faces.event.FacesEvent)" />
</cc:interface>

<cc:implementation>
  <p:dataTable value="#{data.persons}" var="person" selectionMode="single"
    selection="#{data.selectedPerson}" id="personsTable" widgetVar="personsTable">

    <p:ajax event="rowSelect" update="@form" listener="#{cc.attrs.tableRowSelected}" />
    <!-- registers method from parent as actionListener -->

    <p:column headerText="Name">
      #{person.name}
    </p:column>
    <p:column headerText="First Name">
      #{person.firstname}
    </p:column>
  </p:dataTable>

  <h:panelGrid>
    <p:commandButton value="Fire event!" icon="pi pi-send" style="margin-top:10px;" actionListener="#{cc.attrs.buttonClicked}"
      update="@form" id="fireEventButton" />
  </h:panelGrid>
</cc:implementation>

</html>
