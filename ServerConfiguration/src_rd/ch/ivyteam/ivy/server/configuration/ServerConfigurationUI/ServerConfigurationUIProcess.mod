[Ivy]
[>Created: Mon Jun 01 10:05:18 CEST 2015]
1166786074EC72C6 3.17 #module
>Proto >Proto Collection #zClass
Ss0 ServerConfigurationUIProcess Big #zClass
Ss0 RD #cInfo
Ss0 #process
Ss0 @MessageFlowInP-0n messageIn messageIn #zField
Ss0 @MessageFlowOutP-0n messageOut messageOut #zField
Ss0 @TextInP .xml .xml #zField
Ss0 @TextInP .responsibility .responsibility #zField
Ss0 @TextInP .resExport .resExport #zField
Ss0 @TextInP .type .type #zField
Ss0 @TextInP .processKind .processKind #zField
Ss0 @AnnotationInP-0n ai ai #zField
Ss0 @TextInP .ui2RdDataAction .ui2RdDataAction #zField
Ss0 @TextInP .rdData2UIAction .rdData2UIAction #zField
Ss0 @RichDialogInitStart f0 '' #zField
Ss0 @RichDialogProcessEnd f1 '' #zField
Ss0 @RichDialogProcessStep f3 '' #zField
Ss0 @RichDialogProcessStart f11 '' #zField
Ss0 @RichDialogProcessStart f12 '' #zField
Ss0 @RichDialogProcessEnd f13 '' #zField
Ss0 @RichDialogProcessEnd f14 '' #zField
Ss0 @RichDialogProcessStep f16 '' #zField
Ss0 @RichDialogProcessStart f24 '' #zField
Ss0 @RichDialogProcessStart f25 '' #zField
Ss0 @RichDialogProcessEnd f26 '' #zField
Ss0 @RichDialogProcessEnd f27 '' #zField
Ss0 @RichDialogProcessStep f30 '' #zField
Ss0 @PushWFArc f31 '' #zField
Ss0 @PushWFArc f28 '' #zField
Ss0 @RichDialogProcessStep f32 '' #zField
Ss0 @PushWFArc f33 '' #zField
Ss0 @PushWFArc f29 '' #zField
Ss0 @RichDialogProcessStart f38 '' #zField
Ss0 @RichDialog f39 '' #zField
Ss0 @RichDialogProcessEnd f41 '' #zField
Ss0 @RichDialogProcessStep f43 '' #zField
Ss0 @PushWFArc f44 '' #zField
Ss0 @PushWFArc f42 '' #zField
Ss0 @RichDialogProcessStart f21 '' #zField
Ss0 @RichDialogProcessStep f22 '' #zField
Ss0 @PushWFArc f34 '' #zField
Ss0 @RichDialogProcessStep f45 '' #zField
Ss0 @RichDialogProcessStart f47 '' #zField
Ss0 @RichDialogProcessStart f48 '' #zField
Ss0 @RichDialog f49 '' #zField
Ss0 @RichDialog f50 '' #zField
Ss0 @RichDialogProcessEnd f51 '' #zField
Ss0 @RichDialogProcessEnd f52 '' #zField
Ss0 @RichDialogProcessStep f57 '' #zField
Ss0 @PushWFArc f54 '' #zField
Ss0 @RichDialogProcessStep f59 '' #zField
Ss0 @PushWFArc f60 '' #zField
Ss0 @PushWFArc f56 '' #zField
Ss0 @RichDialogProcessEnd f9 '' #zField
Ss0 @RichDialogMethodStart f36 '' #zField
Ss0 @PushWFArc f4 '' #zField
Ss0 @RichDialogProcessStep f5 '' #zField
Ss0 @RichDialog f7 '' #zField
Ss0 @PushWFArc f8 '' #zField
Ss0 @RichDialog f15 '' #zField
Ss0 @RichDialogProcessEnd f17 '' #zField
Ss0 @Alternative f61 '' #zField
Ss0 @RichDialogProcessStart f18 '' #zField
Ss0 @PushWFArc f63 '' #zField
Ss0 @PushWFArc f64 '' #zField
Ss0 @PushWFArc f65 '' #zField
Ss0 @RichDialogInitStart f68 '' #zField
Ss0 @RichDialogProcessEnd f69 '' #zField
Ss0 @PushWFArc f70 '' #zField
Ss0 @RichDialogProcessEnd f71 '' #zField
Ss0 @Alternative f72 '' #zField
Ss0 @PushWFArc f73 '' #zField
Ss0 @PushWFArc f10 '' #zField
Ss0 @RichDialogProcessStep f74 '' #zField
Ss0 @PushWFArc f75 '' #zField
Ss0 @PushWFArc f76 '' #zField
Ss0 @Alternative f62 '' #zField
Ss0 @PushWFArc f78 '' #zField
Ss0 @PushWFArc f77 '' #zField
Ss0 @PushWFArc f79 '' #zField
Ss0 @Alternative f80 '' #zField
Ss0 @PushWFArc f81 '' #zField
Ss0 @PushWFArc f82 '' #zField
Ss0 @PushWFArc f19 '' #zField
Ss0 @PushWFArc f20 '' #zField
Ss0 @PushWFArc f37 '' #zField
Ss0 @PushWFArc f66 '' #zField
Ss0 @RichDialog f23 '' #zField
Ss0 @PushWFArc f35 '' #zField
Ss0 @Alternative f67 '' #zField
Ss0 @PushWFArc f83 '' #zField
Ss0 @PushWFArc f53 '' #zField
Ss0 @PushWFArc f85 '' #zField
Ss0 @Alternative f84 '' #zField
Ss0 @PushWFArc f86 '' #zField
Ss0 @PushWFArc f58 '' #zField
Ss0 @PushWFArc f87 '' #zField
Ss0 @PushWFArc f6 '' #zField
Ss0 @PushWFArc f2 '' #zField
Ss0 @PushWFArc f46 '' #zField
Ss0 @RichDialogProcessStep f55 '' #zField
Ss0 @PushWFArc f89 '' #zField
Ss0 @PushWFArc f88 '' #zField
Ss0 @RichDialogProcessStep f90 '' #zField
Ss0 @PushWFArc f91 '' #zField
Ss0 @Alternative f92 '' #zField
Ss0 @PushWFArc f93 '' #zField
Ss0 @PushWFArc f40 '' #zField
Ss0 @RichDialog f94 '' #zField
Ss0 @PushWFArc f95 '' #zField
Ss0 @PushWFArc f96 '' #zField
>Proto Ss0 Ss0 ServerConfigurationUIProcess #zField
Ss0 f0 guid 1166D2F6B47CD76C #txt
Ss0 f0 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f0 method start(ch.ivyteam.ivy.server.configuration.Configuration) #txt
Ss0 f0 disableUIEvents false #txt
Ss0 f0 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.server.configuration.Configuration configuration> param = methodEvent.getInputArguments();
' #txt
Ss0 f0 inParameterMapAction 'out.configuration=param.configuration;
' #txt
Ss0 f0 outParameterDecl '<> result;
' #txt
Ss0 f0 embeddedRdInitializations '{/connectionTester {/fieldName "connectionTester"/startMethod "start()"/parameterMapping ""/initScript ""}/connectionPanel {/fieldName "connectionPanel"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
Ss0 f0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start(Configuration)</name>
    </language>
</elementInfo>
' #txt
Ss0 f0 46 30 20 20 13 0 #rect
Ss0 f0 @|RichDialogInitStartIcon #fIcon
Ss0 f1 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f1 43 219 26 26 14 0 #rect
Ss0 f1 @|RichDialogProcessEndIcon #fIcon
Ss0 f3 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f3 actionTable 'out=in;
out.properties=new Recordset(["name", "value"]);
' #txt
Ss0 f3 actionCode 'import ch.ivyteam.ivy.server.configuration.util.ConfigurationUtil;
import ch.ivyteam.ivy.server.configuration.Configuration;
import ch.ivyteam.ivy.persistence.db.DatabasePersistencyServiceFactory;
import ch.ivyteam.db.jdbc.DatabaseProduct;
import ch.ivyteam.db.jdbc.JdbcDriver;
import java.util.*;

if (in.configuration.getSystemDatabaseConnectionConfiguration() != null)
{
  in.selectedDriver = JdbcDriver.getJdbcDriverForConnectionConfiguration(DatabasePersistencyServiceFactory.getSupportedJdbcDrivers(), in.configuration.getSystemDatabaseConnectionConfiguration());
}
if (in.#selectedDriver == null)
{
	// if we can not evaluate the selected driver we create a new configuration with the default driver!
	in.configuration.setSystemDatabaseConnectionConfiguration(Configuration.createNewConfiguration().getSystemDatabaseConnectionConfiguration());
  in.selectedDriver = JdbcDriver.getJdbcDriverForConnectionConfiguration(DatabasePersistencyServiceFactory.getSupportedJdbcDrivers(), in.configuration.getSystemDatabaseConnectionConfiguration());
}

panel.connectionPanel.setServerConfiguration(in.configuration);
panel.connectionTester.setServerConfiguration(in.configuration);

for (DatabaseProduct product : ConfigurationUtil.getSupportedDatabases())
{
  in.databases.add(product);
}
if (in.databases.size()>0)
{
  if (in.#selectedDriver != null)
  {
    in.selectedDatabase = in.selectedDriver.getDatabaseProduct();
  }
  else
  {
    in.selectedDatabase = in.databases.get(0); 
  }
  for (JdbcDriver driver : JdbcDriver.getInstalledJdbcDrivers(in.selectedDatabase, DatabasePersistencyServiceFactory.getSupportedJdbcDrivers()))
  {
    in.drivers.add(driver);
  }
  if (in.drivers.size()>0)
  {
    if (in.#selectedDriver == null)
    {
      in.selectedDriver = in.drivers.get(0);
    }
  }
}
' #txt
Ss0 f3 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f3 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>init</name>
        <nameStyle>4,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f3 38 76 36 24 20 -2 #rect
Ss0 f3 @|RichDialogProcessStepIcon #fIcon
Ss0 f11 guid 1167B94B924A76C7 #txt
Ss0 f11 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f11 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f11 actionTable 'out=in;
' #txt
Ss0 f11 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>addConnectionProperty</name>
        <nameStyle>21,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f11 30 494 20 20 13 0 #rect
Ss0 f11 @|RichDialogProcessStartIcon #fIcon
Ss0 f12 guid 01167B94C0F49091 #txt
Ss0 f12 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f12 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f12 actionTable 'out=in;
' #txt
Ss0 f12 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>removeConnectionProperty</name>
        <nameStyle>24,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f12 206 494 20 20 14 -4 #rect
Ss0 f12 @|RichDialogProcessStartIcon #fIcon
Ss0 f13 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f13 27 667 26 26 14 0 #rect
Ss0 f13 @|RichDialogProcessEndIcon #fIcon
Ss0 f14 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f14 331 587 26 26 14 0 #rect
Ss0 f14 @|RichDialogProcessEndIcon #fIcon
Ss0 f16 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f16 actionTable 'out=in;
' #txt
Ss0 f16 actionCode 'in.properties.remove(panel.additionalPropertiesTable.getSelectedRecord());
' #txt
Ss0 f16 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f16 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Delete property</name>
        <nameStyle>15
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f16 198 588 36 24 20 -2 #rect
Ss0 f16 @|RichDialogProcessStepIcon #fIcon
Ss0 f24 guid 1167BD00C2BB146A #txt
Ss0 f24 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f24 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f24 actionTable 'out=in;
' #txt
Ss0 f24 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>databaseSelected</name>
        <nameStyle>16,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f24 310 38 20 20 13 0 #rect
Ss0 f24 @|RichDialogProcessStartIcon #fIcon
Ss0 f25 guid 1167BD0595D87A5E #txt
Ss0 f25 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f25 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f25 actionTable 'out=in;
' #txt
Ss0 f25 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>driverSelected</name>
        <nameStyle>14,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f25 430 38 20 20 13 0 #rect
Ss0 f25 @|RichDialogProcessStartIcon #fIcon
Ss0 f26 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f26 307 123 26 26 14 0 #rect
Ss0 f26 @|RichDialogProcessEndIcon #fIcon
Ss0 f27 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f27 427 123 26 26 14 0 #rect
Ss0 f27 @|RichDialogProcessEndIcon #fIcon
Ss0 f30 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f30 actionTable 'out=in;
' #txt
Ss0 f30 actionCode 'if (in.#selectedDriver != null)
{
  panel.connectionPanel.setJdbcDriver(in.selectedDriver); 
  panel.connectionTester.configurationChanged();
}' #txt
Ss0 f30 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f30 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set driver</name>
        <nameStyle>10,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f30 422 76 36 24 20 -2 #rect
Ss0 f30 @|RichDialogProcessStepIcon #fIcon
Ss0 f31 expr out #txt
Ss0 f31 440 58 440 76 #arcP
Ss0 f28 expr out #txt
Ss0 f28 440 100 440 123 #arcP
Ss0 f32 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f32 actionTable 'out=in;
' #txt
Ss0 f32 actionCode 'import ch.ivyteam.db.jdbc.JdbcDriver;
import ch.ivyteam.ivy.persistence.db.DatabasePersistencyServiceFactory;

if (in.#selectedDatabase != null)
{
  in.drivers = new List<JdbcDriver>();
  for (JdbcDriver driver : JdbcDriver.getInstalledJdbcDrivers(in.selectedDatabase, DatabasePersistencyServiceFactory.getSupportedJdbcDrivers()))
  {
    in.drivers.add(driver);
  }
  if (in.drivers.size()>0)
  {
    in.selectedDriver = in.drivers.get(0);  
  }
}' #txt
Ss0 f32 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f32 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get default driver</name>
        <nameStyle>18,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f32 302 76 36 24 20 -2 #rect
Ss0 f32 @|RichDialogProcessStepIcon #fIcon
Ss0 f33 expr out #txt
Ss0 f33 320 58 320 76 #arcP
Ss0 f29 expr out #txt
Ss0 f29 320 100 320 123 #arcP
Ss0 f38 guid 1168AFD9EFB455AE #txt
Ss0 f38 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f38 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f38 actionTable 'out=in;
' #txt
Ss0 f38 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>createSystemDatabase</name>
        <nameStyle>20,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f38 30 278 20 20 13 0 #rect
Ss0 f38 @|RichDialogProcessStartIcon #fIcon
Ss0 f39 targetWindow NEW:card: #txt
Ss0 f39 targetDisplay TOP #txt
Ss0 f39 richDialogId ch.ivyteam.ivy.server.configuration.DatabaseCreationParameterUI #txt
Ss0 f39 startMethod start(ch.ivyteam.db.jdbc.DatabaseConnectionConfiguration) #txt
Ss0 f39 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f39 requestActionDecl '<ch.ivyteam.db.jdbc.DatabaseConnectionConfiguration DatabaseConnectionConfiguration> param;' #txt
Ss0 f39 requestMappingAction 'param.DatabaseConnectionConfiguration=in.configuration.systemDatabaseConnectionConfiguration;
' #txt
Ss0 f39 responseActionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f39 responseMappingAction 'out=in;
out.configuration.systemDatabaseConnectionConfiguration=result.createdDatabaseConnectionConfiguration;
' #txt
Ss0 f39 responseActionCode 'import java.util.Properties;
import java.util.Map.Entry;

in.configuration.systemDatabaseConnectionConfiguration=result.createdDatabaseConnectionConfiguration;

// read properties
out.properties.clear();
Properties props = in.#configuration.#systemDatabaseConnectionConfiguration.getProperties();

if (#props != null)
{
	for (Entry prop : props.entrySet())
	{
		out.properties.add([prop.getKey(), prop.getValue()]);
	}	
}' #txt
Ss0 f39 windowConfiguration '{/title "Create System Database"/width 400 /height 200 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Ss0 f39 isAsynch false #txt
Ss0 f39 isInnerRd true #txt
Ss0 f39 isDialog true #txt
Ss0 f39 userContext '* ' #txt
Ss0 f39 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>create DB</name>
        <nameStyle>9,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f39 22 364 36 24 20 -2 #rect
Ss0 f39 @|RichDialogIcon #fIcon
Ss0 f41 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f41 27 451 26 26 14 0 #rect
Ss0 f41 @|RichDialogProcessEndIcon #fIcon
Ss0 f43 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f43 actionTable 'out=in;
' #txt
Ss0 f43 actionCode 'panel.connectionPanel.configurationChanged();
panel.connectionTester.configurationChanged();' #txt
Ss0 f43 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f43 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh</name>
        <nameStyle>7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f43 22 404 36 24 20 -2 #rect
Ss0 f43 @|RichDialogProcessStepIcon #fIcon
Ss0 f44 expr out #txt
Ss0 f44 40 388 40 404 #arcP
Ss0 f42 expr out #txt
Ss0 f42 40 428 40 451 #arcP
Ss0 f21 guid 116B550ED02A74AB #txt
Ss0 f21 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f21 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f21 actionTable 'out=in;
' #txt
Ss0 f21 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>databaseConnectionConfigurationChanged</name>
        <nameStyle>38,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f21 214 278 20 20 13 0 #rect
Ss0 f21 @|RichDialogProcessStartIcon #fIcon
Ss0 f22 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f22 actionTable 'out=in;
' #txt
Ss0 f22 actionCode panel.connectionTester.configurationChanged(); #txt
Ss0 f22 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f22 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>test changed configuration</name>
        <nameStyle>26,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f22 206 332 36 24 20 -2 #rect
Ss0 f22 @|RichDialogProcessStepIcon #fIcon
Ss0 f34 expr out #txt
Ss0 f34 224 298 224 332 #arcP
Ss0 f45 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f45 actionTable 'out=in;
' #txt
Ss0 f45 actionCode 'panel.connectionTester.addButtonToEnableIfConnectionEstablished(panel.deleteSysDbButton);
panel.connectionTester.addButtonToEnableIfWrongDbVersion(panel.convertSysDbButton);' #txt
Ss0 f45 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f45 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>update UI</name>
        <nameStyle>9,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f45 38 172 36 24 20 -2 #rect
Ss0 f45 @|RichDialogProcessStepIcon #fIcon
Ss0 f47 guid 116C87618776EF6B #txt
Ss0 f47 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f47 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f47 actionTable 'out=in;
' #txt
Ss0 f47 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>convertSystemDatabase</name>
        <nameStyle>21,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f47 438 286 20 20 13 0 #rect
Ss0 f47 @|RichDialogProcessStartIcon #fIcon
Ss0 f48 guid 116C87622B74BF07 #txt
Ss0 f48 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f48 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f48 actionTable 'out=in;
' #txt
Ss0 f48 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>disconnectSystemDatabase</name>
        <nameStyle>24,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f48 606 286 20 20 13 0 #rect
Ss0 f48 @|RichDialogProcessStartIcon #fIcon
Ss0 f49 targetWindow NEW #txt
Ss0 f49 targetDisplay TOP #txt
Ss0 f49 richDialogId ch.ivyteam.ivy.server.configuration.system.db.ConvertSystemDatabaseUI #txt
Ss0 f49 startMethod start(ch.ivyteam.db.jdbc.DatabaseConnectionConfiguration,Number) #txt
Ss0 f49 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f49 requestActionDecl '<ch.ivyteam.db.jdbc.DatabaseConnectionConfiguration dbConfiguration, Number version> param;' #txt
Ss0 f49 requestMappingAction 'param.dbConfiguration=in.configuration.systemDatabaseConnectionConfiguration;
param.version=panel.connectionTester.getSystemDatabaseVersion();
' #txt
Ss0 f49 responseActionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f49 responseMappingAction 'out=in;
out.buttonClicked=result.successful ? "yes" : "no";
' #txt
Ss0 f49 windowConfiguration '#Thu Dec 18 15:33:52 CET 2008
height=0
maximized=false
centered=true
close_after_last_rd=true
resizable=true
width=0
title=Convert System Database
' #txt
Ss0 f49 isAsynch false #txt
Ss0 f49 isInnerRd true #txt
Ss0 f49 isDialog true #txt
Ss0 f49 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>do convert
show progress</name>
        <nameStyle>24,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f49 430 436 36 24 20 -2 #rect
Ss0 f49 @|RichDialogIcon #fIcon
Ss0 f50 targetWindow NEW #txt
Ss0 f50 targetDisplay TOP #txt
Ss0 f50 richDialogId ch.ivyteam.ivy.server.configuration.system.db.DeleteSystemDatabase #txt
Ss0 f50 startMethod start(ch.ivyteam.db.jdbc.DatabaseConnectionConfiguration) #txt
Ss0 f50 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f50 requestActionDecl '<ch.ivyteam.db.jdbc.DatabaseConnectionConfiguration databaseConnectionConfiguration> param;' #txt
Ss0 f50 requestMappingAction 'param.databaseConnectionConfiguration=in.configuration.systemDatabaseConnectionConfiguration;
' #txt
Ss0 f50 responseActionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f50 responseMappingAction 'out=in;
' #txt
Ss0 f50 windowConfiguration '#Thu Feb 05 15:34:01 CET 2009
height=0
maximized=false
centered=true
close_after_last_rd=true
resizable=true
width=0
title=Delete System Database
' #txt
Ss0 f50 isAsynch false #txt
Ss0 f50 isInnerRd true #txt
Ss0 f50 isDialog true #txt
Ss0 f50 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delete DB</name>
        <nameStyle>9,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f50 726 340 36 24 20 -2 #rect
Ss0 f50 @|RichDialogIcon #fIcon
Ss0 f51 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f51 435 611 26 26 14 0 #rect
Ss0 f51 @|RichDialogProcessEndIcon #fIcon
Ss0 f52 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f52 603 427 26 26 14 0 #rect
Ss0 f52 @|RichDialogProcessEndIcon #fIcon
Ss0 f57 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f57 actionTable 'out=in;
' #txt
Ss0 f57 actionCode 'panel.connectionPanel.configurationChanged();
panel.connectionTester.configurationChanged();' #txt
Ss0 f57 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f57 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>update UI</name>
        <nameStyle>9,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f57 430 556 36 24 20 -2 #rect
Ss0 f57 @|RichDialogProcessStepIcon #fIcon
Ss0 f54 expr out #txt
Ss0 f54 448 580 448 611 #arcP
Ss0 f59 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f59 actionTable 'out=in;
' #txt
Ss0 f59 actionCode 'panel.connectionPanel.configurationChanged();
panel.connectionTester.configurationChanged();' #txt
Ss0 f59 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f59 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh</name>
        <nameStyle>7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f59 598 388 36 24 20 -2 #rect
Ss0 f59 @|RichDialogProcessStepIcon #fIcon
Ss0 f60 expr out #txt
Ss0 f60 726 359 634 393 #arcP
Ss0 f56 expr out #txt
Ss0 f56 616 412 616 427 #arcP
Ss0 f9 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f9 219 171 26 26 14 0 #rect
Ss0 f9 @|RichDialogProcessEndIcon #fIcon
Ss0 f36 guid 117B554F9375DC11 #txt
Ss0 f36 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f36 method save() #txt
Ss0 f36 disableUIEvents false #txt
Ss0 f36 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Ss0 f36 outParameterDecl '<> result;
' #txt
Ss0 f36 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>save()</name>
        <nameStyle>6,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f36 222 54 20 20 13 0 #rect
Ss0 f36 @|RichDialogMethodStartIcon #fIcon
Ss0 f4 expr out #txt
Ss0 f4 56 50 56 76 #arcP
Ss0 f5 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f5 actionTable 'out=in;
' #txt
Ss0 f5 actionCode 'import java.util.Properties;
import java.util.Map.Entry;

// read properties
out.properties = new Recordset(["name", "value"]);
Object o = in.#configuration.#systemDatabaseConnectionConfiguration.getProperties();

if (#o != null)
{
	Properties props = o as Properties; 
	for (Entry prop : props.entrySet())
	{
		out.properties.add([prop.getKey(), prop.getValue()]);
	}	
}


' #txt
Ss0 f5 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f5 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Read connection properties</name>
        <nameStyle>26,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f5 38 124 36 24 19 -4 #rect
Ss0 f5 @|RichDialogProcessStepIcon #fIcon
Ss0 f7 targetWindow NEW #txt
Ss0 f7 targetDisplay TOP #txt
Ss0 f7 richDialogId ch.ivyteam.ivy.rd.common.PropertyEditor #txt
Ss0 f7 startMethod start(String,String) #txt
Ss0 f7 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f7 requestActionDecl '<String name, String value> param;' #txt
Ss0 f7 responseActionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f7 responseMappingAction 'out=in;
out.properties=IF(result.successful, 
  in.properties.add([result.name, result.value]),
  in.properties
);
out.propertyChanged=result.successful;
' #txt
Ss0 f7 windowConfiguration '#Mon Nov 03 15:08:23 CET 2008
height=0
maximized=false
centered=true
close_after_last_rd=true
resizable=false
width=0
title=Add property
' #txt
Ss0 f7 isAsynch false #txt
Ss0 f7 isInnerRd true #txt
Ss0 f7 isDialog true #txt
Ss0 f7 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Open property editor</name>
        <nameStyle>20,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f7 22 548 36 24 24 -10 #rect
Ss0 f7 @|RichDialogIcon #fIcon
Ss0 f8 expr out #txt
Ss0 f8 40 514 40 548 #arcP
Ss0 f15 targetWindow NEW #txt
Ss0 f15 targetDisplay TOP #txt
Ss0 f15 richDialogId ch.ivyteam.ivy.rd.common.PropertyEditor #txt
Ss0 f15 startMethod start(Record) #txt
Ss0 f15 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f15 requestActionDecl '<Record record> param;' #txt
Ss0 f15 requestMappingAction 'param.record=panel.additionalPropertiesTable.selectedRecord;
' #txt
Ss0 f15 responseActionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f15 responseMappingAction 'out=in;
out.propertyChanged=result.record.size()>0;
' #txt
Ss0 f15 responseActionCode 'if (result.record.size() > 0)
{
	int index = in.properties.indexOf(panel.additionalPropertiesTable.selectedRecord);
	out.properties.putField(index, "name", result.record.getField("name"));
	out.properties.putField(index, "value", result.record.getField("value"));
}' #txt
Ss0 f15 windowConfiguration '#Mon Nov 03 15:09:38 CET 2008
height=0
maximized=false
centered=true
close_after_last_rd=true
resizable=false
width=0
title=Edit property
' #txt
Ss0 f15 isAsynch false #txt
Ss0 f15 isInnerRd true #txt
Ss0 f15 isDialog true #txt
Ss0 f15 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Open property editor</name>
        <nameStyle>20,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f15 582 588 36 24 24 -10 #rect
Ss0 f15 @|RichDialogIcon #fIcon
Ss0 f17 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f17 643 643 26 26 14 0 #rect
Ss0 f17 @|RichDialogProcessEndIcon #fIcon
Ss0 f61 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f61 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Any property selected?</name>
        <nameStyle>22,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f61 642 530 28 28 14 0 #rect
Ss0 f61 @|AlternativeIcon #fIcon
Ss0 f18 guid 118A748F87FB518A #txt
Ss0 f18 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f18 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f18 actionTable 'out=in;
' #txt
Ss0 f18 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>editConnectionProperty</name>
        <nameStyle>22,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f18 646 494 20 20 13 0 #rect
Ss0 f18 @|RichDialogProcessStartIcon #fIcon
Ss0 f63 expr out #txt
Ss0 f63 656 514 656 530 #arcP
Ss0 f64 expr in #txt
Ss0 f64 outCond panel.additionalPropertiesTable.getSelectedRecord()!=null #txt
Ss0 f64 649 551 612 588 #arcP
Ss0 f65 expr in #txt
Ss0 f65 656 558 656 643 #arcP
Ss0 f65 0 0.585198589875721 0 0 #arcLabel
Ss0 f68 guid 11B458D8D22926C2 #txt
Ss0 f68 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f68 method start() #txt
Ss0 f68 disableUIEvents false #txt
Ss0 f68 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Ss0 f68 outParameterDecl '<> result;
' #txt
Ss0 f68 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start()</name>
    </language>
</elementInfo>
' #txt
Ss0 f68 542 38 20 20 13 0 #rect
Ss0 f68 @|RichDialogInitStartIcon #fIcon
Ss0 f69 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f69 539 99 26 26 14 0 #rect
Ss0 f69 @|RichDialogProcessEndIcon #fIcon
Ss0 f70 expr out #txt
Ss0 f70 552 58 552 99 #arcP
Ss0 f71 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f71 203 715 26 26 14 0 #rect
Ss0 f71 @|RichDialogProcessEndIcon #fIcon
Ss0 f72 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f72 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Ss0 f72 26 602 28 28 14 0 #rect
Ss0 f72 @|AlternativeIcon #fIcon
Ss0 f73 expr out #txt
Ss0 f73 40 572 40 602 #arcP
Ss0 f10 expr in #txt
Ss0 f10 outCond !in.propertyChanged #txt
Ss0 f10 40 630 40 667 #arcP
Ss0 f74 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f74 actionTable 'out=in;
' #txt
Ss0 f74 actionCode 'import ch.ivyteam.db.jdbc.DatabaseConnectionConfiguration;

DatabaseConnectionConfiguration dbConf = in.configuration.#systemDatabaseConnectionConfiguration;
dbConf.clearProperties();
for (int i = 0; i < in.properties.size(); i++)
{
	dbConf.setProperty(in.properties.getField(i, "name").toString(), 
											in.properties.getField(i, "value").toString());	
	
}
in.configuration.systemDatabaseConnectionConfiguration=dbConf;
panel.connectionTester.configurationChanged();' #txt
Ss0 f74 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f74 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>synch connection properties</name>
        <nameStyle>27,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f74 198 668 36 24 20 -2 #rect
Ss0 f74 @|RichDialogProcessStepIcon #fIcon
Ss0 f75 expr in #txt
Ss0 f75 50 620 198 673 #arcP
Ss0 f76 expr out #txt
Ss0 f76 216 692 216 715 #arcP
Ss0 f62 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f62 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Ss0 f62 586 642 28 28 14 0 #rect
Ss0 f62 @|AlternativeIcon #fIcon
Ss0 f78 expr out #txt
Ss0 f78 600 612 600 642 #arcP
Ss0 f77 expr in #txt
Ss0 f77 outCond in.propertyChanged #txt
Ss0 f77 587 657 234 679 #arcP
Ss0 f79 expr in #txt
Ss0 f79 614 656 643 656 #arcP
Ss0 f80 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f80 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Any property selected?</name>
        <nameStyle>22
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f80 202 530 28 28 14 0 #rect
Ss0 f80 @|AlternativeIcon #fIcon
Ss0 f81 expr out #txt
Ss0 f81 216 514 216 530 #arcP
Ss0 f82 expr in #txt
Ss0 f82 outCond panel.additionalPropertiesTable.getSelectedRecord()!=null #txt
Ss0 f82 216 558 216 588 #arcP
Ss0 f82 0 0.125 0 0 #arcLabel
Ss0 f19 expr out #txt
Ss0 f19 216 612 216 668 #arcP
Ss0 f20 expr in #txt
Ss0 f20 226 548 332 594 #arcP
Ss0 f37 expr out #txt
Ss0 f37 232 74 232 171 #arcP
Ss0 f66 expr out #txt
Ss0 f66 206 344 204 668 #arcP
Ss0 f66 1 168 344 #addKink
Ss0 f66 2 168 632 #addKink
Ss0 f66 1 0.49512740513456893 0 0 #arcLabel
Ss0 f23 targetWindow NEW #txt
Ss0 f23 targetDisplay TOP #txt
Ss0 f23 richDialogId ch.ivyteam.ivy.commondialogs.QuestionDialog #txt
Ss0 f23 startMethod askQuestion(String,String,List<String>,String) #txt
Ss0 f23 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f23 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
Ss0 f23 requestMappingAction 'param.icon="warning";
param.question="Do you really want to convert the System Database to the most current version?\n\nPlease make a backup of your system database before performing the conversion!";
param.buttons=["yes","no"];
param.defaultButton="yes";
' #txt
Ss0 f23 responseActionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f23 responseMappingAction 'out=in;
out.buttonClicked=result.pressedButton;
' #txt
Ss0 f23 windowConfiguration '#Thu Dec 11 14:43:38 CET 2008
height=0
maximized=false
centered=true
close_after_last_rd=true
resizable=true
width=0
title=Convert System Database
' #txt
Ss0 f23 isAsynch false #txt
Ss0 f23 isInnerRd true #txt
Ss0 f23 isDialog true #txt
Ss0 f23 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>dialog really convert?</name>
        <nameStyle>22,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f23 430 332 36 24 20 -2 #rect
Ss0 f23 @|RichDialogIcon #fIcon
Ss0 f35 expr out #txt
Ss0 f35 448 306 448 332 #arcP
Ss0 f67 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f67 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>convert?</name>
        <nameStyle>8,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f67 434 378 28 28 14 0 #rect
Ss0 f67 @|AlternativeIcon #fIcon
Ss0 f83 expr out #txt
Ss0 f83 448 356 448 378 #arcP
Ss0 f53 expr in #txt
Ss0 f53 outCond in.buttonClicked.equalsIgnoreCase("yes") #txt
Ss0 f53 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f53 448 406 448 436 #arcP
Ss0 f85 expr in #txt
Ss0 f85 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>no</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f85 434 392 435 624 #arcP
Ss0 f85 1 376 392 #addKink
Ss0 f85 2 376 624 #addKink
Ss0 f85 1 0.625 0 0 #arcLabel
Ss0 f84 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f84 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>convert successful?</name>
        <nameStyle>19,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f84 434 482 28 28 14 0 #rect
Ss0 f84 @|AlternativeIcon #fIcon
Ss0 f86 expr out #txt
Ss0 f86 448 460 448 482 #arcP
Ss0 f58 expr in #txt
Ss0 f58 outCond in.buttonClicked.equalsIgnoreCase("yes") #txt
Ss0 f58 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f58 448 510 448 556 #arcP
Ss0 f87 expr in #txt
Ss0 f87 434 496 435 624 #arcP
Ss0 f87 1 376 496 #addKink
Ss0 f87 2 376 624 #addKink
Ss0 f87 1 0.50390625 0 0 #arcLabel
Ss0 f6 expr out #txt
Ss0 f6 56 148 56 172 #arcP
Ss0 f2 expr out #txt
Ss0 f2 56 100 56 124 #arcP
Ss0 f46 expr out #txt
Ss0 f46 56 196 56 219 #arcP
Ss0 f55 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f55 actionTable 'out=in;
' #txt
Ss0 f55 actionCode 'import ch.ivyteam.ivy.server.configuration.system.db.ConnectionState;
import ch.ivyteam.ivy.server.configuration.system.db.SystemDatabase;

SystemDatabase.getSystemDatabase().getAdministratorManager().connectionStateChanged(ConnectionState.NOT_CONNECTED);
' #txt
Ss0 f55 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f55 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>disconnect</name>
        <nameStyle>10,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ss0 f55 598 332 36 24 20 -2 #rect
Ss0 f55 @|RichDialogProcessStepIcon #fIcon
Ss0 f89 expr out #txt
Ss0 f89 616 306 616 332 #arcP
Ss0 f88 expr out #txt
Ss0 f88 616 356 616 388 #arcP
Ss0 f90 actionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f90 actionTable 'out=in;
' #txt
Ss0 f90 actionCode 'import ch.ivyteam.ivy.persistence.db.DatabasePersistencyServiceFactory;
import ch.ivyteam.ivy.persistence.PersistencyException;

try
{
	// can the database creator be creaeted
	DatabasePersistencyServiceFactory.createDatabaseCreator(in.configuration.systemDatabaseConnectionConfiguration);
	in.error = null;
}
catch(PersistencyException ex)
{
	// no show error
	in.error = ex;
}' #txt
Ss0 f90 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f90 22 316 36 24 20 -2 #rect
Ss0 f90 @|RichDialogProcessStepIcon #fIcon
Ss0 f91 expr out #txt
Ss0 f91 40 298 40 316 #arcP
Ss0 f92 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f92 122 362 28 28 14 0 #rect
Ss0 f92 @|AlternativeIcon #fIcon
Ss0 f93 expr out #txt
Ss0 f93 58 337 127 371 #arcP
Ss0 f40 expr in #txt
Ss0 f40 outCond 'in.#error is initialized == false' #txt
Ss0 f40 122 376 58 376 #arcP
Ss0 f94 targetWindow NEW:card: #txt
Ss0 f94 targetDisplay TOP #txt
Ss0 f94 richDialogId ch.ivyteam.ivy.commondialogs.ErrorDialog #txt
Ss0 f94 startMethod showError(java.lang.Throwable,Boolean,Boolean) #txt
Ss0 f94 type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
Ss0 f94 requestActionDecl '<java.lang.Throwable error, Boolean showCopyButton, Boolean showDetailButton> param;' #txt
Ss0 f94 requestMappingAction 'param.error=in.error;
param.showCopyButton=true;
param.showDetailButton=true;
' #txt
Ss0 f94 responseActionDecl 'ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData out;
' #txt
Ss0 f94 responseMappingAction 'out=in;
' #txt
Ss0 f94 windowConfiguration '{/title "Error"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Ss0 f94 isAsynch false #txt
Ss0 f94 isInnerRd true #txt
Ss0 f94 userContext '* ' #txt
Ss0 f94 118 412 36 24 20 -2 #rect
Ss0 f94 @|RichDialogIcon #fIcon
Ss0 f95 expr out #txt
Ss0 f95 118 432 52 459 #arcP
Ss0 f96 expr in #txt
Ss0 f96 136 390 136 412 #arcP
>Proto Ss0 .type ch.ivyteam.ivy.server.configuration.ServerConfigurationUI.ServerConfigurationUIData #txt
>Proto Ss0 .processKind RICH_DIALOG #txt
>Proto Ss0 .ui2RdDataAction 'out.selectedDatabase=panel.databaseComboBox.#selectedListEntry as ch.ivyteam.db.jdbc.DatabaseProduct;
out.selectedDriver=panel.driverComboBox.#selectedListEntry as ch.ivyteam.db.jdbc.JdbcDriver;
' #txt
>Proto Ss0 .rdData2UIAction 'panel.additionalPropertiesTable.recordsetData=in.properties;
panel.convertSysDbButton.enabled=false;
panel.databaseComboBox.listData=in.databases;
panel.driverComboBox.listData=in.drivers;
panel.databaseComboBox.selectedListEntry=in.#selectedDatabase;
panel.deleteSysDbButton.enabled=false;
panel.deleteSysDbButton.visible=ch.ivyteam.ivy.server.configuration.util.ConfigurationUtil.isDevelopmentMode();
panel.driverComboBox.selectedListEntry=in.#selectedDriver;
' #txt
>Proto Ss0 -8 -8 16 16 16 26 #rect
>Proto Ss0 '' #fIcon
Ss0 f25 mainOut f31 tail #connect
Ss0 f31 head f30 mainIn #connect
Ss0 f30 mainOut f28 tail #connect
Ss0 f28 head f27 mainIn #connect
Ss0 f24 mainOut f33 tail #connect
Ss0 f33 head f32 mainIn #connect
Ss0 f32 mainOut f29 tail #connect
Ss0 f29 head f26 mainIn #connect
Ss0 f39 mainOut f44 tail #connect
Ss0 f44 head f43 mainIn #connect
Ss0 f43 mainOut f42 tail #connect
Ss0 f42 head f41 mainIn #connect
Ss0 f21 mainOut f34 tail #connect
Ss0 f34 head f22 mainIn #connect
Ss0 f57 mainOut f54 tail #connect
Ss0 f54 head f51 mainIn #connect
Ss0 f50 mainOut f60 tail #connect
Ss0 f60 head f59 mainIn #connect
Ss0 f59 mainOut f56 tail #connect
Ss0 f56 head f52 mainIn #connect
Ss0 f0 mainOut f4 tail #connect
Ss0 f4 head f3 mainIn #connect
Ss0 f11 mainOut f8 tail #connect
Ss0 f8 head f7 mainIn #connect
Ss0 f18 mainOut f63 tail #connect
Ss0 f63 head f61 in #connect
Ss0 f61 out f64 tail #connect
Ss0 f64 head f15 mainIn #connect
Ss0 f61 out f65 tail #connect
Ss0 f65 head f17 mainIn #connect
Ss0 f68 mainOut f70 tail #connect
Ss0 f70 head f69 mainIn #connect
Ss0 f7 mainOut f73 tail #connect
Ss0 f73 head f72 in #connect
Ss0 f72 out f10 tail #connect
Ss0 f10 head f13 mainIn #connect
Ss0 f72 out f75 tail #connect
Ss0 f75 head f74 mainIn #connect
Ss0 f74 mainOut f76 tail #connect
Ss0 f76 head f71 mainIn #connect
Ss0 f15 mainOut f78 tail #connect
Ss0 f78 head f62 in #connect
Ss0 f62 out f77 tail #connect
Ss0 f77 head f74 mainIn #connect
Ss0 f62 out f79 tail #connect
Ss0 f79 head f17 mainIn #connect
Ss0 f12 mainOut f81 tail #connect
Ss0 f81 head f80 in #connect
Ss0 f80 out f82 tail #connect
Ss0 f82 head f16 mainIn #connect
Ss0 f16 mainOut f19 tail #connect
Ss0 f19 head f74 mainIn #connect
Ss0 f80 out f20 tail #connect
Ss0 f20 head f14 mainIn #connect
Ss0 f36 mainOut f37 tail #connect
Ss0 f37 head f9 mainIn #connect
Ss0 f22 mainOut f66 tail #connect
Ss0 f66 head f74 mainIn #connect
Ss0 f47 mainOut f35 tail #connect
Ss0 f35 head f23 mainIn #connect
Ss0 f23 mainOut f83 tail #connect
Ss0 f83 head f67 in #connect
Ss0 f67 out f53 tail #connect
Ss0 f53 head f49 mainIn #connect
Ss0 f67 out f85 tail #connect
Ss0 f85 head f51 mainIn #connect
Ss0 f49 mainOut f86 tail #connect
Ss0 f86 head f84 in #connect
Ss0 f84 out f58 tail #connect
Ss0 f58 head f57 mainIn #connect
Ss0 f84 out f87 tail #connect
Ss0 f87 head f51 mainIn #connect
Ss0 f5 mainOut f6 tail #connect
Ss0 f6 head f45 mainIn #connect
Ss0 f3 mainOut f2 tail #connect
Ss0 f2 head f5 mainIn #connect
Ss0 f45 mainOut f46 tail #connect
Ss0 f46 head f1 mainIn #connect
Ss0 f48 mainOut f89 tail #connect
Ss0 f89 head f55 mainIn #connect
Ss0 f55 mainOut f88 tail #connect
Ss0 f88 head f59 mainIn #connect
Ss0 f38 mainOut f91 tail #connect
Ss0 f91 head f90 mainIn #connect
Ss0 f90 mainOut f93 tail #connect
Ss0 f93 head f92 in #connect
Ss0 f92 out f40 tail #connect
Ss0 f40 head f39 mainIn #connect
Ss0 f94 mainOut f95 tail #connect
Ss0 f95 head f41 mainIn #connect
Ss0 f92 out f96 tail #connect
Ss0 f96 head f94 mainIn #connect
