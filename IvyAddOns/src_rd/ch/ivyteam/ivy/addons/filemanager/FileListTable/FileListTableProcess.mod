[Ivy]
[>Created: Mon Jun 20 07:28:27 CEST 2011]
125FDB0198DDACE8 3.17 #module
>Proto >Proto Collection #zClass
Fs0 FileListTableProcess Big #zClass
Fs0 RD #cInfo
Fs0 #process
Fs0 @MessageFlowInP-0n messageIn messageIn #zField
Fs0 @MessageFlowOutP-0n messageOut messageOut #zField
Fs0 @TextInP .ui2RdDataAction .ui2RdDataAction #zField
Fs0 @TextInP .rdData2UIAction .rdData2UIAction #zField
Fs0 @TextInP .xml .xml #zField
Fs0 @TextInP .responsibility .responsibility #zField
Fs0 @TextInP .resExport .resExport #zField
Fs0 @TextInP .type .type #zField
Fs0 @TextInP .processKind .processKind #zField
Fs0 @AnnotationInP-0n ai ai #zField
Fs0 @RichDialogInitStart f0 '' #zField
Fs0 @RichDialogProcessEnd f1 '' #zField
Fs0 @RichDialogInitStart f3 '' #zField
Fs0 @RichDialogInitStart f4 '' #zField
Fs0 @RichDialogProcessStep f2 '' #zField
Fs0 @PushWFArc f5 '' #zField
Fs0 @PushWFArc f6 '' #zField
Fs0 @PushWFArc f7 '' #zField
Fs0 @RichDialogMethodStart f9 '' #zField
Fs0 @RichDialogMethodStart f10 '' #zField
Fs0 @RichDialogMethodStart f11 '' #zField
Fs0 @RichDialogMethodStart f12 '' #zField
Fs0 @RichDialogMethodStart f13 '' #zField
Fs0 @RichDialogMethodStart f14 '' #zField
Fs0 @RichDialogProcessEnd f15 '' #zField
Fs0 @PushWFArc f16 '' #zField
Fs0 @RichDialogProcessEnd f17 '' #zField
Fs0 @PushWFArc f18 '' #zField
Fs0 @RichDialogProcessEnd f19 '' #zField
Fs0 @PushWFArc f20 '' #zField
Fs0 @RichDialogProcessStep f21 '' #zField
Fs0 @PushWFArc f22 '' #zField
Fs0 @RichDialogProcessEnd f23 '' #zField
Fs0 @PushWFArc f24 '' #zField
Fs0 @RichDialogProcessStep f25 '' #zField
Fs0 @PushWFArc f26 '' #zField
Fs0 @RichDialogProcessEnd f27 '' #zField
Fs0 @PushWFArc f28 '' #zField
Fs0 @RichDialogProcessEnd f29 '' #zField
Fs0 @RichDialogProcessStep f31 '' #zField
Fs0 @PushWFArc f32 '' #zField
Fs0 @PushWFArc f30 '' #zField
Fs0 @RichDialogMethodStart f33 '' #zField
Fs0 @RichDialogProcessStart f35 '' #zField
Fs0 @RichDialogProcessEnd f36 '' #zField
Fs0 @RichDialogMethodStart f38 '' #zField
Fs0 @RichDialogProcessEnd f41 '' #zField
Fs0 @RichDialogMethodStart f43 '' #zField
Fs0 @RichDialogProcessStep f39 '' #zField
Fs0 @PushWFArc f40 '' #zField
Fs0 @RichDialogProcessEnd f42 '' #zField
Fs0 @PushWFArc f44 '' #zField
Fs0 @PushWFArc f45 '' #zField
Fs0 @RichDialogProcessStart f46 '' #zField
Fs0 @RichDialogProcessEnd f47 '' #zField
Fs0 @RichDialogProcessStart f49 '' #zField
Fs0 @RichDialogProcessEnd f50 '' #zField
Fs0 @RichDialogProcessStart f52 '' #zField
Fs0 @RichDialogProcessStep f57 '' #zField
Fs0 @RichDialogMethodStart f59 '' #zField
Fs0 @RichDialogMethodStart f61 '' #zField
Fs0 @Alternative f62 '' #zField
Fs0 @PushWFArc f63 '' #zField
Fs0 @RichDialogProcessStep f64 '' #zField
Fs0 @PushWFArc f65 '' #zField
Fs0 @RichDialogProcessEnd f66 '' #zField
Fs0 @PushWFArc f68 '' #zField
Fs0 @RichDialog f75 '' #zField
Fs0 @Alternative f70 '' #zField
Fs0 @PushWFArc f71 '' #zField
Fs0 @RichDialogProcessStep f72 '' #zField
Fs0 @PushWFArc f73 '' #zField
Fs0 @RichDialogProcessStep f74 '' #zField
Fs0 @PushWFArc f76 '' #zField
Fs0 @RichDialogProcessEnd f77 '' #zField
Fs0 @PushWFArc f79 '' #zField
Fs0 @RichDialogProcessEnd f80 '' #zField
Fs0 @PushWFArc f81 '' #zField
Fs0 @RichDialogMethodStart f82 '' #zField
Fs0 @RichDialogMethodStart f83 '' #zField
Fs0 @RichDialogMethodStart f84 '' #zField
Fs0 @RichDialogMethodStart f85 '' #zField
Fs0 @RichDialogProcessEnd f86 '' #zField
Fs0 @PushWFArc f87 '' #zField
Fs0 @RichDialogProcessStep f88 '' #zField
Fs0 @PushWFArc f89 '' #zField
Fs0 @RichDialogProcessEnd f90 '' #zField
Fs0 @PushWFArc f91 '' #zField
Fs0 @RichDialogProcessStep f92 '' #zField
Fs0 @PushWFArc f93 '' #zField
Fs0 @RichDialogProcessEnd f94 '' #zField
Fs0 @PushWFArc f95 '' #zField
Fs0 @RichDialogProcessStep f96 '' #zField
Fs0 @PushWFArc f97 '' #zField
Fs0 @RichDialogProcessEnd f98 '' #zField
Fs0 @PushWFArc f99 '' #zField
Fs0 @RichDialogProcessStart f100 '' #zField
Fs0 @RichDialogProcessEnd f101 '' #zField
Fs0 @PushWFArc f102 '' #zField
Fs0 @RichDialogProcessStart f103 '' #zField
Fs0 @RichDialog f104 '' #zField
Fs0 @PushWFArc f105 '' #zField
Fs0 @RichDialogProcessEnd f106 '' #zField
Fs0 @PushWFArc f107 '' #zField
Fs0 @RichDialogProcessStart f108 '' #zField
Fs0 @RichDialogProcessEnd f109 '' #zField
Fs0 @PushWFArc f110 '' #zField
Fs0 @Alternative f111 '' #zField
Fs0 @RichDialogProcessStep f113 '' #zField
Fs0 @PushWFArc f114 '' #zField
Fs0 @RichDialog f115 '' #zField
Fs0 @PushWFArc f116 '' #zField
Fs0 @Alternative f117 '' #zField
Fs0 @PushWFArc f118 '' #zField
Fs0 @PushWFArc f112 '' #zField
Fs0 @RichDialogProcessStep f120 '' #zField
Fs0 @PushWFArc f121 '' #zField
Fs0 @Alternative f53 '' #zField
Fs0 @PushWFArc f54 '' #zField
Fs0 @PushWFArc f119 '' #zField
Fs0 @RichDialogProcessEnd f122 '' #zField
Fs0 @PushWFArc f124 '' #zField
Fs0 @RichDialog f125 '' #zField
Fs0 @PushWFArc f126 '' #zField
Fs0 @RichDialogProcessStep f128 '' #zField
Fs0 @PushWFArc f129 '' #zField
Fs0 @RichDialogProcessStep f127 '' #zField
Fs0 @PushWFArc f131 '' #zField
Fs0 @PushWFArc f130 '' #zField
Fs0 @RichDialogProcessStep f56 '' #zField
Fs0 @RichDialogProcessStep f34 '' #zField
Fs0 @PushWFArc f8 '' #zField
Fs0 @PushWFArc f134 '' #zField
Fs0 @RichDialogMethodStart f133 '' #zField
Fs0 @RichDialogProcessEnd f135 '' #zField
Fs0 @PushWFArc f136 '' #zField
Fs0 @RichDialogMethodStart f137 '' #zField
Fs0 @RichDialogMethodStart f60 '' #zField
Fs0 @RichDialogFireEvent f141 '' #zField
Fs0 @PushWFArc f142 '' #zField
Fs0 @PushWFArc f123 '' #zField
Fs0 @RichDialogProcessStep f144 '' #zField
Fs0 @RichDialogProcessEnd f146 '' #zField
Fs0 @PushWFArc f147 '' #zField
Fs0 @RichDialogMethodStart f143 '' #zField
Fs0 @PushWFArc f145 '' #zField
Fs0 @RichDialogInitStart f148 '' #zField
Fs0 @RichDialogInitStart f149 '' #zField
Fs0 @PushWFArc f150 '' #zField
Fs0 @PushWFArc f151 '' #zField
Fs0 @RichDialogMethodStart f152 '' #zField
Fs0 @RichDialogMethodStart f153 '' #zField
Fs0 @RichDialogProcessEnd f154 '' #zField
Fs0 @PushWFArc f155 '' #zField
Fs0 @RichDialogProcessEnd f156 '' #zField
Fs0 @PushWFArc f157 '' #zField
Fs0 @RichDialogProcessStep f158 '' #zField
Fs0 @PushWFArc f69 '' #zField
Fs0 @RichDialogFireEvent f160 '' #zField
Fs0 @PushWFArc f67 '' #zField
Fs0 @PushWFArc f139 '' #zField
Fs0 @RichDialogInitStart f140 '' #zField
Fs0 @PushWFArc f161 '' #zField
Fs0 @RichDialogMethodStart f162 '' #zField
Fs0 @RichDialogProcessStep f163 '' #zField
Fs0 @PushWFArc f164 '' #zField
Fs0 @RichDialogProcessEnd f165 '' #zField
Fs0 @PushWFArc f166 '' #zField
Fs0 @RichDialogProcessStep f167 '' #zField
Fs0 @PushWFArc f168 '' #zField
Fs0 @PushWFArc f51 '' #zField
Fs0 @RichDialogInitStart f169 '' #zField
Fs0 @RichDialogProcessStep f170 '' #zField
Fs0 @PushWFArc f171 '' #zField
Fs0 @PushWFArc f172 '' #zField
Fs0 @RichDialogProcessStep f173 '' #zField
Fs0 @PushWFArc f174 '' #zField
Fs0 @PushWFArc f48 '' #zField
Fs0 @RichDialogBroadcastStart f175 '' #zField
Fs0 @RichDialogProcessEnd f176 '' #zField
Fs0 @PushWFArc f177 '' #zField
Fs0 @RichDialogProcessStart f178 '' #zField
Fs0 @RichDialogProcessEnd f179 '' #zField
Fs0 @RichDialogMethodStart f181 '' #zField
Fs0 @RichDialogProcessStep f182 '' #zField
Fs0 @PushWFArc f183 '' #zField
Fs0 @RichDialogProcessEnd f184 '' #zField
Fs0 @PushWFArc f185 '' #zField
Fs0 @RichDialogMethodStart f186 '' #zField
Fs0 @RichDialogMethodStart f187 '' #zField
Fs0 @RichDialogProcessStep f188 '' #zField
Fs0 @PushWFArc f189 '' #zField
Fs0 @RichDialogProcessEnd f190 '' #zField
Fs0 @PushWFArc f191 '' #zField
Fs0 @RichDialogProcessStep f192 '' #zField
Fs0 @PushWFArc f193 '' #zField
Fs0 @RichDialogProcessEnd f194 '' #zField
Fs0 @PushWFArc f195 '' #zField
Fs0 @RichDialogBroadcastStart f196 '' #zField
Fs0 @Alternative f197 '' #zField
Fs0 @PushWFArc f198 '' #zField
Fs0 @RichDialog f201 '' #zField
Fs0 @RichDialogProcessEnd f203 '' #zField
Fs0 @PushWFArc f204 '' #zField
Fs0 @PushWFArc f205 '' #zField
Fs0 @PushWFArc f206 '' #zField
Fs0 @Alternative f199 '' #zField
Fs0 @PushWFArc f200 '' #zField
Fs0 @Alternative f208 '' #zField
Fs0 @PushWFArc f209 '' #zField
Fs0 @PushWFArc f210 '' #zField
Fs0 @PushWFArc f58 '' #zField
Fs0 @RichDialogProcessStep f202 '' #zField
Fs0 @PushWFArc f207 '' #zField
Fs0 @PushWFArc f180 '' #zField
Fs0 @RichDialogMethodStart f212 '' #zField
Fs0 @RichDialogProcessStep f225 '' #zField
Fs0 @RichDialogProcessStep f819 '' #zField
Fs0 @RichDialogProcessEnd f836 '' #zField
Fs0 @Alternative f830 '' #zField
Fs0 @Alternative f824 '' #zField
Fs0 @RichDialogProcessStep f821 '' #zField
Fs0 @RichDialogProcessStep f809 '' #zField
Fs0 @Alternative f817 '' #zField
Fs0 @RichDialogProcessEnd f221 '' #zField
Fs0 @RichDialog f834 '' #zField
Fs0 @RichDialogProcessStep f217 '' #zField
Fs0 @RichDialogProcessStep f815 '' #zField
Fs0 @Alternative f215 '' #zField
Fs0 @RichDialogProcessStep f828 '' #zField
Fs0 @RichDialogProcessStep f213 '' #zField
Fs0 @RichDialogProcessStep f826 '' #zField
Fs0 @RichDialog f812 '' #zField
Fs0 @PushWFArc f216 '' #zField
Fs0 @PushWFArc f218 '' #zField
Fs0 @PushWFArc f818 '' #zField
Fs0 @PushWFArc f820 '' #zField
Fs0 @PushWFArc f822 '' #zField
Fs0 @PushWFArc f823 '' #zField
Fs0 @PushWFArc f825 '' #zField
Fs0 @PushWFArc f827 '' #zField
Fs0 @PushWFArc f829 '' #zField
Fs0 @PushWFArc f831 '' #zField
Fs0 @PushWFArc f835 '' #zField
Fs0 @PushWFArc f837 '' #zField
Fs0 @PushWFArc f219 '' #zField
Fs0 @PushWFArc f220 '' #zField
Fs0 @PushWFArc f223 '' #zField
Fs0 @PushWFArc f224 '' #zField
Fs0 @PushWFArc f226 '' #zField
Fs0 @PushWFArc f222 '' #zField
Fs0 @PushWFArc f214 '' #zField
Fs0 @RichDialogProcessStep f845 '' #zField
Fs0 @Alternative f227 '' #zField
Fs0 @PushWFArc f228 '' #zField
Fs0 @PushWFArc f230 '' #zField
Fs0 @PushWFArc f229 '' #zField
Fs0 @RichDialogProcessStep f232 '' #zField
Fs0 @PushWFArc f233 '' #zField
Fs0 @PushWFArc f55 '' #zField
Fs0 @PushWFArc f138 '' #zField
Fs0 @RichDialogProcessEnd f132 '' #zField
Fs0 @PushWFArc f234 '' #zField
Fs0 @PushWFArc f235 '' #zField
Fs0 @RichDialogProcessStep f211 '' #zField
Fs0 @RichDialogProcessStep f236 '' #zField
Fs0 @RichDialogProcessStep f237 '' #zField
Fs0 @PushWFArc f238 '' #zField
Fs0 @Alternative f239 '' #zField
Fs0 @PushWFArc f240 '' #zField
Fs0 @PushWFArc f159 '' #zField
Fs0 @RichDialogProcessStep f241 '' #zField
Fs0 @PushWFArc f242 '' #zField
Fs0 @RichDialog f847 '' #zField
Fs0 @PushWFArc f231 '' #zField
Fs0 @RichDialogProcessEnd f243 '' #zField
Fs0 @PushWFArc f244 '' #zField
Fs0 @RichDialog f245 '' #zField
Fs0 @PushWFArc f246 '' #zField
Fs0 @RichDialogProcessEnd f247 '' #zField
Fs0 @PushWFArc f248 '' #zField
Fs0 @RichDialogProcessStep f249 '' #zField
Fs0 @PushWFArc f250 '' #zField
Fs0 @PushWFArc f78 '' #zField
Fs0 @RichDialogFireEvent f251 '' #zField
Fs0 @PushWFArc f37 '' #zField
Fs0 @RichDialogProcessStep f253 '' #zField
Fs0 @PushWFArc f254 '' #zField
Fs0 @PushWFArc f252 '' #zField
>Proto Fs0 Fs0 FileListTableProcess #zField
Fs0 f0 guid 11F6A40F8EC16E70 #txt
Fs0 f0 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f0 method start() #txt
Fs0 f0 disableUIEvents false #txt
Fs0 f0 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Fs0 f0 outParameterDecl '<> result;
' #txt
Fs0 f0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start()</name>
    </language>
</elementInfo>
' #txt
Fs0 f0 86 38 20 20 13 0 #rect
Fs0 f0 @|RichDialogInitStartIcon #fIcon
Fs0 f1 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f1 91 931 26 26 14 0 #rect
Fs0 f1 @|RichDialogProcessEndIcon #fIcon
Fs0 f3 guid 11F6A4FBF563DB2C #txt
Fs0 f3 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f3 method startWithPath(String) #txt
Fs0 f3 disableUIEvents false #txt
Fs0 f3 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String path> param = methodEvent.getInputArguments();
' #txt
Fs0 f3 inParameterMapAction 'out.multipleSelectionAllowed=false;
out.path=param.path;
' #txt
Fs0 f3 outParameterDecl '<> result;
' #txt
Fs0 f3 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
Fs0 f3 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithPath(String)</name>
        <nameStyle>21,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f3 182 45 20 22 -39 -27 #rect
Fs0 f3 @|RichDialogInitStartIcon #fIcon
Fs0 f4 guid 11F6A4FF31A8F10A #txt
Fs0 f4 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f4 method startPathAndMultipleSelectionAllowed(String,Boolean) #txt
Fs0 f4 disableUIEvents false #txt
Fs0 f4 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String path,java.lang.Boolean multipleSelectionAllowed> param = methodEvent.getInputArguments();
' #txt
Fs0 f4 inParameterMapAction 'out.multipleSelectionAllowed=param.multipleSelectionAllowed;
out.path=param.path;
' #txt
Fs0 f4 outParameterDecl '<> result;
' #txt
Fs0 f4 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
Fs0 f4 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithPathAndMultipleSelectionAllowed(String,Boolean)</name>
        <nameStyle>56,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f4 230 86 20 20 -50 -32 #rect
Fs0 f4 @|RichDialogInitStartIcon #fIcon
Fs0 f2 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f2 actionTable 'out=in;
' #txt
Fs0 f2 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileUploadHandler;
import ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import com.ulcjava.base.application.ULCListSelectionModel;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;

import ch.ivyteam.ivy.event.SystemEventCategory;

// register
ivy.rd.subscribeToSystemEvents(SystemEventCategory.THIRD_PARTY);

out.panelId = System.nanoTime();

if(in.#path == null || in.path.trim().equals("")){
	in.path="defaultDirectory";
}
in.path=AbstractFileManagementHandler.formatPathForDirectory(in.path);

if(in.multipleSelectionAllowed==false){
	panel.fileListTable.setSelectionMode(ULCListSelectionModel.SINGLE_SELECTION);
}else{
	panel.fileListTable.setSelectionMode(ULCListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
}

//Build the fileManagement object
if(in.#ivyConnexionDBName==null || in.ivyConnexionDBName.trim().equalsIgnoreCase("")){
	in.ivyConnexionDBName="FileManager";
}
if(in.#DbTableName==null || in.DbTableName.trim().equalsIgnoreCase("")){
	in.DbTableName="UPLOADEDFILES";
}
try{
	if(in.#fileManagementHandler==null)
	{//will not be played if we start with IvySystemDB
		if(in.schemaName.trim().equalsIgnoreCase(""))
		{//no schemata setted
			in.fileManagementHandler=AbstractFileManagementHandler.getInstance([in.ivyConnexionDBName, in.DbTableName]);
		}else
		{//start within a schemata
			in.fileManagementHandler=AbstractFileManagementHandler.getInstance([in.ivyConnexionDBName, in.DbTableName, in.schemaName]);
		}
	}
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}
in.uploadManager = new FileUploadHandler(panel,"_onUploadError","_getUploadedFileFromUploadHandler","_onChangeFile","_onProgress",in.path);' #txt
Fs0 f2 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f2 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>initialize the filemanager
and Uploadmanager</name>
        <nameStyle>44,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f2 78 220 36 24 -88 17 #rect
Fs0 f2 @|RichDialogProcessStepIcon #fIcon
Fs0 f2 -613726|-613726|-16777216 #nodeStyle
Fs0 f5 expr out #txt
Fs0 f5 96 58 96 220 #arcP
Fs0 f6 expr out #txt
Fs0 f6 186 65 103 220 #arcP
Fs0 f7 expr out #txt
Fs0 f7 232 102 109 220 #arcP
Fs0 f9 guid 11F6A56E00DE9BB4 #txt
Fs0 f9 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f9 method getMultipleSelectionAllowed() #txt
Fs0 f9 disableUIEvents false #txt
Fs0 f9 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Fs0 f9 outParameterDecl '<java.lang.Boolean multipleSelectionAllowed> result;
' #txt
Fs0 f9 outParameterMapAction 'result.multipleSelectionAllowed=in.multipleSelectionAllowed;
' #txt
Fs0 f9 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getMultipleSelectionAllowed()</name>
        <nameStyle>29,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f9 550 214 20 20 -48 -29 #rect
Fs0 f9 @|RichDialogMethodStartIcon #fIcon
Fs0 f10 guid 11F6A56F3908D020 #txt
Fs0 f10 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f10 method getPath() #txt
Fs0 f10 disableUIEvents false #txt
Fs0 f10 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Fs0 f10 outParameterDecl '<java.lang.String path> result;
' #txt
Fs0 f10 outParameterMapAction 'result.path=in.path;
' #txt
Fs0 f10 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getPath()</name>
        <nameStyle>9,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f10 550 54 20 20 -22 -29 #rect
Fs0 f10 @|RichDialogMethodStartIcon #fIcon
Fs0 f11 guid 11F6A5703E7B0A8C #txt
Fs0 f11 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f11 method getSelectedDocument() #txt
Fs0 f11 disableUIEvents false #txt
Fs0 f11 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Fs0 f11 outParameterDecl '<ch.xpertline.common.ria.component.DocumentOnServer selectedDocument> result;
' #txt
Fs0 f11 outParameterMapAction 'result.selectedDocument=in.selectedDocumentOnServer;
' #txt
Fs0 f11 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getSelectedDocument()</name>
        <nameStyle>21,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f11 1094 54 20 20 -45 -31 #rect
Fs0 f11 @|RichDialogMethodStartIcon #fIcon
Fs0 f12 guid 11F6A57306A7B746 #txt
Fs0 f12 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f12 method getSelectedDocuments() #txt
Fs0 f12 disableUIEvents false #txt
Fs0 f12 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Fs0 f12 outParameterDecl '<List<ch.xpertline.common.ria.component.DocumentOnServer> selectedDocuments> result;
' #txt
Fs0 f12 outParameterMapAction 'result.selectedDocuments=in.selectedDocumentOnServerList;
' #txt
Fs0 f12 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getSelectedDocuments()</name>
        <nameStyle>22,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f12 1046 174 20 20 -48 -29 #rect
Fs0 f12 @|RichDialogMethodStartIcon #fIcon
Fs0 f13 guid 11F6A574AE032875 #txt
Fs0 f13 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f13 method setMultipleSelectionAllowed(Boolean) #txt
Fs0 f13 disableUIEvents false #txt
Fs0 f13 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Boolean multipleSelectionAllowed> param = methodEvent.getInputArguments();
' #txt
Fs0 f13 inParameterMapAction 'out.multipleSelectionAllowed=param.multipleSelectionAllowed;
' #txt
Fs0 f13 outParameterDecl '<> result;
' #txt
Fs0 f13 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setMultipleSelectionAllowed(Boolean)</name>
        <nameStyle>36,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f13 686 214 20 20 -46 -27 #rect
Fs0 f13 @|RichDialogMethodStartIcon #fIcon
Fs0 f14 guid 11F6A57642EB06B0 #txt
Fs0 f14 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f14 method setPath(String) #txt
Fs0 f14 disableUIEvents false #txt
Fs0 f14 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String path> param = methodEvent.getInputArguments();
' #txt
Fs0 f14 inParameterMapAction 'out.path=param.path;
' #txt
Fs0 f14 outParameterDecl '<> result;
' #txt
Fs0 f14 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setPath(String)</name>
        <nameStyle>15,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f14 686 54 20 20 -29 -31 #rect
Fs0 f14 @|RichDialogMethodStartIcon #fIcon
Fs0 f15 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f15 547 259 26 26 14 0 #rect
Fs0 f15 @|RichDialogProcessEndIcon #fIcon
Fs0 f16 expr out #txt
Fs0 f16 560 234 560 259 #arcP
Fs0 f17 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f17 547 107 26 26 14 0 #rect
Fs0 f17 @|RichDialogProcessEndIcon #fIcon
Fs0 f18 expr out #txt
Fs0 f18 560 74 560 107 #arcP
Fs0 f19 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f19 1091 107 26 26 14 0 #rect
Fs0 f19 @|RichDialogProcessEndIcon #fIcon
Fs0 f20 expr out #txt
Fs0 f20 1104 74 1104 107 #arcP
Fs0 f21 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f21 actionTable 'out=in;
' #txt
Fs0 f21 actionCode 'in.selectedDocumentOnServerList.clear();
in.selectedDocumentOnServerList.addAll(panel.fileListTable.getSelectedListEntries());' #txt
Fs0 f21 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f21 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f21 1038 220 36 24 20 -2 #rect
Fs0 f21 @|RichDialogProcessStepIcon #fIcon
Fs0 f22 expr out #txt
Fs0 f22 1056 194 1056 220 #arcP
Fs0 f23 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f23 1043 267 26 26 14 0 #rect
Fs0 f23 @|RichDialogProcessEndIcon #fIcon
Fs0 f24 expr out #txt
Fs0 f24 1056 244 1056 267 #arcP
Fs0 f25 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f25 actionTable 'out=in;
' #txt
Fs0 f25 actionCode 'import com.ulcjava.base.application.ULCListSelectionModel;
if(in.multipleSelectionAllowed==false){
	panel.fileListTable.setSelectionMode(ULCListSelectionModel.SINGLE_SELECTION);
	in.selectedFilesList.clear();
	in.selectedDocumentOnServerList.clear();
	if(in.#selectedFile!=null){
		in.selectedFilesList.add(in.selectedFile);
		in.selectedDocumentOnServerList.add(in.selectedDocumentOnServer);
	}
}else{
	panel.fileListTable.setSelectionMode(ULCListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
}' #txt
Fs0 f25 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f25 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f25 678 260 36 24 20 -2 #rect
Fs0 f25 @|RichDialogProcessStepIcon #fIcon
Fs0 f26 expr out #txt
Fs0 f26 696 234 696 260 #arcP
Fs0 f27 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f27 683 307 26 26 14 0 #rect
Fs0 f27 @|RichDialogProcessEndIcon #fIcon
Fs0 f28 expr out #txt
Fs0 f28 696 284 696 307 #arcP
Fs0 f29 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f29 683 155 26 26 14 0 #rect
Fs0 f29 @|RichDialogProcessEndIcon #fIcon
Fs0 f31 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f31 actionTable 'out=in;
' #txt
Fs0 f31 actionCode panel.refreshWithCheck(); #txt
Fs0 f31 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f31 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f31 678 100 36 24 20 -2 #rect
Fs0 f31 @|RichDialogProcessStepIcon #fIcon
Fs0 f32 expr out #txt
Fs0 f32 696 74 696 100 #arcP
Fs0 f30 expr out #txt
Fs0 f30 696 124 696 155 #arcP
Fs0 f33 guid 11F6A6EBBA5F4767 #txt
Fs0 f33 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f33 method refresh() #txt
Fs0 f33 disableUIEvents false #txt
Fs0 f33 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh()</name>
    </language>
</elementInfo>
' #txt
Fs0 f33 878 678 20 20 -17 -29 #rect
Fs0 f33 @|RichDialogMethodStartIcon #fIcon
Fs0 f35 guid 11F6A70B450F3C9A #txt
Fs0 f35 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f35 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f35 actionTable 'out=in;
' #txt
Fs0 f35 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;


if(panel.#fileListTable.getSelectedListEntry()!=null && panel.fileListTable.getSelectedListEntry() instanceof DocumentOnServer){
 	DocumentOnServer doc = new DocumentOnServer();
  doc = panel.fileListTable.selectedListEntry as DocumentOnServer;
	
	in.selectedDocumentOnServer=in.fileManagementHandler.getDocumentOnServerWithJavaFile(doc);
	
	in.selectedFile=in.selectedDocumentOnServer.getJavaFile();
	panel.enablerTextField.setText("selected");

}else{
	panel.enablerTextField.setText("");
}' #txt
Fs0 f35 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>file selected</name>
        <nameStyle>13,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f35 1910 70 20 20 -25 -31 #rect
Fs0 f35 @|RichDialogProcessStartIcon #fIcon
Fs0 f35 -613726|-613726|-16777216 #nodeStyle
Fs0 f36 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f36 1907 235 26 26 14 0 #rect
Fs0 f36 @|RichDialogProcessEndIcon #fIcon
Fs0 f38 guid 11F6A7C3D61C71C2 #txt
Fs0 f38 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f38 method getSelectedFile() #txt
Fs0 f38 disableUIEvents false #txt
Fs0 f38 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Fs0 f38 outParameterDecl '<java.io.File selectedFile> result;
' #txt
Fs0 f38 outParameterMapAction 'result.selectedFile=in.selectedFile;
' #txt
Fs0 f38 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getSelectedFile()</name>
        <nameStyle>17,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f38 958 174 20 20 -37 -27 #rect
Fs0 f38 @|RichDialogMethodStartIcon #fIcon
Fs0 f41 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f41 955 275 26 26 14 0 #rect
Fs0 f41 @|RichDialogProcessEndIcon #fIcon
Fs0 f43 guid 11F6A8DC01FDBE4D #txt
Fs0 f43 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f43 method getSelectedFiles() #txt
Fs0 f43 disableUIEvents false #txt
Fs0 f43 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Fs0 f43 outParameterDecl '<List<java.io.File> selectedFiles> result;
' #txt
Fs0 f43 outParameterMapAction 'result.selectedFiles=in.selectedFilesList;
' #txt
Fs0 f43 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getSelectedFiles()</name>
        <nameStyle>18,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f43 1326 62 20 20 -34 -28 #rect
Fs0 f43 @|RichDialogMethodStartIcon #fIcon
Fs0 f39 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f39 actionTable 'out=in;
' #txt
Fs0 f39 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
try{
	List<DocumentOnServer> docs = panel.fileListTable.getSelectedListEntries() as List<DocumentOnServer>;
	
	in.selectedFilesList.clear();

	for(DocumentOnServer doc : docs){
		DocumentOnServer d = in.fileManagementHandler.getDocumentOnServerWithJavaFile(doc);
		if(d.getJavaFile()!=null && d.getJavaFile().isFile()){
			in.selectedFilesList.add(d.getJavaFile());
		}
	}
}catch(Throwable t){
	ivy.log.error(t.getMessage(),t);
}

' #txt
Fs0 f39 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f39 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f39 1318 108 36 24 20 -2 #rect
Fs0 f39 @|RichDialogProcessStepIcon #fIcon
Fs0 f39 -613726|-613726|-16777216 #nodeStyle
Fs0 f40 expr out #txt
Fs0 f40 1336 82 1336 108 #arcP
Fs0 f42 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f42 1323 163 26 26 14 0 #rect
Fs0 f42 @|RichDialogProcessEndIcon #fIcon
Fs0 f44 expr out #txt
Fs0 f44 1336 132 1336 163 #arcP
Fs0 f45 expr out #txt
Fs0 f45 968 194 968 275 #arcP
Fs0 f46 guid 11F89AA2F2E17B0B #txt
Fs0 f46 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f46 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f46 actionTable 'out=in;
' #txt
Fs0 f46 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>open a File</name>
        <nameStyle>11,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f46 2038 70 20 20 -22 -26 #rect
Fs0 f46 @|RichDialogProcessStartIcon #fIcon
Fs0 f47 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f47 2035 211 26 26 14 0 #rect
Fs0 f47 @|RichDialogProcessEndIcon #fIcon
Fs0 f49 guid 11F89B358329468E #txt
Fs0 f49 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f49 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f49 actionTable 'out=in;
' #txt
Fs0 f49 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>upload a File</name>
        <nameStyle>13,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f49 2038 342 20 20 -27 -32 #rect
Fs0 f49 @|RichDialogProcessStartIcon #fIcon
Fs0 f50 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f50 2035 427 26 26 14 0 #rect
Fs0 f50 @|RichDialogProcessEndIcon #fIcon
Fs0 f52 guid 11F89B713EFCFEA6 #txt
Fs0 f52 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f52 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f52 actionTable 'out=in;
' #txt
Fs0 f52 actionCode '
/*
import ch.xpertline.common.ria.component.DocumentOnServer;

if(in.#selectedFile != null && !in.selectedFile.getPath().trim().equals("")){
	List<java.io.File> liste = new List<java.io.File>();
	liste.add(in.selectedFile);
	if(in.fileManagementHandler.deleteFiles(liste)>0){
		for(DocumentOnServer doc: in.documentsList){
			if(doc.filename.equalsIgnoreCase(in.selectedFile.getName())){
				in.documentsList.remove(doc);
				break;
			}
		}
	}
}
*/
out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/confirmdeleteDir");' #txt
Fs0 f52 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delete a File</name>
        <nameStyle>13,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f52 2206 62 20 20 -25 -28 #rect
Fs0 f52 @|RichDialogProcessStartIcon #fIcon
Fs0 f57 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f57 actionTable 'out=in;
' #txt
Fs0 f57 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;

in.errorUtil.errorOccurred=false;
in.today= new Date().format("d.MM.yyyy");
in.time= new Time().format();
List<DocumentOnServer> filesToAdd = new List<DocumentOnServer>();
List<DocumentOnServer> filestoDelete = new List<DocumentOnServer>();

in.documentsInDb.clear();
try{
	in.documentsList=FileHandler.getDocumentsInDir(new java.io.File(in.path));
	//get the documents not recursively
	in.documentsInDb.addAll(in.fileManagementHandler.getDocumentsInPath(in.path,false));
	filesToAdd=FileHandler.getDocumentsListDiff(in.documentsInDb,in.documentsList);
	
	filestoDelete=FileHandler.getDocumentsListDiff(in.documentsList,in.documentsInDb);
	filestoDelete.addAll(FileHandler.getDuplicateDocuments(in.documentsInDb));
	
	if(filesToAdd.size()>0){
		int j= filesToAdd.size();
		for(int i=0; i<j; i++){
			filesToAdd.get(i).userID="IVYSYSTEM";
			filesToAdd.get(i).creationDate=in.today;
			filesToAdd.get(i).creationTime=in.time;
			filesToAdd.get(i).modificationUserID="IVYSYSTEM";
			filesToAdd.get(i).modificationDate=in.today;
			filesToAdd.get(i).modificationTime=in.time;
		}
		in.fileManagementHandler.insertDocuments(filesToAdd);
	}
	if(filestoDelete.size()>0){
		in.fileManagementHandler.deleteDocuments(filestoDelete);
	}
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
Fs0 f57 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f57 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Check consistancy</name>
        <nameStyle>17,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f57 158 772 36 24 20 -23 #rect
Fs0 f57 @|RichDialogProcessStepIcon #fIcon
Fs0 f59 guid 11F89CE6C33EAC3C #txt
Fs0 f59 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f59 method _getUploadedFileFromUploadHandler(List<java.io.File>) #txt
Fs0 f59 disableUIEvents false #txt
Fs0 f59 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.io.File> files> param = methodEvent.getInputArguments();
' #txt
Fs0 f59 inParameterMapAction 'out.tmpFilesList=param.files;
' #txt
Fs0 f59 outParameterDecl '<> result;
' #txt
Fs0 f59 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_getUploadedFileFromUploadHandler(List&lt;java.io.File&gt;)</name>
        <nameStyle>53,5,6,9
</nameStyle>
        <desc>ch.xpertline.ria.util.file.FileHandler</desc>
    </language>
</elementInfo>
' #txt
Fs0 f59 902 750 20 20 -65 -35 #rect
Fs0 f59 @|RichDialogMethodStartIcon #fIcon
Fs0 f61 guid 11F89CE94C8C7FAA #txt
Fs0 f61 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f61 method _onUploadError(ch.ivyteam.ivy.addons.filemanager.ReturnedMessage) #txt
Fs0 f61 disableUIEvents false #txt
Fs0 f61 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> param = methodEvent.getInputArguments();
' #txt
Fs0 f61 inParameterMapAction 'out.returnedMessage=param.returnedMessage;
' #txt
Fs0 f61 outParameterDecl '<> result;
' #txt
Fs0 f61 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_onUploadError(ReturnedMessage)</name>
        <nameStyle>31,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f61 1214 358 20 20 -74 -33 #rect
Fs0 f61 @|RichDialogMethodStartIcon #fIcon
Fs0 f62 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f62 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Check if at least one file uploaded</name>
        <nameStyle>35,9
</nameStyle>
        <desc>More than one file uploaded</desc>
    </language>
</elementInfo>
' #txt
Fs0 f62 898 810 28 28 9 -15 #rect
Fs0 f62 @|AlternativeIcon #fIcon
Fs0 f63 expr out #txt
Fs0 f63 912 770 912 810 #arcP
Fs0 f64 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f64 actionTable 'out=in;
' #txt
Fs0 f64 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

in.time=new Time().format();
in.today =  new Date().format("dd.MM.yyyy");
List<DocumentOnServer> docs = new List<DocumentOnServer>();
for(java.io.File file: in.tmpFilesList){
	DocumentOnServer doc = new DocumentOnServer();
	doc.creationDate= in.today;
	doc.creationTime=in.time;
	doc.userID=panel.desktopHandlerPanel.getOSUserName();
	doc.filename=file.getName().trim();
	doc.path=file.getPath().trim();
	doc.fileSize=FileHandler.getFileSize(file);
	doc.modificationDate= in.today;
	doc.modificationTime=in.time;
	doc.modificationUserID=panel.desktopHandlerPanel.getOSUserName();
	doc.locked="0";
	docs.add(doc);
}
int id=0;
try{
	id=in.fileManagementHandler.insertDocuments(docs);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}
if(id>0){
	in.documentsInDb.addAll(docs);
	panel.openMenuItem.setEnabled(false);
	panel.deleteMenuItem.setEnabled(false);
}else{
	panel.refresh();
}
' #txt
Fs0 f64 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f64 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>retrieves Infos from uploadedFiles
and insert them into the Filemanagement
File indexing system</name>
        <nameStyle>95,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f64 894 860 36 24 28 -27 #rect
Fs0 f64 @|RichDialogProcessStepIcon #fIcon
Fs0 f65 expr in #txt
Fs0 f65 outCond in.tmpFilesList.size()>0 #txt
Fs0 f65 912 838 912 860 #arcP
Fs0 f66 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f66 899 1003 26 26 14 0 #rect
Fs0 f66 @|RichDialogProcessEndIcon #fIcon
Fs0 f68 expr in #txt
Fs0 f68 898 824 899 1016 #arcP
Fs0 f68 1 856 824 #addKink
Fs0 f68 2 856 1016 #addKink
Fs0 f68 1 0.40611813510756595 0 0 #arcLabel
Fs0 f75 targetWindow NEW:card: #txt
Fs0 f75 targetDisplay TOP #txt
Fs0 f75 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
Fs0 f75 startMethod askQuestion(String,String,List<String>,String) #txt
Fs0 f75 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f75 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
Fs0 f75 requestMappingAction 'param.icon="question";
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/no")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes");
' #txt
Fs0 f75 requestActionCode param.question=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/question/overwriteExistingFiles").replaceFirst("</html>","")+"\n"+in.tmpFile.getName()+"\n</html>"; #txt
Fs0 f75 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f75 responseMappingAction 'out=in;
out.tmpString=result.pressedButton;
' #txt
Fs0 f75 windowConfiguration '{/title "<%=in.windowTitle%>"/width 400 /height 300 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Fs0 f75 isAsynch false #txt
Fs0 f75 isInnerRd true #txt
Fs0 f75 isDialog true #txt
Fs0 f75 userContext '* ' #txt
Fs0 f75 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Ask if replace the
existing file on the server</name>
        <nameStyle>46,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f75 1222 692 36 24 24 -16 #rect
Fs0 f75 @|RichDialogIcon #fIcon
Fs0 f70 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f70 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>confirmed ?</name>
        <nameStyle>11,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f70 1226 738 28 28 14 0 #rect
Fs0 f70 @|AlternativeIcon #fIcon
Fs0 f71 expr out #txt
Fs0 f71 1240 716 1240 738 #arcP
Fs0 f72 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f72 actionTable 'out=in;
' #txt
Fs0 f72 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
try{
in.fileManagementHandler.deleteFiles(new List<java.io.File>().add(in.tmpFile));
	for(DocumentOnServer doc : in.documentsInDb){
		if(doc.filename.equals(in.tmpFile.getName())){
			in.documentsInDb.remove(doc);
			break;
		}
	}
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
Fs0 f72 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f72 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Delete the file that
 will be overwritten</name>
        <nameStyle>41,7,9
</nameStyle>
        <desc>Delete the file that
 will be overwritten</desc>
    </language>
</elementInfo>
' #txt
Fs0 f72 1222 796 36 24 20 -2 #rect
Fs0 f72 @|RichDialogProcessStepIcon #fIcon
Fs0 f73 expr in #txt
Fs0 f73 outCond in.tmpString.equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes")) #txt
Fs0 f73 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f73 1240 766 1240 796 #arcP
Fs0 f74 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f74 actionTable 'out=in;
' #txt
Fs0 f74 actionCode in.uploadManager.uploadPreparedUploadWithoutShowingProgress(in.tmpFile); #txt
Fs0 f74 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f74 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Get the files in selected folder
and upload the file</name>
        <nameStyle>52,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f74 1222 844 36 24 -62 14 #rect
Fs0 f74 @|RichDialogProcessStepIcon #fIcon
Fs0 f76 expr out #txt
Fs0 f76 1240 820 1240 844 #arcP
Fs0 f77 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f77 1227 955 26 26 14 0 #rect
Fs0 f77 @|RichDialogProcessEndIcon #fIcon
Fs0 f79 expr in #txt
Fs0 f79 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f79 1226 752 1227 968 #arcP
Fs0 f79 1 1160 752 #addKink
Fs0 f79 2 1160 968 #addKink
Fs0 f79 1 0.40097959497724206 0 0 #arcLabel
Fs0 f80 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f80 1211 411 26 26 14 0 #rect
Fs0 f80 @|RichDialogProcessEndIcon #fIcon
Fs0 f81 expr out #txt
Fs0 f81 1224 378 1224 411 #arcP
Fs0 f82 guid 11F89E330427923D #txt
Fs0 f82 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f82 method addDocumentOnServers(List<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer>) #txt
Fs0 f82 disableUIEvents false #txt
Fs0 f82 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer> listOfDocumentOnServer> param = methodEvent.getInputArguments();
' #txt
Fs0 f82 inParameterMapAction 'out.tmpDocumentOnServersList=param.listOfDocumentOnServer;
' #txt
Fs0 f82 outParameterDecl '<> result;
' #txt
Fs0 f82 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>addDocumentOnServers(List&lt;DocumentOnServer&gt;)</name>
        <nameStyle>44,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f82 902 1102 20 20 -70 -28 #rect
Fs0 f82 @|RichDialogMethodStartIcon #fIcon
Fs0 f83 guid 11F89E33CFE5B9B1 #txt
Fs0 f83 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f83 method addFiles(List<java.io.File>) #txt
Fs0 f83 disableUIEvents false #txt
Fs0 f83 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.io.File> listOfFiles> param = methodEvent.getInputArguments();
' #txt
Fs0 f83 inParameterMapAction 'out.tmpFilesList=param.listOfFiles;
' #txt
Fs0 f83 outParameterDecl '<> result;
' #txt
Fs0 f83 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>addFiles(List&lt;File&gt;)</name>
        <nameStyle>20,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f83 1158 998 20 20 -42 -29 #rect
Fs0 f83 @|RichDialogMethodStartIcon #fIcon
Fs0 f84 guid 11F8D0BA9A88086B #txt
Fs0 f84 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f84 method getListedDocumentOnServers() #txt
Fs0 f84 disableUIEvents false #txt
Fs0 f84 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Fs0 f84 outParameterDecl '<List<ch.xpertline.common.ria.component.DocumentOnServer> listOfDocumentOnServers> result;
' #txt
Fs0 f84 outParameterMapAction 'result.listOfDocumentOnServers=in.documentsInDb;
' #txt
Fs0 f84 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getListedDocumentOnServers()</name>
        <nameStyle>28,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f84 1214 54 20 20 -57 -29 #rect
Fs0 f84 @|RichDialogMethodStartIcon #fIcon
Fs0 f85 guid 11F8D0BC6D7711E5 #txt
Fs0 f85 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f85 method getListedFiles() #txt
Fs0 f85 disableUIEvents false #txt
Fs0 f85 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Fs0 f85 outParameterDecl '<List<java.io.File> ListOfFiles> result;
' #txt
Fs0 f85 outParameterMapAction 'result.ListOfFiles=in.filesList;
' #txt
Fs0 f85 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getListedFiles()</name>
        <nameStyle>16,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f85 1150 174 20 20 -34 -30 #rect
Fs0 f85 @|RichDialogMethodStartIcon #fIcon
Fs0 f86 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f86 1211 107 26 26 14 0 #rect
Fs0 f86 @|RichDialogProcessEndIcon #fIcon
Fs0 f87 expr out #txt
Fs0 f87 1224 74 1224 107 #arcP
Fs0 f88 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f88 actionTable 'out=in;
' #txt
Fs0 f88 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

try{
	in.filesList.clear();
	List<DocumentOnServer> docs = in.fileManagementHandler.getDocumentsWithJavaFileInPath(in.path,false);
	for(DocumentOnServer d: docs){
		in.filesList.add(d.getJavaFile());
	}
}catch(Throwable t){
		
}' #txt
Fs0 f88 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f88 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Get the Files in the path</name>
        <nameStyle>25,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f88 1142 220 36 24 20 -2 #rect
Fs0 f88 @|RichDialogProcessStepIcon #fIcon
Fs0 f88 -613726|-613726|-16777216 #nodeStyle
Fs0 f89 expr out #txt
Fs0 f89 1160 194 1160 220 #arcP
Fs0 f90 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f90 1147 267 26 26 14 0 #rect
Fs0 f90 @|RichDialogProcessEndIcon #fIcon
Fs0 f91 expr out #txt
Fs0 f91 1160 244 1160 267 #arcP
Fs0 f92 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f92 actionTable 'out=in;
' #txt
Fs0 f92 actionCode 'try{
	in.fileManagementHandler.insertDocuments(in.tmpDocumentOnServersList);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}
panel.refresh();' #txt
Fs0 f92 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f92 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f92 894 1148 36 24 20 -2 #rect
Fs0 f92 @|RichDialogProcessStepIcon #fIcon
Fs0 f93 expr out #txt
Fs0 f93 912 1122 912 1148 #arcP
Fs0 f94 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f94 899 1195 26 26 14 0 #rect
Fs0 f94 @|RichDialogProcessEndIcon #fIcon
Fs0 f95 expr out #txt
Fs0 f95 912 1172 912 1195 #arcP
Fs0 f96 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f96 actionTable 'out=in;
' #txt
Fs0 f96 actionCode 'try{
	in.fileManagementHandler.insertFiles(in.tmpFilesList,ivy.session.getSessionUserName());
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}
panel.refresh();' #txt
Fs0 f96 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f96 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f96 1150 1036 36 24 20 -2 #rect
Fs0 f96 @|RichDialogProcessStepIcon #fIcon
Fs0 f97 expr out #txt
Fs0 f97 1168 1018 1168 1036 #arcP
Fs0 f98 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f98 1155 1091 26 26 14 0 #rect
Fs0 f98 @|RichDialogProcessEndIcon #fIcon
Fs0 f99 expr out #txt
Fs0 f99 1168 1060 1168 1091 #arcP
Fs0 f100 guid 11F8D25CD4CFD440 #txt
Fs0 f100 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f100 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f100 actionTable 'out=in;
' #txt
Fs0 f100 actionCode 'import ch.ivyteam.ivy.richdialog.exec.RdEvent;

RdEvent e = event as RdEvent;
if(e.getParameter() instanceof String){
	in.userTempDirectoryPath = e.getParameter() as String;
}' #txt
Fs0 f100 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Get user temp dir</name>
        <nameStyle>17,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f100 1910 406 20 20 -33 -30 #rect
Fs0 f100 @|RichDialogProcessStartIcon #fIcon
Fs0 f101 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f101 1907 459 26 26 14 0 #rect
Fs0 f101 @|RichDialogProcessEndIcon #fIcon
Fs0 f102 expr out #txt
Fs0 f102 1920 426 1920 459 #arcP
Fs0 f103 guid 11F8D295F50E7097 #txt
Fs0 f103 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f103 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f103 actionTable 'out=in;
' #txt
Fs0 f103 actionCode 'import ch.ivyteam.ivy.richdialog.exec.RdEvent;
in.tmpString="";
RdEvent e = event as RdEvent;
if(e.getParameter() instanceof String){
	in.tmpString = e.getParameter() as String;
}' #txt
Fs0 f103 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Get Desktop Exception</name>
        <nameStyle>21,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f103 2054 590 20 20 -44 -27 #rect
Fs0 f103 @|RichDialogProcessStartIcon #fIcon
Fs0 f104 targetDisplay TOP #txt
Fs0 f104 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
Fs0 f104 startMethod askQuestion(String,String,List<String>,String) #txt
Fs0 f104 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f104 panelName Error #txt
Fs0 f104 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
Fs0 f104 requestMappingAction 'param.icon="/ch/ivyteam/ivy/addons/icons/close/48";
param.question=in.tmpString;
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok");
' #txt
Fs0 f104 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f104 responseMappingAction 'out=in;
' #txt
Fs0 f104 windowConfiguration '{/title "Error in Desktop action"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Fs0 f104 isAsynch false #txt
Fs0 f104 isInnerRd true #txt
Fs0 f104 isDialog true #txt
Fs0 f104 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Show Error Message</name>
        <nameStyle>18,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f104 2046 636 36 24 20 -2 #rect
Fs0 f104 @|RichDialogIcon #fIcon
Fs0 f105 expr out #txt
Fs0 f105 2064 610 2064 636 #arcP
Fs0 f106 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f106 2051 699 26 26 14 0 #rect
Fs0 f106 @|RichDialogProcessEndIcon #fIcon
Fs0 f107 expr out #txt
Fs0 f107 2064 660 2064 699 #arcP
Fs0 f108 guid 11F8D2D44FF77A97 #txt
Fs0 f108 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f108 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f108 actionTable 'out=in;
' #txt
Fs0 f108 actionCode 'import ch.ivyteam.ivy.richdialog.exec.RdEvent;
RdEvent e = event as RdEvent;
if(e.getParameter() instanceof String){
	out.osUserName = e.getParameter() as String;
}
' #txt
Fs0 f108 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get OS User Name</name>
        <nameStyle>16,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f108 1910 590 20 20 -33 -30 #rect
Fs0 f108 @|RichDialogProcessStartIcon #fIcon
Fs0 f109 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f109 1907 643 26 26 14 0 #rect
Fs0 f109 @|RichDialogProcessEndIcon #fIcon
Fs0 f110 expr out #txt
Fs0 f110 1920 610 1920 643 #arcP
Fs0 f111 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f111 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>is multiple selection allowed ?</name>
        <nameStyle>31,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f111 2202 202 28 28 14 0 #rect
Fs0 f111 @|AlternativeIcon #fIcon
Fs0 f113 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f113 actionTable 'out=in;
' #txt
Fs0 f113 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
in.tmpBoolean=false;
try{
	List select = panel.fileListTable.getSelectedListEntries();
	for(Object o : select){
		if(o instanceof DocumentOnServer){
			in.selectedDocumentOnServerList.add(o as DocumentOnServer);
		}
	}
	in.returnedMessage=in.fileManagementHandler.deleteDocumentOnServers(in.selectedDocumentOnServerList);
	if(in.returnedMessage.type==1){
		out.tmpBoolean=true;
	}
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}

panel.refresh();' #txt
Fs0 f113 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f113 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Delete List</name>
        <nameStyle>11,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f113 2150 276 36 24 -57 -35 #rect
Fs0 f113 @|RichDialogProcessStepIcon #fIcon
Fs0 f113 -613726|-613726|-16777216 #nodeStyle
Fs0 f114 expr in #txt
Fs0 f114 outCond in.multipleSelectionAllowed #txt
Fs0 f114 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Yes</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f114 2210 224 2176 276 #arcP
Fs0 f115 targetWindow NEW:card: #txt
Fs0 f115 targetDisplay TOP #txt
Fs0 f115 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
Fs0 f115 startMethod askQuestion(String,String,List<String>,String) #txt
Fs0 f115 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f115 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
Fs0 f115 requestMappingAction 'param.icon="warning";
param.question=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/question/confirmDeleteFiles");
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/deleteFiles"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/cancel")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/deleteFiles");
' #txt
Fs0 f115 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f115 responseMappingAction 'out=in;
out.tmpString=result.pressedButton;
' #txt
Fs0 f115 windowConfiguration '{/title "<%=in.windowTitle%>"/width 320 /height 200 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Fs0 f115 isAsynch false #txt
Fs0 f115 isInnerRd true #txt
Fs0 f115 isDialog true #txt
Fs0 f115 userContext '* ' #txt
Fs0 f115 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Ask the user to confirm the deletion</name>
        <nameStyle>36,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f115 2198 100 36 24 20 -2 #rect
Fs0 f115 @|RichDialogIcon #fIcon
Fs0 f116 expr out #txt
Fs0 f116 2216 82 2216 100 #arcP
Fs0 f117 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f117 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Confirmed?</name>
        <nameStyle>10,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f117 2202 146 28 28 14 0 #rect
Fs0 f117 @|AlternativeIcon #fIcon
Fs0 f118 expr out #txt
Fs0 f118 2216 124 2216 146 #arcP
Fs0 f112 expr in #txt
Fs0 f112 outCond in.tmpString.equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/deleteFiles")) #txt
Fs0 f112 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f112 2216 174 2216 202 #arcP
Fs0 f120 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f120 actionTable 'out=in;
' #txt
Fs0 f120 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
in.tmpBoolean=false;

if(panel.fileListTable.getSelectedListEntry() != null && panel.fileListTable.getSelectedListEntry() instanceof DocumentOnServer){
	in.selectedDocumentOnServer=panel.fileListTable.getSelectedListEntry() as DocumentOnServer;
	if(in.selectedDocumentOnServer.locked.compareTo("1")==0){
		out.returnedMessage.text=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/fileLockedNotDeleted");
	}
	else{
		try{
			in.returnedMessage=in.fileManagementHandler.deleteDocumentOnServer(in.selectedDocumentOnServer);
			if(in.returnedMessage.type==1)
			{
				out.tmpBoolean=true;
			}
		}catch(Throwable t){
			in.errorUtil.panelId = in.panelId;
			in.errorUtil.errorOccurred=true;
			in.errorUtil.throwable = t;
			in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
			panel.fireErrorOccurred(in.errorUtil);
		}
	}
}

panel.refresh();
' #txt
Fs0 f120 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f120 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Delete single file</name>
        <nameStyle>18,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f120 2254 276 36 24 -1 -35 #rect
Fs0 f120 @|RichDialogProcessStepIcon #fIcon
Fs0 f120 -613726|-613726|-16777216 #nodeStyle
Fs0 f121 expr in #txt
Fs0 f121 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>No</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f121 2222 224 2263 276 #arcP
Fs0 f53 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f53 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Success ?</name>
        <nameStyle>9,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f53 2210 330 28 28 -79 -6 #rect
Fs0 f53 @|AlternativeIcon #fIcon
Fs0 f54 expr out #txt
Fs0 f54 2180 300 2217 337 #arcP
Fs0 f119 expr out #txt
Fs0 f119 2262 300 2230 336 #arcP
Fs0 f122 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f122 2211 483 26 26 14 0 #rect
Fs0 f122 @|RichDialogProcessEndIcon #fIcon
Fs0 f124 expr in #txt
Fs0 f124 2202 160 2211 496 #arcP
Fs0 f124 1 2088 160 #addKink
Fs0 f124 2 2088 496 #addKink
Fs0 f124 1 0.4059138568666363 0 0 #arcLabel
Fs0 f125 targetWindow NEW:card: #txt
Fs0 f125 targetDisplay TOP #txt
Fs0 f125 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
Fs0 f125 startMethod askQuestion(String,String,List<String>,String) #txt
Fs0 f125 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f125 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
Fs0 f125 requestMappingAction 'param.icon="/ch/ivyteam/ivy/addons/icons/close/48";
param.question=in.returnedMessage.text;
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok");
' #txt
Fs0 f125 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f125 responseMappingAction 'out=in;
' #txt
Fs0 f125 windowConfiguration '{/title "Error"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Fs0 f125 isAsynch false #txt
Fs0 f125 isInnerRd true #txt
Fs0 f125 isDialog true #txt
Fs0 f125 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Show Error Message</name>
        <nameStyle>18,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f125 2286 332 36 24 20 -2 #rect
Fs0 f125 @|RichDialogIcon #fIcon
Fs0 f126 expr in #txt
Fs0 f126 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>No</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f126 2238 344 2286 344 #arcP
Fs0 f128 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f128 actionTable 'out=in;
' #txt
Fs0 f128 actionCode 'panel.openMenuItem.setEnabled(false);
panel.deleteMenuItem.setEnabled(false);' #txt
Fs0 f128 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f128 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f128 2206 388 36 24 20 -2 #rect
Fs0 f128 @|RichDialogProcessStepIcon #fIcon
Fs0 f129 expr in #txt
Fs0 f129 outCond in.tmpBoolean #txt
Fs0 f129 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Yes</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f129 2224 358 2224 388 #arcP
Fs0 f127 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f127 actionTable 'out=in;
' #txt
Fs0 f127 actionCode panel.refresh(); #txt
Fs0 f127 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f127 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh</name>
        <nameStyle>7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f127 2286 484 36 24 20 -2 #rect
Fs0 f127 @|RichDialogProcessStepIcon #fIcon
Fs0 f131 expr out #txt
Fs0 f131 2304 356 2304 484 #arcP
Fs0 f131 0 0.7382613346780561 0 0 #arcLabel
Fs0 f130 expr out #txt
Fs0 f130 2286 496 2237 496 #arcP
Fs0 f130 0 0.49999999999999994 0 0 #arcLabel
Fs0 f56 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f56 actionTable 'out=in;
' #txt
Fs0 f56 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileUploadHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
in.errorUtil.errorOccurred=false;
if(in.#path == null || in.path.trim().equals("")){
	in.path="defaultDirectory";
}
in.path=FileHandler.formatPathWithEndSeparator(in.path,true);

in.selectedDocumentOnServer= new DocumentOnServer();
in.selectedDocumentOnServerList= new List<DocumentOnServer>();
in.selectedFile=null;
in.selectedFilesList= new List<java.io.File>();

in.uploadManager.setServerPath(in.path);' #txt
Fs0 f56 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f56 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f56 158 860 36 24 20 -2 #rect
Fs0 f56 @|RichDialogProcessStepIcon #fIcon
Fs0 f34 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f34 actionTable 'out=in;
' #txt
Fs0 f34 actionCode 'in.documentsInDb.clear();
try{
	in.documentsInDb.addAll(in.fileManagementHandler.getDocumentsInPath(in.path,false));
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}
panel.enablerTextField.setText("");' #txt
Fs0 f34 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f34 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>retrieve the documents</name>
        <nameStyle>22,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f34 158 932 36 24 20 -2 #rect
Fs0 f34 @|RichDialogProcessStepIcon #fIcon
Fs0 f8 expr out #txt
Fs0 f8 158 944 117 944 #arcP
Fs0 f134 expr out #txt
Fs0 f134 176 884 176 932 #arcP
Fs0 f133 guid 11F92AF9DC8BD232 #txt
Fs0 f133 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f133 method _onProgress(Number) #txt
Fs0 f133 disableUIEvents false #txt
Fs0 f133 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_onProgress(Number)</name>
    </language>
</elementInfo>
' #txt
Fs0 f133 1326 358 20 20 -36 -28 #rect
Fs0 f133 @|RichDialogMethodStartIcon #fIcon
Fs0 f135 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f135 1323 419 26 26 14 0 #rect
Fs0 f135 @|RichDialogProcessEndIcon #fIcon
Fs0 f136 expr out #txt
Fs0 f136 1336 378 1336 419 #arcP
Fs0 f137 guid 11F92AFE86534043 #txt
Fs0 f137 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f137 method refreshWithCheck() #txt
Fs0 f137 disableUIEvents false #txt
Fs0 f137 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refreshWithCheck()</name>
    </language>
</elementInfo>
' #txt
Fs0 f137 878 598 20 20 -17 -32 #rect
Fs0 f137 @|RichDialogMethodStartIcon #fIcon
Fs0 f60 guid 11F92BB10D256BB5 #txt
Fs0 f60 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f60 method _onChangeFile(ch.ivyteam.ivy.addons.filemanager.ReturnedMessage) #txt
Fs0 f60 disableUIEvents false #txt
Fs0 f60 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> param = methodEvent.getInputArguments();
' #txt
Fs0 f60 inParameterMapAction 'out.returnedMessage=param.returnedMessage;
out.tmpFile=param.returnedMessage.file;
' #txt
Fs0 f60 outParameterDecl '<> result;
' #txt
Fs0 f60 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_onChangeFile(ReturnedMessage)</name>
        <nameStyle>30,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f60 1230 486 20 20 -59 -31 #rect
Fs0 f60 @|RichDialogMethodStartIcon #fIcon
Fs0 f141 actionDecl 'List<java.io.File> listOfDeletedFiles;
' #txt
Fs0 f141 actionTable 'listOfDeletedFiles=in.selectedFilesList;
' #txt
Fs0 f141 actionCode panel.fireFilesDeleted(listOfDeletedFiles); #txt
Fs0 f141 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f141 fireEvent filesDeleted(List<java.io.File>) #txt
Fs0 f141 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>filesDeleted</name>
        <nameStyle>12,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f141 2206 436 36 24 -89 -6 #rect
Fs0 f141 @|RichDialogFireEventIcon #fIcon
Fs0 f142 expr out #txt
Fs0 f142 2224 412 2224 436 #arcP
Fs0 f123 expr out #txt
Fs0 f123 2224 460 2224 483 #arcP
Fs0 f144 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f144 actionTable 'out=in;
' #txt
Fs0 f144 actionCode 'panel.uploadMenuItem.setEnabled(in.tmpBoolean);
panel.uploadButton.setEnabled(in.tmpBoolean);' #txt
Fs0 f144 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f144 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f144 1110 452 36 24 20 -2 #rect
Fs0 f144 @|RichDialogProcessStepIcon #fIcon
Fs0 f146 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f146 1115 491 26 26 14 0 #rect
Fs0 f146 @|RichDialogProcessEndIcon #fIcon
Fs0 f147 expr out #txt
Fs0 f147 1128 476 1128 491 #arcP
Fs0 f143 guid 11FCC1428B6832FC #txt
Fs0 f143 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f143 method setUploadEnabled(Boolean) #txt
Fs0 f143 disableUIEvents false #txt
Fs0 f143 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Boolean enabled> param = methodEvent.getInputArguments();
' #txt
Fs0 f143 inParameterMapAction 'out.tmpBoolean=param.enabled;
' #txt
Fs0 f143 outParameterDecl '<> result;
' #txt
Fs0 f143 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setUploadEnabled(Boolean)</name>
        <nameStyle>25,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f143 1118 414 20 20 -44 -29 #rect
Fs0 f143 @|RichDialogMethodStartIcon #fIcon
Fs0 f145 expr out #txt
Fs0 f145 1128 434 1128 452 #arcP
Fs0 f148 guid 1200ED2C0D658472 #txt
Fs0 f148 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f148 method startWithPathAndToolbar(String,Boolean) #txt
Fs0 f148 disableUIEvents false #txt
Fs0 f148 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String path,java.lang.Boolean isToolBarVisible> param = methodEvent.getInputArguments();
' #txt
Fs0 f148 inParameterMapAction 'out.isToolbarVisible=param.isToolBarVisible;
out.path=param.path;
' #txt
Fs0 f148 outParameterDecl '<> result;
' #txt
Fs0 f148 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
Fs0 f148 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithPath
AndToolbar(String,Boolean)</name>
        <nameStyle>40,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f148 230 142 20 20 13 0 #rect
Fs0 f148 @|RichDialogInitStartIcon #fIcon
Fs0 f149 guid 1200ED2CF3D7F590 #txt
Fs0 f149 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f149 method startWithPathAndToolbarAndMultipleSelectionAllowed(String,Boolean,Boolean) #txt
Fs0 f149 disableUIEvents false #txt
Fs0 f149 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String path,java.lang.Boolean isToolBarVisible,java.lang.Boolean isMultipleSelectionAllowed> param = methodEvent.getInputArguments();
' #txt
Fs0 f149 inParameterMapAction 'out.isToolbarVisible=param.isToolBarVisible;
out.multipleSelectionAllowed=param.isMultipleSelectionAllowed;
out.path=param.path;
' #txt
Fs0 f149 outParameterDecl '<> result;
' #txt
Fs0 f149 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
Fs0 f149 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithPath
AndToolbarAndMultipleSelectionAllowed
(String,Boolean,Boolean)</name>
        <nameStyle>76,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f149 230 222 20 20 13 0 #rect
Fs0 f149 @|RichDialogInitStartIcon #fIcon
Fs0 f150 expr out #txt
Fs0 f150 231 156 114 222 #arcP
Fs0 f151 expr out #txt
Fs0 f151 230 232 114 232 #arcP
Fs0 f152 guid 1200ED56C47F1518 #txt
Fs0 f152 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f152 method isToolbarVisible() #txt
Fs0 f152 disableUIEvents false #txt
Fs0 f152 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Fs0 f152 outParameterDecl '<java.lang.Boolean isToolbarVisible> result;
' #txt
Fs0 f152 outParameterMapAction 'result.isToolbarVisible=in.isToolbarVisible;
' #txt
Fs0 f152 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>isToolbarVisible()</name>
        <nameStyle>18,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f152 1254 1030 20 20 13 0 #rect
Fs0 f152 @|RichDialogMethodStartIcon #fIcon
Fs0 f153 guid 1200ED57F13B12F7 #txt
Fs0 f153 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f153 method setToolbarVisible(Boolean) #txt
Fs0 f153 disableUIEvents false #txt
Fs0 f153 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Boolean isToolbarVisible> param = methodEvent.getInputArguments();
' #txt
Fs0 f153 inParameterMapAction 'out.isToolbarVisible=param.isToolbarVisible;
' #txt
Fs0 f153 outParameterDecl '<> result;
' #txt
Fs0 f153 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setToolbarVisible(Boolean)</name>
        <nameStyle>26,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f153 1254 1126 20 20 13 0 #rect
Fs0 f153 @|RichDialogMethodStartIcon #fIcon
Fs0 f154 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f154 1251 1075 26 26 14 0 #rect
Fs0 f154 @|RichDialogProcessEndIcon #fIcon
Fs0 f155 expr out #txt
Fs0 f155 1264 1050 1264 1075 #arcP
Fs0 f156 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f156 1251 1179 26 26 14 0 #rect
Fs0 f156 @|RichDialogProcessEndIcon #fIcon
Fs0 f157 expr out #txt
Fs0 f157 1264 1146 1264 1179 #arcP
Fs0 f158 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f158 actionTable 'out=in;
' #txt
Fs0 f158 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/overwriteFiles"); #txt
Fs0 f158 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f158 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f158 1222 644 36 24 20 -2 #rect
Fs0 f158 @|RichDialogProcessStepIcon #fIcon
Fs0 f69 expr out #txt
Fs0 f69 1240 668 1240 692 #arcP
Fs0 f160 actionDecl 'List<java.io.File> files;
' #txt
Fs0 f160 actionTable 'files=in.tmpFilesList;
' #txt
Fs0 f160 actionCode panel.fireFilesSuccessfullyUploaded(files); #txt
Fs0 f160 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f160 fireEvent filesSuccessfullyUploaded(List<java.io.File>) #txt
Fs0 f160 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>filesSuccessfullyUploaded</name>
        <nameStyle>25,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f160 894 948 36 24 20 -2 #rect
Fs0 f160 @|RichDialogFireEventIcon #fIcon
Fs0 f67 expr out #txt
Fs0 f67 912 972 912 1003 #arcP
Fs0 f139 expr out #txt
Fs0 f139 912 884 912 948 #arcP
Fs0 f140 guid 1274CEC3E846BBC7 #txt
Fs0 f140 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f140 method startWithPathAndIvyDbConnectionNameAndDBTableNameAndDBSchemaNameAndIsToolbarVisisbleAndIsMultipleSelectionAllowed(String,String,String,String,Boolean,Boolean) #txt
Fs0 f140 disableUIEvents true #txt
Fs0 f140 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String path,java.lang.String ivyDBConnectionName,java.lang.String DbTableName,java.lang.String DBSchemaName,java.lang.Boolean isToolbarVisible,java.lang.Boolean isMultipleSelectionAllowed> param = methodEvent.getInputArguments();
' #txt
Fs0 f140 inParameterMapAction 'out.DbTableName=param.DbTableName;
out.isToolbarVisible=param.isToolbarVisible;
out.ivyConnexionDBName=param.ivyDBConnectionName;
out.multipleSelectionAllowed=param.isMultipleSelectionAllowed;
out.path=param.path;
out.schemaName=param.DBSchemaName;
' #txt
Fs0 f140 outParameterDecl '<> result;
' #txt
Fs0 f140 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
Fs0 f140 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithPath
AndIvyDbConnectionName
AndDBTableName
AndDBSchemaName
AndIsToolbarVisisble
AndIsMultipleSelectionAllowed
(String,String,String,String,Boolean,Boolean)</name>
        <nameStyle>164,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f140 230 302 20 20 13 -13 #rect
Fs0 f140 @|RichDialogInitStartIcon #fIcon
Fs0 f161 expr out #txt
Fs0 f161 231 307 114 242 #arcP
Fs0 f162 guid 1274D04B712D4C26 #txt
Fs0 f162 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f162 method deleteFiles() #txt
Fs0 f162 disableUIEvents false #txt
Fs0 f162 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Fs0 f162 outParameterDecl '<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> result;
' #txt
Fs0 f162 outParameterMapAction 'result.returnedMessage=in.returnedMessage;
' #txt
Fs0 f162 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>deleteFiles()</name>
        <nameStyle>13,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f162 854 38 20 20 13 0 #rect
Fs0 f162 @|RichDialogMethodStartIcon #fIcon
Fs0 f163 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f163 actionTable 'out=in;
' #txt
Fs0 f163 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
try{

	in.returnedMessage=in.fileManagementHandler.deleteDocumentOnServers(in.documentsInDb);
	
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}

panel.refreshWithCheck();' #txt
Fs0 f163 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f163 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f163 846 92 36 24 20 -2 #rect
Fs0 f163 @|RichDialogProcessStepIcon #fIcon
Fs0 f163 -613726|-613726|-16777216 #nodeStyle
Fs0 f164 expr out #txt
Fs0 f164 864 58 864 92 #arcP
Fs0 f165 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f165 854 150 20 20 13 0 #rect
Fs0 f165 @|RichDialogProcessEndIcon #fIcon
Fs0 f166 expr out #txt
Fs0 f166 864 116 864 150 #arcP
Fs0 f167 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f167 actionTable 'out=in;
' #txt
Fs0 f167 actionCode 'if(in.#uploadManager != null){

	in.uploadManager.uploadWithoutShowingProgress(true);
}' #txt
Fs0 f167 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f167 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f167 2030 388 36 24 20 -2 #rect
Fs0 f167 @|RichDialogProcessStepIcon #fIcon
Fs0 f168 expr out #txt
Fs0 f168 2048 362 2048 388 #arcP
Fs0 f51 expr out #txt
Fs0 f51 2048 412 2048 427 #arcP
Fs0 f169 guid 129DB74CBC7A111F #txt
Fs0 f169 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f169 method startUsingIvySystemDBWithServerPathAndToolbarAndMultipleSelectionAllowed(String,Boolean,Boolean) #txt
Fs0 f169 disableUIEvents true #txt
Fs0 f169 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath,java.lang.Boolean toolbarVisible,java.lang.Boolean multipleSelectionAllowed> param = methodEvent.getInputArguments();
' #txt
Fs0 f169 inParameterMapAction 'out.isToolbarVisible=param.toolbarVisible;
out.multipleSelectionAllowed=param.multipleSelectionAllowed;
out.path=param.serverPath;
' #txt
Fs0 f169 outParameterDecl '<> result;
' #txt
Fs0 f169 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
Fs0 f169 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startUsingIvySystemDBWith
ServerPath
AndToolbar
AndMultipleSelectionAllowed
(String,Boolean,Boolean)</name>
        <nameStyle>100,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f169 246 454 20 20 13 0 #rect
Fs0 f169 @|RichDialogInitStartIcon #fIcon
Fs0 f170 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f170 actionTable 'out=in;
' #txt
Fs0 f170 actionCode 'import ch.ivyteam.ivy.addons.filemanager.database.FileManagementIvySystemDBHandler;
out.fileManagementHandler = new FileManagementIvySystemDBHandler();' #txt
Fs0 f170 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f170 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>make FileManager
DB Handler</name>
        <nameStyle>27,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f170 158 452 36 24 -47 15 #rect
Fs0 f170 @|RichDialogProcessStepIcon #fIcon
Fs0 f171 expr out #txt
Fs0 f171 256 474 176 476 #arcP
Fs0 f171 1 256 528 #addKink
Fs0 f171 2 176 528 #addKink
Fs0 f171 1 0.4875 0 0 #arcLabel
Fs0 f172 expr out #txt
Fs0 f172 172 452 100 244 #arcP
Fs0 f173 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f173 actionTable 'out=in;
' #txt
Fs0 f173 actionCode 'try{
	boolean b =in.fileManagementHandler.lockDocument(in.selectedDocumentOnServer,ivy.session.getSessionUserName());
	if(in.selectedDocumentOnServer.getJavaFile()==null){
		in.selectedDocumentOnServer = in.fileManagementHandler.getDocumentOnServerWithJavaFile(in.selectedDocumentOnServer);
	}
	if(b){
		panel.desktopHandlerPanel.openDocumentOnServerAndCheckForChanges(in.selectedDocumentOnServer);
	}else{
		panel.desktopHandlerPanel.openFile(in.selectedDocumentOnServer.getJavaFile());
	}
	panel.refresh();
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
Fs0 f173 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f173 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f173 2030 124 36 24 20 -2 #rect
Fs0 f173 @|RichDialogProcessStepIcon #fIcon
Fs0 f173 -613726|-613726|-16777216 #nodeStyle
Fs0 f174 expr out #txt
Fs0 f174 2048 90 2048 124 #arcP
Fs0 f48 expr out #txt
Fs0 f48 2048 148 2048 211 #arcP
Fs0 f175 guid 12AE6952674769C1 #txt
Fs0 f175 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f175 broadcast SE_fileLocked #txt
Fs0 f175 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f175 actionTable 'out=in;
' #txt
Fs0 f175 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
List l = param.panelIdAndDocumentOnServerLocked;

in.updateList=false;
if(l.size()==2 && l.get(0) instanceof Number && l.get(1) instanceof DocumentOnServer){
	Number n = l.get(0) as Number;
	if(n!= in.panelId){
		DocumentOnServer doc = l.get(1) as DocumentOnServer;
		String sep = (doc.path.contains("/"))?"/":"\\";
		String docPath = doc.path.substring(0,doc.path.lastIndexOf(sep));
		docPath = FileHandler.formatPathWithEndSeparator(docPath,false);
		//ivy.log.debug(docPath);
		//ivy.log.debug(doc.filename);
		
		if(in.#path !=null){
			String folderPath=FileHandler.formatPathWithEndSeparator(in.path,false);
			if(folderPath.equalsIgnoreCase(docPath)){
				List<DocumentOnServer> docs = new List<DocumentOnServer>();
				docs.addAll(in.documentsInDb);
				in.documentsInDb.clear();
				for(int i=0; i<docs.size();i++){
					if(docs.get(i).filename.equalsIgnoreCase(doc.filename)){
						docs.get(i).setLocked("1");
						docs.get(i).lockingUserID=doc.lockingUserID;
						in.updateList=true;
						break;
					}
				}
				out.documentsInDb.addAll(docs);
			}
	
		}
	}
}' #txt
Fs0 f175 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_fileLocked</name>
        <nameStyle>13,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f175 2526 54 20 20 13 0 #rect
Fs0 f175 @|RichDialogBroadcastStartIcon #fIcon
Fs0 f176 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f176 2526 110 20 20 13 0 #rect
Fs0 f176 @|RichDialogProcessEndIcon #fIcon
Fs0 f177 expr out #txt
Fs0 f177 2536 74 2536 110 #arcP
Fs0 f178 guid 12AE69B1BD1DE94C #txt
Fs0 f178 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f178 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f178 actionTable 'out=in;
' #txt
Fs0 f178 actionCode 'try{
	in.fileManagementHandler.unlockFilesEdited(in.path,ivy.session.getSessionUserName(),false);
}catch(Throwable t){
	ivy.log.error(t.getMessage(),t);
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
}' #txt
Fs0 f178 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>onUnload</name>
        <nameStyle>8,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f178 2286 598 20 20 -28 -31 #rect
Fs0 f178 @|RichDialogProcessStartIcon #fIcon
Fs0 f179 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f179 2286 694 20 20 13 0 #rect
Fs0 f179 @|RichDialogProcessEndIcon #fIcon
Fs0 f181 guid 12B426CB5E9DCD91 #txt
Fs0 f181 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f181 method setIconSize(String) #txt
Fs0 f181 disableUIEvents false #txt
Fs0 f181 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String sizeInPixel> param = methodEvent.getInputArguments();
' #txt
Fs0 f181 inParameterMapAction 'out.iconSize=param.sizeInPixel;
' #txt
Fs0 f181 outParameterDecl '<> result;
' #txt
Fs0 f181 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setIconSize(String)</name>
        <nameStyle>19,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f181 582 406 20 20 -50 -31 #rect
Fs0 f181 @|RichDialogMethodStartIcon #fIcon
Fs0 f182 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f182 actionTable 'out=in;
' #txt
Fs0 f182 actionCode 'if(!in.iconSize.equals("16") && !in.iconSize.equals("24") && !in.iconSize.equals("32")
	&& !in.iconSize.equals("48")
	&& !in.iconSize.equals("72")){
	in.iconSize="24";
}

panel.openButton.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/file/"+in.iconSize));
panel.uploadButton.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/up/"+in.iconSize));
panel.deleteButton.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/delete/"+in.iconSize));' #txt
Fs0 f182 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f182 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f182 574 452 36 24 20 -2 #rect
Fs0 f182 @|RichDialogProcessStepIcon #fIcon
Fs0 f183 expr out #txt
Fs0 f183 592 426 592 452 #arcP
Fs0 f184 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f184 582 518 20 20 13 0 #rect
Fs0 f184 @|RichDialogProcessEndIcon #fIcon
Fs0 f185 expr out #txt
Fs0 f185 592 476 592 518 #arcP
Fs0 f186 guid 12B7C85DB9C68EC0 #txt
Fs0 f186 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f186 method editFile(java.io.File) #txt
Fs0 f186 disableUIEvents false #txt
Fs0 f186 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.io.File fileToEdit> param = methodEvent.getInputArguments();
' #txt
Fs0 f186 inParameterMapAction 'out.selectedFile=param.fileToEdit;
' #txt
Fs0 f186 outParameterDecl '<> result;
' #txt
Fs0 f186 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>editFile(File)</name>
        <nameStyle>14,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f186 902 350 20 20 -31 -27 #rect
Fs0 f186 @|RichDialogMethodStartIcon #fIcon
Fs0 f187 guid 12B7C862430BC1EB #txt
Fs0 f187 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f187 method printFile(java.io.File) #txt
Fs0 f187 disableUIEvents false #txt
Fs0 f187 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.io.File fileToPrint> param = methodEvent.getInputArguments();
' #txt
Fs0 f187 inParameterMapAction 'out.selectedFile=param.fileToPrint;
' #txt
Fs0 f187 outParameterDecl '<> result;
' #txt
Fs0 f187 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>printFile(File)</name>
        <nameStyle>15,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f187 1014 350 20 20 -30 -26 #rect
Fs0 f187 @|RichDialogMethodStartIcon #fIcon
Fs0 f188 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f188 actionTable 'out=in;
' #txt
Fs0 f188 actionCode '//boolean b =in.fileManagementHandler.lockFile(in.selectedFile,ivy.session.getSessionUserName());
boolean b =in.fileManagementHandler.lockDocument(in.selectedDocumentOnServer,ivy.session.getSessionUserName());
if(in.selectedDocumentOnServer.getJavaFile()==null){
	in.selectedDocumentOnServer = in.fileManagementHandler.getDocumentOnServerWithJavaFile(in.selectedDocumentOnServer);
}
if(b){
	panel.desktopHandlerPanel.openDocumentOnServerAndCheckForChanges(in.selectedDocumentOnServer);
}else{
	panel.desktopHandlerPanel.openFile(in.selectedDocumentOnServer.getJavaFile());
}
panel.refresh();' #txt
Fs0 f188 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f188 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f188 894 404 36 24 20 -2 #rect
Fs0 f188 @|RichDialogProcessStepIcon #fIcon
Fs0 f188 -613726|-613726|-16777216 #nodeStyle
Fs0 f189 expr out #txt
Fs0 f189 912 370 912 404 #arcP
Fs0 f190 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f190 902 462 20 20 13 0 #rect
Fs0 f190 @|RichDialogProcessEndIcon #fIcon
Fs0 f191 expr out #txt
Fs0 f191 912 428 912 462 #arcP
Fs0 f192 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f192 actionTable 'out=in;
' #txt
Fs0 f192 actionCode panel.desktopHandlerPanel.printFile(in.selectedFile); #txt
Fs0 f192 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f192 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f192 1006 396 36 24 20 -2 #rect
Fs0 f192 @|RichDialogProcessStepIcon #fIcon
Fs0 f193 expr out #txt
Fs0 f193 1024 370 1024 396 #arcP
Fs0 f194 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f194 1014 462 20 20 13 0 #rect
Fs0 f194 @|RichDialogProcessEndIcon #fIcon
Fs0 f195 expr out #txt
Fs0 f195 1024 420 1024 462 #arcP
Fs0 f196 guid 12BA9689F28BA6AF #txt
Fs0 f196 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f196 broadcast errorOccurred #txt
Fs0 f196 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f196 actionTable 'out=in;
out.incomingErrorUtil=param.errorUtil;
' #txt
Fs0 f196 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>errorOccurred</name>
        <nameStyle>13,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f196 2526 182 20 20 13 0 #rect
Fs0 f196 @|RichDialogBroadcastStartIcon #fIcon
Fs0 f197 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f197 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>same panel?</name>
        <nameStyle>11,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f197 2522 234 28 28 14 0 #rect
Fs0 f197 @|AlternativeIcon #fIcon
Fs0 f198 expr out #txt
Fs0 f198 2536 202 2536 234 #arcP
Fs0 f201 targetWindow NEW:card: #txt
Fs0 f201 targetDisplay TOP #txt
Fs0 f201 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
Fs0 f201 startMethod askQuestion(String,String,List<String>,String) #txt
Fs0 f201 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f201 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
Fs0 f201 requestMappingAction 'param.icon="error";
param.question=in.errorUtil.message+" \n"+IF(in.#errorUtil.#throwable!=null,in.errorUtil.throwable.getMessage(),"");
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok");
' #txt
Fs0 f201 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f201 responseMappingAction 'out=in;
' #txt
Fs0 f201 windowConfiguration '{/title "<%=in.incomingErrorUtil.message%>"/width 450 /height 250 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Fs0 f201 isAsynch false #txt
Fs0 f201 isInnerRd true #txt
Fs0 f201 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Show Error Message</name>
        <nameStyle>18,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f201 2518 308 36 24 20 -2 #rect
Fs0 f201 @|RichDialogIcon #fIcon
Fs0 f203 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f203 2526 382 20 20 13 0 #rect
Fs0 f203 @|RichDialogProcessEndIcon #fIcon
Fs0 f204 expr out #txt
Fs0 f204 2536 332 2536 382 #arcP
Fs0 f205 expr in #txt
Fs0 f205 2550 248 2546 392 #arcP
Fs0 f205 1 2632 248 #addKink
Fs0 f205 2 2632 392 #addKink
Fs0 f205 1 0.4039338582002615 0 0 #arcLabel
Fs0 f206 expr in #txt
Fs0 f206 outCond 'in.incomingErrorUtil.panelId == in.panelId' #txt
Fs0 f206 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f206 2536 262 2536 308 #arcP
Fs0 f199 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f199 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>error?</name>
        <nameStyle>6,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f199 82 538 28 28 14 0 #rect
Fs0 f199 @|AlternativeIcon #fIcon
Fs0 f200 expr out #txt
Fs0 f200 96 244 96 538 #arcP
Fs0 f208 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f208 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>error?</name>
        <nameStyle>6,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f208 162 818 28 28 14 0 #rect
Fs0 f208 @|AlternativeIcon #fIcon
Fs0 f209 expr out #txt
Fs0 f209 176 796 176 818 #arcP
Fs0 f210 expr in #txt
Fs0 f210 outCond in.errorUtil.errorOccurred #txt
Fs0 f210 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f210 162 832 91 944 #arcP
Fs0 f210 1 -8 832 #addKink
Fs0 f210 2 -8 944 #addKink
Fs0 f210 0 0.3787878787878788 0 -5 #arcLabel
Fs0 f58 expr in #txt
Fs0 f58 176 846 176 860 #arcP
Fs0 f202 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f202 actionTable 'out=in;
' #txt
Fs0 f202 actionCode 'try{
	in.fileManagementHandler.unlockFilesEdited(in.path,ivy.session.getSessionUserName(),false);
}catch(Throwable t){
	ivy.log.error(t.getMessage(),t);
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
}' #txt
Fs0 f202 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f202 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f202 2278 644 36 24 20 -2 #rect
Fs0 f202 @|RichDialogProcessStepIcon #fIcon
Fs0 f207 expr out #txt
Fs0 f207 2296 618 2296 644 #arcP
Fs0 f180 expr out #txt
Fs0 f180 2296 668 2296 694 #arcP
Fs0 f212 guid 12EAEAE8843B646B #txt
Fs0 f212 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f212 method _uploadFilesFromOSDnD(List<String>) #txt
Fs0 f212 disableUIEvents false #txt
Fs0 f212 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.lang.String> clientFilesPathList> param = methodEvent.getInputArguments();
' #txt
Fs0 f212 inParameterMapAction 'out.filesToUpload=param.clientFilesPathList;
' #txt
Fs0 f212 outParameterDecl '<> result;
' #txt
Fs0 f212 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_uploadFilesFromOSDnD(List&lt;String&gt;)</name>
        <nameStyle>35,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f212 1518 478 20 20 -96 -33 #rect
Fs0 f212 @|RichDialogMethodStartIcon #fIcon
Fs0 f225 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f225 actionTable 'out=in;
' #txt
Fs0 f225 actionCode panel.refresh(); #txt
Fs0 f225 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f225 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh</name>
        <nameStyle>7,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f225 1694 1204 36 24 20 -2 #rect
Fs0 f225 @|RichDialogProcessStepIcon #fIcon
Fs0 f819 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f819 actionTable 'out=in;
' #txt
Fs0 f819 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning"); #txt
Fs0 f819 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f819 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>information Message</name>
        <nameStyle>19,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f819 1422 700 36 24 -61 -32 #rect
Fs0 f819 @|RichDialogProcessStepIcon #fIcon
Fs0 f836 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f836 1430 782 20 20 13 0 #rect
Fs0 f836 @|RichDialogProcessEndIcon #fIcon
Fs0 f830 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f830 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>still some files?</name>
        <nameStyle>17,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f830 1482 1154 28 28 -45 -33 #rect
Fs0 f830 @|AlternativeIcon #fIcon
Fs0 f824 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f824 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>overwrite?</name>
        <nameStyle>10,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f824 1514 962 28 28 8 -19 #rect
Fs0 f824 @|AlternativeIcon #fIcon
Fs0 f821 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f821 actionTable 'out=in;
' #txt
Fs0 f821 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
in.docsToOverwrite.clear();
//List<DocumentOnServer> l = FileHandler.getDocumentsInDir(new java.io.File(in.path));
List<DocumentOnServer> l = in.fileManagementHandler.getDocumentsInPath(in.path,false);

for(String s: in.filesToUpload){
	for(DocumentOnServer doc:l){
		if(doc.getFilename().equalsIgnoreCase(new java.io.File(s.toLowerCase()).getName())){
			in.docsToOverwrite.add(doc);
			break;
		}
	}
}' #txt
Fs0 f821 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f821 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get the 
Files to overwrite in the rest
of the files to upload</name>
        <nameStyle>9,7
53,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f821 1510 764 36 24 19 -35 #rect
Fs0 f821 @|RichDialogProcessStepIcon #fIcon
Fs0 f821 -613726|-613726|-16777216 #nodeStyle
Fs0 f809 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f809 actionTable 'out=in;
' #txt
Fs0 f809 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/overwriteFiles");
in.tmpString=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/question/overwriteExistingFiles").replaceFirst("</html>","")+"\n";
for(DocumentOnServer doc : in.docsToOverwrite){
	in.tmpString+=doc.filename+"\n";
}

in.tmpString+="</html>";' #txt
Fs0 f809 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f809 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>message to ask
the user if he wants to 
overwrite the existing files.</name>
        <nameStyle>15,7
54,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f809 1510 852 36 24 -143 -22 #rect
Fs0 f809 @|RichDialogProcessStepIcon #fIcon
Fs0 f817 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f817 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>are there some
files still to upload?</name>
        <nameStyle>15,7
22,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f817 1514 698 28 28 23 -20 #rect
Fs0 f817 @|AlternativeIcon #fIcon
Fs0 f221 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f221 1702 1246 20 20 13 0 #rect
Fs0 f221 @|RichDialogProcessEndIcon #fIcon
Fs0 f834 targetWindow NEW:card: #txt
Fs0 f834 targetDisplay TOP #txt
Fs0 f834 richDialogId ch.ivyteam.ivy.addons.commondialogs.MessageDialog #txt
Fs0 f834 startMethod showMessageWithTitle(String,String) #txt
Fs0 f834 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f834 requestActionDecl '<String aMessageTitle, String aMessageText> param;' #txt
Fs0 f834 requestMappingAction 'param.aMessageTitle=in.windowTitle;
param.aMessageText=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/NoFilesUploadedBecauseOverwriteLockedFiles");
' #txt
Fs0 f834 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f834 responseMappingAction 'out=in;
' #txt
Fs0 f834 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Fs0 f834 isAsynch false #txt
Fs0 f834 isInnerRd true #txt
Fs0 f834 userContext '* ' #txt
Fs0 f834 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>messageDialog</name>
        <nameStyle>13,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f834 1422 740 36 24 -53 7 #rect
Fs0 f834 @|RichDialogIcon #fIcon
Fs0 f217 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f217 actionTable 'out=in;
' #txt
Fs0 f217 actionCode 'List<java.io.File> files = new List<java.io.File>();
for(String s : in.filesToUpload){
	files.add(new java.io.File(s));
}
in.uploadManager.uploadPreparedFilesWithoutShowingProgress(files);
' #txt
Fs0 f217 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f217 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>upload the files</name>
        <nameStyle>16,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f217 1694 1156 36 24 20 -2 #rect
Fs0 f217 @|RichDialogProcessStepIcon #fIcon
Fs0 f815 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f815 actionTable 'out=in;
' #txt
Fs0 f815 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

List<DocumentOnServer> l = in.fileManagementHandler.getDocumentsInPath(in.path,false);

in.filesToOverwrite.clear();

List<String> filesLocked = new List<String>();
for(DocumentOnServer doc : l){
	if(doc.locked.equals("1"))
	{
		for(String p : in.filesToUpload){
			if(new java.io.File(p).getName().equalsIgnoreCase(doc.filename)){
				filesLocked.add(p);
			}
		}
	}
}

out.filesToUpload=in.filesToUpload.removeAll(filesLocked);
' #txt
Fs0 f815 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f815 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>exclude the
locked files</name>
        <nameStyle>12,7
12,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f815 1511 652 34 24 20 -18 #rect
Fs0 f815 @|RichDialogProcessStepIcon #fIcon
Fs0 f215 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f215 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>files to overwrite?</name>
        <nameStyle>19,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f215 1514 570 28 28 5 -17 #rect
Fs0 f215 @|AlternativeIcon #fIcon
Fs0 f828 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f828 actionTable 'out=in;
' #txt
Fs0 f828 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
List<String> files = new List<String>();

for(String s : in.filesToUpload){
	boolean found = false;
	for(DocumentOnServer doc: in.docsToOverwrite){
		if(new java.io.File(s).getName().equalsIgnoreCase(doc.getFilename())){
			found=true;
			break;
		}
	}
	if(!found){
		files.add(s);
	}
}

in.filesToUpload.clear();
in.filesToUpload.addAll(files);' #txt
Fs0 f828 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f828 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>exclude the files
from upload process</name>
        <nameStyle>18,7
19,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f828 1478 1068 36 24 -108 -13 #rect
Fs0 f828 @|RichDialogProcessStepIcon #fIcon
Fs0 f828 -613726|-613726|-16777216 #nodeStyle
Fs0 f213 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f213 actionTable 'out=in;
' #txt
Fs0 f213 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;

//List<DocumentOnServer> l = FileHandler.getDocumentsInDir(new java.io.File(in.path));
List<DocumentOnServer> l = in.fileManagementHandler.getDocumentsInPath(in.path,false);
List<String> files = new List<String>();
for(DocumentOnServer doc : l){
	files.add(doc.filename.toLowerCase());
}


for(String s: in.filesToUpload){
	if(files.contains(new java.io.File(s.toLowerCase()).getName())){
		in.filesToOverwrite.add(new java.io.File(s));
	}
}' #txt
Fs0 f213 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f213 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check if Files to be uploaded will overwrite 
existing files</name>
        <nameStyle>60,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f213 1510 524 36 24 21 -14 #rect
Fs0 f213 @|RichDialogProcessStepIcon #fIcon
Fs0 f213 -613726|-613726|-16777216 #nodeStyle
Fs0 f826 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f826 actionTable 'out=in;
' #txt
Fs0 f826 actionCode 'try{
	//in.fileManagementHandler.deleteFiles(in.filesToOverwrite);
	in.fileManagementHandler.deleteDocumentOnServers(in.docsToOverwrite);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
Fs0 f826 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f826 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>remove files from 
FileManagement
persistency system</name>
        <nameStyle>34,7
18,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f826 1542 1020 36 24 19 -22 #rect
Fs0 f826 @|RichDialogProcessStepIcon #fIcon
Fs0 f826 -613726|-613726|-16777216 #nodeStyle
Fs0 f812 targetWindow NEW:card: #txt
Fs0 f812 targetDisplay TOP #txt
Fs0 f812 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
Fs0 f812 startMethod askQuestion(String,String,List<String>,String) #txt
Fs0 f812 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f812 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
Fs0 f812 requestMappingAction 'param.icon="warning";
param.question=in.tmpString;
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/no")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/no");
' #txt
Fs0 f812 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f812 responseMappingAction 'out=in;
out.tmpString=result.pressedButton;
' #txt
Fs0 f812 windowConfiguration '{/title "<%=in.windowTitle%>"/width 600 /height 250 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Fs0 f812 isAsynch false #txt
Fs0 f812 isInnerRd true #txt
Fs0 f812 userContext '* ' #txt
Fs0 f812 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>ask</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f812 1510 908 36 24 20 -2 #rect
Fs0 f812 @|RichDialogIcon #fIcon
Fs0 f216 expr out #txt
Fs0 f216 1528 548 1528 570 #arcP
Fs0 f218 expr in #txt
Fs0 f218 outCond in.filesToOverwrite.isEmpty() #txt
Fs0 f218 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,0,7,22
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f218 1542 584 1712 1156 #arcP
Fs0 f218 1 1712 584 #addKink
Fs0 f218 1 0.3414951814419749 0 0 #arcLabel
Fs0 f818 expr out #txt
Fs0 f818 1528 676 1528 698 #arcP
Fs0 f820 expr in #txt
Fs0 f820 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f820 1514 712 1458 712 #arcP
Fs0 f822 expr in #txt
Fs0 f822 outCond !in.filesToUpload.isEmpty() #txt
Fs0 f822 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f822 1528 726 1528 764 #arcP
Fs0 f823 expr out #txt
Fs0 f823 1528 876 1528 908 #arcP
Fs0 f825 expr out #txt
Fs0 f825 1528 932 1528 962 #arcP
Fs0 f827 expr in #txt
Fs0 f827 outCond in.tmpString.equals(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes")) #txt
Fs0 f827 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f827 1542 976 1560 1020 #arcP
Fs0 f827 1 1560 976 #addKink
Fs0 f827 1 0.18060195155554568 0 0 #arcLabel
Fs0 f829 expr in #txt
Fs0 f829 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f829 1514 976 1496 1068 #arcP
Fs0 f829 1 1496 976 #addKink
Fs0 f829 1 0.3315932036507914 0 0 #arcLabel
Fs0 f831 expr out #txt
Fs0 f831 1496 1092 1496 1154 #arcP
Fs0 f835 expr out #txt
Fs0 f835 1440 724 1440 740 #arcP
Fs0 f837 expr out #txt
Fs0 f837 1440 764 1440 782 #arcP
Fs0 f219 expr in #txt
Fs0 f219 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f219 1528 598 1528 652 #arcP
Fs0 f220 expr out #txt
Fs0 f220 1578 1032 1708 1156 #arcP
Fs0 f220 1 1664 1032 #addKink
Fs0 f220 1 0.14380498732436375 0 0 #arcLabel
Fs0 f223 expr in #txt
Fs0 f223 outCond in.filesToUpload.isEmpty() #txt
Fs0 f223 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f223 1496 1182 1702 1256 #arcP
Fs0 f223 1 1496 1256 #addKink
Fs0 f223 1 0.2947155315336824 0 0 #arcLabel
Fs0 f224 expr in #txt
Fs0 f224 1510 1168 1694 1168 #arcP
Fs0 f226 expr out #txt
Fs0 f226 1712 1180 1712 1204 #arcP
Fs0 f222 expr out #txt
Fs0 f222 1712 1228 1712 1246 #arcP
Fs0 f214 expr out #txt
Fs0 f214 1528 498 1528 524 #arcP
Fs0 f845 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f845 actionTable 'out=in;
' #txt
Fs0 f845 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning"); #txt
Fs0 f845 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f845 1614 812 36 24 20 -2 #rect
Fs0 f845 @|RichDialogProcessStepIcon #fIcon
Fs0 f227 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f227 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>still files to overwrite?</name>
        <nameStyle>25,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f227 1514 810 28 28 -59 -23 #rect
Fs0 f227 @|AlternativeIcon #fIcon
Fs0 f227 -613726|-613726|-16777216 #nodeStyle
Fs0 f228 expr out #txt
Fs0 f228 1528 788 1528 810 #arcP
Fs0 f230 expr in #txt
Fs0 f230 outCond in.docsToOverwrite.isEmpty() #txt
Fs0 f230 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f230 1542 824 1614 824 #arcP
Fs0 f229 expr in #txt
Fs0 f229 1528 838 1528 852 #arcP
Fs0 f232 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f232 actionTable 'out=in;
' #txt
Fs0 f232 actionCode 'in.documentsInDb.clear();

//get the documents
try{
	in.documentsInDb.addAll(in.fileManagementHandler.getDocumentOnServersInDirectory(in.path,false));
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
Fs0 f232 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f232 78 596 36 24 20 -2 #rect
Fs0 f232 @|RichDialogProcessStepIcon #fIcon
Fs0 f232 -613726|-613726|-16777216 #nodeStyle
Fs0 f233 expr in #txt
Fs0 f233 96 566 96 596 #arcP
Fs0 f55 expr out #txt
Fs0 f55 878 608 114 608 #arcP
Fs0 f138 expr out #txt
Fs0 f138 878 685 114 608 #arcP
Fs0 f138 1 536 608 #addKink
Fs0 f138 1 0.0843862036389808 0 0 #arcLabel
Fs0 f132 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f132 86 654 20 20 13 0 #rect
Fs0 f132 @|RichDialogProcessEndIcon #fIcon
Fs0 f234 expr out #txt
Fs0 f234 96 620 96 654 #arcP
Fs0 f235 expr in #txt
Fs0 f235 outCond in.errorUtil.errorOccurred #txt
Fs0 f235 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f235 82 552 86 664 #arcP
Fs0 f235 1 16 552 #addKink
Fs0 f235 2 16 664 #addKink
Fs0 f235 0 0.36363636363636365 0 -5 #arcLabel
Fs0 f211 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f211 actionTable 'out=in;
' #txt
Fs0 f211 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;

List<String> errors= new List<String>();
for(DocumentOnServer doc:in.documentsInDb){
	java.io.File f = new java.io.File(doc.path);
	try{
		boolean b = f.delete();
		if(!b)
		{
			errors.add(doc.filename);
		}
	}catch(Throwable t){
		errors.add(doc.filename);
	}
}

if(errors.isEmpty()){
	out.returnedMessage.type=FileHandler.SUCCESS_MESSAGE;
	out.returnedMessage.text="";
}else{
	out.returnedMessage.type=FileHandler.ERROR_MESSAGE;
	in.returnedMessage.text="";
	for(String s: errors){
		out.returnedMessage.text+="\n"+s;
	}
}

panel.refreshWithCheck();' #txt
Fs0 f211 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f211 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Fs0 f211 910 92 36 24 20 -2 #rect
Fs0 f211 @|RichDialogProcessStepIcon #fIcon
Fs0 f236 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f236 actionTable 'out=in;
' #txt
Fs0 f236 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;


in.filesList=FileHandler.getFiles(in.path);
boolean consistancy=true;
if(in.documentsInDb.size()!=in.filesList.size()){
	consistancy=false;
}
else{
	for(java.io.File f: in.filesList){
		consistancy=false;
		for(DocumentOnServer doc : in.documentsInDb){
			if(f.getName().trim().equals(doc.filename)){
				consistancy=true;
				break;
			}
		}
		//the file f was not found we have to refresh
		if(!consistancy){
				break;
		}
	}
}
if(!consistancy){
	panel.refresh();
}' #txt
Fs0 f236 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f236 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Get the Files in the path AND
check for consistancy. If difference
between File indexation and FIle System
=&gt; refresh()</name>
        <nameStyle>119,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f236 1342 236 36 24 20 -2 #rect
Fs0 f236 @|RichDialogProcessStepIcon #fIcon
Fs0 f237 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f237 actionTable 'out=in;
' #txt
Fs0 f237 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
in.tmpBoolean=false;
for(DocumentOnServer doc: in.documentsInDb){
	if(doc.getFilename().equals(in.tmpFile.getName()) && doc.getLocked().equals("1"))
	{
		out.tmpBoolean=true;
		break;
	}
}
' #txt
Fs0 f237 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f237 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Is the existing File
locked?</name>
        <nameStyle>28
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f237 1222 540 36 24 20 -2 #rect
Fs0 f237 @|RichDialogProcessStepIcon #fIcon
Fs0 f238 expr out #txt
Fs0 f238 1240 506 1240 540 #arcP
Fs0 f239 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f239 1226 586 28 28 14 0 #rect
Fs0 f239 @|AlternativeIcon #fIcon
Fs0 f240 expr out #txt
Fs0 f240 1240 564 1240 586 #arcP
Fs0 f159 expr in #txt
Fs0 f159 outCond !in.tmpBoolean #txt
Fs0 f159 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Not locked</name>
        <nameStyle>10
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f159 1240 614 1240 644 #arcP
Fs0 f241 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f241 actionTable 'out=in;
' #txt
Fs0 f241 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning"); #txt
Fs0 f241 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f241 1294 588 36 24 20 -2 #rect
Fs0 f241 @|RichDialogProcessStepIcon #fIcon
Fs0 f242 expr in #txt
Fs0 f242 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Locked</name>
        <nameStyle>6
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f242 1254 600 1294 600 #arcP
Fs0 f242 0 0.375 0 11 #arcLabel
Fs0 f847 targetWindow NEW:card: #txt
Fs0 f847 targetDisplay TOP #txt
Fs0 f847 richDialogId ch.ivyteam.ivy.addons.commondialogs.MessageDialog #txt
Fs0 f847 startMethod showMessageWithTitle(String,String) #txt
Fs0 f847 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f847 requestActionDecl '<String aMessageTitle, String aMessageText> param;' #txt
Fs0 f847 requestMappingAction 'param.aMessageTitle=in.windowTitle;
param.aMessageText=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/SomeFilesUploadedBecauseOverwriteLockedFiles");
' #txt
Fs0 f847 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f847 responseMappingAction 'out=in;
' #txt
Fs0 f847 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Fs0 f847 isAsynch false #txt
Fs0 f847 isInnerRd true #txt
Fs0 f847 userContext '* ' #txt
Fs0 f847 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>messageDialog</name>
        <nameStyle>13,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f847 1614 860 36 24 -48 10 #rect
Fs0 f847 @|RichDialogIcon #fIcon
Fs0 f231 expr out #txt
Fs0 f231 1632 836 1632 860 #arcP
Fs0 f243 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f243 1622 926 20 20 13 0 #rect
Fs0 f243 @|RichDialogProcessEndIcon #fIcon
Fs0 f244 expr out #txt
Fs0 f244 1632 884 1632 926 #arcP
Fs0 f245 targetWindow NEW:card: #txt
Fs0 f245 targetDisplay TOP #txt
Fs0 f245 richDialogId ch.ivyteam.ivy.addons.commondialogs.MessageDialog #txt
Fs0 f245 startMethod showMessageWithTitle(String,String) #txt
Fs0 f245 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f245 requestActionDecl '<String aMessageTitle, String aMessageText> param;' #txt
Fs0 f245 requestMappingAction 'param.aMessageTitle=in.windowTitle;
param.aMessageText=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/fileExistsAndLocked").replaceAll("</html>","")+ " "+in.returnedMessage.file.getName()+"</html>";
' #txt
Fs0 f245 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f245 responseMappingAction 'out=in;
' #txt
Fs0 f245 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Fs0 f245 isAsynch false #txt
Fs0 f245 isInnerRd true #txt
Fs0 f245 userContext '* ' #txt
Fs0 f245 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>messageDialog</name>
        <nameStyle>13,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f245 1350 588 36 24 -48 10 #rect
Fs0 f245 @|RichDialogIcon #fIcon
Fs0 f246 expr out #txt
Fs0 f246 1330 600 1350 600 #arcP
Fs0 f247 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f247 1406 590 20 20 13 0 #rect
Fs0 f247 @|RichDialogProcessEndIcon #fIcon
Fs0 f248 expr out #txt
Fs0 f248 1386 600 1406 600 #arcP
Fs0 f249 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f249 actionTable 'out=in;
' #txt
Fs0 f249 actionCode panel.refresh(); #txt
Fs0 f249 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f249 1222 908 36 24 20 -2 #rect
Fs0 f249 @|RichDialogProcessStepIcon #fIcon
Fs0 f250 expr out #txt
Fs0 f250 1240 868 1240 908 #arcP
Fs0 f78 expr out #txt
Fs0 f78 1240 932 1240 955 #arcP
Fs0 f251 actionDecl 'List<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer> selectedDocumentOnServers;
' #txt
Fs0 f251 actionTable 'selectedDocumentOnServers=in.selectedDocumentOnServerList;
' #txt
Fs0 f251 actionCode panel.fireDocumentSelectionChanged(selectedDocumentOnServers); #txt
Fs0 f251 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f251 fireEvent documentSelectionChanged(List<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer>) #txt
Fs0 f251 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>documentSelectionChanged@SUBSC</name>
        <nameStyle>30
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f251 1902 172 36 24 -161 4 #rect
Fs0 f251 @|RichDialogFireEventIcon #fIcon
Fs0 f37 expr out #txt
Fs0 f37 1920 196 1920 235 #arcP
Fs0 f253 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData out;
' #txt
Fs0 f253 actionTable 'out=in;
' #txt
Fs0 f253 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

in.selectedDocumentOnServerList.clear();
	for(Object o: panel.fileListTable.selectedListEntries){
		try{
			DocumentOnServer doc = o as DocumentOnServer;
			in.selectedDocumentOnServerList.add(doc);
		}catch(Throwable t){
				//do nothing
		}
	}' #txt
Fs0 f253 type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
Fs0 f253 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>make list of selected
documents</name>
        <nameStyle>31
</nameStyle>
    </language>
</elementInfo>
' #txt
Fs0 f253 1902 116 36 24 -134 -13 #rect
Fs0 f253 @|RichDialogProcessStepIcon #fIcon
Fs0 f254 expr out #txt
Fs0 f254 1920 90 1920 116 #arcP
Fs0 f252 expr out #txt
Fs0 f252 1920 140 1920 172 #arcP
>Proto Fs0 .rdData2UIAction 'panel.enablerTextField.visible=false;
panel.fileListTable.listData=in.documentsInDb;
panel.ToolbarFlowLayoutPane.visible=in.isToolbarVisible;
' #txt
>Proto Fs0 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <swimlaneLabel>Start methods</swimlaneLabel>
        <swimlaneLabel>Getters / Setters</swimlaneLabel>
        <swimlaneLabel>Methods</swimlaneLabel>
        <swimlaneLabel>Events</swimlaneLabel>
        <swimlaneLabel></swimlaneLabel>
    </language>
    <swimlaneSize>500</swimlaneSize>
    <swimlaneSize>328</swimlaneSize>
    <swimlaneSize>1000</swimlaneSize>
    <swimlaneSize>617</swimlaneSize>
    <swimlaneColor>-52</swimlaneColor>
    <swimlaneColor>-26215</swimlaneColor>
    <swimlaneColor>-13369345</swimlaneColor>
    <swimlaneColor>-26215</swimlaneColor>
</elementInfo>
' #txt
>Proto Fs0 .type ch.ivyteam.ivy.addons.filemanager.FileListTable.FileListTableData #txt
>Proto Fs0 .processKind RICH_DIALOG #txt
>Proto Fs0 -8 -8 16 16 16 26 #rect
>Proto Fs0 '' #fIcon
Fs0 f0 mainOut f5 tail #connect
Fs0 f5 head f2 mainIn #connect
Fs0 f3 mainOut f6 tail #connect
Fs0 f6 head f2 mainIn #connect
Fs0 f4 mainOut f7 tail #connect
Fs0 f7 head f2 mainIn #connect
Fs0 f9 mainOut f16 tail #connect
Fs0 f16 head f15 mainIn #connect
Fs0 f10 mainOut f18 tail #connect
Fs0 f18 head f17 mainIn #connect
Fs0 f11 mainOut f20 tail #connect
Fs0 f20 head f19 mainIn #connect
Fs0 f12 mainOut f22 tail #connect
Fs0 f22 head f21 mainIn #connect
Fs0 f21 mainOut f24 tail #connect
Fs0 f24 head f23 mainIn #connect
Fs0 f13 mainOut f26 tail #connect
Fs0 f26 head f25 mainIn #connect
Fs0 f25 mainOut f28 tail #connect
Fs0 f28 head f27 mainIn #connect
Fs0 f14 mainOut f32 tail #connect
Fs0 f32 head f31 mainIn #connect
Fs0 f31 mainOut f30 tail #connect
Fs0 f30 head f29 mainIn #connect
Fs0 f43 mainOut f40 tail #connect
Fs0 f40 head f39 mainIn #connect
Fs0 f39 mainOut f44 tail #connect
Fs0 f44 head f42 mainIn #connect
Fs0 f38 mainOut f45 tail #connect
Fs0 f45 head f41 mainIn #connect
Fs0 f59 mainOut f63 tail #connect
Fs0 f63 head f62 in #connect
Fs0 f62 out f65 tail #connect
Fs0 f65 head f64 mainIn #connect
Fs0 f62 out f68 tail #connect
Fs0 f68 head f66 mainIn #connect
Fs0 f75 mainOut f71 tail #connect
Fs0 f71 head f70 in #connect
Fs0 f70 out f73 tail #connect
Fs0 f73 head f72 mainIn #connect
Fs0 f72 mainOut f76 tail #connect
Fs0 f76 head f74 mainIn #connect
Fs0 f70 out f79 tail #connect
Fs0 f79 head f77 mainIn #connect
Fs0 f61 mainOut f81 tail #connect
Fs0 f81 head f80 mainIn #connect
Fs0 f84 mainOut f87 tail #connect
Fs0 f87 head f86 mainIn #connect
Fs0 f85 mainOut f89 tail #connect
Fs0 f89 head f88 mainIn #connect
Fs0 f88 mainOut f91 tail #connect
Fs0 f91 head f90 mainIn #connect
Fs0 f82 mainOut f93 tail #connect
Fs0 f93 head f92 mainIn #connect
Fs0 f92 mainOut f95 tail #connect
Fs0 f95 head f94 mainIn #connect
Fs0 f83 mainOut f97 tail #connect
Fs0 f97 head f96 mainIn #connect
Fs0 f96 mainOut f99 tail #connect
Fs0 f99 head f98 mainIn #connect
Fs0 f100 mainOut f102 tail #connect
Fs0 f102 head f101 mainIn #connect
Fs0 f103 mainOut f105 tail #connect
Fs0 f105 head f104 mainIn #connect
Fs0 f104 mainOut f107 tail #connect
Fs0 f107 head f106 mainIn #connect
Fs0 f108 mainOut f110 tail #connect
Fs0 f110 head f109 mainIn #connect
Fs0 f111 out f114 tail #connect
Fs0 f114 head f113 mainIn #connect
Fs0 f52 mainOut f116 tail #connect
Fs0 f116 head f115 mainIn #connect
Fs0 f115 mainOut f118 tail #connect
Fs0 f118 head f117 in #connect
Fs0 f117 out f112 tail #connect
Fs0 f112 head f111 in #connect
Fs0 f111 out f121 tail #connect
Fs0 f121 head f120 mainIn #connect
Fs0 f113 mainOut f54 tail #connect
Fs0 f54 head f53 in #connect
Fs0 f120 mainOut f119 tail #connect
Fs0 f119 head f53 in #connect
Fs0 f117 out f124 tail #connect
Fs0 f124 head f122 mainIn #connect
Fs0 f126 head f125 mainIn #connect
Fs0 f53 out f129 tail #connect
Fs0 f129 head f128 mainIn #connect
Fs0 f53 out f126 tail #connect
Fs0 f125 mainOut f131 tail #connect
Fs0 f131 head f127 mainIn #connect
Fs0 f127 mainOut f130 tail #connect
Fs0 f130 head f122 mainIn #connect
Fs0 f34 mainOut f8 tail #connect
Fs0 f8 head f1 mainIn #connect
Fs0 f56 mainOut f134 tail #connect
Fs0 f134 head f34 mainIn #connect
Fs0 f133 mainOut f136 tail #connect
Fs0 f136 head f135 mainIn #connect
Fs0 f128 mainOut f142 tail #connect
Fs0 f142 head f141 mainIn #connect
Fs0 f141 mainOut f123 tail #connect
Fs0 f123 head f122 mainIn #connect
Fs0 f144 mainOut f147 tail #connect
Fs0 f147 head f146 mainIn #connect
Fs0 f143 mainOut f145 tail #connect
Fs0 f145 head f144 mainIn #connect
Fs0 f148 mainOut f150 tail #connect
Fs0 f150 head f2 mainIn #connect
Fs0 f149 mainOut f151 tail #connect
Fs0 f151 head f2 mainIn #connect
Fs0 f152 mainOut f155 tail #connect
Fs0 f155 head f154 mainIn #connect
Fs0 f153 mainOut f157 tail #connect
Fs0 f157 head f156 mainIn #connect
Fs0 f158 mainOut f69 tail #connect
Fs0 f69 head f75 mainIn #connect
Fs0 f160 mainOut f67 tail #connect
Fs0 f67 head f66 mainIn #connect
Fs0 f64 mainOut f139 tail #connect
Fs0 f139 head f160 mainIn #connect
Fs0 f140 mainOut f161 tail #connect
Fs0 f161 head f2 mainIn #connect
Fs0 f162 mainOut f164 tail #connect
Fs0 f164 head f163 mainIn #connect
Fs0 f163 mainOut f166 tail #connect
Fs0 f166 head f165 mainIn #connect
Fs0 f49 mainOut f168 tail #connect
Fs0 f168 head f167 mainIn #connect
Fs0 f167 mainOut f51 tail #connect
Fs0 f51 head f50 mainIn #connect
Fs0 f169 mainOut f171 tail #connect
Fs0 f171 head f170 mainIn #connect
Fs0 f170 mainOut f172 tail #connect
Fs0 f172 head f2 mainIn #connect
Fs0 f46 mainOut f174 tail #connect
Fs0 f174 head f173 mainIn #connect
Fs0 f173 mainOut f48 tail #connect
Fs0 f48 head f47 mainIn #connect
Fs0 f175 mainOut f177 tail #connect
Fs0 f177 head f176 mainIn #connect
Fs0 f181 mainOut f183 tail #connect
Fs0 f183 head f182 mainIn #connect
Fs0 f182 mainOut f185 tail #connect
Fs0 f185 head f184 mainIn #connect
Fs0 f186 mainOut f189 tail #connect
Fs0 f189 head f188 mainIn #connect
Fs0 f188 mainOut f191 tail #connect
Fs0 f191 head f190 mainIn #connect
Fs0 f187 mainOut f193 tail #connect
Fs0 f193 head f192 mainIn #connect
Fs0 f192 mainOut f195 tail #connect
Fs0 f195 head f194 mainIn #connect
Fs0 f196 mainOut f198 tail #connect
Fs0 f198 head f197 in #connect
Fs0 f201 mainOut f204 tail #connect
Fs0 f204 head f203 mainIn #connect
Fs0 f205 head f203 mainIn #connect
Fs0 f197 out f206 tail #connect
Fs0 f206 head f201 mainIn #connect
Fs0 f197 out f205 tail #connect
Fs0 f2 mainOut f200 tail #connect
Fs0 f200 head f199 in #connect
Fs0 f57 mainOut f209 tail #connect
Fs0 f209 head f208 in #connect
Fs0 f208 out f210 tail #connect
Fs0 f210 head f1 mainIn #connect
Fs0 f208 out f58 tail #connect
Fs0 f58 head f56 mainIn #connect
Fs0 f178 mainOut f207 tail #connect
Fs0 f207 head f202 mainIn #connect
Fs0 f202 mainOut f180 tail #connect
Fs0 f180 head f179 mainIn #connect
Fs0 f213 mainOut f216 tail #connect
Fs0 f216 head f215 in #connect
Fs0 f215 out f218 tail #connect
Fs0 f218 head f217 mainIn #connect
Fs0 f815 mainOut f818 tail #connect
Fs0 f818 head f817 in #connect
Fs0 f820 head f819 mainIn #connect
Fs0 f817 out f822 tail #connect
Fs0 f822 head f821 mainIn #connect
Fs0 f817 out f820 tail #connect
Fs0 f809 mainOut f823 tail #connect
Fs0 f823 head f812 mainIn #connect
Fs0 f812 mainOut f825 tail #connect
Fs0 f825 head f824 in #connect
Fs0 f824 out f827 tail #connect
Fs0 f827 head f826 mainIn #connect
Fs0 f824 out f829 tail #connect
Fs0 f829 head f828 mainIn #connect
Fs0 f828 mainOut f831 tail #connect
Fs0 f831 head f830 in #connect
Fs0 f819 mainOut f835 tail #connect
Fs0 f835 head f834 mainIn #connect
Fs0 f834 mainOut f837 tail #connect
Fs0 f837 head f836 mainIn #connect
Fs0 f215 out f219 tail #connect
Fs0 f219 head f815 mainIn #connect
Fs0 f826 mainOut f220 tail #connect
Fs0 f220 head f217 mainIn #connect
Fs0 f830 out f223 tail #connect
Fs0 f223 head f221 mainIn #connect
Fs0 f830 out f224 tail #connect
Fs0 f224 head f217 mainIn #connect
Fs0 f217 mainOut f226 tail #connect
Fs0 f226 head f225 mainIn #connect
Fs0 f225 mainOut f222 tail #connect
Fs0 f222 head f221 mainIn #connect
Fs0 f212 mainOut f214 tail #connect
Fs0 f214 head f213 mainIn #connect
Fs0 f821 mainOut f228 tail #connect
Fs0 f228 head f227 in #connect
Fs0 f227 out f230 tail #connect
Fs0 f230 head f845 mainIn #connect
Fs0 f227 out f229 tail #connect
Fs0 f229 head f809 mainIn #connect
Fs0 f233 head f232 mainIn #connect
Fs0 f137 mainOut f55 tail #connect
Fs0 f55 head f232 mainIn #connect
Fs0 f33 mainOut f138 tail #connect
Fs0 f138 head f232 mainIn #connect
Fs0 f232 mainOut f234 tail #connect
Fs0 f234 head f132 mainIn #connect
Fs0 f199 out f235 tail #connect
Fs0 f235 head f132 mainIn #connect
Fs0 f199 out f233 tail #connect
Fs0 f60 mainOut f238 tail #connect
Fs0 f238 head f237 mainIn #connect
Fs0 f237 mainOut f240 tail #connect
Fs0 f240 head f239 in #connect
Fs0 f239 out f159 tail #connect
Fs0 f159 head f158 mainIn #connect
Fs0 f239 out f242 tail #connect
Fs0 f242 head f241 mainIn #connect
Fs0 f845 mainOut f231 tail #connect
Fs0 f231 head f847 mainIn #connect
Fs0 f847 mainOut f244 tail #connect
Fs0 f244 head f243 mainIn #connect
Fs0 f241 mainOut f246 tail #connect
Fs0 f246 head f245 mainIn #connect
Fs0 f245 mainOut f248 tail #connect
Fs0 f248 head f247 mainIn #connect
Fs0 f74 mainOut f250 tail #connect
Fs0 f250 head f249 mainIn #connect
Fs0 f249 mainOut f78 tail #connect
Fs0 f78 head f77 mainIn #connect
Fs0 f251 mainOut f37 tail #connect
Fs0 f37 head f36 mainIn #connect
Fs0 f35 mainOut f254 tail #connect
Fs0 f254 head f253 mainIn #connect
Fs0 f253 mainOut f252 tail #connect
Fs0 f252 head f251 mainIn #connect
