[Ivy]
[>Created: Mon Nov 15 11:31:46 CET 2010]
125FE583DB581114 3.13.1 #module
>Proto >Proto Collection #zClass
us0 updownloadPaneProcess Big #zClass
us0 RD #cInfo
us0 #process
us0 @AnnotationInP-0n ai ai #zField
us0 @TextInP .xml .xml #zField
us0 @TextInP .responsibility .responsibility #zField
us0 @TextInP .ui2RdDataAction .ui2RdDataAction #zField
us0 @TextInP .rdData2UIAction .rdData2UIAction #zField
us0 @TextInP .resExport .resExport #zField
us0 @TextInP .type .type #zField
us0 @TextInP .processKind .processKind #zField
us0 @MessageFlowInP-0n messageIn messageIn #zField
us0 @MessageFlowOutP-0n messageOut messageOut #zField
us0 @RichDialogInitStart f0 '' #zField
us0 @RichDialogProcessEnd f1 '' #zField
us0 @RichDialogProcessStep f3 '' #zField
us0 @RichDialogProcessStart f5 '' #zField
us0 @RichDialogProcessEnd f6 '' #zField
us0 @RichDialogMethodStart f9 '' #zField
us0 @RichDialogMethodStart f10 '' #zField
us0 @RichDialogProcessEnd f11 '' #zField
us0 @RichDialogProcessStep f15 '' #zField
us0 @RichDialogProcessStart f17 '' #zField
us0 @RichDialogProcessStart f18 '' #zField
us0 @RichDialogProcessStep f19 '' #zField
us0 @PushWFArc f20 '' #zField
us0 @RichDialogProcessEnd f21 '' #zField
us0 @PushWFArc f22 '' #zField
us0 @RichDialogProcessEnd f25 '' #zField
us0 @RichDialogInitStart f34 '' #zField
us0 @RichDialogProcessStart f27 '' #zField
us0 @RichDialogProcessStep f28 '' #zField
us0 @RichDialogProcessEnd f30 '' #zField
us0 @InfoButton f42 '' #zField
us0 @RichDialogProcessStep f43 '' #zField
us0 @RichDialogMethodStart f74 '' #zField
us0 @RichDialog f75 '' #zField
us0 @Alternative f77 '' #zField
us0 @PushWFArc f78 '' #zField
us0 @RichDialogProcessEnd f81 '' #zField
us0 @RichDialog f85 '' #zField
us0 @PushWFArc f86 '' #zField
us0 @Alternative f87 '' #zField
us0 @PushWFArc f88 '' #zField
us0 @PushWFArc f29 '' #zField
us0 @PushWFArc f83 '' #zField
us0 @Alternative f95 '' #zField
us0 @RichDialogProcessStep f105 '' #zField
us0 @PushWFArc f106 '' #zField
us0 @RichDialogProcessStart f116 '' #zField
us0 @Alternative f13 '' #zField
us0 @PushWFArc f16 '' #zField
us0 @PushWFArc f121 '' #zField
us0 @RichDialogProcessStart f122 '' #zField
us0 @RichDialogProcessEnd f44 '' #zField
us0 @RichDialogMethodStart f114 '' #zField
us0 @RichDialogMethodStart f126 '' #zField
us0 @RichDialogProcessEnd f127 '' #zField
us0 @PushWFArc f128 '' #zField
us0 @RichDialogInitStart f53 '' #zField
us0 @RichDialogProcessStart f92 '' #zField
us0 @RichDialogMethodStart f112 '' #zField
us0 @RichDialogProcessStep f124 '' #zField
us0 @PushWFArc f132 '' #zField
us0 @RichDialogProcessEnd f134 '' #zField
us0 @PushWFArc f135 '' #zField
us0 @RichDialogMethodStart f136 '' #zField
us0 @RichDialogProcessStep f137 '' #zField
us0 @PushWFArc f138 '' #zField
us0 @RichDialogProcessEnd f139 '' #zField
us0 @Alternative f140 '' #zField
us0 @PushWFArc f141 '' #zField
us0 @PushWFArc f144 '' #zField
us0 @RichDialogMethodStart f145 '' #zField
us0 @RichDialogProcessEnd f146 '' #zField
us0 @PushWFArc f147 '' #zField
us0 @RichDialogProcessEnd f94 '' #zField
us0 @PushWFArc f23 '' #zField
us0 @RichDialogFireEvent f26 '' #zField
us0 @PushWFArc f12 '' #zField
us0 @RichDialogMethodStart f33 '' #zField
us0 @RichDialogProcessEnd f115 '' #zField
us0 @RichDialogProcessStart f150 '' #zField
us0 @RichDialogProcessEnd f151 '' #zField
us0 @PushWFArc f152 '' #zField
us0 @RichDialogMethodStart f153 '' #zField
us0 @RichDialogProcessStep f154 '' #zField
us0 @PushWFArc f155 '' #zField
us0 @RichDialogProcessEnd f156 '' #zField
us0 @RichDialogProcessStep f157 '' #zField
us0 @PushWFArc f158 '' #zField
us0 @PushWFArc f159 '' #zField
us0 @RichDialogInitStart f160 '' #zField
us0 @RichDialogMethodStart f162 '' #zField
us0 @RichDialogProcessEnd f163 '' #zField
us0 @PushWFArc f164 '' #zField
us0 @RichDialogMethodStart f165 '' #zField
us0 @RichDialogProcessStep f31 '' #zField
us0 @PushWFArc f168 '' #zField
us0 @RichDialogProcessStep f176 '' #zField
us0 @PushWFArc f177 '' #zField
us0 @PushWFArc f89 '' #zField
us0 @PushWFArc f107 '' #zField
us0 @RichDialogProcessStep f108 '' #zField
us0 @PushWFArc f123 '' #zField
us0 @RichDialogProcessStep f166 '' #zField
us0 @PushWFArc f179 '' #zField
us0 @PushWFArc f24 '' #zField
us0 @RichDialogProcessStep f180 '' #zField
us0 @PushWFArc f181 '' #zField
us0 @PushWFArc f113 '' #zField
us0 @RichDialogMethodStart f182 '' #zField
us0 @RichDialogProcessStep f183 '' #zField
us0 @PushWFArc f184 '' #zField
us0 @RichDialogProcessEnd f185 '' #zField
us0 @PushWFArc f186 '' #zField
us0 @RichDialogProcessStart f187 '' #zField
us0 @RichDialogProcessEnd f188 '' #zField
us0 @PushWFArc f189 '' #zField
us0 @RichDialogProcessStart f190 '' #zField
us0 @RichDialogProcessStep f191 '' #zField
us0 @Alternative f73 '' #zField
us0 @RichDialog f201 '' #zField
us0 @Alternative f203 '' #zField
us0 @PushWFArc f204 '' #zField
us0 @RichDialogProcessStart f205 '' #zField
us0 @RichDialogProcessStep f206 '' #zField
us0 @PushWFArc f207 '' #zField
us0 @PushWFArc f208 '' #zField
us0 @RichDialogProcessEnd f211 '' #zField
us0 @PushWFArc f212 '' #zField
us0 @RichDialogProcessStart f215 '' #zField
us0 @RichDialogProcessStart f227 '' #zField
us0 @RichDialogProcessEnd f228 '' #zField
us0 @PushWFArc f229 '' #zField
us0 @RichDialogProcessStart f230 '' #zField
us0 @RichDialogProcessEnd f231 '' #zField
us0 @PushWFArc f232 '' #zField
us0 @RichDialogProcessStart f198 '' #zField
us0 @RichDialogProcessEnd f234 '' #zField
us0 @RichDialogProcessStart f239 '' #zField
us0 @RichDialog f240 '' #zField
us0 @PushWFArc f241 '' #zField
us0 @RichDialogProcessEnd f242 '' #zField
us0 @PushWFArc f243 '' #zField
us0 @RichDialog f244 '' #zField
us0 @PushWFArc f245 '' #zField
us0 @Alternative f246 '' #zField
us0 @PushWFArc f247 '' #zField
us0 @PushWFArc f248 '' #zField
us0 @RichDialogProcessStep f233 '' #zField
us0 @Alternative f199 '' #zField
us0 @PushWFArc f235 '' #zField
us0 @RichDialog f250 '' #zField
us0 @RichDialog f252 '' #zField
us0 @RichDialogProcessEnd f254 '' #zField
us0 @PushWFArc f255 '' #zField
us0 @Alternative f258 '' #zField
us0 @PushWFArc f259 '' #zField
us0 @RichDialogProcessStep f260 '' #zField
us0 @PushWFArc f261 '' #zField
us0 @Alternative f262 '' #zField
us0 @PushWFArc f263 '' #zField
us0 @RichDialog f264 '' #zField
us0 @RichDialogProcessEnd f266 '' #zField
us0 @PushWFArc f267 '' #zField
us0 @PushWFArc f270 '' #zField
us0 @RichDialogProcessEnd f271 '' #zField
us0 @PushWFArc f272 '' #zField
us0 @RichDialogProcessStep f273 '' #zField
us0 @PushWFArc f257 '' #zField
us0 @RichDialogProcessStart f277 '' #zField
us0 @RichDialogProcessEnd f278 '' #zField
us0 @PushWFArc f279 '' #zField
us0 @RichDialogProcessStart f280 '' #zField
us0 @RichDialogProcessEnd f281 '' #zField
us0 @PushWFArc f282 '' #zField
us0 @RichDialogMethodStart f285 '' #zField
us0 @RichDialogProcessEnd f288 '' #zField
us0 @Alternative f290 '' #zField
us0 @PushWFArc f291 '' #zField
us0 @RichDialog f292 '' #zField
us0 @RichDialogMethodStart f301 '' #zField
us0 @RichDialogProcessStep f306 '' #zField
us0 @PushWFArc f312 '' #zField
us0 @RichDialogMethodStart f324 '' #zField
us0 @RichDialogProcessEnd f327 '' #zField
us0 @Alternative f329 '' #zField
us0 @PushWFArc f330 '' #zField
us0 @RichDialog f331 '' #zField
us0 @PushWFArc f333 '' #zField
us0 @RichDialogMethodStart f334 '' #zField
us0 @RichDialogMethodStart f335 '' #zField
us0 @RichDialogProcessEnd f336 '' #zField
us0 @PushWFArc f337 '' #zField
us0 @RichDialogProcessEnd f338 '' #zField
us0 @PushWFArc f339 '' #zField
us0 @RichDialogMethodStart f340 '' #zField
us0 @RichDialogProcessEnd f341 '' #zField
us0 @PushWFArc f342 '' #zField
us0 @RichDialogProcessStart f343 '' #zField
us0 @RichDialogProcessEnd f346 '' #zField
us0 @Alternative f348 '' #zField
us0 @PushWFArc f249 '' #zField
us0 @RichDialogProcessStep f350 '' #zField
us0 @PushWFArc f351 '' #zField
us0 @PushWFArc f349 '' #zField
us0 @RichDialog f352 '' #zField
us0 @PushWFArc f354 '' #zField
us0 @PushWFArc f355 '' #zField
us0 @PushWFArc f256 '' #zField
us0 @RichDialogMethodStart f8 '' #zField
us0 @PushWFArc f133 '' #zField
us0 @RichDialogProcessStep f358 '' #zField
us0 @PushWFArc f142 '' #zField
us0 @RichDialogProcessEnd f359 '' #zField
us0 @PushWFArc f360 '' #zField
us0 @RichDialogProcessStart f361 '' #zField
us0 @RichDialog f362 '' #zField
us0 @PushWFArc f363 '' #zField
us0 @Alternative f366 '' #zField
us0 @PushWFArc f367 '' #zField
us0 @RichDialogProcessStep f368 '' #zField
us0 @PushWFArc f370 '' #zField
us0 @RichDialogProcessEnd f373 '' #zField
us0 @PushWFArc f374 '' #zField
us0 @RichDialog f375 '' #zField
us0 @RichDialogMethodStart f274 '' #zField
us0 @RichDialogProcessStep f275 '' #zField
us0 @PushWFArc f276 '' #zField
us0 @PushWFArc f357 '' #zField
us0 @RichDialogProcessStep f377 '' #zField
us0 @PushWFArc f378 '' #zField
us0 @RichDialogMethodStart f209 '' #zField
us0 @RichDialogProcessStep f210 '' #zField
us0 @Alternative f284 '' #zField
us0 @PushWFArc f379 '' #zField
us0 @RichDialogProcessStep f380 '' #zField
us0 @PushWFArc f381 '' #zField
us0 @RichDialog f382 '' #zField
us0 @RichDialogProcessEnd f384 '' #zField
us0 @PushWFArc f385 '' #zField
us0 @PushWFArc f386 '' #zField
us0 @RichDialogProcessStart f387 '' #zField
us0 @RichDialog f393 '' #zField
us0 @Alternative f395 '' #zField
us0 @PushWFArc f396 '' #zField
us0 @RichDialogProcessStep f397 '' #zField
us0 @PushWFArc f398 '' #zField
us0 @RichDialogProcessEnd f399 '' #zField
us0 @PushWFArc f400 '' #zField
us0 @RichDialogProcessEnd f401 '' #zField
us0 @PushWFArc f402 '' #zField
us0 @RichDialogProcessStep f411 '' #zField
us0 @Alternative f413 '' #zField
us0 @RichDialogProcessEnd f414 '' #zField
us0 @PushWFArc f415 '' #zField
us0 @PushWFArc f418 '' #zField
us0 @PushWFArc f283 '' #zField
us0 @RichDialogProcessStep f403 '' #zField
us0 @Alternative f404 '' #zField
us0 @RichDialog f405 '' #zField
us0 @RichDialogProcessEnd f406 '' #zField
us0 @PushWFArc f407 '' #zField
us0 @PushWFArc f409 '' #zField
us0 @PushWFArc f410 '' #zField
us0 @RichDialogProcessStep f416 '' #zField
us0 @PushWFArc f417 '' #zField
us0 @PushWFArc f412 '' #zField
us0 @RichDialogProcessStart f419 '' #zField
us0 @RichDialogProcessEnd f420 '' #zField
us0 @PushWFArc f421 '' #zField
us0 @RichDialogMethodStart f422 '' #zField
us0 @RichDialogProcessStep f423 '' #zField
us0 @PushWFArc f424 '' #zField
us0 @Alternative f425 '' #zField
us0 @RichDialogProcessStep f427 '' #zField
us0 @PushWFArc f428 '' #zField
us0 @Alternative f429 '' #zField
us0 @PushWFArc f430 '' #zField
us0 @RichDialogProcessStep f433 '' #zField
us0 @PushWFArc f434 '' #zField
us0 @RichDialog f435 '' #zField
us0 @Alternative f437 '' #zField
us0 @PushWFArc f438 '' #zField
us0 @RichDialogProcessStep f439 '' #zField
us0 @PushWFArc f441 '' #zField
us0 @RichDialogProcessStep f442 '' #zField
us0 @PushWFArc f443 '' #zField
us0 @PushWFArc f444 '' #zField
us0 @RichDialogProcessStep f445 '' #zField
us0 @PushWFArc f446 '' #zField
us0 @PushWFArc f449 '' #zField
us0 @RichDialogProcessStep f450 '' #zField
us0 @PushWFArc f451 '' #zField
us0 @PushWFArc f447 '' #zField
us0 @Alternative f452 '' #zField
us0 @PushWFArc f453 '' #zField
us0 @RichDialog f455 '' #zField
us0 @RichDialogProcessEnd f458 '' #zField
us0 @RichDialogProcessStep f461 '' #zField
us0 @PushWFArc f462 '' #zField
us0 @PushWFArc f460 '' #zField
us0 @RichDialogInitStart f467 '' #zField
us0 @Alternative f175 '' #zField
us0 @PushWFArc f426 '' #zField
us0 @RichDialogProcessStep f490 '' #zField
us0 @PushWFArc f491 '' #zField
us0 @RichDialogProcessEnd f492 '' #zField
us0 @PushWFArc f149 '' #zField
us0 @PushWFArc f167 '' #zField
us0 @PushWFArc f125 '' #zField
us0 @RichDialogMethodStart f178 '' #zField
us0 @RichDialogMethodStart f469 '' #zField
us0 @RichDialogProcessEnd f470 '' #zField
us0 @PushWFArc f471 '' #zField
us0 @RichDialogProcessStart f473 '' #zField
us0 @RichDialogProcessEnd f474 '' #zField
us0 @PushWFArc f475 '' #zField
us0 @RichDialogMethodStart f388 '' #zField
us0 @RichDialogProcessEnd f389 '' #zField
us0 @PushWFArc f390 '' #zField
us0 @RichDialogMethodStart f391 '' #zField
us0 @RichDialogProcessEnd f392 '' #zField
us0 @PushWFArc f476 '' #zField
us0 @RichDialogProcessStep f503 '' #zField
us0 @Alternative f223 '' #zField
us0 @PushWFArc f224 '' #zField
us0 @RichDialog f225 '' #zField
us0 @RichDialogProcessStep f456 '' #zField
us0 @PushWFArc f459 '' #zField
us0 @PushWFArc f440 '' #zField
us0 @RichDialogMethodStart f494 '' #zField
us0 @RichDialogProcessStart f513 '' #zField
us0 @RichDialogProcessEnd f514 '' #zField
us0 @RichDialogProcessStart f516 '' #zField
us0 @Alternative f519 '' #zField
us0 @RichDialogProcessEnd f523 '' #zField
us0 @PushWFArc f524 '' #zField
us0 @RichDialogProcessEnd f508 '' #zField
us0 @RichDialogProcessStep f579 '' #zField
us0 @PushWFArc f80 '' #zField
us0 @PushWFArc f454 '' #zField
us0 @PushWFArc f580 '' #zField
us0 @RichDialogMethodStart f584 '' #zField
us0 @RichDialogProcessStep f472 '' #zField
us0 @PushWFArc f585 '' #zField
us0 @PushWFArc f586 '' #zField
us0 @PushWFArc f587 '' #zField
us0 @RichDialogMethodStart f588 '' #zField
us0 @RichDialogProcessEnd f592 '' #zField
us0 @RichDialogProcessStep f593 '' #zField
us0 @RichDialogProcessStep f46 '' #zField
us0 @Alternative f49 '' #zField
us0 @PushWFArc f2 '' #zField
us0 @PushWFArc f45 '' #zField
us0 @PushWFArc f48 '' #zField
us0 @RichDialogProcessStep f59 '' #zField
us0 @PushWFArc f60 '' #zField
us0 @PushWFArc f61 '' #zField
us0 @RichDialogProcessEnd f14 '' #zField
us0 @PushWFArc f62 '' #zField
us0 @RichDialogProcessEnd f63 '' #zField
us0 @PushWFArc f64 '' #zField
us0 @PushWFArc f65 '' #zField
us0 @RichDialogProcessStep f66 '' #zField
us0 @PushWFArc f67 '' #zField
us0 @PushWFArc f68 '' #zField
us0 @PushWFArc f32 '' #zField
us0 @PushWFArc f69 '' #zField
us0 @PushWFArc f70 '' #zField
us0 @PushWFArc f72 '' #zField
us0 @RichDialogProcessStep f79 '' #zField
us0 @PushWFArc f82 '' #zField
us0 @PushWFArc f84 '' #zField
us0 @RichDialogProcessStep f90 '' #zField
us0 @PushWFArc f97 '' #zField
us0 @PushWFArc f98 '' #zField
us0 @PushWFArc f37 '' #zField
us0 @PushWFArc f38 '' #zField
us0 @PushWFArc f39 '' #zField
us0 @RichDialogProcessEnd f40 '' #zField
us0 @PushWFArc f50 '' #zField
us0 @RichDialogInitStart f52 '' #zField
us0 @RichDialogInitStart f99 '' #zField
us0 @RichDialogMethodStart f117 '' #zField
us0 @RichDialogMethodStart f118 '' #zField
us0 @RichDialogProcessEnd f119 '' #zField
us0 @PushWFArc f120 '' #zField
us0 @PushWFArc f148 '' #zField
us0 @RichDialogMethodStart f169 '' #zField
us0 @RichDialogProcessStep f170 '' #zField
us0 @PushWFArc f171 '' #zField
us0 @RichDialogProcessEnd f173 '' #zField
us0 @PushWFArc f174 '' #zField
us0 @RichDialogMethodStart f172 '' #zField
us0 @RichDialogProcessStep f192 '' #zField
us0 @PushWFArc f194 '' #zField
us0 @RichDialogProcessEnd f195 '' #zField
us0 @PushWFArc f196 '' #zField
us0 @Alternative f197 '' #zField
us0 @PushWFArc f200 '' #zField
us0 @PushWFArc f202 '' #zField
us0 @RichDialogProcessStep f216 '' #zField
us0 @PushWFArc f217 '' #zField
us0 @PushWFArc f213 '' #zField
us0 @RichDialogMethodStart f218 '' #zField
us0 @RichDialogMethodStart f221 '' #zField
us0 @RichDialogProcessStep f222 '' #zField
us0 @PushWFArc f286 '' #zField
us0 @RichDialogProcessEnd f287 '' #zField
us0 @PushWFArc f289 '' #zField
us0 @RichDialogProcessStep f220 '' #zField
us0 @PushWFArc f294 '' #zField
us0 @RichDialogProcessEnd f295 '' #zField
us0 @PushWFArc f296 '' #zField
us0 @RichDialogMethodStart f219 '' #zField
us0 @RichDialogProcessEnd f297 '' #zField
us0 @PushWFArc f298 '' #zField
us0 @RichDialogProcessStart f299 '' #zField
us0 @PushWFArc f300 '' #zField
us0 @RichDialogProcessStart f302 '' #zField
us0 @RichDialogProcessEnd f303 '' #zField
us0 @PushWFArc f304 '' #zField
us0 @RichDialogMethodStart f305 '' #zField
us0 @RichDialogProcessEnd f307 '' #zField
us0 @RichDialogProcessStep f309 '' #zField
us0 @PushWFArc f310 '' #zField
us0 @PushWFArc f308 '' #zField
us0 @RichDialogMethodStart f311 '' #zField
us0 @PushWFArc f313 '' #zField
us0 @RichDialogMethodStart f314 '' #zField
us0 @RichDialogProcessStep f315 '' #zField
us0 @Alternative f317 '' #zField
us0 @PushWFArc f318 '' #zField
us0 @RichDialog f321 '' #zField
us0 @RichDialogProcessStep f323 '' #zField
us0 @PushWFArc f325 '' #zField
us0 @PushWFArc f322 '' #zField
us0 @Alternative f326 '' #zField
us0 @PushWFArc f328 '' #zField
us0 @PushWFArc f316 '' #zField
us0 @Alternative f347 '' #zField
us0 @PushWFArc f365 '' #zField
us0 @RichDialogProcessEnd f432 '' #zField
us0 @RichDialogProcessStep f463 '' #zField
us0 @PushWFArc f465 '' #zField
us0 @RichDialog f466 '' #zField
us0 @PushWFArc f477 '' #zField
us0 @PushWFArc f478 '' #zField
us0 @PushWFArc f479 '' #zField
us0 @RichDialogProcessStart f344 '' #zField
us0 @RichDialogProcessStep f345 '' #zField
us0 @PushWFArc f480 '' #zField
us0 @PushWFArc f485 '' #zField
us0 @PushWFArc f482 '' #zField
us0 @RichDialogProcessStep f319 '' #zField
us0 @PushWFArc f320 '' #zField
us0 @PushWFArc f431 '' #zField
us0 @RichDialogInitStart f486 '' #zField
us0 @RichDialogProcessStep f487 '' #zField
us0 @PushWFArc f488 '' #zField
us0 @RichDialogProcessStart f495 '' #zField
us0 @RichDialogProcessStart f496 '' #zField
us0 @RichDialogEnd f497 '' #zField
us0 @PushWFArc f498 '' #zField
us0 @PushWFArc f499 '' #zField
us0 @PushWFArc f500 '' #zField
us0 @RichDialogProcessStep f457 '' #zField
us0 @PushWFArc f501 '' #zField
us0 @PushWFArc f7 '' #zField
us0 @RichDialogMethodStart f502 '' #zField
us0 @RichDialogProcessEnd f504 '' #zField
us0 @PushWFArc f505 '' #zField
us0 @RichDialogMethodStart f506 '' #zField
us0 @RichDialogProcessStep f507 '' #zField
us0 @PushWFArc f509 '' #zField
us0 @RichDialogProcessEnd f510 '' #zField
us0 @PushWFArc f511 '' #zField
us0 @RichDialogMethodStart f512 '' #zField
us0 @Alternative f517 '' #zField
us0 @PushWFArc f518 '' #zField
us0 @RichDialogProcessStep f525 '' #zField
us0 @PushWFArc f529 '' #zField
us0 @RichDialogProcessStep f532 '' #zField
us0 @RichDialogProcessStep f554 '' #zField
us0 @PushWFArc f561 '' #zField
us0 @RichDialogProcessStep f581 '' #zField
us0 @RichDialog f583 '' #zField
us0 @PushWFArc f589 '' #zField
us0 @Alternative f590 '' #zField
us0 @PushWFArc f591 '' #zField
us0 @PushWFArc f540 '' #zField
us0 @RichDialogProcessStep f594 '' #zField
us0 @PushWFArc f595 '' #zField
us0 @RichDialogProcessEnd f596 '' #zField
us0 @PushWFArc f597 '' #zField
us0 @Alternative f600 '' #zField
us0 @PushWFArc f601 '' #zField
us0 @PushWFArc f582 '' #zField
us0 @RichDialogProcessStep f603 '' #zField
us0 @PushWFArc f604 '' #zField
us0 @Alternative f605 '' #zField
us0 @PushWFArc f606 '' #zField
us0 @PushWFArc f598 '' #zField
us0 @PushWFArc f607 '' #zField
us0 @PushWFArc f608 '' #zField
us0 @PushWFArc f602 '' #zField
us0 @RichDialogProcessStep f599 '' #zField
us0 @PushWFArc f609 '' #zField
us0 @RichDialogProcessStep f610 '' #zField
us0 @PushWFArc f611 '' #zField
us0 @RichDialogProcessStep f612 '' #zField
us0 @PushWFArc f613 '' #zField
us0 @PushWFArc f394 '' #zField
us0 @RichDialogProcessStep f614 '' #zField
us0 @PushWFArc f615 '' #zField
us0 @PushWFArc f293 '' #zField
us0 @RichDialogProcessStep f616 '' #zField
us0 @PushWFArc f617 '' #zField
us0 @PushWFArc f143 '' #zField
us0 @RichDialogProcessStep f618 '' #zField
us0 @PushWFArc f619 '' #zField
us0 @PushWFArc f353 '' #zField
us0 @RichDialogProcessStep f620 '' #zField
us0 @PushWFArc f621 '' #zField
us0 @PushWFArc f253 '' #zField
us0 @RichDialogProcessStep f622 '' #zField
us0 @PushWFArc f623 '' #zField
us0 @PushWFArc f251 '' #zField
us0 @RichDialogProcessStart f628 '' #zField
us0 @RichDialogProcessStep f629 '' #zField
us0 @PushWFArc f630 '' #zField
us0 @RichDialogProcessEnd f631 '' #zField
us0 @PushWFArc f632 '' #zField
us0 @RichDialogInitStart f634 '' #zField
us0 @RichDialogProcessStep f637 '' #zField
us0 @RichDialogProcessEnd f193 '' #zField
us0 @PushWFArc f640 '' #zField
us0 @RichDialogFireEvent f214 '' #zField
us0 @PushWFArc f641 '' #zField
us0 @PushWFArc f638 '' #zField
us0 @RichDialogProcessStep f642 '' #zField
us0 @PushWFArc f643 '' #zField
us0 @PushWFArc f639 '' #zField
us0 @Alternative f645 '' #zField
us0 @RichDialogProcessStep f647 '' #zField
us0 @PushWFArc f648 '' #zField
us0 @RichDialogProcessEnd f649 '' #zField
us0 @PushWFArc f650 '' #zField
us0 @PushWFArc f651 '' #zField
us0 @RichDialogProcessStart f652 '' #zField
us0 @RichDialogProcessStep f653 '' #zField
us0 @PushWFArc f654 '' #zField
us0 @RichDialogProcessEnd f655 '' #zField
us0 @PushWFArc f656 '' #zField
us0 @RichDialogMethodStart f657 '' #zField
us0 @Alternative f41 '' #zField
us0 @PushWFArc f658 '' #zField
us0 @RichDialogProcessStep f659 '' #zField
us0 @PushWFArc f660 '' #zField
us0 @RichDialogProcessStep f661 '' #zField
us0 @PushWFArc f662 '' #zField
us0 @RichDialogProcessEnd f663 '' #zField
us0 @PushWFArc f664 '' #zField
us0 @PushWFArc f666 '' #zField
us0 @RichDialogProcessStart f665 '' #zField
us0 @RichDialogProcessStep f668 '' #zField
us0 @Alternative f667 '' #zField
us0 @PushWFArc f56 '' #zField
us0 @RichDialog f673 '' #zField
us0 @RichDialogProcessStep f675 '' #zField
us0 @PushWFArc f676 '' #zField
us0 @RichDialogProcessEnd f677 '' #zField
us0 @PushWFArc f678 '' #zField
us0 @PushWFArc f71 '' #zField
us0 @RichDialogProcessStep f91 '' #zField
us0 @PushWFArc f93 '' #zField
us0 @PushWFArc f96 '' #zField
us0 @PushWFArc f4 '' #zField
us0 @PushWFArc f35 '' #zField
us0 @PushWFArc f109 '' #zField
us0 @PushWFArc f54 '' #zField
us0 @PushWFArc f110 '' #zField
us0 @PushWFArc f111 '' #zField
us0 @PushWFArc f161 '' #zField
us0 @PushWFArc f468 '' #zField
us0 @RichDialogProcessStep f129 '' #zField
us0 @PushWFArc f131 '' #zField
us0 @RichDialogProcessStep f236 '' #zField
us0 @PushWFArc f237 '' #zField
us0 @PushWFArc f58 '' #zField
us0 @RichDialogProcessStep f238 '' #zField
us0 @PushWFArc f356 '' #zField
us0 @PushWFArc f364 '' #zField
us0 @RichDialogProcessStep f635 '' #zField
us0 @PushWFArc f636 '' #zField
us0 @PushWFArc f265 '' #zField
us0 @RichDialogProcessStep f674 '' #zField
us0 @PushWFArc f682 '' #zField
us0 @PushWFArc f376 '' #zField
us0 @RichDialogProcessStep f684 '' #zField
us0 @PushWFArc f685 '' #zField
us0 @PushWFArc f383 '' #zField
us0 @RichDialogProcessStep f686 '' #zField
us0 @PushWFArc f687 '' #zField
us0 @PushWFArc f332 '' #zField
us0 @RichDialogProcessStep f688 '' #zField
us0 @PushWFArc f689 '' #zField
us0 @PushWFArc f47 '' #zField
us0 @RichDialogProcessStep f690 '' #zField
us0 @PushWFArc f691 '' #zField
us0 @PushWFArc f226 '' #zField
us0 @RichDialogProcessStep f692 '' #zField
us0 @PushWFArc f693 '' #zField
us0 @PushWFArc f436 '' #zField
us0 @Alternative f670 '' #zField
us0 @PushWFArc f695 '' #zField
us0 @PushWFArc f57 '' #zField
us0 @RichDialogProcessStep f696 '' #zField
us0 @PushWFArc f697 '' #zField
us0 @PushWFArc f698 '' #zField
us0 @RichDialogInitStart f699 '' #zField
us0 @PushWFArc f700 '' #zField
us0 @RichDialogInitStart f701 '' #zField
us0 @PushWFArc f702 '' #zField
us0 @RichDialogProcessStep f703 '' #zField
us0 @PushWFArc f704 '' #zField
us0 @Alternative f705 '' #zField
us0 @PushWFArc f706 '' #zField
us0 @RichDialogProcessStep f707 '' #zField
us0 @RichDialogFireEvent f708 '' #zField
us0 @PushWFArc f709 '' #zField
us0 @PushWFArc f515 '' #zField
us0 @RichDialogBroadcastStart f710 '' #zField
us0 @RichDialogProcessEnd f711 '' #zField
us0 @PushWFArc f712 '' #zField
us0 @PushWFArc f713 '' #zField
us0 @RichDialogInitStart f717 '' #zField
us0 @RichDialogProcessStep f718 '' #zField
us0 @PushWFArc f719 '' #zField
us0 @PushWFArc f720 '' #zField
us0 @RichDialogInitStart f721 '' #zField
us0 @RichDialogProcessStep f722 '' #zField
us0 @PushWFArc f723 '' #zField
us0 @PushWFArc f724 '' #zField
us0 @PushWFArc f76 '' #zField
us0 @PushWFArc f725 '' #zField
us0 @InfoButton f694 '' #zField
us0 @AnnotationArc f100 '' #zField
us0 @RichDialogProcessEnd f101 '' #zField
us0 @PushWFArc f102 '' #zField
us0 @PushWFArc f669 '' #zField
us0 @PushWFArc f130 '' #zField
us0 @PushWFArc f726 '' #zField
us0 @RichDialogProcessStep f574 '' #zField
us0 @PushWFArc f727 '' #zField
us0 @PushWFArc f522 '' #zField
us0 @Alternative f520 '' #zField
us0 @PushWFArc f570 '' #zField
us0 @RichDialogProcessStep f575 '' #zField
us0 @RichDialogProcessStep f576 '' #zField
us0 @RichDialog f577 '' #zField
us0 @PushWFArc f578 '' #zField
us0 @PushWFArc f624 '' #zField
us0 @PushWFArc f625 '' #zField
us0 @PushWFArc f714 '' #zField
us0 @RichDialogProcessEnd f728 '' #zField
us0 @PushWFArc f729 '' #zField
us0 @Alternative f730 '' #zField
us0 @PushWFArc f731 '' #zField
us0 @PushWFArc f55 '' #zField
us0 @PushWFArc f732 '' #zField
us0 @RichDialogFireEvent f738 '' #zField
us0 @RichDialogProcessEnd f740 '' #zField
us0 @PushWFArc f741 '' #zField
us0 @RichDialogMethodStart f733 '' #zField
us0 @PushWFArc f734 '' #zField
us0 @RichDialogMethodStart f735 '' #zField
us0 @Alternative f739 '' #zField
us0 @PushWFArc f743 '' #zField
us0 @RichDialogProcessEnd f744 '' #zField
us0 @PushWFArc f745 '' #zField
us0 @RichDialogProcessEnd f742 '' #zField
us0 @Alternative f748 '' #zField
us0 @PushWFArc f751 '' #zField
us0 @RichDialogBroadcastStart f51 '' #zField
us0 @Alternative f671 '' #zField
us0 @PushWFArc f672 '' #zField
us0 @PushWFArc f752 '' #zField
us0 @RichDialogProcessEnd f753 '' #zField
us0 @PushWFArc f754 '' #zField
us0 @PushWFArc f755 '' #zField
us0 @RichDialogProcessStep f371 '' #zField
us0 @PushWFArc f372 '' #zField
us0 @PushWFArc f481 '' #zField
us0 @RichDialogMethodStart f103 '' #zField
us0 @PushWFArc f104 '' #zField
us0 @Alternative f369 '' #zField
us0 @RichDialogProcessEnd f483 '' #zField
us0 @PushWFArc f489 '' #zField
us0 @Alternative f521 '' #zField
us0 @PushWFArc f526 '' #zField
us0 @RichDialogProcessEnd f527 '' #zField
us0 @PushWFArc f528 '' #zField
us0 @PushWFArc f268 '' #zField
us0 @Alternative f530 '' #zField
us0 @PushWFArc f531 '' #zField
us0 @RichDialogProcessEnd f533 '' #zField
us0 @PushWFArc f534 '' #zField
us0 @PushWFArc f36 '' #zField
us0 @RichDialog f464 '' #zField
us0 @PushWFArc f484 '' #zField
us0 @PushWFArc f493 '' #zField
us0 @RichDialogBroadcastStart f539 '' #zField
us0 @PushWFArc f541 '' #zField
us0 @RichDialogBroadcastStart f269 '' #zField
us0 @PushWFArc f408 '' #zField
us0 @RichDialogBroadcastStart f537 '' #zField
us0 @PushWFArc f538 '' #zField
us0 @RichDialogFireEvent f542 '' #zField
us0 @PushWFArc f543 '' #zField
us0 @PushWFArc f544 '' #zField
us0 @RichDialog f545 '' #zField
us0 @PushWFArc f546 '' #zField
us0 @PushWFArc f448 '' #zField
us0 @RichDialogBroadcastStart f535 '' #zField
us0 @RichDialogProcessEnd f536 '' #zField
us0 @RichDialogBroadcastStart f548 '' #zField
us0 @RichDialogProcessEnd f549 '' #zField
us0 @PushWFArc f553 '' #zField
us0 @PushWFArc f550 '' #zField
us0 @RichDialogBroadcastStart f547 '' #zField
us0 @Alternative f551 '' #zField
us0 @PushWFArc f552 '' #zField
us0 @RichDialogProcessStep f555 '' #zField
us0 @PushWFArc f556 '' #zField
us0 @RichDialogProcessEnd f557 '' #zField
us0 @PushWFArc f558 '' #zField
us0 @PushWFArc f559 '' #zField
us0 @RichDialogMethodStart f560 '' #zField
us0 @RichDialogProcessStep f563 '' #zField
us0 @PushWFArc f564 '' #zField
us0 @PushWFArc f562 '' #zField
us0 @RichDialogMethodStart f565 '' #zField
us0 @RichDialogFireEvent f566 '' #zField
us0 @PushWFArc f567 '' #zField
us0 @RichDialogProcessEnd f568 '' #zField
us0 @PushWFArc f569 '' #zField
us0 @RichDialogBroadcastStart f571 '' #zField
us0 @Alternative f572 '' #zField
us0 @PushWFArc f573 '' #zField
us0 @RichDialogProcessStep f626 '' #zField
us0 @PushWFArc f627 '' #zField
us0 @PushWFArc f633 '' #zField
us0 @PushWFArc f644 '' #zField
us0 @RichDialogProcessStart f646 '' #zField
us0 @Alternative f679 '' #zField
us0 @PushWFArc f680 '' #zField
us0 @RichDialogProcessEnd f681 '' #zField
us0 @PushWFArc f683 '' #zField
us0 @RichDialogProcessStep f715 '' #zField
us0 @RichDialogProcessStep f736 '' #zField
us0 @PushWFArc f737 '' #zField
us0 @RichDialog f746 '' #zField
us0 @PushWFArc f747 '' #zField
us0 @RichDialogProcessEnd f749 '' #zField
us0 @PushWFArc f750 '' #zField
us0 @RichDialogProcessEnd f756 '' #zField
us0 @PushWFArc f757 '' #zField
us0 @RichDialogBroadcastStart f758 '' #zField
us0 @RichDialogProcessEnd f759 '' #zField
us0 @PushWFArc f760 '' #zField
us0 @RichDialog f761 '' #zField
us0 @Alternative f763 '' #zField
us0 @PushWFArc f764 '' #zField
us0 @PushWFArc f716 '' #zField
us0 @RichDialogProcessEnd f765 '' #zField
us0 @PushWFArc f766 '' #zField
us0 @RichDialogMethodStart f767 '' #zField
us0 @RichDialogFireEvent f768 '' #zField
us0 @PushWFArc f769 '' #zField
us0 @Alternative f771 '' #zField
us0 @PushWFArc f773 '' #zField
us0 @RichDialogProcessEnd f774 '' #zField
us0 @PushWFArc f775 '' #zField
us0 @RichDialogProcessEnd f776 '' #zField
us0 @PushWFArc f777 '' #zField
us0 @RichDialogBroadcastStart f770 '' #zField
us0 @PushWFArc f772 '' #zField
us0 @RichDialogProcessStep f778 '' #zField
us0 @PushWFArc f779 '' #zField
us0 @PushWFArc f762 '' #zField
us0 @RichDialogProcessStep f780 '' #zField
us0 @RichDialogBroadcastStart f781 '' #zField
us0 @RichDialogProcessEnd f782 '' #zField
us0 @PushWFArc f783 '' #zField
us0 @RichDialogMethodStart f784 '' #zField
us0 @RichDialogProcessEnd f785 '' #zField
us0 @PushWFArc f786 '' #zField
us0 @RichDialogMethodStart f787 '' #zField
us0 @RichDialogProcessEnd f788 '' #zField
us0 @PushWFArc f789 '' #zField
>Proto us0 us0 updownloadPaneProcess #zField
us0 f0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start()</name>
        <nameStyle>7,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f0 guid 11D3EC39343F50E1 #txt
us0 f0 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f0 method start() #txt
us0 f0 disableUIEvents false #txt
us0 f0 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f0 inParameterMapAction 'out.advancedActionsEnabled=true;
out.clientTempDirPath="";
out.filesNumber="0";
out.isRecursive=false;
out.isToolbarVisible=true;
out.isTreeVisible=true;
' #txt
us0 f0 outParameterDecl '<> result;
' #txt
us0 f0 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
us0 f0 174 118 20 20 13 0 #rect
us0 f0 @|RichDialogInitStartIcon #fIcon
us0 f1 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f1 259 931 26 26 14 0 #rect
us0 f1 @|RichDialogProcessEndIcon #fIcon
us0 f3 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f3 actionTable 'out=in;
' #txt
us0 f3 actionCode 'import ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler;
import ch.ivyteam.ivy.addons.filemanager.FileDownloadHandler;
import ch.ivyteam.ivy.addons.filemanager.FileUploadHandler;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;

if(in.serverPath.trim().length()>0){
	in.serverPath = FileHandler.formatPathWithEndSeparator(in.serverPath);
}
//Make date and time
Date d = new Date();
in.today = d.format("dd.MM.yyyy");
Time t = new Time();
in.time = t.format();
//panel.SplitPane.getLeftComponent().setVisible(in.isTreeVisible);

//Build the 2 file handler objects
in.uploadHandler = new FileUploadHandler(panel,"_onError","_onUploadSuccess","_askIfOverwriteExistingFiles","_onProgressWithText",in.serverPath);
in.downloadHandler = new FileDownloadHandler(panel,"_onError", "_onSuccess","_onProgress",in.serverPath);

in.selectedFolderOnServer.path=in.serverPath;
//Build the fileManagement object
if(in.#ivyConnexionDBName==null || in.ivyConnexionDBName.trim().equalsIgnoreCase("")){
	in.ivyConnexionDBName="FileManager";
}
if(in.#DbTableName==null || in.DbTableName.trim().equalsIgnoreCase("")){
	in.DbTableName="UPLOADEDFILES";
}
try{
	if(in.#fileManagementHandler==null){
		if(in.schemaName.trim().equalsIgnoreCase(""))
		{//no schemata setted
			in.fileManagementHandler=AbstractFileManagementHandler.getInstance([in.ivyConnexionDBName, in.DbTableName]);
		}else
		{//start within a schemata
			in.fileManagementHandler=AbstractFileManagementHandler.getInstance([in.ivyConnexionDBName, in.DbTableName, in.schemaName]);
		}
	}
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}

import ch.ivyteam.ivy.event.SystemEventCategory;

// register
ivy.rd.subscribeToSystemEvents(SystemEventCategory.THIRD_PARTY);

out.panelId = System.nanoTime();' #txt
us0 f3 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f3 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>make FileUploadHandler
make FileDownloadHandler
make fileManagementHandler
make the date
subscribes to System Event</name>
        <nameStyle>115,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f3 166 509 36 23 -183 -32 #rect
us0 f3 @|RichDialogProcessStepIcon #fIcon
us0 f5 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Upload a file</name>
        <nameStyle>13,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f5 guid 11D3ECBE28E494B6 #txt
us0 f5 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f5 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f5 actionTable 'out=in;
' #txt
us0 f5 actionCode 'out.returnedMessage.text="";
panel.ProgressBar.setIndeterminate(true);
out.progressText="";' #txt
us0 f5 1198 638 20 20 -25 -31 #rect
us0 f5 @|RichDialogProcessStartIcon #fIcon
us0 f6 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f6 1195 723 26 26 14 0 #rect
us0 f6 @|RichDialogProcessEndIcon #fIcon
us0 f9 guid 11D41FC191668E79 #txt
us0 f9 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f9 method _onError(ch.ivyteam.ivy.addons.filemanager.ReturnedMessage) #txt
us0 f9 disableUIEvents false #txt
us0 f9 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> param = methodEvent.getInputArguments();
' #txt
us0 f9 inParameterMapAction 'out.returnedMessage=param.returnedMessage;
' #txt
us0 f9 outParameterDecl '<> result;
' #txt
us0 f9 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_onError(ReturnedMessage)</name>
        <nameStyle>25,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f9 3774 134 20 20 -53 -32 #rect
us0 f9 @|RichDialogMethodStartIcon #fIcon
us0 f10 guid 11D41FC2555BE3A2 #txt
us0 f10 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f10 method _onSuccess(ch.ivyteam.ivy.addons.filemanager.ReturnedMessage) #txt
us0 f10 disableUIEvents false #txt
us0 f10 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> param = methodEvent.getInputArguments();
' #txt
us0 f10 inParameterMapAction 'out.returnedMessage=param.returnedMessage;
' #txt
us0 f10 outParameterDecl '<> result;
' #txt
us0 f10 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_onSuccess(ReturnedMessage)</name>
        <nameStyle>27,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f10 3942 142 20 20 -60 -32 #rect
us0 f10 @|RichDialogMethodStartIcon #fIcon
us0 f11 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f11 3771 579 26 26 14 0 #rect
us0 f11 @|RichDialogProcessEndIcon #fIcon
us0 f15 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f15 actionTable 'out=in;
' #txt
us0 f15 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

in.time=new Time().format("HH:mm:ss");
in.today =  new Date().format("d.M.yyyy");

DocumentOnServer doc = new DocumentOnServer();
List<DocumentOnServer> docs = new List<DocumentOnServer>();
doc.creationDate= in.today;
doc.creationTime=in.time;
doc.userID=in.applicationUserName;
doc.filename=in.returnedMessage.file.getName().trim();
doc.path=in.returnedMessage.file.getPath().trim();
doc.fileSize=FileHandler.getFileSize(in.returnedMessage.file);
doc.modificationDate= in.today;
doc.modificationTime=in.time;
doc.modificationUserID=in.applicationUserName;
doc.locked="0";
in.selectedDocument.filename="";

docs.add(doc);
int id=0;
try{
	id=in.fileManagementHandler.insertDocuments(docs);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}
if(id>0){
	in.documentsInDb.add(doc);
	in.filesNumber=(in.filesNumber.toNumber()+1).toString();
}else{
	panel.refresh();
}


in.progressUnit=-1;' #txt
us0 f15 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f15 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>retrieves Infos from uploadedFile
and insert it into the Filemanagement
File indexing system</name>
        <nameStyle>92,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f15 3766 468 36 24 27 -25 #rect
us0 f15 @|RichDialogProcessStepIcon #fIcon
us0 f17 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>download selected Files</name>
        <nameStyle>23,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f17 guid 11D42758DEB45FD8 #txt
us0 f17 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f17 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f17 actionTable 'out=in;
' #txt
us0 f17 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

if(in.#downloadHandler!=null&& in.selectedDocument.filename!=""){
	panel.ProgressBar.setValue(0);
	List<java.io.File> files = new List<java.io.File>();
	for(DocumentOnServer doc: panel.filesTable.selectedListEntries){
		files.add(new java.io.File(doc.path));
		//Check if the file to download is an HTML if so, download the attached images
		if(FileHandler.getFileExtension(doc.filename).equalsIgnoreCase("html")){
			files.addAll(FileHandler.getFilesWithPattern("\\.[0-9].*$$",FileHandler.getFileNameWithoutExt(doc.filename),"xhrm\\recruitment\\vacancy\\letters"));
		}
		
	}
	if(files.size()<2){
		in.downloadHandler.download(in.selectedDocument.filename, in.selectedDocument.path);
	}else{
		in.downloadHandler.downloadFiles(files);
	}
	
}' #txt
us0 f17 1302 638 20 20 -28 -31 #rect
us0 f17 @|RichDialogProcessStartIcon #fIcon
us0 f18 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>File choosed in the table</name>
        <nameStyle>25,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f18 guid 11D42EE9868EE3A0 #txt
us0 f18 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f18 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f18 actionTable 'out=in;
' #txt
us0 f18 actionCode in.progressUnit=-1; #txt
us0 f18 1222 846 20 20 -48 -24 #rect
us0 f18 @|RichDialogProcessStartIcon #fIcon
us0 f19 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f19 actionTable 'out=in;
' #txt
us0 f19 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;


if(panel.#filesTable.getSelectedListEntry()!=null && panel.filesTable.getSelectedListEntry() instanceof DocumentOnServer){
 	DocumentOnServer doc = new DocumentOnServer();
  doc = panel.filesTable.selectedListEntry as DocumentOnServer;
	
	in.selectedDocument.filename=doc.filename.trim().trim();
	in.selectedDocument.path=doc.path.trim();
	in.selectedDocument.userID=doc.userID.trim();
	in.selectedDocument.fileID=doc.fileID.trim();
	in.selectedDocument.creationDate=doc.creationDate;
	in.selectedDocument.creationTime=doc.creationTime;
	in.selectedDocument.locked=doc.locked;
	in.selectedDocument.lockingUserID=doc.lockingUserID;
	in.selectedDocument.modificationDate=doc.modificationDate;
	in.selectedDocument.modificationTime=doc.modificationTime;
	in.selectedDocument.modificationUserID=doc.modificationUserID;
	in.selectedDocument.fileSize=doc.fileSize;
	panel.FileNameInvisibleTextField.setText(in.selectedDocument.filename);


}else{
	panel.FileNameInvisibleTextField.setText("");

	}
' #txt
us0 f19 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f19 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Build 
selectedDocument</name>
        <nameStyle>23,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f19 1214 884 36 24 22 -14 #rect
us0 f19 @|RichDialogProcessStepIcon #fIcon
us0 f20 expr out #txt
us0 f20 1232 866 1232 884 #arcP
us0 f21 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f21 1219 931 26 26 14 0 #rect
us0 f21 @|RichDialogProcessEndIcon #fIcon
us0 f22 expr out #txt
us0 f22 1232 908 1232 931 #arcP
us0 f25 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f25 1299 691 26 26 14 0 #rect
us0 f25 @|RichDialogProcessEndIcon #fIcon
us0 f34 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithServerPath(String)</name>
        <nameStyle>27,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f34 guid 11D4343AE72A9CC1 #txt
us0 f34 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f34 method startWithServerPath(String) #txt
us0 f34 disableUIEvents false #txt
us0 f34 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath> param = methodEvent.getInputArguments();
' #txt
us0 f34 inParameterMapAction 'out.advancedActionsEnabled=true;
out.clientTempDirPath="";
out.cursor=0;
out.isRecursive=false;
out.isToolbarVisible=true;
out.isTreeVisible=true;
out.serverPath=param.serverPath;
' #txt
us0 f34 outParameterDecl '<> result;
' #txt
us0 f34 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
us0 f34 238 142 20 20 15 -8 #rect
us0 f34 @|RichDialogInitStartIcon #fIcon
us0 f27 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delete selected Files</name>
        <nameStyle>21,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f27 guid 11D438D57924C5D9 #txt
us0 f27 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f27 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f27 actionTable 'out=in;
' #txt
us0 f27 actionCode 'in.progressUnit=-1;
out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/confirmdeleteDir");' #txt
us0 f27 974 134 20 20 -42 -31 #rect
us0 f27 @|RichDialogProcessStartIcon #fIcon
us0 f28 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f28 actionTable 'out=in;
' #txt
us0 f28 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;

//get the selected docs
in.selectedDocuments = new List<DocumentOnServer>();
in.selectedDocuments.addAll(panel.filesTable.selectedListEntries);

// get and remove the locked docs from the list to delete
try{
	if(in.#selectedFolderOnServer.#path!=null){
	List<DocumentOnServer> lockedDocs = new List<DocumentOnServer>();
	lockedDocs.addAll(in.fileManagementHandler.getDocumentsLocked(in.selectedFolderOnServer.path,in.isRecursive));
	in.selectedDocuments.removeAll(lockedDocs);
	}
	// delete the unlocked files
	List<java.io.File> files = new List<java.io.File>();
	for(DocumentOnServer doc: in.selectedDocuments){
		files.add(new java.io.File(doc.path));
	}
	if(files.size()>0){
		in.returnedMessage=FileHandler.deleteFiles(files);
	}
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}
' #txt
us0 f28 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f28 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Select the unlocked Files
and delete them</name>
        <nameStyle>41,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f28 966 340 36 24 20 -17 #rect
us0 f28 @|RichDialogProcessStepIcon #fIcon
us0 f30 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f30 851 275 26 26 14 0 #rect
us0 f30 @|RichDialogProcessEndIcon #fIcon
us0 f42 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Check for consistancy between DB 
and Server FileSystem</name>
        <nameStyle>55,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f42 243 667 203 42 -96 -16 #rect
us0 f42 @|IBIcon #fIcon
us0 f42 -657956|-1|-16777216 #nodeStyle
us0 f43 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f43 actionTable 'out=in;
' #txt
us0 f43 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
try{
	//all the documents under in.serverPath on the server file system
	List<DocumentOnServer> docsOnServer = new List<DocumentOnServer>();
	List<DocumentOnServer> docsInSelectedDir = new List<DocumentOnServer>();
	
	docsOnServer.addAll(FileHandler.getDocumentsInPathAll(in.selectedFolderOnServer.path));
	docsInSelectedDir.addAll(FileHandler.getDocumentsInDir(new java.io.File(in.selectedFolderOnServer.path)));
	
	in.filesToAdd = new List<DocumentOnServer>();
	in.filestoDelete = new List<DocumentOnServer>();
	
	in.filesToAdd=FileHandler.getDocumentsListDiff(in.documentsInDb,docsInSelectedDir);
	
	in.filestoDelete=FileHandler.getDocumentsListDiff(docsOnServer,in.documentsInDb);
	in.filestoDelete.addAll(FileHandler.getDuplicateDocuments(in.documentsInDb));
	
	if(in.filesToAdd.size()>0){
		int j= in.filesToAdd.size();
		for(int i=0; i<j; i++){
			//ivy.log.info("File to add : "+i+" "+in.filesToAdd.get(i).filename);
			in.filesToAdd.get(i).userID="IVYSYSTEM";
			in.filesToAdd.get(i).creationDate=in.today;
			in.filesToAdd.get(i).creationTime=in.time;
			in.filesToAdd.get(i).modificationUserID="IVYSYSTEM";
			in.filesToAdd.get(i).modificationDate=in.today;
			in.filesToAdd.get(i).modificationTime=in.time;
			in.filesToAdd.get(i).description="";
		}
		in.fileManagementHandler.insertDocuments(in.filesToAdd);
	}
	
	if(in.filestoDelete.size()>0){
		in.fileManagementHandler.deleteDocuments(in.filestoDelete);
	}
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}
' #txt
us0 f43 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f43 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f43 166 804 36 24 20 -2 #rect
us0 f43 @|RichDialogProcessStepIcon #fIcon
us0 f74 guid 11D47C7A35A8E128 #txt
us0 f74 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f74 method _onChangeFile(java.io.File,String) #txt
us0 f74 disableUIEvents false #txt
us0 f74 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.io.File existingFileOnServer,java.lang.String fileName> param = methodEvent.getInputArguments();
' #txt
us0 f74 inParameterMapAction 'out.fileUpload=param.existingFileOnServer;
out.selectedServerFileName=param.fileName;
' #txt
us0 f74 outParameterDecl '<> result;
' #txt
us0 f74 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_onChangeFile(File existingFileOnServer, String FileName)</name>
        <nameStyle>57,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f74 4606 798 20 20 -181 -29 #rect
us0 f74 @|RichDialogMethodStartIcon #fIcon
us0 f75 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Ask if replace the
existing file on the server</name>
        <nameStyle>46,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f75 targetWindow NEW:card: #txt
us0 f75 targetDisplay TOP #txt
us0 f75 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
us0 f75 startMethod askQuestion(String,String,List<String>,String) #txt
us0 f75 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f75 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
us0 f75 requestMappingAction 'param.icon="warning";
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/no")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes");
' #txt
us0 f75 requestActionCode param.question=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/fileToUploadAlreadyExists")+"\n"+in.fileUpload.getName(); #txt
us0 f75 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f75 responseMappingAction 'out=in;
out.pressedButton=result.pressedButton;
' #txt
us0 f75 windowConfiguration '{/title "Warning"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f75 isAsynch false #txt
us0 f75 isInnerRd true #txt
us0 f75 isDialog true #txt
us0 f75 4598 964 36 24 24 -16 #rect
us0 f75 @|RichDialogIcon #fIcon
us0 f75 -985168|-1|-16777216 #nodeStyle
us0 f77 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f77 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Confirmed ?</name>
        <nameStyle>11,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f77 4602 1002 28 28 14 0 #rect
us0 f77 @|AlternativeIcon #fIcon
us0 f78 expr out #txt
us0 f78 4616 988 4616 1002 #arcP
us0 f81 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f81 4603 1195 26 26 14 0 #rect
us0 f81 @|RichDialogProcessEndIcon #fIcon
us0 f85 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Ask</name>
        <nameStyle>3,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f85 targetWindow NEW:card: #txt
us0 f85 targetDisplay TOP #txt
us0 f85 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
us0 f85 startMethod askQuestion(String,String,List<String>,String) #txt
us0 f85 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f85 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
us0 f85 requestMappingAction 'param.icon="warning";
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/deleteFiles"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/cancel")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/deleteFiles");
' #txt
us0 f85 requestActionCode param.question=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/question/confirmDeleteFiles"); #txt
us0 f85 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f85 responseMappingAction 'out=in;
out.stringVariable=result.pressedButton;
' #txt
us0 f85 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f85 isAsynch false #txt
us0 f85 isInnerRd true #txt
us0 f85 isDialog true #txt
us0 f85 966 196 36 24 22 -7 #rect
us0 f85 @|RichDialogIcon #fIcon
us0 f85 -985168|-1|-16777216 #nodeStyle
us0 f86 expr out #txt
us0 f86 984 154 984 196 #arcP
us0 f87 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f87 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Confirmed ?</name>
        <nameStyle>11,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f87 970 274 28 28 10 -23 #rect
us0 f87 @|AlternativeIcon #fIcon
us0 f88 expr out #txt
us0 f88 984 220 984 274 #arcP
us0 f29 expr in #txt
us0 f29 outCond in.stringVariable.equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/deleteFiles")) #txt
us0 f29 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f29 984 302 984 340 #arcP
us0 f83 expr in #txt
us0 f83 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f83 970 288 877 288 #arcP
us0 f83 0 0.4317352358807368 0 0 #arcLabel
us0 f95 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f95 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>File delete successfull ?</name>
        <nameStyle>25,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f95 970 538 28 28 16 0 #rect
us0 f95 @|AlternativeIcon #fIcon
us0 f105 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f105 actionTable 'out=in;
' #txt
us0 f105 actionCode 'try{
	in.fileManagementHandler.deleteFiles(new List<java.io.File>().add(in.fileUpload));
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}
' #txt
us0 f105 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f105 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Delete the file that
 will be overwritten</name>
        <nameStyle>41,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f105 4598 1076 36 24 28 -17 #rect
us0 f105 @|RichDialogProcessStepIcon #fIcon
us0 f106 expr in #txt
us0 f106 outCond in.pressedButton.equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes")) #txt
us0 f106 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f106 4616 1030 4616 1076 #arcP
us0 f106 0 0.22580645161290322 0 0 #arcLabel
us0 f116 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Tree selection</name>
        <nameStyle>14,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f116 guid 11D4DCC4107AFD90 #txt
us0 f116 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f116 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f116 actionTable 'out=in;
' #txt
us0 f116 750 726 20 20 -71 -11 #rect
us0 f116 @|RichDialogProcessStartIcon #fIcon
us0 f13 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f13 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>returnedMessage not null, And
returnedMessage.file not null, AND
returned.message.type SUCCESS (1)</name>
        <nameStyle>98,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f13 3770 394 28 28 15 -21 #rect
us0 f13 @|AlternativeIcon #fIcon
us0 f16 expr in #txt
us0 f16 outCond 'in.#returnedMessage!=null && in.#returnedMessage.#file!=null && in.returnedMessage.type==1' #txt
us0 f16 3784 422 3784 468 #arcP
us0 f121 expr in #txt
us0 f121 3770 408 3771 592 #arcP
us0 f121 1 3704 408 #addKink
us0 f121 2 3704 592 #addKink
us0 f121 1 0.8575546111881776 0 0 #arcLabel
us0 f122 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh</name>
        <nameStyle>7,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f122 guid 11D53743C81FC390 #txt
us0 f122 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f122 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f122 actionTable 'out=in;
' #txt
us0 f122 actionCode in.selectedFolderOnServer.path=in.serverPath; #txt
us0 f122 838 598 20 20 -15 -33 #rect
us0 f122 @|RichDialogProcessStartIcon #fIcon
us0 f44 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f44 3771 227 26 26 14 0 #rect
us0 f44 @|RichDialogProcessEndIcon #fIcon
us0 f114 guid 11D62B490588F9CC #txt
us0 f114 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f114 method setServerPath(String) #txt
us0 f114 disableUIEvents false #txt
us0 f114 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath> param = methodEvent.getInputArguments();
' #txt
us0 f114 inParameterMapAction 'out.serverPath=param.serverPath;
' #txt
us0 f114 outParameterDecl '<> result;
' #txt
us0 f114 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setServerPath(String)</name>
        <nameStyle>21,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f114 710 510 20 20 13 0 #rect
us0 f114 @|RichDialogMethodStartIcon #fIcon
us0 f126 guid 11D62B6254A6CA0C #txt
us0 f126 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f126 method getSelectedDocument() #txt
us0 f126 disableUIEvents false #txt
us0 f126 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f126 outParameterDecl '<ch.xpertline.common.ria.component.DocumentOnServer selectedDocument> result;
' #txt
us0 f126 outParameterMapAction 'result.selectedDocument=in.selectedDocument;
' #txt
us0 f126 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getSelectedDocument()</name>
        <nameStyle>21,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f126 2454 94 20 20 -47 -31 #rect
us0 f126 @|RichDialogMethodStartIcon #fIcon
us0 f127 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f127 2451 155 26 26 14 0 #rect
us0 f127 @|RichDialogProcessEndIcon #fIcon
us0 f128 expr out #txt
us0 f128 2464 114 2464 155 #arcP
us0 f53 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithServerPathAndShowTree(String,ApplicationContext,Boolean)</name>
        <nameStyle>65,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f53 guid 11D66E760E6E980E #txt
us0 f53 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f53 method startWithServerPathAndShowTree(String,Boolean) #txt
us0 f53 disableUIEvents false #txt
us0 f53 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath,java.lang.Boolean isTreeVisible> param = methodEvent.getInputArguments();
' #txt
us0 f53 inParameterMapAction 'out.clientTempDirPath="";
out.isRecursive=false;
out.isToolbarVisible=true;
out.isTreeVisible=param.isTreeVisible;
out.serverPath=param.serverPath;
' #txt
us0 f53 outParameterDecl '<> result;
' #txt
us0 f53 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
us0 f53 238 206 20 20 12 -10 #rect
us0 f53 @|RichDialogInitStartIcon #fIcon
us0 f92 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>show/hide Tree</name>
        <nameStyle>14,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f92 guid 11D678B90A9EFC22 #txt
us0 f92 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f92 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f92 actionTable 'out=in;
' #txt
us0 f92 actionCode 'if(in.isTreeVisible){
	in.isTreeVisible=false;
}
else{
	in.isTreeVisible=true;
}
' #txt
us0 f92 2118 438 20 20 -24 -43 #rect
us0 f92 @|RichDialogProcessStartIcon #fIcon
us0 f112 guid 11D6793D8E57A42A #txt
us0 f112 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f112 method showTree(Boolean) #txt
us0 f112 disableUIEvents false #txt
us0 f112 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Boolean isTreeVisible> param = methodEvent.getInputArguments();
' #txt
us0 f112 inParameterMapAction 'out.isTreeVisible=param.isTreeVisible;
' #txt
us0 f112 outParameterDecl '<> result;
' #txt
us0 f112 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>showTree(Boolean)</name>
        <nameStyle>17,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f112 2254 390 20 20 13 0 #rect
us0 f112 @|RichDialogMethodStartIcon #fIcon
us0 f124 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f124 actionTable 'out=in;
' #txt
us0 f124 actionCode 'if(in.isTreeVisible){
	panel.SplitPane.setDividerLocation(0.2);
}else{
	panel.SplitPane.setDividerLocation(0);
}' #txt
us0 f124 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f124 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>If visible: SplitPane
 enabled and dividor to 0.2</name>
        <nameStyle>49,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f124 2246 436 36 24 22 -6 #rect
us0 f124 @|RichDialogProcessStepIcon #fIcon
us0 f132 expr out #txt
us0 f132 2264 410 2264 436 #arcP
us0 f134 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f134 2251 491 26 26 14 0 #rect
us0 f134 @|RichDialogProcessEndIcon #fIcon
us0 f135 expr out #txt
us0 f135 2264 460 2264 491 #arcP
us0 f136 guid 11D67B142FB2A5DD #txt
us0 f136 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f136 method makeDirectory(String) #txt
us0 f136 disableUIEvents false #txt
us0 f136 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String dirName> param = methodEvent.getInputArguments();
' #txt
us0 f136 inParameterMapAction 'out.stringVariable=param.dirName;
' #txt
us0 f136 outParameterDecl '<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> result;
' #txt
us0 f136 outParameterMapAction 'result.returnedMessage=in.returnedMessage;
' #txt
us0 f136 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>makeDirectory(String)</name>
        <nameStyle>21,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f136 3126 462 20 20 -44 -32 #rect
us0 f136 @|RichDialogMethodStartIcon #fIcon
us0 f137 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f137 actionTable 'out=in;
' #txt
us0 f137 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
in.returnedMessage = FileHandler.makeDirectory(
		FileHandler.formatPathWithEndSeparator(in.serverPath)+in.stringVariable);' #txt
us0 f137 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f137 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f137 3118 508 36 24 20 -2 #rect
us0 f137 @|RichDialogProcessStepIcon #fIcon
us0 f138 expr out #txt
us0 f138 3136 482 3136 508 #arcP
us0 f139 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f139 2963 579 26 26 14 0 #rect
us0 f139 @|RichDialogProcessEndIcon #fIcon
us0 f140 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f140 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>makedir successfull?</name>
        <nameStyle>20,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f140 3186 578 28 28 16 -8 #rect
us0 f140 @|AlternativeIcon #fIcon
us0 f141 expr out #txt
us0 f141 3147 532 3193 585 #arcP
us0 f144 expr out #txt
us0 f144 2138 448 2246 448 #arcP
us0 f145 guid 11D6BB6133451C6F #txt
us0 f145 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f145 method getLastFileUploaded() #txt
us0 f145 disableUIEvents false #txt
us0 f145 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f145 outParameterDecl '<java.io.File file> result;
' #txt
us0 f145 outParameterMapAction 'result.file=in.fileUpload;
' #txt
us0 f145 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getLastFileUploaded()</name>
        <nameStyle>21,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f145 2582 94 20 20 -40 -32 #rect
us0 f145 @|RichDialogMethodStartIcon #fIcon
us0 f146 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f146 2579 147 26 26 14 0 #rect
us0 f146 @|RichDialogProcessEndIcon #fIcon
us0 f147 expr out #txt
us0 f147 2592 114 2592 147 #arcP
us0 f94 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f94 3939 235 26 26 14 0 #rect
us0 f94 @|RichDialogProcessEndIcon #fIcon
us0 f23 expr out #txt
us0 f23 1312 658 1312 691 #arcP
us0 f26 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Fire fileUploaded event</name>
        <nameStyle>23,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f26 actionCode panel.fireFileUploaded(); #txt
us0 f26 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f26 fireEvent fileUploaded() #txt
us0 f26 3766 532 36 24 20 -2 #rect
us0 f26 @|RichDialogFireEventIcon #fIcon
us0 f12 expr out #txt
us0 f12 3784 556 3784 579 #arcP
us0 f33 guid 11D8F8E713A833A8 #txt
us0 f33 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f33 method _onProgress(Number) #txt
us0 f33 disableUIEvents false #txt
us0 f33 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Number progress> param = methodEvent.getInputArguments();
' #txt
us0 f33 inParameterMapAction 'out.progressUnit=param.progress;
' #txt
us0 f33 outParameterDecl '<> result;
' #txt
us0 f33 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_onProgress()</name>
        <nameStyle>13,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f33 4462 142 20 20 13 0 #rect
us0 f33 @|RichDialogMethodStartIcon #fIcon
us0 f115 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f115 4459 195 26 26 14 0 #rect
us0 f115 @|RichDialogProcessEndIcon #fIcon
us0 f150 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>download to temp</name>
        <nameStyle>16,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f150 guid 11D96118A6725A12 #txt
us0 f150 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f150 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f150 actionTable 'out=in;
' #txt
us0 f150 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;

java.io.File f = new java.io.File (in.selectedDocument.path, in.clientTempDirPath);
FileHandler.download(f);' #txt
us0 f150 1422 638 20 20 -35 -33 #rect
us0 f150 @|RichDialogProcessStartIcon #fIcon
us0 f151 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f151 1419 691 26 26 14 0 #rect
us0 f151 @|RichDialogProcessEndIcon #fIcon
us0 f152 expr out #txt
us0 f152 1432 658 1432 691 #arcP
us0 f153 guid 11DA9E1658C4C90F #txt
us0 f153 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f153 method downloadToTemp() #txt
us0 f153 disableUIEvents false #txt
us0 f153 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f153 outParameterDecl '<java.lang.Boolean isSuccess> result;
' #txt
us0 f153 outParameterMapAction 'result.isSuccess=in.responseBoolean;
' #txt
us0 f153 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>downloadToTemp()</name>
        <nameStyle>16,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f153 2254 550 20 20 13 0 #rect
us0 f153 @|RichDialogMethodStartIcon #fIcon
us0 f154 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f154 actionTable 'out=in;
' #txt
us0 f154 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;

java.io.File f = new java.io.File (in.selectedDocument.path);
in.responseBoolean=FileHandler.download(f,in.clientTempDirPath);' #txt
us0 f154 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f154 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f154 2246 596 36 24 20 -2 #rect
us0 f154 @|RichDialogProcessStepIcon #fIcon
us0 f155 expr out #txt
us0 f155 2264 570 2264 596 #arcP
us0 f156 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f156 2251 691 26 26 14 0 #rect
us0 f156 @|RichDialogProcessEndIcon #fIcon
us0 f157 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f157 actionTable 'out=in;
' #txt
us0 f157 actionCode 'if(in.responseBoolean){
	panel.statusLabel.setText(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/downloadToTempFolderSuccess"));
}else{
	panel.statusLabel.setText(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/downloadError"));
}' #txt
us0 f157 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f157 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set status message</name>
        <nameStyle>18,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f157 2246 644 36 24 20 -2 #rect
us0 f157 @|RichDialogProcessStepIcon #fIcon
us0 f158 expr out #txt
us0 f158 2264 620 2264 644 #arcP
us0 f159 expr out #txt
us0 f159 2264 668 2264 691 #arcP
us0 f160 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithServerPathAndWithClientTempDirAndShowTree(String,String,ApplicationContext,Boolean)</name>
        <nameStyle>92,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f160 guid 11DA9E8966AF6777 #txt
us0 f160 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f160 method startWithServerPathAndWithClientTempDirAndShowTree(String,String,Boolean) #txt
us0 f160 disableUIEvents false #txt
us0 f160 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath,java.lang.String clientTempDir,java.lang.Boolean showTree> param = methodEvent.getInputArguments();
' #txt
us0 f160 inParameterMapAction 'out.clientTempDirPath=param.clientTempDir;
out.isRecursive=false;
out.isToolbarVisible=true;
out.isTreeVisible=param.showTree;
out.serverPath=param.serverPath;
' #txt
us0 f160 outParameterDecl '<> result;
' #txt
us0 f160 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
us0 f160 238 238 20 20 13 -9 #rect
us0 f160 @|RichDialogInitStartIcon #fIcon
us0 f162 guid 11DA9EB0D478D637 #txt
us0 f162 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f162 method setClientTempDir(String) #txt
us0 f162 disableUIEvents false #txt
us0 f162 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String clientTempDir> param = methodEvent.getInputArguments();
' #txt
us0 f162 inParameterMapAction 'out.clientTempDirPath=param.clientTempDir;
' #txt
us0 f162 outParameterDecl '<> result;
' #txt
us0 f162 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setClientTempDir(String)</name>
        <nameStyle>24,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f162 2582 238 20 20 -48 -30 #rect
us0 f162 @|RichDialogMethodStartIcon #fIcon
us0 f163 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f163 2579 299 26 26 14 0 #rect
us0 f163 @|RichDialogProcessEndIcon #fIcon
us0 f164 expr out #txt
us0 f164 2592 258 2592 299 #arcP
us0 f165 guid 11DE2EF0C5EF4018 #txt
us0 f165 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f165 method refresh() #txt
us0 f165 disableUIEvents false #txt
us0 f165 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh()</name>
    </language>
</elementInfo>
' #txt
us0 f165 839 638 18 20 -24 8 #rect
us0 f165 @|RichDialogMethodStartIcon #fIcon
us0 f31 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f31 actionTable 'out=in;
' #txt
us0 f31 actionCode 'try{
	if(in.selectedDocuments.size()>0){
		in.fileManagementHandler.deleteDocuments(in.selectedDocuments);
		in.documentsInDb.removeAll(in.selectedDocuments);
		panel.fireSE_DocumentsDeleted([in.selectedFolderOnServer.path,in.panelId]);
	}
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f31 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f31 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delete the files from the 
DB properties Handler</name>
        <nameStyle>48,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f31 966 596 36 24 20 -14 #rect
us0 f31 @|RichDialogProcessStepIcon #fIcon
us0 f168 expr in #txt
us0 f168 outCond in.returnedMessage.type==1 #txt
us0 f168 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f168 984 566 984 596 #arcP
us0 f168 0 0.3333333333333333 0 0 #arcLabel
us0 f176 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f176 actionTable 'out=in;
' #txt
us0 f176 actionCode in.progressUnit=-1; #txt
us0 f176 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f176 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>in.progressUnit=-1;</name>
        <nameStyle>19,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f176 4518 1076 36 24 -130 -7 #rect
us0 f176 @|RichDialogProcessStepIcon #fIcon
us0 f177 expr in #txt
us0 f177 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f177 4602 1016 4536 1076 #arcP
us0 f177 1 4536 1016 #addKink
us0 f177 1 0.31692438544296825 0 0 #arcLabel
us0 f89 expr out #txt
us0 f89 4536 1100 4603 1208 #arcP
us0 f89 1 4536 1208 #addKink
us0 f89 0 0.6579784171316438 0 0 #arcLabel
us0 f107 expr out #txt
us0 f107 4472 162 4472 195 #arcP
us0 f108 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f108 actionTable 'out=in;
' #txt
us0 f108 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;

in.progressUnit=-1;

// Build the tree from the in.serverPath entry point
in.folderTree = new Tree();
in.folderTree = FileHandler.makeRDTree(in.serverPath);

panel.ordnersTree.setSelectedTreeNode(in.folderTree.getRoot());
' #txt
us0 f108 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f108 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Get the folder Tree</name>
        <nameStyle>19,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f108 166 596 36 24 31 -16 #rect
us0 f108 @|RichDialogProcessStepIcon #fIcon
us0 f123 expr out #txt
us0 f123 710 519 202 519 #arcP
us0 f123 0 0.03212818207210886 0 0 #arcLabel
us0 f166 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f166 actionTable 'out=in;
' #txt
us0 f166 actionCode in.progressUnit=-1; #txt
us0 f166 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f166 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>progress Unit set to -1
to Hide the Progressbar</name>
        <nameStyle>47,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f166 3934 180 36 24 20 -2 #rect
us0 f166 @|RichDialogProcessStepIcon #fIcon
us0 f179 expr out #txt
us0 f179 3952 162 3952 180 #arcP
us0 f24 expr out #txt
us0 f24 3952 204 3952 235 #arcP
us0 f180 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f180 actionTable 'out=in;
' #txt
us0 f180 actionCode 'out.progressUnit=-1;
panel.ProgressBar.setIndeterminate(false);' #txt
us0 f180 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f180 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f180 3766 172 36 24 20 -2 #rect
us0 f180 @|RichDialogProcessStepIcon #fIcon
us0 f181 expr out #txt
us0 f181 3784 154 3784 172 #arcP
us0 f113 expr out #txt
us0 f113 3784 196 3784 227 #arcP
us0 f182 guid 11E16F7BDA4344F3 #txt
us0 f182 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f182 method getSelectedDocuments() #txt
us0 f182 disableUIEvents false #txt
us0 f182 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f182 outParameterDecl '<List<ch.xpertline.common.ria.component.DocumentOnServer> listOfDocumentOnServer> result;
' #txt
us0 f182 outParameterMapAction 'result.listOfDocumentOnServer=in.selectedDocuments;
' #txt
us0 f182 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getSelectedDocuments()</name>
        <nameStyle>22,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f182 2702 94 20 20 -44 -33 #rect
us0 f182 @|RichDialogMethodStartIcon #fIcon
us0 f183 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f183 actionTable 'out=in;
' #txt
us0 f183 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
in.selectedDocuments = new List<DocumentOnServer>();
for(DocumentOnServer doc: panel.filesTable.selectedListEntries){
	in.selectedDocuments.add(doc);
}
' #txt
us0 f183 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f183 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f183 2694 133 36 23 20 -2 #rect
us0 f183 @|RichDialogProcessStepIcon #fIcon
us0 f184 expr out #txt
us0 f184 2712 114 2712 132 #arcP
us0 f185 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f185 2699 171 26 26 14 0 #rect
us0 f185 @|RichDialogProcessEndIcon #fIcon
us0 f186 expr out #txt
us0 f186 2712 155 2712 171 #arcP
us0 f187 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>show/hidde the selected Files Panel</name>
        <nameStyle>35,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f187 guid 11E266B093A206B7 #txt
us0 f187 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f187 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f187 actionTable 'out=in;
' #txt
us0 f187 actionCode panel.desktopHandlerPanel.setTableVisible(!panel.desktopHandlerPanel.getTableVisible()); #txt
us0 f187 1062 854 20 20 -61 -32 #rect
us0 f187 @|RichDialogProcessStartIcon #fIcon
us0 f188 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f188 1059 907 26 26 14 0 #rect
us0 f188 @|RichDialogProcessEndIcon #fIcon
us0 f189 expr out #txt
us0 f189 1072 874 1072 907 #arcP
us0 f190 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>edit file</name>
        <nameStyle>9,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f190 guid 11E266F60B7C1BDB #txt
us0 f190 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f190 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f190 actionTable 'out=in;
out.isFileEditable=false;
' #txt
us0 f190 actionCode 'in.fileToEdit = new java.io.File(in.selectedDocument.path);' #txt
us0 f190 1166 62 20 20 -16 -30 #rect
us0 f190 @|RichDialogProcessStartIcon #fIcon
us0 f191 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f191 actionTable 'out=in;
' #txt
us0 f191 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

if(panel.#filesTable.getSelectedListEntry()!=null && panel.filesTable.getSelectedListEntry() instanceof DocumentOnServer){
	DocumentOnServer doc = new DocumentOnServer();
  doc = panel.filesTable.selectedListEntry as DocumentOnServer;
	
	panel.desktopHandlerPanel.openFileAndCheckForChanges(new java.io.File(doc.path));
	out.selectedDocument.locked="1";
	out.selectedDocument.lockingUserID=in.applicationUserName;

}' #txt
us0 f191 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f191 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Edit</name>
        <nameStyle>4,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f191 1334 372 36 24 19 -9 #rect
us0 f191 @|RichDialogProcessStepIcon #fIcon
us0 f73 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f73 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Locked ?</name>
        <nameStyle>8,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f73 1290 218 28 28 -62 -19 #rect
us0 f73 @|AlternativeIcon #fIcon
us0 f201 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Ask if open in 
read only Mode</name>
        <nameStyle>30,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f201 targetWindow NEW:card: #txt
us0 f201 targetDisplay TOP #txt
us0 f201 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
us0 f201 startMethod askQuestion(String,String,List<String>,String) #txt
us0 f201 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f201 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
us0 f201 requestMappingAction 'param.icon="warning";
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/no")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes");
' #txt
us0 f201 requestActionCode param.question=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/filetoEditLocked"); #txt
us0 f201 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f201 responseMappingAction 'out=in;
out.stringVariable=result.pressedButton;
' #txt
us0 f201 windowConfiguration '{/title "Warning"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f201 isAsynch false #txt
us0 f201 isInnerRd true #txt
us0 f201 isDialog true #txt
us0 f201 1414 220 36 24 18 -17 #rect
us0 f201 @|RichDialogIcon #fIcon
us0 f201 -985168|-1|-16777216 #nodeStyle
us0 f203 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f203 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Confirmed ?</name>
        <nameStyle>11,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f203 1418 282 28 28 4 -35 #rect
us0 f203 @|AlternativeIcon #fIcon
us0 f204 expr out #txt
us0 f204 1432 244 1432 282 #arcP
us0 f205 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Open File (read only)</name>
        <nameStyle>21,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f205 guid 11E447BF8696BEA3 #txt
us0 f205 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f205 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f205 actionTable 'out=in;
' #txt
us0 f205 1558 222 20 20 -36 -31 #rect
us0 f205 @|RichDialogProcessStartIcon #fIcon
us0 f206 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f206 actionTable 'out=in;
' #txt
us0 f206 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

if(panel.#filesTable.getSelectedListEntry()!=null && panel.filesTable.getSelectedListEntry() instanceof DocumentOnServer){
	DocumentOnServer doc = new DocumentOnServer();
  doc = panel.filesTable.selectedListEntry as DocumentOnServer;
	
	panel.desktopHandlerPanel.openFile(new java.io.File(doc.path));
}
panel.refreshActualSelectedFolder();' #txt
us0 f206 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f206 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Open File with DesktopHandler
The eventual changes are not going
to be transmitted at the server side</name>
        <nameStyle>30,0,7,9
71,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f206 1550 284 36 24 12 -4 #rect
us0 f206 @|RichDialogProcessStepIcon #fIcon
us0 f207 expr out #txt
us0 f207 1568 242 1568 284 #arcP
us0 f208 expr in #txt
us0 f208 outCond in.stringVariable.equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes")) #txt
us0 f208 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f208 1446 296 1550 296 #arcP
us0 f211 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f211 1555 347 26 26 14 0 #rect
us0 f211 @|RichDialogProcessEndIcon #fIcon
us0 f212 expr out #txt
us0 f212 1568 308 1568 347 #arcP
us0 f215 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>unlock Files</name>
        <nameStyle>12,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f215 guid 11E44AB51B132D31 #txt
us0 f215 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f215 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f215 actionTable 'out=in;
' #txt
us0 f215 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileCouple;
import ch.ivyteam.ivy.richdialog.exec.RdEvent;

RdEvent e = event as RdEvent;
if(e.getParameter() instanceof List<FileCouple>){
	List<FileCouple> list = e.getParameter() as List<FileCouple>;
	List<java.io.File> files = new List<java.io.File>();
	for(FileCouple fc: list){
		in.fileManagementHandler.unlockFile(fc.getServerFile());
		files.add(fc.getServerFile());
	}
	panel.fireSE_FilesUnlocked(files);
}

panel.refreshActualSelectedFolder();' #txt
us0 f215 1502 606 20 20 -23 -33 #rect
us0 f215 @|RichDialogProcessStartIcon #fIcon
us0 f227 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Change temp Dir</name>
        <nameStyle>15,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f227 guid 11E454903325E8BD #txt
us0 f227 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f227 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f227 actionTable 'out=in;
' #txt
us0 f227 actionCode 'import ch.ivyteam.ivy.richdialog.exec.RdEvent;


RdEvent e = event as RdEvent;
if(e.getParameter() instanceof String){
	in.clientTempDirPath=e.getParameter() as String;
}

' #txt
us0 f227 1894 38 20 20 -36 -28 #rect
us0 f227 @|RichDialogProcessStartIcon #fIcon
us0 f228 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f228 1891 99 26 26 14 0 #rect
us0 f228 @|RichDialogProcessEndIcon #fIcon
us0 f229 expr out #txt
us0 f229 1904 58 1904 99 #arcP
us0 f230 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>changeUserName</name>
        <nameStyle>14,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f230 guid 11E454BBE55F1836 #txt
us0 f230 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f230 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f230 actionTable 'out=in;
' #txt
us0 f230 actionCode 'import ch.ivyteam.ivy.richdialog.exec.RdEvent;

RdEvent e = event as RdEvent;
if(e.getParameter() instanceof String){
	if(in.applicationUserName.trim().equalsIgnoreCase("")){
		in.applicationUserName=e.getParameter() as String;
	}else{
		panel.desktopHandlerPanel.setUserName(in.applicationUserName);
	}
}

' #txt
us0 f230 1894 158 20 20 -39 -28 #rect
us0 f230 @|RichDialogProcessStartIcon #fIcon
us0 f231 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f231 1891 219 26 26 14 0 #rect
us0 f231 @|RichDialogProcessEndIcon #fIcon
us0 f232 expr out #txt
us0 f232 1904 178 1904 219 #arcP
us0 f198 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Make new Version</name>
        <nameStyle>16,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f198 guid 11E45CB66D56EC59 #txt
us0 f198 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f198 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f198 actionTable 'out=in;
' #txt
us0 f198 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/copyFileInNewFile"); #txt
us0 f198 1726 1078 20 20 -37 -32 #rect
us0 f198 @|RichDialogProcessStartIcon #fIcon
us0 f234 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f234 1803 1179 26 26 14 0 #rect
us0 f234 @|RichDialogProcessEndIcon #fIcon
us0 f239 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get user infos</name>
        <nameStyle>14,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f239 guid 11E48B5A05732BAE #txt
us0 f239 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f239 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f239 actionTable 'out=in;
' #txt
us0 f239 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/information"); #txt
us0 f239 1806 214 20 20 -37 -32 #rect
us0 f239 @|RichDialogProcessStartIcon #fIcon
us0 f240 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Shows UserId and TempDir</name>
        <nameStyle>24,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f240 targetWindow NEW:card: #txt
us0 f240 targetDisplay TOP #txt
us0 f240 richDialogId ch.ivyteam.ivy.addons.commondialogs.MessageDialog #txt
us0 f240 startMethod showMessage(String) #txt
us0 f240 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f240 requestActionDecl '<String message> param;' #txt
us0 f240 requestActionCode 'param.message="Welcome ! Your user Id is: "+ in.applicationUserName+" and your temporary directory is: "+in.clientTempDirPath;' #txt
us0 f240 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f240 responseMappingAction 'out=in;
' #txt
us0 f240 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f240 isAsynch false #txt
us0 f240 isInnerRd true #txt
us0 f240 isDialog true #txt
us0 f240 1798 268 36 24 22 -7 #rect
us0 f240 @|RichDialogIcon #fIcon
us0 f241 expr out #txt
us0 f241 1816 234 1816 268 #arcP
us0 f242 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f242 1803 323 26 26 14 0 #rect
us0 f242 @|RichDialogProcessEndIcon #fIcon
us0 f243 expr out #txt
us0 f243 1816 292 1816 323 #arcP
us0 f244 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Ask for new version Name</name>
        <nameStyle>24,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f244 targetWindow NEW:card: #txt
us0 f244 targetDisplay TOP #txt
us0 f244 richDialogId ch.ivyteam.ivy.addons.commondialogs.SingleLineInputDialog #txt
us0 f244 startMethod askInput(String,String,List<String>,String) #txt
us0 f244 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f244 requestActionDecl '<String question, String defaultValue, List<String> buttons, String defaultButton> param;' #txt
us0 f244 requestMappingAction 'param.buttons=["OK", ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/cancel")];
param.defaultButton="OK";
' #txt
us0 f244 requestActionCode param.question=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/enterCopyFileName"); #txt
us0 f244 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f244 responseMappingAction 'out=in;
out.pressedButton=result.pressedButton;
out.stringVariable=result.inputString;
' #txt
us0 f244 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f244 isAsynch false #txt
us0 f244 isInnerRd true #txt
us0 f244 isDialog true #txt
us0 f244 1718 1132 36 24 -143 -34 #rect
us0 f244 @|RichDialogIcon #fIcon
us0 f244 -985168|-1|-16777216 #nodeStyle
us0 f245 expr out #txt
us0 f245 1736 1098 1736 1132 #arcP
us0 f246 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f246 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f246 1722 1178 28 28 14 0 #rect
us0 f246 @|AlternativeIcon #fIcon
us0 f247 expr out #txt
us0 f247 1736 1156 1736 1178 #arcP
us0 f248 expr in #txt
us0 f248 outCond 'in.stringVariable.trim().equals("") || !in.pressedButton.equalsIgnoreCase("OK")' #txt
us0 f248 1750 1192 1803 1192 #arcP
us0 f233 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f233 actionTable 'out=in;
' #txt
us0 f233 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
in.returnedMessage = FileHandler.makeNewVersion(new java.io.File(in.selectedDocument.path),in.stringVariable,true);' #txt
us0 f233 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f233 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Make new Version 
with name entered</name>
        <nameStyle>35,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f233 1718 1356 36 24 21 -16 #rect
us0 f233 @|RichDialogProcessStepIcon #fIcon
us0 f199 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f199 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f199 1722 1410 28 28 14 0 #rect
us0 f199 @|AlternativeIcon #fIcon
us0 f235 expr out #txt
us0 f235 1736 1380 1736 1410 #arcP
us0 f250 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Ask If Overwrite</name>
        <nameStyle>16,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f250 targetWindow NEW:card: #txt
us0 f250 targetDisplay TOP #txt
us0 f250 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
us0 f250 startMethod askQuestion(String,String,List<String>,String) #txt
us0 f250 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f250 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
us0 f250 requestMappingAction 'param.icon="question";
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/overwrite"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/newName"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/cancel")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/overwrite");
' #txt
us0 f250 requestActionCode param.question=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/fileToCreateAlreadyExists"); #txt
us0 f250 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f250 responseMappingAction 'out=in;
out.pressedButton=result.pressedButton;
' #txt
us0 f250 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f250 isAsynch false #txt
us0 f250 isInnerRd true #txt
us0 f250 isDialog true #txt
us0 f250 1718 1508 36 24 16 5 #rect
us0 f250 @|RichDialogIcon #fIcon
us0 f250 -985168|-1|-16777216 #nodeStyle
us0 f252 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Shows Error
 Message</name>
        <nameStyle>20,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f252 targetWindow NEW #txt
us0 f252 targetDisplay TOP #txt
us0 f252 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
us0 f252 startMethod askQuestion(String,String,List<String>,String) #txt
us0 f252 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f252 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
us0 f252 requestMappingAction 'param.icon="error";
param.question=in.returnedMessage.text;
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok");
' #txt
us0 f252 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f252 responseMappingAction 'out=in;
' #txt
us0 f252 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f252 isAsynch true #txt
us0 f252 isInnerRd true #txt
us0 f252 isDialog true #txt
us0 f252 1630 1476 36 24 -90 -20 #rect
us0 f252 @|RichDialogIcon #fIcon
us0 f252 -65536|-1|-16777216 #nodeStyle
us0 f254 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f254 1635 1515 26 26 14 0 #rect
us0 f254 @|RichDialogProcessEndIcon #fIcon
us0 f255 expr out #txt
us0 f255 1648 1500 1648 1515 #arcP
us0 f258 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f258 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f258 1722 1570 28 28 14 0 #rect
us0 f258 @|AlternativeIcon #fIcon
us0 f259 expr out #txt
us0 f259 1736 1532 1736 1570 #arcP
us0 f260 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f260 actionTable 'out=in;
' #txt
us0 f260 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
String newFileName= in.returnedMessage.file.getName();
in.returnedMessage = FileHandler.makeNewVersion(new java.io.File(in.selectedDocument.path), newFileName, false);' #txt
us0 f260 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f260 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f260 1718 1644 36 24 20 -2 #rect
us0 f260 @|RichDialogProcessStepIcon #fIcon
us0 f261 expr in #txt
us0 f261 outCond in.pressedButton.equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/overwrite")) #txt
us0 f261 1736 1598 1736 1644 #arcP
us0 f262 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f262 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Error ?</name>
        <nameStyle>7,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f262 1722 1706 28 28 14 -29 #rect
us0 f262 @|AlternativeIcon #fIcon
us0 f263 expr out #txt
us0 f263 1736 1668 1736 1706 #arcP
us0 f264 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Shows Error Message</name>
        <nameStyle>19,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f264 targetWindow NEW:card: #txt
us0 f264 targetDisplay TOP #txt
us0 f264 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
us0 f264 startMethod askQuestion(String,String,List<String>,String) #txt
us0 f264 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f264 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
us0 f264 requestMappingAction 'param.icon="error";
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok");
' #txt
us0 f264 requestActionCode 'param.question= in.returnedMessage.text;' #txt
us0 f264 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f264 responseMappingAction 'out=in;
' #txt
us0 f264 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f264 isAsynch false #txt
us0 f264 isInnerRd true #txt
us0 f264 isDialog true #txt
us0 f264 1654 1772 36 24 31 -6 #rect
us0 f264 @|RichDialogIcon #fIcon
us0 f264 -65536|-1|-16777216 #nodeStyle
us0 f266 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f266 1659 1827 26 26 14 0 #rect
us0 f266 @|RichDialogProcessEndIcon #fIcon
us0 f267 expr out #txt
us0 f267 1672 1796 1672 1827 #arcP
us0 f270 expr in #txt
us0 f270 outCond in.pressedButton.equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/newName")) #txt
us0 f270 1722 1584 1718 1144 #arcP
us0 f270 1 1592 1584 #addKink
us0 f270 2 1592 1144 #addKink
us0 f270 1 0.4946808510638298 0 0 #arcLabel
us0 f271 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f271 1851 1571 26 26 14 0 #rect
us0 f271 @|RichDialogProcessEndIcon #fIcon
us0 f272 expr in #txt
us0 f272 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Cancelled</name>
        <nameStyle>9,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f272 1750 1584 1851 1584 #arcP
us0 f273 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f273 actionTable 'out=in;
' #txt
us0 f273 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

DocumentOnServer doc = new DocumentOnServer();
doc.filename= in.returnedMessage.file.getName();
doc.fileSize= FileHandler.getFileSize(in.returnedMessage.file);
doc.locked="0";
doc.path=in.returnedMessage.file.getPath();
doc.userID=in.applicationUserName;
doc.creationDate=in.today;
doc.modificationTime=new Time().format();
doc.creationTime=doc.modificationTime;
doc.modificationDate=doc.creationDate;
doc.modificationUserID=doc.userID;

in.filesToAdd.clear();
in.filesToAdd.add(doc);


' #txt
us0 f273 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f273 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>make DocumentOnServer
with the new created File</name>
        <nameStyle>47,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f273 1902 1428 36 24 -34 -52 #rect
us0 f273 @|RichDialogProcessStepIcon #fIcon
us0 f257 expr in #txt
us0 f257 1749 1425 1902 1438 #arcP
us0 f277 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>unLockSelectedFiles</name>
        <nameStyle>19,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f277 guid 11E498DAE43CF912 #txt
us0 f277 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f277 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f277 actionTable 'out=in;
' #txt
us0 f277 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
in.selectedDocuments = new List<DocumentOnServer>();

for(DocumentOnServer doc: panel.filesTable.selectedListEntries){
	in.selectedDocuments.add(doc);
}

panel.desktopHandlerPanel.unLockSelectedDocumentsOnServer(in.selectedDocuments);
' #txt
us0 f277 1606 606 20 20 -37 -29 #rect
us0 f277 @|RichDialogProcessStartIcon #fIcon
us0 f278 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f278 1603 651 26 26 14 0 #rect
us0 f278 @|RichDialogProcessEndIcon #fIcon
us0 f279 expr out #txt
us0 f279 1616 626 1616 651 #arcP
us0 f280 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>force unlock selected Files</name>
        <nameStyle>27,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f280 guid 11E498EBEDA97565 #txt
us0 f280 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f280 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f280 actionTable 'out=in;
' #txt
us0 f280 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
in.selectedDocuments = new List<DocumentOnServer>();

for(DocumentOnServer doc: panel.filesTable.selectedListEntries){
	in.selectedDocuments.add(doc);
}

panel.desktopHandlerPanel.forceUnlock(in.selectedDocuments);' #txt
us0 f280 1606 718 20 20 -53 -30 #rect
us0 f280 @|RichDialogProcessStartIcon #fIcon
us0 f281 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f281 1603 763 26 26 14 0 #rect
us0 f281 @|RichDialogProcessEndIcon #fIcon
us0 f282 expr out #txt
us0 f282 1616 738 1616 763 #arcP
us0 f285 guid 11E8761934C2F21A #txt
us0 f285 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f285 method _checkIfFileLocked(ch.ivyteam.ivy.addons.filemanager.DocumentOnServer) #txt
us0 f285 disableUIEvents false #txt
us0 f285 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer document> param = methodEvent.getInputArguments();
' #txt
us0 f285 inParameterMapAction 'out.selectedDocument=param.document;
' #txt
us0 f285 outParameterDecl '<java.lang.Boolean fileLocked> result;
' #txt
us0 f285 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_checkIfFileLocked
(DocumentOnServer)</name>
        <nameStyle>37,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f285 2446 238 20 20 -42 -38 #rect
us0 f285 @|RichDialogMethodStartIcon #fIcon
us0 f288 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f288 2443 331 26 26 14 0 #rect
us0 f288 @|RichDialogProcessEndIcon #fIcon
us0 f290 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f290 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Are some Files locked?</name>
        <nameStyle>22,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f290 970 386 28 28 15 -18 #rect
us0 f290 @|AlternativeIcon #fIcon
us0 f291 expr out #txt
us0 f291 984 364 984 386 #arcP
us0 f292 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Display Message</name>
        <nameStyle>15,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f292 targetWindow NEW:card: #txt
us0 f292 targetDisplay TOP #txt
us0 f292 richDialogId ch.ivyteam.ivy.addons.commondialogs.MessageDialog #txt
us0 f292 startMethod showMessage(String) #txt
us0 f292 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f292 requestActionDecl '<String message> param;' #txt
us0 f292 requestMappingAction 'param.message=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/fileLockedNotDeleted");
' #txt
us0 f292 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f292 responseMappingAction 'out=in;
' #txt
us0 f292 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f292 isAsynch false #txt
us0 f292 isInnerRd true #txt
us0 f292 isDialog true #txt
us0 f292 966 492 36 24 -119 -9 #rect
us0 f292 @|RichDialogIcon #fIcon
us0 f292 -985168|-1|-16777216 #nodeStyle
us0 f301 guid 11E8B995CB02EF34 #txt
us0 f301 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f301 method addDocuments(List<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer>) #txt
us0 f301 disableUIEvents false #txt
us0 f301 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer> documentsList> param = methodEvent.getInputArguments();
' #txt
us0 f301 inActionCode 'out.filesToAdd.clear();
out.filesToAdd.addAll(param.documentsList);' #txt
us0 f301 outParameterDecl '<> result;
' #txt
us0 f301 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>addDocuments(List&lt;DocumentOnServer&gt;)</name>
        <nameStyle>36,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f301 2278 1374 20 20 -52 -32 #rect
us0 f301 @|RichDialogMethodStartIcon #fIcon
us0 f306 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f306 actionTable 'out=in;
' #txt
us0 f306 actionCode 'if(in.filesToAdd.size()>0){
	in.time=new Time().format();
	in.today =  new Date().format("d.M.yyyy");
	
	int j= in.filesToAdd.size();
	for(int i=0; i<j; i++){
		in.filesToAdd.get(i).userID=in.applicationUserName;
		in.filesToAdd.get(i).creationDate=in.today;
		in.filesToAdd.get(i).creationTime=in.time;
		in.filesToAdd.get(i).modificationUserID=in.applicationUserName;
		in.filesToAdd.get(i).modificationDate=in.today;
		in.filesToAdd.get(i).modificationTime=in.time;
	}
	try{
		in.fileManagementHandler.insertDocuments(in.filesToAdd);
	}catch(Throwable t){
		in.errorUtil.panelId = in.panelId;
		in.errorUtil.errorOccurred=true;
		in.errorUtil.throwable = t;
		in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
		panel.fireErrorOccurred(in.errorUtil);
	}
}
panel.refreshActualSelectedFolder();' #txt
us0 f306 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f306 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>insert the documents 
and refresh the selected folder</name>
        <nameStyle>53,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f306 2270 1428 36 24 18 -48 #rect
us0 f306 @|RichDialogProcessStepIcon #fIcon
us0 f312 expr out #txt
us0 f312 2288 1394 2288 1428 #arcP
us0 f324 guid 11E8C1D3ADF7C062 #txt
us0 f324 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f324 method isFileLocked(java.io.File) #txt
us0 f324 disableUIEvents false #txt
us0 f324 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.io.File file> param = methodEvent.getInputArguments();
' #txt
us0 f324 inParameterMapAction 'out.stringVariable=param.file.getPath();
' #txt
us0 f324 outParameterDecl '<java.lang.Boolean locked> result;
' #txt
us0 f324 outParameterMapAction 'result.locked=in.responseBoolean;
' #txt
us0 f324 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>isFileLocked(File)</name>
        <nameStyle>18,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f324 2326 238 20 20 -33 -31 #rect
us0 f324 @|RichDialogMethodStartIcon #fIcon
us0 f327 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f327 2323 331 26 26 14 0 #rect
us0 f327 @|RichDialogProcessEndIcon #fIcon
us0 f329 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f329 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>File to overwrite locked ?</name>
        <nameStyle>26,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f329 4602 858 28 28 8 -29 #rect
us0 f329 @|AlternativeIcon #fIcon
us0 f330 expr out #txt
us0 f330 4616 818 4616 858 #arcP
us0 f331 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>tells the user
the file exists and 
is currently edited</name>
        <nameStyle>55,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f331 targetWindow NEW:card: #txt
us0 f331 targetDisplay TOP #txt
us0 f331 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
us0 f331 startMethod askQuestion(String,String,List<String>,String) #txt
us0 f331 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f331 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
us0 f331 requestMappingAction 'param.icon="warning";
param.question=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/fileExistsAndLocked");
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok");
' #txt
us0 f331 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f331 responseMappingAction 'out=in;
' #txt
us0 f331 windowConfiguration '{/title "The File is locked"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f331 isAsynch false #txt
us0 f331 isInnerRd true #txt
us0 f331 isDialog true #txt
us0 f331 4486 964 36 24 -125 -25 #rect
us0 f331 @|RichDialogIcon #fIcon
us0 f331 -985168|-1|-16777216 #nodeStyle
us0 f333 expr out #txt
us0 f333 4504 988 4524 1076 #arcP
us0 f333 1 4504 1056 #addKink
us0 f333 0 0.44763978082506356 0 0 #arcLabel
us0 f334 guid 11E8C4DEA7966282 #txt
us0 f334 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f334 method getSelectedDirectoryPath() #txt
us0 f334 disableUIEvents false #txt
us0 f334 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f334 outParameterDecl '<java.lang.String selectedDirectoryPath> result;
' #txt
us0 f334 outParameterMapAction 'result.selectedDirectoryPath=in.selectedFolderOnServer.path;
' #txt
us0 f334 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getSelectedDirectoryPath()</name>
        <nameStyle>26,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f334 2838 94 20 20 -54 -37 #rect
us0 f334 @|RichDialogMethodStartIcon #fIcon
us0 f335 guid 11E8C4E041BE73B6 #txt
us0 f335 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f335 method getServerPath() #txt
us0 f335 disableUIEvents false #txt
us0 f335 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f335 outParameterDecl '<java.lang.String serverPath> result;
' #txt
us0 f335 outParameterMapAction 'result.serverPath=in.serverPath;
' #txt
us0 f335 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getServerPath()</name>
        <nameStyle>15,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f335 2950 94 20 20 -31 -39 #rect
us0 f335 @|RichDialogMethodStartIcon #fIcon
us0 f336 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f336 2835 131 26 26 14 0 #rect
us0 f336 @|RichDialogProcessEndIcon #fIcon
us0 f337 expr out #txt
us0 f337 2848 114 2848 131 #arcP
us0 f338 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f338 2947 131 26 26 14 0 #rect
us0 f338 @|RichDialogProcessEndIcon #fIcon
us0 f339 expr out #txt
us0 f339 2960 114 2960 131 #arcP
us0 f340 guid 11E8C53675E2C7C7 #txt
us0 f340 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f340 method getUserTempDirectoryPath() #txt
us0 f340 disableUIEvents false #txt
us0 f340 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f340 outParameterDecl '<java.lang.String userTempDirectoryPath> result;
' #txt
us0 f340 outParameterMapAction 'result.userTempDirectoryPath=in.clientTempDirPath;
' #txt
us0 f340 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getUserTempDirectoryPath()</name>
        <nameStyle>26,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f340 3054 94 20 20 -50 -30 #rect
us0 f340 @|RichDialogMethodStartIcon #fIcon
us0 f341 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f341 3051 131 26 26 14 0 #rect
us0 f341 @|RichDialogProcessEndIcon #fIcon
us0 f342 expr out #txt
us0 f342 3064 114 3064 131 #arcP
us0 f343 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>fileModified</name>
        <nameStyle>12,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f343 guid 11E8D090292C69A8 #txt
us0 f343 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f343 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f343 actionTable 'out=in;
' #txt
us0 f343 actionCode 'import ch.ivyteam.ivy.richdialog.exec.RdEvent;

RdEvent e = event as RdEvent;
if(e.getParameter() instanceof java.io.File){
	try{
	java.io.File file = e.getParameter() as java.io.File;
	
	in.fileManagementHandler.changeModificationInformations(file, in.applicationUserName);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred")+" changeModificationInformations";
	panel.fireErrorOccurred(in.errorUtil);
}
}' #txt
us0 f343 1718 38 20 20 -23 -27 #rect
us0 f343 @|RichDialogProcessStartIcon #fIcon
us0 f346 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f346 1715 147 26 26 14 0 #rect
us0 f346 @|RichDialogProcessEndIcon #fIcon
us0 f348 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f348 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f348 1722 1298 28 28 14 0 #rect
us0 f348 @|AlternativeIcon #fIcon
us0 f249 expr in #txt
us0 f249 outCond in.responseBoolean #txt
us0 f249 1736 1326 1736 1356 #arcP
us0 f350 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f350 actionTable 'out=in;
' #txt
us0 f350 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;

in.responseBoolean=false;
if(FileHandler.getFileNameWithoutExt(in.selectedDocument.filename).equals(in.stringVariable)){
	in.responseBoolean=false;
	}else{
		in.responseBoolean=true;
		}' #txt
us0 f350 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f350 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check if entered name
== existing file name</name>
        <nameStyle>43,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f350 1718 1228 36 24 -135 -33 #rect
us0 f350 @|RichDialogProcessStepIcon #fIcon
us0 f351 expr in #txt
us0 f351 1736 1206 1736 1228 #arcP
us0 f349 expr out #txt
us0 f349 1736 1252 1736 1298 #arcP
us0 f352 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Shows Error Message</name>
        <nameStyle>19,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f352 targetWindow NEW:card: #txt
us0 f352 targetDisplay TOP #txt
us0 f352 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
us0 f352 startMethod askQuestion(String,String,List<String>,String) #txt
us0 f352 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f352 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
us0 f352 requestMappingAction 'param.icon="warning";
param.question=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/cannotChooseSameNameAsCopiedFile");
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok");
' #txt
us0 f352 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f352 responseMappingAction 'out=in;
' #txt
us0 f352 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f352 isAsynch false #txt
us0 f352 isInnerRd true #txt
us0 f352 isDialog true #txt
us0 f352 1830 1300 36 24 25 -8 #rect
us0 f352 @|RichDialogIcon #fIcon
us0 f352 -65536|-1|-16777216 #nodeStyle
us0 f354 expr out #txt
us0 f354 1848 1300 1754 1144 #arcP
us0 f354 1 1848 1144 #addKink
us0 f354 0 0.7338600086642464 0 0 #arcLabel
us0 f355 expr in #txt
us0 f355 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f355 1750 1720 1920 1452 #arcP
us0 f355 1 1920 1720 #addKink
us0 f355 1 0.38567173203699884 0 0 #arcLabel
us0 f256 expr out #txt
us0 f256 1938 1440 2270 1440 #arcP
us0 f8 guid 11EB0CD093347480 #txt
us0 f8 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f8 method _getUploadedFileFromUploadHandler(ch.ivyteam.ivy.addons.filemanager.ReturnedMessage) #txt
us0 f8 disableUIEvents false #txt
us0 f8 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> param = methodEvent.getInputArguments();
' #txt
us0 f8 inParameterMapAction 'out.returnedMessage=param.returnedMessage;
' #txt
us0 f8 outParameterDecl '<> result;
' #txt
us0 f8 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_getUploadedFileFromUploadHandler(ReturnedMessage)</name>
        <nameStyle>50,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f8 3774 326 20 20 -91 -31 #rect
us0 f8 @|RichDialogMethodStartIcon #fIcon
us0 f133 expr out #txt
us0 f133 3784 346 3784 394 #arcP
us0 f358 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f358 actionTable 'out=in;
' #txt
us0 f358 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;

// Build the tree from the in.serverPath entry point
in.folderTree = new Tree();
in.folderTree = FileHandler.makeRDTree(in.serverPath);

' #txt
us0 f358 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f358 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f358 3182 652 36 24 20 -2 #rect
us0 f358 @|RichDialogProcessStepIcon #fIcon
us0 f142 expr in #txt
us0 f142 outCond in.returnedMessage.type==1 #txt
us0 f142 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f142 3200 606 3200 652 #arcP
us0 f359 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f359 3187 707 26 26 14 0 #rect
us0 f359 @|RichDialogProcessEndIcon #fIcon
us0 f360 expr out #txt
us0 f360 3200 676 3200 707 #arcP
us0 f361 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>make new directory</name>
        <nameStyle>18,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f361 guid 11EB17DDCC0AC783 #txt
us0 f361 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f361 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f361 actionTable 'out=in;
' #txt
us0 f361 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/enterNewDirectoryName"); #txt
us0 f361 1766 694 20 20 -36 -30 #rect
us0 f361 @|RichDialogProcessStartIcon #fIcon
us0 f362 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Ask new name</name>
        <nameStyle>12,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f362 targetWindow NEW:card: #txt
us0 f362 targetDisplay TOP #txt
us0 f362 richDialogId ch.ivyteam.ivy.addons.commondialogs.SingleLineInputDialog #txt
us0 f362 startMethod askInput(String,String,List<String>,String) #txt
us0 f362 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f362 requestActionDecl '<String question, String defaultValue, List<String> buttons, String defaultButton> param;' #txt
us0 f362 requestMappingAction 'param.buttons=["OK", ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/cancel")];
param.defaultButton="OK";
' #txt
us0 f362 requestActionCode param.question=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/NewDirectoryCreationInfo"); #txt
us0 f362 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f362 responseMappingAction 'out=in;
out.pressedButton=result.pressedButton;
out.stringVariable=result.inputString;
' #txt
us0 f362 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f362 isAsynch false #txt
us0 f362 isInnerRd true #txt
us0 f362 isDialog true #txt
us0 f362 1758 740 36 24 20 -2 #rect
us0 f362 @|RichDialogIcon #fIcon
us0 f362 -985168|-1|-16777216 #nodeStyle
us0 f363 expr out #txt
us0 f363 1776 714 1776 740 #arcP
us0 f366 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f366 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>New Name not empty
and not cancel</name>
        <nameStyle>19,0,7,9
14,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f366 1762 786 28 28 20 -15 #rect
us0 f366 @|AlternativeIcon #fIcon
us0 f367 expr out #txt
us0 f367 1776 764 1776 786 #arcP
us0 f368 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f368 actionTable 'out=in;
' #txt
us0 f368 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
panel.makeDirectoryWithPath(
	FileHandler.formatPathWithEndSeparator(in.selectedFolderOnServer.path)+in.stringVariable);' #txt
us0 f368 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f368 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f368 1758 852 36 24 20 -2 #rect
us0 f368 @|RichDialogProcessStepIcon #fIcon
us0 f370 expr in #txt
us0 f370 outCond 'in.stringVariable.trim().length()>0 && in.pressedButton.equalsIgnoreCase("OK")' #txt
us0 f370 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f370 1776 814 1776 852 #arcP
us0 f373 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f373 1763 907 26 26 14 0 #rect
us0 f373 @|RichDialogProcessEndIcon #fIcon
us0 f374 expr out #txt
us0 f374 1776 876 1776 907 #arcP
us0 f375 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Shows Error Message</name>
        <nameStyle>19,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f375 targetWindow NEW:card: #txt
us0 f375 targetDisplay TOP #txt
us0 f375 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
us0 f375 startMethod askQuestion(String,String,List<String>,String) #txt
us0 f375 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f375 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
us0 f375 requestMappingAction 'param.icon="error";
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok");
' #txt
us0 f375 requestActionCode 'param.question= in.returnedMessage.text;' #txt
us0 f375 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f375 responseMappingAction 'out=in;
' #txt
us0 f375 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f375 isAsynch false #txt
us0 f375 isInnerRd true #txt
us0 f375 isDialog true #txt
us0 f375 3062 580 36 24 -87 -35 #rect
us0 f375 @|RichDialogIcon #fIcon
us0 f375 -65536|-1|-16777216 #nodeStyle
us0 f274 guid 11EB4DA0E227A107 #txt
us0 f274 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f274 method makeDirectoryWithPath(String) #txt
us0 f274 disableUIEvents false #txt
us0 f274 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String newDir> param = methodEvent.getInputArguments();
' #txt
us0 f274 inParameterMapAction 'out.stringVariable=param.newDir;
' #txt
us0 f274 outParameterDecl '<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> result;
' #txt
us0 f274 outParameterMapAction 'result.returnedMessage=in.returnedMessage;
' #txt
us0 f274 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>makeDirectoryWithPath(String)</name>
        <nameStyle>29,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f274 3246 462 20 20 -57 -31 #rect
us0 f274 @|RichDialogMethodStartIcon #fIcon
us0 f275 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f275 actionTable 'out=in;
' #txt
us0 f275 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
in.returnedMessage = FileHandler.makeDirectory(in.stringVariable);' #txt
us0 f275 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f275 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f275 3238 508 36 24 20 -2 #rect
us0 f275 @|RichDialogProcessStepIcon #fIcon
us0 f276 expr out #txt
us0 f276 3256 482 3256 508 #arcP
us0 f357 expr out #txt
us0 f357 3247 532 3206 584 #arcP
us0 f377 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f377 actionTable 'out=in;
' #txt
us0 f377 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.FolderOnServer;
try{
	if(panel.ordnersTree.selectedTreeNode.value instanceof FolderOnServer){
		FolderOnServer FOS = panel.ordnersTree.selectedTreeNode.value as FolderOnServer;
		in.selectedFolderOnServer.name=FOS.name;
		in.selectedFolderOnServer.path=FOS.path;
		//set delete menu enabled
		panel.deleteDirectoryMenuItem.setEnabled(true);
		panel.deleteDirButton.setEnabled(true);
	}else {
		//set delete menu disabled
		panel.deleteDirectoryMenuItem.setEnabled(false);
		panel.deleteDirButton.setEnabled(false);
		in.selectedFolderOnServer.path=in.serverPath;
	}
	in.uploadHandler.setServerPath(in.selectedFolderOnServer.path);
	
	in.documentsInDb.clear();
	in.selectedDocument=null;
	in.selectedDocuments.clear();
	//get the documents 
	if(in.#selectedFolderOnServer.#path !=null){
		if(in.#isRecursive==null){
			in.isRecursive=false;
		}
		in.documentsInDb.addAll(in.fileManagementHandler.getDocumentsInPath(in.selectedFolderOnServer.path,in.isRecursive));
	}
	in.filesNumber=in.documentsInDb.size().toString();
	int n = in.documentsInDb.size();
	out.returnedMessage.text = (n==0?ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/plainStrings/noDocumentFound"):
				(n==1?ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/plainStrings/oneDocumentFound"): 
				in.filesNumber+" " +ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/plainStrings/xDocumentsFound")));
	out.returnedMessage.type=FileHandler.INFORMATION_MESSAGE;
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f377 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f377 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get the documents in the selected Folder</name>
        <nameStyle>40,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f377 742 780 36 24 9 16 #rect
us0 f377 @|RichDialogProcessStepIcon #fIcon
us0 f378 expr out #txt
us0 f378 760 746 760 780 #arcP
us0 f209 guid 11EB5375A466CA8F #txt
us0 f209 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f209 method deleteDirectory(String) #txt
us0 f209 disableUIEvents false #txt
us0 f209 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String dirPath> param = methodEvent.getInputArguments();
' #txt
us0 f209 inParameterMapAction 'out.stringVariable=param.dirPath;
' #txt
us0 f209 outParameterDecl '<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> result;
' #txt
us0 f209 outActionCode 'import ch.ivyteam.ivy.addons.filemanager.ReturnedMessage;
if(in.#returnedMessage!=null){
	ivy.log.debug("NOT NULL");
	result.returnedMessage=in.returnedMessage;
}else{
	ivy.log.debug("NULL");
	result.returnedMessage=new ReturnedMessage();
}' #txt
us0 f209 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>deleteDirectory(String)</name>
        <nameStyle>23,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f209 2710 470 20 20 -52 -27 #rect
us0 f209 @|RichDialogMethodStartIcon #fIcon
us0 f210 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f210 actionTable 'out=in;
' #txt
us0 f210 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
in.returnedMessage=FileHandler.deleteDirectory(in.stringVariable);' #txt
us0 f210 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f210 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f210 2702 604 36 24 20 -2 #rect
us0 f210 @|RichDialogProcessStepIcon #fIcon
us0 f284 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f284 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>success?</name>
        <nameStyle>8,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f284 2706 650 28 28 -71 -9 #rect
us0 f284 @|AlternativeIcon #fIcon
us0 f379 expr out #txt
us0 f379 2720 628 2720 650 #arcP
us0 f380 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f380 actionTable 'out=in;
' #txt
us0 f380 actionCode 'in.selectedFolderOnServer.path=in.serverPath;
panel.refresh();' #txt
us0 f380 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f380 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh the panel</name>
        <nameStyle>17,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f380 2702 708 36 24 -121 -9 #rect
us0 f380 @|RichDialogProcessStepIcon #fIcon
us0 f381 expr in #txt
us0 f381 outCond in.returnedMessage.type==1 #txt
us0 f381 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Yes</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f381 2720 678 2720 708 #arcP
us0 f382 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>error message</name>
        <nameStyle>13,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f382 targetWindow NEW:card: #txt
us0 f382 targetDisplay TOP #txt
us0 f382 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
us0 f382 startMethod askQuestion(String,String,List<String>,String) #txt
us0 f382 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f382 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
us0 f382 requestMappingAction 'param.icon="error";
param.question=in.returnedMessage.text;
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok");
' #txt
us0 f382 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f382 responseMappingAction 'out=in;
' #txt
us0 f382 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f382 isAsynch false #txt
us0 f382 isInnerRd true #txt
us0 f382 isDialog true #txt
us0 f382 2862 652 36 24 20 -2 #rect
us0 f382 @|RichDialogIcon #fIcon
us0 f382 -65536|-1|-16777216 #nodeStyle
us0 f384 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f384 2787 747 26 26 14 0 #rect
us0 f384 @|RichDialogProcessEndIcon #fIcon
us0 f385 expr out #txt
us0 f385 2720 732 2787 760 #arcP
us0 f385 1 2720 760 #addKink
us0 f385 1 0.2374399721200058 0 0 #arcLabel
us0 f386 expr out #txt
us0 f386 2880 676 2738 720 #arcP
us0 f386 1 2880 720 #addKink
us0 f386 1 0.15800764167490755 0 0 #arcLabel
us0 f387 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delete directory</name>
        <nameStyle>16,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f387 guid 11EB53CBAE7DBC6A #txt
us0 f387 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f387 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f387 actionTable 'out=in;
' #txt
us0 f387 1998 686 20 20 -34 -30 #rect
us0 f387 @|RichDialogProcessStartIcon #fIcon
us0 f393 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>ask to confirm</name>
        <nameStyle>14,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f393 targetWindow NEW:card: #txt
us0 f393 targetDisplay TOP #txt
us0 f393 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
us0 f393 startMethod askQuestion(String,String,List<String>,String) #txt
us0 f393 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f393 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
us0 f393 requestMappingAction 'param.icon="question";
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/no")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes");
' #txt
us0 f393 requestActionCode param.question=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/question/confirmDeleteDirectory")+"\n"+in.selectedFolderOnServer.name; #txt
us0 f393 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f393 responseMappingAction 'out=in;
out.stringVariable=result.pressedButton;
' #txt
us0 f393 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f393 isAsynch false #txt
us0 f393 isInnerRd true #txt
us0 f393 isDialog true #txt
us0 f393 1990 868 36 24 20 -2 #rect
us0 f393 @|RichDialogIcon #fIcon
us0 f393 -985168|-1|-16777216 #nodeStyle
us0 f395 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f395 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f395 1994 914 28 28 14 0 #rect
us0 f395 @|AlternativeIcon #fIcon
us0 f396 expr out #txt
us0 f396 2008 892 2008 914 #arcP
us0 f397 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f397 actionTable 'out=in;
' #txt
us0 f397 actionCode panel.deleteDirectory(in.selectedFolderOnServer.path); #txt
us0 f397 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f397 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>call the deleteDirectory method</name>
        <nameStyle>31,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f397 1990 964 36 24 20 -2 #rect
us0 f397 @|RichDialogProcessStepIcon #fIcon
us0 f398 expr in #txt
us0 f398 outCond in.stringVariable.trim().equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes")) #txt
us0 f398 2008 942 2008 964 #arcP
us0 f399 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f399 1995 1019 26 26 14 0 #rect
us0 f399 @|RichDialogProcessEndIcon #fIcon
us0 f400 expr out #txt
us0 f400 2008 988 2008 1019 #arcP
us0 f401 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f401 2043 915 26 26 14 0 #rect
us0 f401 @|RichDialogProcessEndIcon #fIcon
us0 f402 expr in #txt
us0 f402 2022 928 2043 928 #arcP
us0 f411 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f411 actionTable 'out=in;
' #txt
us0 f411 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
if(FileHandler.formatPathWithEndSeparator(in.selectedFolderOnServer.path).equals(
FileHandler.formatPathWithEndSeparator(in.serverPath))){
	in.responseBoolean=false;
}else{
	in.responseBoolean=true;
	}' #txt
us0 f411 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f411 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check if try to delete root path</name>
        <nameStyle>32,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f411 2702 508 36 24 20 -2 #rect
us0 f411 @|RichDialogProcessStepIcon #fIcon
us0 f413 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f413 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f413 2706 554 28 28 14 0 #rect
us0 f413 @|AlternativeIcon #fIcon
us0 f414 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f414 2867 555 26 26 14 0 #rect
us0 f414 @|RichDialogProcessEndIcon #fIcon
us0 f415 expr out #txt
us0 f415 2720 532 2720 554 #arcP
us0 f418 expr out #txt
us0 f418 2720 490 2720 508 #arcP
us0 f283 expr in #txt
us0 f283 outCond in.responseBoolean #txt
us0 f283 2720 582 2720 604 #arcP
us0 f403 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f403 actionTable 'out=in;
' #txt
us0 f403 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
if(FileHandler.formatPathWithEndSeparator(in.selectedFolderOnServer.path).equals(
FileHandler.formatPathWithEndSeparator(in.serverPath))){
	in.responseBoolean=false;
}else{
	in.responseBoolean=true;
	}' #txt
us0 f403 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f403 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check if try to delete root path</name>
        <nameStyle>32,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f403 1990 732 36 24 20 -2 #rect
us0 f403 @|RichDialogProcessStepIcon #fIcon
us0 f404 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f404 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f404 1994 778 28 28 14 0 #rect
us0 f404 @|AlternativeIcon #fIcon
us0 f405 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>error message</name>
        <nameStyle>13,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f405 targetWindow NEW:card: #txt
us0 f405 targetDisplay TOP #txt
us0 f405 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
us0 f405 startMethod askQuestion(String,String,List<String>,String) #txt
us0 f405 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f405 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
us0 f405 requestMappingAction 'param.icon="warning";
param.question=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/rootFolderCannotDelete");
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok");
' #txt
us0 f405 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f405 responseMappingAction 'out=in;
' #txt
us0 f405 windowConfiguration '{/title "Error"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f405 isAsynch false #txt
us0 f405 isInnerRd true #txt
us0 f405 isDialog true #txt
us0 f405 2094 780 36 24 -42 15 #rect
us0 f405 @|RichDialogIcon #fIcon
us0 f405 -65536|-1|-16777216 #nodeStyle
us0 f406 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f406 2099 835 26 26 14 0 #rect
us0 f406 @|RichDialogProcessEndIcon #fIcon
us0 f407 expr out #txt
us0 f407 2008 756 2008 778 #arcP
us0 f409 expr out #txt
us0 f409 2112 804 2112 835 #arcP
us0 f410 expr out #txt
us0 f410 2008 706 2008 732 #arcP
us0 f410 0 0.6202216473491985 0 0 #arcLabel
us0 f416 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f416 actionTable 'out=in;
' #txt
us0 f416 actionCode 'in.returnedMessage.text="It is unpossible to delete the root directory of your working path";
in.returnedMessage.type=2;
in.returnedMessage.file=null;' #txt
us0 f416 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f416 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f416 2766 556 36 24 20 -2 #rect
us0 f416 @|RichDialogProcessStepIcon #fIcon
us0 f417 expr in #txt
us0 f417 2734 568 2766 568 #arcP
us0 f412 expr out #txt
us0 f412 2802 568 2867 568 #arcP
us0 f419 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>download content of directory</name>
        <nameStyle>29,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f419 guid 11EB58926D29F7A5 #txt
us0 f419 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f419 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f419 actionTable 'out=in;
' #txt
us0 f419 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;

List<java.io.File> files = FileHandler.getFiles(in.selectedFolderOnServer.path);
if(!files.isEmpty()){
	if(files.size()<2){
			in.downloadHandler.download(files.get(0).getName(), files.get(0).getPath());
	}else{
			in.downloadHandler.downloadFiles(files);
	}
}
	
else{
	in.returnedMessage.text=ivy.cms.co("/ch/xpertline/common/ria/component/fileManagement/messages/information/selectedDirectoryEmpty");
	in.returnedMessage.type=FileHandler.INFORMATION_MESSAGE;
}' #txt
us0 f419 1430 742 20 20 -54 -28 #rect
us0 f419 @|RichDialogProcessStartIcon #fIcon
us0 f420 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f420 1427 795 26 26 14 0 #rect
us0 f420 @|RichDialogProcessEndIcon #fIcon
us0 f421 expr out #txt
us0 f421 1440 762 1440 795 #arcP
us0 f422 guid 11EB9F1B8465A0BD #txt
us0 f422 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f422 method _moveFile(String,java.util.ArrayList) #txt
us0 f422 disableUIEvents false #txt
us0 f422 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String newPath,java.util.ArrayList documentOnServer> param = methodEvent.getInputArguments();
' #txt
us0 f422 inParameterMapAction 'out.DnDDestinationPath=param.newPath;
' #txt
us0 f422 inActionCode 'out.filesToMove.clear();
for(Object o: param.documentOnServer){
	if(o instanceof ch.ivyteam.ivy.addons.filemanager.DocumentOnServer){
		out.filesToMove.add(o as ch.ivyteam.ivy.addons.filemanager.DocumentOnServer);
	}
}

' #txt
us0 f422 outParameterDecl '<> result;
' #txt
us0 f422 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_moveFile(String,List&lt;DocumentOnServer&gt;)</name>
        <nameStyle>40,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f422 4638 158 20 20 -82 -30 #rect
us0 f422 @|RichDialogMethodStartIcon #fIcon
us0 f423 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f423 actionTable 'out=in;
' #txt
us0 f423 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

in.DnDDestinationPath=in.serverPath+in.DnDDestinationPath;
in.responseBoolean=true;
in.consistancyOK=true;
in.filesUnpossibleToMove.clear();

List<DocumentOnServer> docs = new List<DocumentOnServer>();
try{
	docs.addAll(in.fileManagementHandler.getDocumentsInPath(in.DnDDestinationPath,false));
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}

for(DocumentOnServer doc: in.filesToMove){
	if(doc.locked.equals("1")){
		ivy.log.debug(doc.filename+" is locked",null);
		in.filesUnpossibleToMove.add(doc);
	}else{
		//I look at all the documents in the destination Folder
		for(DocumentOnServer doc1: docs){
			//If the path is the same, then don''t move
			//This should never happened
			if(doc.path.equals(doc1.path)){
				in.filesUnpossibleToMove.add(doc);
				break;
			}
			//if document locked in destination Folder, and should be overwriten,
			// we don''t move
			if(doc1.locked.equals("1")){
				java.io.File file = new java.io.File(doc1.path);
				if(doc.filename.equals(doc1.filename)){
					in.filesUnpossibleToMove.add(doc);
					break;
				}
			}		
		}
	}
}
in.filesToMove.removeAll(in.filesUnpossibleToMove);
' #txt
us0 f423 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f423 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Diverses checks (Filelocked, already in destination folder)</name>
        <nameStyle>59,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f423 4630 204 36 24 20 -2 #rect
us0 f423 @|RichDialogProcessStepIcon #fIcon
us0 f424 expr out #txt
us0 f424 4648 178 4648 204 #arcP
us0 f425 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f425 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f425 4634 370 28 28 14 0 #rect
us0 f425 @|AlternativeIcon #fIcon
us0 f427 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f427 actionTable 'out=in;
' #txt
us0 f427 actionCode '
import ch.ivyteam.ivy.addons.filemanager.FileHandler;

in.selectedDocument=in.filesToMove.get(0);

in.returnedMessage=FileHandler.moveFile(
	new java.io.File(in.selectedDocument.path),
	in.DnDDestinationPath,
	in.responseBoolean);' #txt
us0 f427 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f427 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>move file </name>
        <nameStyle>10,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f427 4886 372 36 24 -27 -31 #rect
us0 f427 @|RichDialogProcessStepIcon #fIcon
us0 f428 expr in #txt
us0 f428 outCond in.filesToMove.size()>0 #txt
us0 f428 4662 384 4886 384 #arcP
us0 f429 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f429 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f429 4890 442 28 28 14 0 #rect
us0 f429 @|AlternativeIcon #fIcon
us0 f430 expr out #txt
us0 f430 4904 396 4904 442 #arcP
us0 f433 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f433 actionTable 'out=in;
' #txt
us0 f433 actionCode 'import ch.ivyteam.ivy.addons.filemanager.KeyValuePair;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

in.selectedDocument.path=in.returnedMessage.file.getPath();


List<KeyValuePair> KVP = new List<KeyValuePair>();
KeyValuePair kvp = new KeyValuePair();

kvp.key="FILEPATH";
kvp.value=in.fileManagementHandler.escapeBackSlash(in.selectedDocument.path);
KVP.add(kvp);

List<String> conditions = new List<String>();
conditions.add("FILEID ="+in.selectedDocument.fileID);
try{
	if(in.fileManagementHandler.updateDocuments(KVP,conditions)>0){
		Number i=0;
		for(DocumentOnServer doc: in.documentsInDb){
			if(doc.fileID.equals(in.selectedDocument.fileID)){
				if(!in.isRecursive){
					in.documentsInDb.removeAt(i);
				}else{
					in.documentsInDb.get(i).path=in.selectedDocument.path;
					in.selectedDocument=in.documentsInDb.get(i);
					in.documentsInDb.removeAt(i);
					in.documentsInDb.add(i,in.selectedDocument);
				}
				break;
			}
			i++;
		}
	}
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f433 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f433 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Get the new path 
of the file moved
and update it in the 
file prop storing system</name>
        <nameStyle>82,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f433 4766 556 36 24 -117 -84 #rect
us0 f433 @|RichDialogProcessStepIcon #fIcon
us0 f434 expr in #txt
us0 f434 outCond in.returnedMessage.type==ch.ivyteam.ivy.addons.filemanager.FileHandler.SUCCESS_MESSAGE #txt
us0 f434 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>File moved</name>
        <nameStyle>10,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f434 4890 456 4784 556 #arcP
us0 f434 1 4784 456 #addKink
us0 f434 0 0.27358490566037735 0 -13 #arcLabel
us0 f435 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Ask what to do</name>
        <nameStyle>14,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f435 targetWindow NEW:card: #txt
us0 f435 targetDisplay TOP #txt
us0 f435 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
us0 f435 startMethod askQuestion(String,String,List<String>,String) #txt
us0 f435 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f435 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
us0 f435 requestMappingAction 'param.icon="question";
param.question=in.stringVariable;
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/overwrite"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/overwriteAll"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/skip")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/overwrite");
' #txt
us0 f435 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f435 responseMappingAction 'out=in;
out.pressedButton=result.pressedButton;
' #txt
us0 f435 windowConfiguration '{/title "<%=in.windowTitle%>"/width 500 /height 250 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f435 isAsynch false #txt
us0 f435 isInnerRd true #txt
us0 f435 isDialog true #txt
us0 f435 5086 492 36 24 -105 -6 #rect
us0 f435 @|RichDialogIcon #fIcon
us0 f435 -985168|-1|-16777216 #nodeStyle
us0 f437 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f437 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f437 5090 586 28 28 14 0 #rect
us0 f437 @|AlternativeIcon #fIcon
us0 f438 expr out #txt
us0 f438 5104 516 5104 586 #arcP
us0 f439 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f439 actionTable 'out=in;
' #txt
us0 f439 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
in.selectedDocument=in.filesToMove.get(0);
in.returnedMessage=FileHandler.moveFile(
	in.fileToMove,
	in.DnDDestinationPath,
	false);' #txt
us0 f439 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f439 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>move file </name>
        <nameStyle>10,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f439 4886 524 36 24 27 -9 #rect
us0 f439 @|RichDialogProcessStepIcon #fIcon
us0 f441 expr out #txt
us0 f441 4904 524 4904 470 #arcP
us0 f441 0 0.15862613537024314 0 0 #arcLabel
us0 f442 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f442 actionTable 'out=in;
' #txt
us0 f442 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
List <java.io.File> files = new List<java.io.File>();
for(DocumentOnServer doc : in.filesToMove){
	files.add(new java.io.File(in.DnDDestinationPath+doc.filename));
}
panel.deleteFiles(files);


in.responseBoolean=false;
' #txt
us0 f442 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f442 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Overwrite all</name>
        <nameStyle>13,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f442 5134 588 36 24 -32 16 #rect
us0 f442 @|RichDialogProcessStepIcon #fIcon
us0 f443 expr in #txt
us0 f443 outCond in.pressedButton.equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/overwriteAll")) #txt
us0 f443 5118 600 5134 600 #arcP
us0 f444 expr out #txt
us0 f444 5152 588 4922 384 #arcP
us0 f444 1 5152 384 #addKink
us0 f444 0 0.8276895747204317 0 0 #arcLabel
us0 f445 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f445 actionTable 'out=in;
' #txt
us0 f445 actionCode in.filesToMove.removeAt(0); #txt
us0 f445 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f445 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>remove the last moved doc from the list</name>
        <nameStyle>39,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f445 4766 676 36 24 -111 18 #rect
us0 f445 @|RichDialogProcessStepIcon #fIcon
us0 f446 expr in #txt
us0 f446 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>skip</name>
        <nameStyle>4,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f446 5104 614 4802 688 #arcP
us0 f446 1 5104 688 #addKink
us0 f446 1 0.3130841121495327 0 -10 #arcLabel
us0 f449 expr out #txt
us0 f449 4766 688 4648 398 #arcP
us0 f449 1 4648 688 #addKink
us0 f449 1 0.2762988154698122 0 0 #arcLabel
us0 f450 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f450 actionTable 'out=in;
' #txt
us0 f450 actionCode in.consistancyOK=false; #txt
us0 f450 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f450 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set consistancy</name>
        <nameStyle>15,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f450 4822 612 36 24 0 13 #rect
us0 f450 @|RichDialogProcessStepIcon #fIcon
us0 f451 expr in #txt
us0 f451 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Error</name>
        <nameStyle>5,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f451 4897 463 4840 612 #arcP
us0 f451 1 4840 528 #addKink
us0 f451 0 0.9876566145045813 0 0 #arcLabel
us0 f447 expr out #txt
us0 f447 4840 636 4802 688 #arcP
us0 f447 1 4840 688 #addKink
us0 f447 0 0.7788632386714909 0 0 #arcLabel
us0 f452 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f452 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>success ?</name>
        <nameStyle>9,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f452 4554 370 28 28 -33 -34 #rect
us0 f452 @|AlternativeIcon #fIcon
us0 f453 expr in #txt
us0 f453 4634 384 4582 384 #arcP
us0 f453 0 0.7576692504412407 0 0 #arcLabel
us0 f455 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Error</name>
        <nameStyle>5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f455 targetWindow NEW:card: #txt
us0 f455 targetDisplay TOP #txt
us0 f455 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
us0 f455 startMethod askQuestion(String,String,List<String>,String) #txt
us0 f455 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f455 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
us0 f455 requestMappingAction 'param.icon="error";
param.question=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/fileTransferError");
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok");
' #txt
us0 f455 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f455 responseMappingAction 'out=in;
' #txt
us0 f455 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f455 isAsynch false #txt
us0 f455 isInnerRd true #txt
us0 f455 isDialog true #txt
us0 f455 4550 492 36 24 20 -2 #rect
us0 f455 @|RichDialogIcon #fIcon
us0 f455 -65536|-1|-16777216 #nodeStyle
us0 f458 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f458 4483 547 26 26 14 0 #rect
us0 f458 @|RichDialogProcessEndIcon #fIcon
us0 f461 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f461 actionTable 'out=in;
' #txt
us0 f461 actionCode panel.refresh(); #txt
us0 f461 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f461 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh
All</name>
        <nameStyle>11,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f461 4550 548 36 24 22 -15 #rect
us0 f461 @|RichDialogProcessStepIcon #fIcon
us0 f462 expr out #txt
us0 f462 4568 516 4568 548 #arcP
us0 f462 0 0.6747959571670371 0 0 #arcLabel
us0 f460 expr out #txt
us0 f460 4550 560 4509 560 #arcP
us0 f460 0 0.44427157237405074 0 0 #arcLabel
us0 f467 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithServerPathAndIsRecursivetAndShowTree(String,Boolean,ApplicationContext,Boolean)</name>
        <nameStyle>88,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f467 guid 11EBB991F2E68963 #txt
us0 f467 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f467 method startWithServerPathAndIsRecursiveAndShowTree(String,Boolean,Boolean) #txt
us0 f467 disableUIEvents false #txt
us0 f467 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath,java.lang.Boolean isRecursive,java.lang.Boolean showTree> param = methodEvent.getInputArguments();
' #txt
us0 f467 inParameterMapAction 'out.isRecursive=param.isRecursive;
out.isToolbarVisible=true;
out.isTreeVisible=param.showTree;
out.serverPath=param.serverPath;
' #txt
us0 f467 outParameterDecl '<> result;
' #txt
us0 f467 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
us0 f467 238 270 20 20 13 0 #rect
us0 f467 @|RichDialogInitStartIcon #fIcon
us0 f175 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f175 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f175 4634 306 28 28 14 0 #rect
us0 f175 @|AlternativeIcon #fIcon
us0 f426 expr in #txt
us0 f426 outCond in.filesToMove.size()>0 #txt
us0 f426 4648 334 4648 370 #arcP
us0 f490 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f490 actionTable 'out=in;
' #txt
us0 f490 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/information"); #txt
us0 f490 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f490 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>No File to move</name>
        <nameStyle>15,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f490 4710 308 36 24 -39 15 #rect
us0 f490 @|RichDialogProcessStepIcon #fIcon
us0 f491 expr in #txt
us0 f491 4662 320 4710 320 #arcP
us0 f492 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f492 4835 307 26 26 14 0 #rect
us0 f492 @|RichDialogProcessEndIcon #fIcon
us0 f149 expr in #txt
us0 f149 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f149 970 552 202 608 #arcP
us0 f149 1 808 552 #addKink
us0 f149 2 808 608 #addKink
us0 f149 0 0.16698278908440284 0 0 #arcLabel
us0 f167 expr out #txt
us0 f167 839 648 202 608 #arcP
us0 f167 1 808 648 #addKink
us0 f167 2 808 608 #addKink
us0 f167 1 0.14309765537323896 0 0 #arcLabel
us0 f125 expr out #txt
us0 f125 838 608 202 608 #arcP
us0 f125 0 0.4562085961957109 0 0 #arcLabel
us0 f178 guid 11ED3C35BD2F9DBA #txt
us0 f178 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f178 method getIsRecursive() #txt
us0 f178 disableUIEvents false #txt
us0 f178 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f178 outParameterDecl '<java.lang.Boolean isRecursive> result;
' #txt
us0 f178 outParameterMapAction 'result.isRecursive=in.isRecursive;
' #txt
us0 f178 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getIsRecursive()</name>
        <nameStyle>16,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f178 2406 982 20 20 -33 -34 #rect
us0 f178 @|RichDialogMethodStartIcon #fIcon
us0 f469 guid 11ED3C3707049453 #txt
us0 f469 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f469 method setIsRecursive(Boolean) #txt
us0 f469 disableUIEvents false #txt
us0 f469 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Boolean isRecursive> param = methodEvent.getInputArguments();
' #txt
us0 f469 inParameterMapAction 'out.isRecursive=param.isRecursive;
' #txt
us0 f469 outParameterDecl '<> result;
' #txt
us0 f469 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setIsRecursive(Boolean)</name>
        <nameStyle>23,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f469 2278 982 20 20 -41 -33 #rect
us0 f469 @|RichDialogMethodStartIcon #fIcon
us0 f470 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f470 2403 1019 26 26 14 0 #rect
us0 f470 @|RichDialogProcessEndIcon #fIcon
us0 f471 expr out #txt
us0 f471 2416 1002 2416 1019 #arcP
us0 f473 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>toogle recursive</name>
        <nameStyle>16,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f473 guid 11ED3CBB378B6FDB #txt
us0 f473 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f473 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f473 actionTable 'out=in;
' #txt
us0 f473 actionCode panel.setIsRecursive(!in.isRecursive); #txt
us0 f473 1990 166 20 20 -31 -26 #rect
us0 f473 @|RichDialogProcessStartIcon #fIcon
us0 f474 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f474 1987 203 26 26 14 0 #rect
us0 f474 @|RichDialogProcessEndIcon #fIcon
us0 f475 expr out #txt
us0 f475 2000 186 2000 203 #arcP
us0 f388 guid 11ED3F3051528067 #txt
us0 f388 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f388 method getAdvancedActionsEnable() #txt
us0 f388 disableUIEvents false #txt
us0 f388 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f388 outParameterDecl '<java.lang.Boolean enabled> result;
' #txt
us0 f388 outParameterMapAction 'result.enabled=in.advancedActionsEnabled;
' #txt
us0 f388 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getAdvancedActionsEnable()</name>
        <nameStyle>26,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f388 2838 238 20 20 -55 -32 #rect
us0 f388 @|RichDialogMethodStartIcon #fIcon
us0 f389 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f389 2835 283 26 26 14 0 #rect
us0 f389 @|RichDialogProcessEndIcon #fIcon
us0 f390 expr out #txt
us0 f390 2848 258 2848 283 #arcP
us0 f391 guid 11ED3F34F1D69059 #txt
us0 f391 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f391 method setAdvancedActionsEnable(Boolean) #txt
us0 f391 disableUIEvents false #txt
us0 f391 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Boolean enable> param = methodEvent.getInputArguments();
' #txt
us0 f391 inParameterMapAction 'out.advancedActionsEnabled=param.enable;
' #txt
us0 f391 outParameterDecl '<> result;
' #txt
us0 f391 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setAdvancedActionsEnable
(Boolean)</name>
        <nameStyle>34,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f391 2702 238 20 20 -39 -40 #rect
us0 f391 @|RichDialogMethodStartIcon #fIcon
us0 f392 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f392 2699 283 26 26 14 0 #rect
us0 f392 @|RichDialogProcessEndIcon #fIcon
us0 f476 expr out #txt
us0 f476 2712 258 2712 283 #arcP
us0 f503 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f503 actionTable 'out=in;
' #txt
us0 f503 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.FolderOnServer;

try{
	if(panel.ordnersTree.selectedTreeNode.value instanceof FolderOnServer){
		FolderOnServer FOS = panel.ordnersTree.selectedTreeNode.value as FolderOnServer;
		in.selectedFolderOnServer.name=FOS.name;
		in.selectedFolderOnServer.path=FOS.path;
	}else {
		in.selectedFolderOnServer.path=in.serverPath;
	}
	in.uploadHandler.setServerPath(in.selectedFolderOnServer.path);
	
	in.documentsInDb = new List<DocumentOnServer>();
	in.documentsInDb=in.fileManagementHandler.getDocumentsInPath(in.selectedFolderOnServer.path,in.isRecursive);
	
	in.uploadHandler.uploadPreparedUpload(in.fileUpload);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f503 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f503 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Get the files in selected folder
and upload the file</name>
        <nameStyle>52,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f503 4598 1132 36 24 25 -12 #rect
us0 f503 @|RichDialogProcessStepIcon #fIcon
us0 f223 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f223 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>All the choosed 
files were moved</name>
        <nameStyle>33,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f223 4418 370 28 28 -82 -56 #rect
us0 f223 @|AlternativeIcon #fIcon
us0 f224 expr in #txt
us0 f224 outCond in.consistancyOK #txt
us0 f224 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f224 4554 384 4446 384 #arcP
us0 f224 0 0.3235294117647059 0 -1 #arcLabel
us0 f225 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>tells that some 
files were not moved</name>
        <nameStyle>37,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f225 targetWindow NEW:card: #txt
us0 f225 targetDisplay TOP #txt
us0 f225 richDialogId ch.ivyteam.ivy.addons.commondialogs.MessageDialog #txt
us0 f225 startMethod showMessage(String) #txt
us0 f225 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f225 requestActionDecl '<String message> param;' #txt
us0 f225 requestMappingAction 'param.message=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/filesNotMovedBecauseLocked");
' #txt
us0 f225 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f225 responseMappingAction 'out=in;
' #txt
us0 f225 windowConfiguration '{/title "<%=in.windowTitle%>"/width 450 /height 150 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f225 isAsynch false #txt
us0 f225 isInnerRd true #txt
us0 f225 isDialog true #txt
us0 f225 4414 484 36 24 8 -49 #rect
us0 f225 @|RichDialogIcon #fIcon
us0 f225 -985168|-1|-16777216 #nodeStyle
us0 f456 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f456 actionTable 'out=in;
' #txt
us0 f456 actionCode 'in.selectedDocument=in.filesToMove.get(0);
out.fileToMove= new java.io.File(in.selectedDocument.path);
List<java.io.File> oneFile = new List<java.io.File>();
oneFile.add(new java.io.File(in.DnDDestinationPath+in.selectedDocument.filename));
panel.deleteFiles(oneFile);' #txt
us0 f456 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f456 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Delete the overwriten file</name>
        <nameStyle>26,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f456 4974 588 36 24 -61 17 #rect
us0 f456 @|RichDialogProcessStepIcon #fIcon
us0 f459 expr in #txt
us0 f459 outCond in.pressedButton.equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/overwrite")) #txt
us0 f459 5090 600 5010 600 #arcP
us0 f459 0 0.5190620903112219 0 0 #arcLabel
us0 f440 expr out #txt
us0 f440 4974 600 4904 548 #arcP
us0 f440 1 4904 600 #addKink
us0 f440 0 0.7621718788904441 0 0 #arcLabel
us0 f494 guid 11ED8D735F06B96F #txt
us0 f494 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f494 method deleteFiles(List<java.io.File>) #txt
us0 f494 disableUIEvents false #txt
us0 f494 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.io.File> filesList> param = methodEvent.getInputArguments();
' #txt
us0 f494 inActionCode 'out.fileManagementHandler.deleteFiles(param.filesList);
out.returnedMessage=ch.ivyteam.ivy.addons.filemanager.FileHandler.deleteFiles(param.filesList);
' #txt
us0 f494 outParameterDecl '<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> result;
' #txt
us0 f494 outParameterMapAction 'result.returnedMessage=in.returnedMessage;
' #txt
us0 f494 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>deleteFiles(List&lt;File&gt;)</name>
        <nameStyle>23,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f494 3206 230 20 20 -46 -31 #rect
us0 f494 @|RichDialogMethodStartIcon #fIcon
us0 f513 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>copy Files</name>
        <nameStyle>10,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f513 guid 11ED95C2B7BDD5B8 #txt
us0 f513 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f513 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f513 actionTable 'out=in;
' #txt
us0 f513 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
in.copiedDocuments = new List<DocumentOnServer>();
in.copiedDocuments.addAll(panel.filesTable.selectedListEntries);

if(!in.copiedDocuments.isEmpty()){
	in.copyOn=true;
}else{
	in.copyOn=false;
}' #txt
us0 f513 926 990 20 20 -23 -30 #rect
us0 f513 @|RichDialogProcessStartIcon #fIcon
us0 f514 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f514 923 1123 26 26 14 0 #rect
us0 f514 @|RichDialogProcessEndIcon #fIcon
us0 f516 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Paste</name>
        <nameStyle>5,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f516 guid 11ED95E211BB06C2 #txt
us0 f516 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f516 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f516 actionTable 'out=in;
' #txt
us0 f516 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
in.responseBoolean=true;
if(in.#selectedFolderOnServer == null || in.selectedFolderOnServer.path.trim().equals("")){
	in.copyOn=false;
}
if(in.copiedDocuments.size()<=0){
	in.copyOn=false;
}
/*
else{
	if(FileHandler.formatPathWithEndSeparator(in.selectedFolderOnServer.path).equals(
		FileHandler.formatPathWithEndSeparator(FileHandler.getFileDirectoryPath(new java.io.File(in.copiedDocuments.get(0).path))))){
			in.responseBoolean=false;
	}
}*/' #txt
us0 f516 1142 958 20 20 -12 -30 #rect
us0 f516 @|RichDialogProcessStartIcon #fIcon
us0 f519 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f519 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Copy On ?</name>
        <nameStyle>9,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f519 1138 1106 28 28 14 0 #rect
us0 f519 @|AlternativeIcon #fIcon
us0 f523 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f523 1075 1107 26 26 14 0 #rect
us0 f523 @|RichDialogProcessEndIcon #fIcon
us0 f524 expr in #txt
us0 f524 1138 1120 1101 1120 #arcP
us0 f508 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f508 3203 323 26 26 14 0 #rect
us0 f508 @|RichDialogProcessEndIcon #fIcon
us0 f579 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f579 actionTable 'out=in;
' #txt
us0 f579 actionCode 'try{
	List<String> l = [ivy.case.getApplication().getName(), in.panelId.toString(), in.selectedFolderOnServer.path];
	panel.fireSE_FilesDeleted(l);

}catch(Throwable t){
	// do nothing
	ivy.log.error(t.getMessage());
}

panel.refreshActualSelectedFolder();' #txt
us0 f579 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f579 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh the selected directory</name>
        <nameStyle>30,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f579 4414 548 36 24 -138 16 #rect
us0 f579 @|RichDialogProcessStepIcon #fIcon
us0 f80 expr out #txt
us0 f80 4432 508 4432 548 #arcP
us0 f454 expr in #txt
us0 f454 outCond in.filesUnpossibleToMove.size()==0 #txt
us0 f454 4418 384 4414 560 #arcP
us0 f454 1 4360 384 #addKink
us0 f454 2 4360 560 #addKink
us0 f454 1 0.40264264247267284 0 0 #arcLabel
us0 f580 expr out #txt
us0 f580 4450 560 4483 560 #arcP
us0 f584 guid 11EDF26AA8C360DC #txt
us0 f584 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f584 method refreshActualSelectedFolder() #txt
us0 f584 disableUIEvents false #txt
us0 f584 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refreshActualSelectedFolder()</name>
    </language>
</elementInfo>
' #txt
us0 f584 822 902 20 20 15 -10 #rect
us0 f584 @|RichDialogMethodStartIcon #fIcon
us0 f472 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f472 actionTable 'out=in;
' #txt
us0 f472 actionCode panel.refreshActualSelectedFolder(); #txt
us0 f472 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f472 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh selected folder</name>
        <nameStyle>23,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f472 2270 1020 36 24 -46 13 #rect
us0 f472 @|RichDialogProcessStepIcon #fIcon
us0 f585 expr out #txt
us0 f585 2288 1002 2288 1020 #arcP
us0 f586 expr out #txt
us0 f586 2306 1032 2403 1032 #arcP
us0 f587 expr out #txt
us0 f587 822 912 760 804 #arcP
us0 f587 1 760 912 #addKink
us0 f587 1 0.20109991315726877 0 0 #arcLabel
us0 f588 guid 11EF7ED5CEAD6145 #txt
us0 f588 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f588 method getDocumentsListInPath(String) #txt
us0 f588 disableUIEvents false #txt
us0 f588 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String path> param = methodEvent.getInputArguments();
' #txt
us0 f588 inParameterMapAction 'out.stringVariable=param.path;
' #txt
us0 f588 outParameterDecl '<List<ch.ivyteam.ivy.addons.filemanager.DocumentOnServer> documentsList> result;
' #txt
us0 f588 outActionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
in.stringVariable=FileHandler.formatPathWithEndSeparator(in.stringVariable,false);
result.documentsList= in.fileManagementHandler.getDocumentsInPath(in.stringVariable,false);

' #txt
us0 f588 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getDocumentsListInPath(String)</name>
        <nameStyle>30,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f588 2902 830 20 20 -63 -33 #rect
us0 f588 @|RichDialogMethodStartIcon #fIcon
us0 f592 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f592 2899 883 26 26 14 0 #rect
us0 f592 @|RichDialogProcessEndIcon #fIcon
us0 f593 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f593 actionTable 'out=in;
' #txt
us0 f593 actionCode 'in.documentsInDb.clear();
//get the documents recursively
try{
	in.documentsInDb.addAll(in.fileManagementHandler.getDocumentsInPath(in.serverPath,true));
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f593 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f593 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Get Files in the serverPath on the DB </name>
        <nameStyle>38,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f593 166 716 36 24 21 -5 #rect
us0 f593 @|RichDialogProcessStepIcon #fIcon
us0 f46 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f46 actionTable 'out=in;
' #txt
us0 f46 actionCode 'in.documentsInDb.clear();
//get the documents 
try{
	in.documentsInDb.addAll(in.fileManagementHandler.getDocumentsInPath(in.selectedFolderOnServer.path,in.isRecursive));
	in.filesNumber=in.documentsInDb.size().toString();
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f46 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f46 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f46 254 860 36 24 20 -2 #rect
us0 f46 @|RichDialogProcessStepIcon #fIcon
us0 f49 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f49 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>in.isRecursive ?</name>
        <nameStyle>16,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f49 170 858 28 28 -109 -12 #rect
us0 f49 @|AlternativeIcon #fIcon
us0 f2 expr in #txt
us0 f2 outCond !in.isRecursive #txt
us0 f2 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>No</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f2 198 872 254 872 #arcP
us0 f2 0 0.5663717851626299 0 0 #arcLabel
us0 f45 expr in #txt
us0 f45 184 886 259 944 #arcP
us0 f45 1 184 944 #addKink
us0 f45 0 0.8360498204893557 0 0 #arcLabel
us0 f48 expr out #txt
us0 f48 272 884 272 931 #arcP
us0 f59 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f59 actionTable 'out=in;
' #txt
us0 f59 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f59 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>register the modification</name>
        <nameStyle>25,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f59 1710 92 36 24 20 -2 #rect
us0 f59 @|RichDialogProcessStepIcon #fIcon
us0 f60 expr out #txt
us0 f60 1728 58 1728 92 #arcP
us0 f61 expr out #txt
us0 f61 1728 116 1728 147 #arcP
us0 f14 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f14 1499 651 26 26 14 0 #rect
us0 f14 @|RichDialogProcessEndIcon #fIcon
us0 f62 expr out #txt
us0 f62 1512 626 1512 651 #arcP
us0 f63 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f63 2275 1475 26 26 14 0 #rect
us0 f63 @|RichDialogProcessEndIcon #fIcon
us0 f64 expr out #txt
us0 f64 2288 1452 2288 1475 #arcP
us0 f65 expr out #txt
us0 f65 2912 850 2912 883 #arcP
us0 f66 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f66 actionTable 'out=in;
' #txt
us0 f66 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;


panel.refreshActualSelectedFolder();
if(in.returnedMessage.type!=FileHandler.ERROR_MESSAGE){
	try{
		List<String> l = [ivy.case.getApplication().getName(), in.panelId.toString(), in.selectedFolderOnServer.path];
		panel.fireSE_FilesDeleted(l);
		}catch(Throwable t){
			// do nothing
			}
}' #txt
us0 f66 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f66 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f66 3198 276 36 24 20 -2 #rect
us0 f66 @|RichDialogProcessStepIcon #fIcon
us0 f67 expr out #txt
us0 f67 3216 250 3216 276 #arcP
us0 f68 expr out #txt
us0 f68 3216 300 3216 323 #arcP
us0 f32 expr out #txt
us0 f32 3784 492 3784 532 #arcP
us0 f69 expr out #txt
us0 f69 4616 1100 4616 1132 #arcP
us0 f70 expr out #txt
us0 f70 4616 1156 4616 1195 #arcP
us0 f72 expr out #txt
us0 f72 4648 228 4648 306 #arcP
us0 f79 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f79 actionTable 'out=in;
' #txt
us0 f79 actionCode 'try{
	in.responseBoolean=in.fileManagementHandler.isFileLocked(new java.io.File(in.stringVariable));
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f79 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f79 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f79 2318 276 36 24 20 -2 #rect
us0 f79 @|RichDialogProcessStepIcon #fIcon
us0 f82 expr out #txt
us0 f82 2336 258 2336 276 #arcP
us0 f84 expr out #txt
us0 f84 2336 300 2336 331 #arcP
us0 f90 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f90 actionTable 'out=in;
' #txt
us0 f90 actionCode 'try{
	in.responseBoolean=in.fileManagementHandler.isDocumentOnServerLocked(in.selectedDocument);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f90 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f90 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f90 2438 276 36 24 20 -2 #rect
us0 f90 @|RichDialogProcessStepIcon #fIcon
us0 f97 expr out #txt
us0 f97 2456 258 2456 276 #arcP
us0 f98 expr out #txt
us0 f98 2456 300 2456 331 #arcP
us0 f37 expr out #txt
us0 f37 184 828 184 858 #arcP
us0 f38 expr out #txt
us0 f38 984 516 984 538 #arcP
us0 f39 expr in #txt
us0 f39 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>No</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f39 998 400 998 552 #arcP
us0 f39 1 1088 400 #addKink
us0 f39 2 1088 552 #addKink
us0 f39 1 0.5116120497769995 0 0 #arcLabel
us0 f40 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f40 971 683 26 26 14 0 #rect
us0 f40 @|RichDialogProcessEndIcon #fIcon
us0 f50 expr out #txt
us0 f50 984 620 984 683 #arcP
us0 f52 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithServerPathAndFileManagementHandler(String,AbstractFileManagementHandler)</name>
        <nameStyle>81,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f52 guid 11F5FC089E86DEF1 #txt
us0 f52 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f52 method startWithServerPathAndFileManagementHandler(String,ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler) #txt
us0 f52 disableUIEvents false #txt
us0 f52 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath,ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler fileManagementHandler> param = methodEvent.getInputArguments();
' #txt
us0 f52 inParameterMapAction 'out.fileManagementHandler=param.fileManagementHandler;
out.isRecursive=false;
out.isToolbarVisible=true;
out.isTreeVisible=true;
out.serverPath=param.serverPath;
' #txt
us0 f52 outParameterDecl '<> result;
' #txt
us0 f52 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
us0 f52 238 174 20 20 13 0 #rect
us0 f52 @|RichDialogInitStartIcon #fIcon
us0 f99 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithServerPath
AndFileManagementHandler
AndIsRecursive
AndShowTree(String,AbstractFileManagementHandler,Boolean,ApplicationContext,Boolean)</name>
        <nameStyle>144,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f99 guid 11F5FC117241ED1E #txt
us0 f99 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f99 method startWithServerPathAndFileManagementHandlerAndIsRecursiveAndShowTree(String,ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler,Boolean,Boolean) #txt
us0 f99 disableUIEvents false #txt
us0 f99 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath,ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler fileManagementHandler,java.lang.Boolean isRecursive,java.lang.Boolean showTree> param = methodEvent.getInputArguments();
' #txt
us0 f99 inParameterMapAction 'out.fileManagementHandler=param.fileManagementHandler;
out.isRecursive=param.isRecursive;
out.isToolbarVisible=true;
out.isTreeVisible=param.showTree;
out.serverPath=param.serverPath;
' #txt
us0 f99 outParameterDecl '<> result;
' #txt
us0 f99 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
us0 f99 134 54 20 20 13 0 #rect
us0 f99 @|RichDialogInitStartIcon #fIcon
us0 f117 guid 11F5FC4BC829D19A #txt
us0 f117 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f117 method getFileManagementHandler() #txt
us0 f117 disableUIEvents false #txt
us0 f117 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f117 outParameterDecl '<ch.xpertline.ria.util.db.AbstractFileManagementHandler fileManagementHandler> result;
' #txt
us0 f117 outParameterMapAction 'result.fileManagementHandler=in.fileManagementHandler;
' #txt
us0 f117 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getFileManagementHandler()</name>
        <nameStyle>26,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f117 3078 814 20 20 -58 -32 #rect
us0 f117 @|RichDialogMethodStartIcon #fIcon
us0 f118 guid 11F5FC4C96385706 #txt
us0 f118 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f118 method setFileManagementHandler(ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler) #txt
us0 f118 disableUIEvents false #txt
us0 f118 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.filemanager.database.AbstractFileManagementHandler fileManagementHandler> param = methodEvent.getInputArguments();
' #txt
us0 f118 inParameterMapAction 'out.fileManagementHandler=param.fileManagementHandler;
' #txt
us0 f118 outParameterDecl '<> result;
' #txt
us0 f118 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setFileManagementHandler(AbstractFileManagementHandler)</name>
        <nameStyle>55,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f118 3262 814 20 20 -86 -32 #rect
us0 f118 @|RichDialogMethodStartIcon #fIcon
us0 f119 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f119 3163 859 26 26 14 0 #rect
us0 f119 @|RichDialogProcessEndIcon #fIcon
us0 f120 expr out #txt
us0 f120 3096 828 3164 865 #arcP
us0 f148 expr out #txt
us0 f148 3263 828 3187 866 #arcP
us0 f169 guid 11F7F17163AD1939 #txt
us0 f169 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f169 method addFiles(List<java.io.File>) #txt
us0 f169 disableUIEvents false #txt
us0 f169 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.io.File> listOfFiles> param = methodEvent.getInputArguments();
' #txt
us0 f169 inParameterMapAction 'out.tmpListOfFiles=param.listOfFiles;
' #txt
us0 f169 outParameterDecl '<> result;
' #txt
us0 f169 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>addFiles(List&lt;File&gt;)</name>
        <nameStyle>20,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f169 2278 806 20 20 -40 -29 #rect
us0 f169 @|RichDialogMethodStartIcon #fIcon
us0 f170 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f170 actionTable 'out=in;
' #txt
us0 f170 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
try{
	if(in.applicationUserName.trim().equalsIgnoreCase("")){
		in.applicationUserName = ivy.session.getSessionUserName();
	}
}catch(Throwable t){
	ivy.log.error(t.getMessage(),t);
}
in.today =  new Date().format("dd.MM.yyyy");
String time= new Time().format("HH:mm:ss");
in.filesToAdd.clear();
for(java.io.File f: in.tmpListOfFiles){
	DocumentOnServer doc = new DocumentOnServer();
	doc.filename=f.getName();
	doc.path=FileHandler.formatPath(f.getPath());
	doc.fileSize=FileHandler.getFileSize(f);
	doc.creationDate=in.today;
	doc.creationTime = time;
	doc.userID=in.applicationUserName;
	doc.modificationDate=in.today;
	doc.modificationTime= time;
	doc.locked="0";
	doc.modificationUserID=in.applicationUserName;
	in.filesToAdd.add(doc);
	
}
if(in.filesToAdd.size()>0){
	try{
		in.fileManagementHandler.insertDocuments(in.filesToAdd);
	}catch(Throwable t){
		in.errorUtil.panelId = in.panelId;
		in.errorUtil.errorOccurred=true;
		in.errorUtil.throwable = t;
		in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
		panel.fireErrorOccurred(in.errorUtil);
	}
	panel.refreshActualSelectedFolder();
}
' #txt
us0 f170 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f170 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Transform Files 
into DocumentOnServer
add them to the file DB
Refresh the Table</name>
        <nameStyle>80,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f170 2270 868 36 24 20 -25 #rect
us0 f170 @|RichDialogProcessStepIcon #fIcon
us0 f171 expr out #txt
us0 f171 2288 826 2288 868 #arcP
us0 f173 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f173 2275 923 26 26 14 0 #rect
us0 f173 @|RichDialogProcessEndIcon #fIcon
us0 f174 expr out #txt
us0 f174 2288 892 2288 923 #arcP
us0 f172 guid 11F87F43B461C9F4 #txt
us0 f172 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f172 method selectFolderOnServer(String) #txt
us0 f172 disableUIEvents false #txt
us0 f172 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String path> param = methodEvent.getInputArguments();
' #txt
us0 f172 inParameterMapAction 'out.stringVariable=param.path;
' #txt
us0 f172 outParameterDecl '<ch.xpertline.common.ria.component.FolderOnServer selectedFolderOnServer> result;
' #txt
us0 f172 outParameterMapAction 'result.selectedFolderOnServer=in.selectedFolderOnServer;
' #txt
us0 f172 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>selectFolderOnServer(String)</name>
        <nameStyle>28,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f172 3086 230 20 20 -59 -30 #rect
us0 f172 @|RichDialogMethodStartIcon #fIcon
us0 f192 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f192 actionTable 'out=in;
' #txt
us0 f192 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FolderOnServer;
import com.ulcjava.base.application.tree.TreePath;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;


TreePath treepath= FileHandler.getTreePath(in.serverPath,in.stringVariable);
FolderOnServer fos = treepath.getLastPathComponent() as FolderOnServer;

Tree tree = new Tree(fos, fos.name);
panel.ordnersTree.setSelectedTreeNode(tree);
' #txt
us0 f192 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f192 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f192 3078 268 36 24 20 -2 #rect
us0 f192 @|RichDialogProcessStepIcon #fIcon
us0 f194 expr out #txt
us0 f194 3096 250 3096 268 #arcP
us0 f195 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f195 3083 331 26 26 14 0 #rect
us0 f195 @|RichDialogProcessEndIcon #fIcon
us0 f196 expr out #txt
us0 f196 3096 292 3096 331 #arcP
us0 f197 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f197 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f197 170 634 28 28 14 0 #rect
us0 f197 @|AlternativeIcon #fIcon
us0 f200 expr out #txt
us0 f200 184 620 184 634 #arcP
us0 f202 expr in #txt
us0 f202 outCond !in.serverPath.equalsIgnoreCase("") #txt
us0 f202 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>serverPath setted</name>
        <nameStyle>17,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f202 184 662 184 716 #arcP
us0 f216 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f216 actionTable 'out=in;
' #txt
us0 f216 actionCode 'in.documentsInDb.clear();
in.filesNumber="0";' #txt
us0 f216 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f216 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>clear documentsList</name>
        <nameStyle>19,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f216 414 932 36 24 20 -2 #rect
us0 f216 @|RichDialogProcessStepIcon #fIcon
us0 f217 expr in #txt
us0 f217 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>serverPath empty</name>
        <nameStyle>16,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f217 198 648 450 944 #arcP
us0 f217 1 512 648 #addKink
us0 f217 2 512 944 #addKink
us0 f217 1 0.06801002622925054 0 0 #arcLabel
us0 f213 expr out #txt
us0 f213 414 944 285 944 #arcP
us0 f218 guid 120618E9BF5E4644 #txt
us0 f218 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f218 method editFile(java.io.File) #txt
us0 f218 disableUIEvents false #txt
us0 f218 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.io.File fileToEdit> param = methodEvent.getInputArguments();
' #txt
us0 f218 inActionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
out.docToEdit=new DocumentOnServer();
if(param.fileToEdit!=null){
	out.docToEdit.filename=param.fileToEdit.getName();
	out.docToEdit.path=param.fileToEdit.getPath();
	
}' #txt
us0 f218 outParameterDecl '<> result;
' #txt
us0 f218 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>editFile(File)</name>
        <nameStyle>14,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f218 1598 46 20 20 13 0 #rect
us0 f218 @|RichDialogMethodStartIcon #fIcon
us0 f221 guid 12061966131AA5AD #txt
us0 f221 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f221 method setSelectedFile(java.io.File) #txt
us0 f221 disableUIEvents false #txt
us0 f221 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.io.File fileToSelect> param = methodEvent.getInputArguments();
' #txt
us0 f221 inActionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;


out.selectedDocument=new DocumentOnServer();
out.selectedDocument.filename=param.fileToSelect.getName();
out.selectedDocument.path=FileHandler.getFileDirectoryPath(param.fileToSelect);


' #txt
us0 f221 outParameterDecl '<> result;
' #txt
us0 f221 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setSelectedFile(File)</name>
        <nameStyle>21,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f221 2958 230 20 20 -50 -27 #rect
us0 f221 @|RichDialogMethodStartIcon #fIcon
us0 f222 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f222 actionTable 'out=in;
' #txt
us0 f222 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

for(DocumentOnServer doc: in.documentsInDb){
	if(doc.filename.equalsIgnoreCase(in.selectedDocument.filename)){
		panel.filesTable.setSelectedListEntry(doc);
	}
}' #txt
us0 f222 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f222 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f222 2950 268 36 24 20 -2 #rect
us0 f222 @|RichDialogProcessStepIcon #fIcon
us0 f286 expr out #txt
us0 f286 2968 250 2968 268 #arcP
us0 f287 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f287 2955 315 26 26 14 0 #rect
us0 f287 @|RichDialogProcessEndIcon #fIcon
us0 f289 expr out #txt
us0 f289 2968 292 2968 315 #arcP
us0 f220 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f220 actionTable 'out=in;
' #txt
us0 f220 actionCode 'try{
	in.responseBoolean=in.fileManagementHandler.lockDocument(in.docToEdit,in.applicationUserName);
	if(in.responseBoolean){
		panel.desktopHandlerPanel.openFileAndCheckForChanges(new java.io.File(in.docToEdit.path));
	}else{
		
		panel.desktopHandlerPanel.openFile(new java.io.File(in.docToEdit.path));
	}
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}
panel.refreshActualSelectedFolder();' #txt
us0 f220 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f220 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f220 1590 92 36 24 20 -2 #rect
us0 f220 @|RichDialogProcessStepIcon #fIcon
us0 f294 expr out #txt
us0 f294 1608 66 1608 92 #arcP
us0 f294 0 0.2947530688525722 0 0 #arcLabel
us0 f295 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f295 1595 139 26 26 14 0 #rect
us0 f295 @|RichDialogProcessEndIcon #fIcon
us0 f296 expr out #txt
us0 f296 1608 116 1608 139 #arcP
us0 f296 0 0.5540388867410073 0 0 #arcLabel
us0 f219 guid 1206627B6174D5EB #txt
us0 f219 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f219 method setToolBarVisible(Boolean) #txt
us0 f219 disableUIEvents false #txt
us0 f219 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Boolean toolbarVisible> param = methodEvent.getInputArguments();
' #txt
us0 f219 inParameterMapAction 'out.isToolbarVisible=param.toolbarVisible;
' #txt
us0 f219 outParameterDecl '<> result;
' #txt
us0 f219 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setToolBarVisible(Boolean)</name>
        <nameStyle>26,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f219 3222 94 20 20 -74 -33 #rect
us0 f219 @|RichDialogMethodStartIcon #fIcon
us0 f297 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f297 3219 131 26 26 14 0 #rect
us0 f297 @|RichDialogProcessEndIcon #fIcon
us0 f298 expr out #txt
us0 f298 3232 114 3232 131 #arcP
us0 f299 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refreshActualSelectedFolder</name>
        <nameStyle>27,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f299 guid 120667533EA41579 #txt
us0 f299 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f299 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f299 actionTable 'out=in;
' #txt
us0 f299 750 926 20 20 13 0 #rect
us0 f299 @|RichDialogProcessStartIcon #fIcon
us0 f300 expr out #txt
us0 f300 760 926 760 804 #arcP
us0 f302 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>printFile</name>
        <nameStyle>9,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f302 guid 120C262EB26F4439 #txt
us0 f302 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f302 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f302 actionTable 'out=in;
' #txt
us0 f302 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

if(panel.#filesTable.getSelectedListEntry()!=null && panel.filesTable.getSelectedListEntry() instanceof DocumentOnServer){
	DocumentOnServer doc = new DocumentOnServer();
  doc = panel.filesTable.selectedListEntry as DocumentOnServer;
	
	panel.desktopHandlerPanel.printFile(new java.io.File(doc.path));
}
' #txt
us0 f302 1094 62 20 20 13 0 #rect
us0 f302 @|RichDialogProcessStartIcon #fIcon
us0 f303 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f303 1091 115 26 26 14 0 #rect
us0 f303 @|RichDialogProcessEndIcon #fIcon
us0 f304 expr out #txt
us0 f304 1104 82 1104 115 #arcP
us0 f305 guid 120C26354DCCBE26 #txt
us0 f305 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f305 method printFile(java.io.File) #txt
us0 f305 disableUIEvents false #txt
us0 f305 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.io.File file> param = methodEvent.getInputArguments();
' #txt
us0 f305 inActionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
out.docToEdit=new DocumentOnServer();
if(param.#file!=null){
	out.docToEdit.filename=param.file.getName();
	out.docToEdit.path=param.file.getPath();
	
}' #txt
us0 f305 outParameterDecl '<> result;
' #txt
us0 f305 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>printFile(File)</name>
        <nameStyle>15,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f305 2326 94 20 20 13 0 #rect
us0 f305 @|RichDialogMethodStartIcon #fIcon
us0 f307 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f307 2323 187 26 26 14 0 #rect
us0 f307 @|RichDialogProcessEndIcon #fIcon
us0 f309 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f309 actionTable 'out=in;
' #txt
us0 f309 actionCode '
if(in.#docToEdit!=null && !in.docToEdit.filename.equalsIgnoreCase("") && !in.docToEdit.path.equalsIgnoreCase("")){
	panel.desktopHandlerPanel.printFile(new java.io.File(in.docToEdit.path));
}
' #txt
us0 f309 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f309 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f309 2318 140 36 24 20 -2 #rect
us0 f309 @|RichDialogProcessStepIcon #fIcon
us0 f310 expr out #txt
us0 f310 2336 114 2336 140 #arcP
us0 f308 expr out #txt
us0 f308 2336 164 2336 187 #arcP
us0 f311 guid 12157BC298799BEE #txt
us0 f311 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f311 method _onChangeFile(ch.ivyteam.ivy.addons.filemanager.ReturnedMessage) #txt
us0 f311 disableUIEvents false #txt
us0 f311 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.addons.filemanager.ReturnedMessage returnedMessage> param = methodEvent.getInputArguments();
' #txt
us0 f311 inParameterMapAction 'out.fileUpload=param.returnedMessage.file;
' #txt
us0 f311 outParameterDecl '<> result;
' #txt
us0 f311 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_onChangeFile(ReturnedMessage)</name>
        <nameStyle>30,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f311 4694 798 20 20 13 0 #rect
us0 f311 @|RichDialogMethodStartIcon #fIcon
us0 f313 expr out #txt
us0 f313 4704 818 4630 872 #arcP
us0 f313 1 4704 872 #addKink
us0 f313 1 0.12802911826973662 0 0 #arcLabel
us0 f314 guid 121D2CB5BD9B235F #txt
us0 f314 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f314 method zipFiles(List<java.io.File>) #txt
us0 f314 disableUIEvents false #txt
us0 f314 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.io.File> files> param = methodEvent.getInputArguments();
' #txt
us0 f314 inParameterMapAction 'out.tmpListOfFiles=param.files;
' #txt
us0 f314 outParameterDecl '<ch.xpertline.common.ria.component.ReturnedMessage returnedMessage> result;
' #txt
us0 f314 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>zipFiles(List&lt;File&gt;)</name>
        <nameStyle>20,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f314 2390 1630 20 20 -43 -32 #rect
us0 f314 @|RichDialogMethodStartIcon #fIcon
us0 f315 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f315 actionTable 'out=in;
' #txt
us0 f315 actionCode 'import ch.ivyteam.ivy.addons.filemanager.ZipHandler;

out.returnedMessage.file = ZipHandler.makeZip(in.selectedFolderOnServer.path,in.stringVariable,in.tmpListOfFiles);' #txt
us0 f315 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f315 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>make Zip</name>
        <nameStyle>8,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f315 2382 1884 36 24 20 -2 #rect
us0 f315 @|RichDialogProcessStepIcon #fIcon
us0 f317 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f317 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check if Files selected</name>
        <nameStyle>23,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f317 2386 1674 28 28 14 0 #rect
us0 f317 @|AlternativeIcon #fIcon
us0 f318 expr out #txt
us0 f318 2400 1650 2400 1674 #arcP
us0 f321 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Ask For the zip Name</name>
        <nameStyle>20,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f321 targetWindow NEW:card: #txt
us0 f321 targetDisplay TOP #txt
us0 f321 richDialogId ch.ivyteam.ivy.addons.commondialogs.SingleLineInputDialog #txt
us0 f321 startMethod askInput(String,String,List<String>,String) #txt
us0 f321 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f321 requestActionDecl '<String question, String defaultValue, List<String> buttons, String defaultButton> param;' #txt
us0 f321 requestMappingAction 'param.question=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/action/enterNameOfZip");
param.buttons=["OK", ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/cancel")];
param.defaultButton="OK";
' #txt
us0 f321 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f321 responseMappingAction 'out=in;
out.pressedButton=result.pressedButton;
out.stringVariable=result.inputString;
' #txt
us0 f321 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f321 isAsynch false #txt
us0 f321 isInnerRd true #txt
us0 f321 isDialog true #txt
us0 f321 2382 1764 36 24 20 -2 #rect
us0 f321 @|RichDialogIcon #fIcon
us0 f321 -985168|-1|-16777216 #nodeStyle
us0 f323 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f323 actionTable 'out=in;
' #txt
us0 f323 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/enterFileName"); #txt
us0 f323 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f323 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>winTitle</name>
        <nameStyle>8,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f323 2382 1716 36 24 20 -2 #rect
us0 f323 @|RichDialogProcessStepIcon #fIcon
us0 f325 expr in #txt
us0 f325 outCond !in.tmpListOfFiles.isEmpty() #txt
us0 f325 2400 1702 2400 1716 #arcP
us0 f322 expr out #txt
us0 f322 2400 1740 2400 1764 #arcP
us0 f326 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f326 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check user input</name>
        <nameStyle>16,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f326 2386 1818 28 28 14 0 #rect
us0 f326 @|AlternativeIcon #fIcon
us0 f328 expr out #txt
us0 f328 2400 1788 2400 1818 #arcP
us0 f316 expr in #txt
us0 f316 outCond '!in.stringVariable.trim().equalsIgnoreCase("") && in.pressedButton.equalsIgnoreCase("OK")' #txt
us0 f316 2400 1846 2400 1884 #arcP
us0 f347 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f347 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>ZIP file generated?</name>
        <nameStyle>19,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f347 2386 1946 28 28 14 0 #rect
us0 f347 @|AlternativeIcon #fIcon
us0 f365 expr out #txt
us0 f365 2400 1908 2400 1946 #arcP
us0 f432 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f432 2387 2067 26 26 14 0 #rect
us0 f432 @|RichDialogProcessEndIcon #fIcon
us0 f463 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f463 actionTable 'out=in;
' #txt
us0 f463 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/error"); #txt
us0 f463 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f463 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>winTitle</name>
        <nameStyle>8,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f463 2326 1948 36 24 -23 -35 #rect
us0 f463 @|RichDialogProcessStepIcon #fIcon
us0 f465 expr in #txt
us0 f465 2386 1960 2362 1960 #arcP
us0 f466 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f466 targetWindow NEW #txt
us0 f466 targetDisplay TOP #txt
us0 f466 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
us0 f466 startMethod askQuestion(String,String,List<String>,String) #txt
us0 f466 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f466 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
us0 f466 requestMappingAction 'param.icon="error";
param.question=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/fileNotCreated");
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok");
' #txt
us0 f466 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f466 responseMappingAction 'out=in;
' #txt
us0 f466 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f466 isAsynch true #txt
us0 f466 isInnerRd true #txt
us0 f466 isDialog true #txt
us0 f466 2262 1948 36 24 20 -2 #rect
us0 f466 @|RichDialogIcon #fIcon
us0 f466 -65536|-1|-16777216 #nodeStyle
us0 f477 expr out #txt
us0 f477 2326 1960 2298 1960 #arcP
us0 f478 expr out #txt
us0 f478 2280 1972 2387 2080 #arcP
us0 f478 1 2280 2080 #addKink
us0 f478 1 0.008098370489836667 0 0 #arcLabel
us0 f479 expr in #txt
us0 f479 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Cancel</name>
        <nameStyle>6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f479 2414 1832 2413 2080 #arcP
us0 f479 1 2536 1832 #addKink
us0 f479 2 2536 2080 #addKink
us0 f479 1 0.37890525117926527 0 0 #arcLabel
us0 f344 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>zip</name>
        <nameStyle>3,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f344 guid 121D2EC1E4BC52C3 #txt
us0 f344 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f344 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f344 actionTable 'out=in;
' #txt
us0 f344 2110 1630 20 20 -6 -34 #rect
us0 f344 @|RichDialogProcessStartIcon #fIcon
us0 f345 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f345 actionTable 'out=in;
' #txt
us0 f345 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
in.selectedDocuments = new List<DocumentOnServer>();
in.tmpListOfFiles.clear();
for(DocumentOnServer doc: panel.filesTable.selectedListEntries){
	in.selectedDocuments.add(doc);
	out.tmpListOfFiles.add(new java.io.File(doc.path));
}


' #txt
us0 f345 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f345 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>make list of selected Files</name>
        <nameStyle>27,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f345 2102 1676 36 24 20 -2 #rect
us0 f345 @|RichDialogProcessStepIcon #fIcon
us0 f480 expr out #txt
us0 f480 2120 1650 2120 1676 #arcP
us0 f485 expr out #txt
us0 f485 2138 1688 2386 1688 #arcP
us0 f482 expr in #txt
us0 f482 2414 1688 2413 2080 #arcP
us0 f482 1 2704 1688 #addKink
us0 f482 2 2704 2080 #addKink
us0 f482 1 0.32846030412283533 0 0 #arcLabel
us0 f319 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f319 actionTable 'out=in;
' #txt
us0 f319 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;

in.today =  new Date().format("d.M.yyyy");
in.filesToAdd.clear();
java.io.File f = in.returnedMessage.file;

DocumentOnServer doc = new DocumentOnServer();
	doc.filename=f.getName();
	doc.path=FileHandler.formatPath(f.getPath());
	doc.fileSize=FileHandler.getFileSize(f);
	doc.creationDate=in.today;
	doc.creationTime = new Time().format();
	doc.userID=in.applicationUserName;
	doc.modificationDate=in.today;
	doc.modificationTime= doc.creationTime;
	doc.locked="0";
	doc.modificationUserID=in.applicationUserName;
	in.filesToAdd.add(doc);
	try{
		in.fileManagementHandler.insertDocuments(in.filesToAdd);
	}catch(Throwable t){
		in.errorUtil.panelId = in.panelId;
		in.errorUtil.errorOccurred=true;
		in.errorUtil.throwable = t;
		in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
		panel.fireErrorOccurred(in.errorUtil);
	}
	
	panel.refreshActualSelectedFolder();' #txt
us0 f319 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f319 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>inserts new Zip
in the DB and
refreshes table</name>
        <nameStyle>16,7,9
29,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f319 2382 2004 36 24 21 -21 #rect
us0 f319 @|RichDialogProcessStepIcon #fIcon
us0 f320 expr in #txt
us0 f320 outCond 'in.#returnedMessage.#file !=null' #txt
us0 f320 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f320 2400 1974 2400 2004 #arcP
us0 f431 expr out #txt
us0 f431 2400 2028 2400 2067 #arcP
us0 f486 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startAsPathChooser(String)</name>
        <nameStyle>26,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f486 guid 121ECC3E323F08FF #txt
us0 f486 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f486 method startAsPathChooser(String) #txt
us0 f486 disableUIEvents false #txt
us0 f486 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath> param = methodEvent.getInputArguments();
' #txt
us0 f486 inParameterMapAction 'out.advancedActionsEnabled=true;
out.isPathChooserFlowLayoutVisible=true;
out.isRecursive=false;
out.isToolbarVisible=false;
out.isTreeVisible=true;
out.serverPath=param.serverPath;
' #txt
us0 f486 outParameterDecl '<java.lang.String choosedPath> result;
' #txt
us0 f486 outParameterMapAction 'result.choosedPath=in.pathChooserReturn;
' #txt
us0 f486 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "startVisible(Boolean)"/parameterMapping "param.visible=false;\n"/initScript ""}}' #txt
us0 f486 342 334 20 20 13 0 #rect
us0 f486 @|RichDialogInitStartIcon #fIcon
us0 f487 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f487 actionTable 'out=in;
' #txt
us0 f487 actionCode 'panel.pathChooserFlowLayoutPane.visible=true;
panel.fileToolbarPane.visible=false;
panel.fileToolbarPane2.visible=false;
panel.fileToolbarPane3.visible=false;
panel.ServerFilePopupMenu.visible=false;
panel.ServerFilePopupMenu.enabled=false;
panel.buttonsGridBagLayoutPane.visible=false;

out.pathChooserReturn ="";
' #txt
us0 f487 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f487 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>change visibility
of components</name>
        <nameStyle>31,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f487 238 308 36 24 -64 9 #rect
us0 f487 @|RichDialogProcessStepIcon #fIcon
us0 f488 expr out #txt
us0 f488 342 341 274 325 #arcP
us0 f495 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>OKPathChooser</name>
        <nameStyle>13,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f495 guid 121ECCB3C821D160 #txt
us0 f495 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f495 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f495 actionTable 'out=in;
' #txt
us0 f495 actionCode 'out.pathChooserReturn = in.selectedFolderOnServer.path;' #txt
us0 f495 694 1318 20 20 -38 -36 #rect
us0 f495 @|RichDialogProcessStartIcon #fIcon
us0 f496 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>cancelPathChooser</name>
        <nameStyle>17,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f496 guid 121ECCB8283CD1EF #txt
us0 f496 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f496 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f496 actionTable 'out=in;
' #txt
us0 f496 actionCode out.pathChooserReturn=""; #txt
us0 f496 806 1318 20 20 -53 -36 #rect
us0 f496 @|RichDialogProcessStartIcon #fIcon
us0 f497 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f497 guid 121ECCBBB15C0161 #txt
us0 f497 747 1387 26 26 14 0 #rect
us0 f497 @|RichDialogEndIcon #fIcon
us0 f498 expr out #txt
us0 f498 710 1335 752 1389 #arcP
us0 f499 expr out #txt
us0 f499 809 1335 767 1389 #arcP
us0 f500 expr out #txt
us0 f500 742 792 166 816 #arcP
us0 f500 1 696 792 #addKink
us0 f500 2 696 1008 #addKink
us0 f500 3 32 1008 #addKink
us0 f500 4 32 816 #addKink
us0 f500 3 0.5700547312990867 0 0 #arcLabel
us0 f457 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f457 actionTable 'out=in;
' #txt
us0 f457 actionCode 'if(in.#uploadHandler != null){

	in.uploadHandler.uploadMultiFile(true);

}' #txt
us0 f457 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f457 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f457 1190 684 36 24 20 -2 #rect
us0 f457 @|RichDialogProcessStepIcon #fIcon
us0 f501 expr out #txt
us0 f501 1208 658 1208 684 #arcP
us0 f7 expr out #txt
us0 f7 1208 708 1208 723 #arcP
us0 f502 guid 1236EF4A33ECB5DC #txt
us0 f502 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f502 method _onProgressWithText(String) #txt
us0 f502 disableUIEvents false #txt
us0 f502 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String progressText> param = methodEvent.getInputArguments();
' #txt
us0 f502 inParameterMapAction 'out.progressText=param.progressText;
' #txt
us0 f502 inActionCode 'if(out.progressUnit<0){
	out.progressUnit=0;
	}' #txt
us0 f502 outParameterDecl '<> result;
' #txt
us0 f502 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_onProgressWithText(String)</name>
        <nameStyle>27,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f502 4318 142 20 20 -64 -32 #rect
us0 f502 @|RichDialogMethodStartIcon #fIcon
us0 f504 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f504 4318 198 20 20 13 0 #rect
us0 f504 @|RichDialogProcessEndIcon #fIcon
us0 f505 expr out #txt
us0 f505 4328 162 4328 198 #arcP
us0 f506 guid 1236FB8C20C2E141 #txt
us0 f506 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f506 method _onUploadSuccess(List<java.io.File>) #txt
us0 f506 disableUIEvents false #txt
us0 f506 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.io.File> uploadedFiles> param = methodEvent.getInputArguments();
' #txt
us0 f506 inParameterMapAction 'out.tmpListOfFiles=param.uploadedFiles;
' #txt
us0 f506 inActionCode 'if(out.progressUnit>=0){
	out.progressUnit=-1;
}
' #txt
us0 f506 outParameterDecl '<> result;
' #txt
us0 f506 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_onUploadSuccess(List&lt;File&gt;)</name>
        <nameStyle>28,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f506 4142 134 20 20 -85 -31 #rect
us0 f506 @|RichDialogMethodStartIcon #fIcon
us0 f507 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f507 actionTable 'out=in;
' #txt
us0 f507 actionCode 'if(in.#tmpListOfFiles!=null){
	panel.addFiles(in.tmpListOfFiles);
}
' #txt
us0 f507 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f507 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>call panel addFiles</name>
        <nameStyle>19,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f507 4134 172 36 24 20 -2 #rect
us0 f507 @|RichDialogProcessStepIcon #fIcon
us0 f509 expr out #txt
us0 f509 4152 154 4152 172 #arcP
us0 f510 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f510 4142 230 20 20 13 0 #rect
us0 f510 @|RichDialogProcessEndIcon #fIcon
us0 f511 expr out #txt
us0 f511 4152 196 4152 230 #arcP
us0 f512 guid 1237014B0D3E5743 #txt
us0 f512 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f512 method _askIfOverwriteExistingFiles(List<java.io.File>,List<java.io.File>) #txt
us0 f512 disableUIEvents false #txt
us0 f512 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.io.File> allFilesChoosed,List<java.io.File> filesToOverwrite> param = methodEvent.getInputArguments();
' #txt
us0 f512 inParameterMapAction 'out.filesToOverwrite=param.filesToOverwrite;
out.tmpListOfFiles=param.allFilesChoosed;
' #txt
us0 f512 outParameterDecl '<> result;
' #txt
us0 f512 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_askIfOverwriteExistingFiles(List&lt;File&gt;,List&lt;File&gt;)</name>
        <nameStyle>51,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f512 3774 646 20 20 -130 -29 #rect
us0 f512 @|RichDialogMethodStartIcon #fIcon
us0 f517 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f517 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f517 3770 698 28 28 14 0 #rect
us0 f517 @|AlternativeIcon #fIcon
us0 f518 expr out #txt
us0 f518 3784 666 3784 698 #arcP
us0 f525 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f525 actionTable 'out=in;
' #txt
us0 f525 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
//!panel.isFileLocked(new java.io.File(in.selectedFolderOnServer.path+in.fileUpload.getName()))

List<java.io.File> files = new List<java.io.File>();
List<String> filesToExclude = new List<String>();
files.addAll(in.filesToOverwrite);
in.filesToOverwrite.clear();
String path = FileHandler.formatPathWithEndSeparator(in.selectedFolderOnServer.path);
for(java.io.File f: files){
	if(!panel.isFileLocked(new java.io.File(path+f.getName()))){
		in.filesToOverwrite.add(f);
	}else{
		filesToExclude.add(f.getName());
	}
}

// we exclude from the initial list the locked files
files.clear();

for(java.io.File f: in.tmpListOfFiles){
	String s = f.getName();
	boolean found = false;
	for(String n : filesToExclude){
		if(n.equalsIgnoreCase(s)){
			found=true;
			break;
		}
	}// we just keep the unlocked files
	if(!found){
		files.add(f);
	}
}

in.tmpListOfFiles.clear();
in.tmpListOfFiles.addAll(files);' #txt
us0 f525 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f525 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>exclude from the files to overwrite
the ones that are locked.</name>
        <nameStyle>61,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f525 3766 748 36 24 24 -16 #rect
us0 f525 @|RichDialogProcessStepIcon #fIcon
us0 f529 expr in #txt
us0 f529 outCond 'in.tmpListOfFiles.size()>0 && in.filesToOverwrite.size()>0' #txt
us0 f529 3784 726 3784 748 #arcP
us0 f532 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f532 actionTable 'out=in;
' #txt
us0 f532 actionCode 'try{
	in.fileManagementHandler.deleteFiles(in.filesToOverwrite);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f532 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f532 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delete the files from the fileManagement System</name>
        <nameStyle>47,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f532 3766 1020 36 24 20 -2 #rect
us0 f532 @|RichDialogProcessStepIcon #fIcon
us0 f554 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f554 actionTable 'out=in;
' #txt
us0 f554 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.FolderOnServer;


if(panel.ordnersTree.selectedTreeNode.value instanceof FolderOnServer){
	FolderOnServer FOS = panel.ordnersTree.selectedTreeNode.value as FolderOnServer;
	in.selectedFolderOnServer.name=FOS.name;
	in.selectedFolderOnServer.path=FOS.path;
}else {
	in.selectedFolderOnServer.path=in.serverPath;
}
in.uploadHandler.setServerPath(in.selectedFolderOnServer.path);

in.documentsInDb = new List<DocumentOnServer>();
try{
	in.documentsInDb=in.fileManagementHandler.getDocumentsInPath(in.selectedFolderOnServer.path,in.isRecursive);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f554 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f554 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh the selected folder</name>
        <nameStyle>27,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f554 3766 1068 36 24 20 -2 #rect
us0 f554 @|RichDialogProcessStepIcon #fIcon
us0 f561 expr out #txt
us0 f561 3784 1044 3784 1068 #arcP
us0 f581 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f581 actionTable 'out=in;
' #txt
us0 f581 actionCode 'out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/overwriteFiles");
in.stringVariable="\n\n";
for(java.io.File f : in.filesToOverwrite){
	in.stringVariable+=f.getName()+"\n";
}' #txt
us0 f581 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f581 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>winTitle + message</name>
        <nameStyle>18,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f581 3766 860 36 24 20 -2 #rect
us0 f581 @|RichDialogProcessStepIcon #fIcon
us0 f583 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>ask if overwrite</name>
        <nameStyle>16,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f583 targetWindow NEW:card: #txt
us0 f583 targetDisplay TOP #txt
us0 f583 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
us0 f583 startMethod askQuestion(String,String,List<String>,String) #txt
us0 f583 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f583 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
us0 f583 requestMappingAction 'param.icon="question";
param.question=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/question/overwriteExistingFiles")+in.stringVariable;
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes"),
ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/no")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/yes");
' #txt
us0 f583 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f583 responseMappingAction 'out=in;
out.pressedButton=result.pressedButton;
' #txt
us0 f583 windowConfiguration '{/title "<%=in.windowTitle%>"/width 500 /height 300 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f583 isAsynch false #txt
us0 f583 isInnerRd true #txt
us0 f583 isDialog true #txt
us0 f583 3766 924 36 24 20 -2 #rect
us0 f583 @|RichDialogIcon #fIcon
us0 f583 -985168|-1|-16777216 #nodeStyle
us0 f589 expr out #txt
us0 f589 3784 884 3784 924 #arcP
us0 f590 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f590 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f590 3770 962 28 28 14 0 #rect
us0 f590 @|AlternativeIcon #fIcon
us0 f591 expr out #txt
us0 f591 3784 948 3784 962 #arcP
us0 f540 expr in #txt
us0 f540 outCond in.pressedButton.equalsIgnoreCase(ivy.cms.co("/ch/xpertline/common/plainStrings/Yes")) #txt
us0 f540 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f540 3784 990 3784 1020 #arcP
us0 f594 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f594 actionTable 'out=in;
' #txt
us0 f594 actionCode in.uploadHandler.uploadPreparedFiles(in.tmpListOfFiles); #txt
us0 f594 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f594 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>upload Prepared Files</name>
        <nameStyle>21,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f594 3766 1124 36 24 20 -2 #rect
us0 f594 @|RichDialogProcessStepIcon #fIcon
us0 f595 expr out #txt
us0 f595 3784 1092 3784 1124 #arcP
us0 f596 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f596 3774 1190 20 20 13 0 #rect
us0 f596 @|RichDialogProcessEndIcon #fIcon
us0 f597 expr out #txt
us0 f597 3784 1148 3784 1190 #arcP
us0 f600 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f600 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>in.filesToOverwrite.size()&gt;0</name>
        <nameStyle>28,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f600 3770 802 28 28 14 0 #rect
us0 f600 @|AlternativeIcon #fIcon
us0 f601 expr out #txt
us0 f601 3784 772 3784 802 #arcP
us0 f582 expr in #txt
us0 f582 outCond ' in.filesToOverwrite.size()>0' #txt
us0 f582 3784 830 3784 860 #arcP
us0 f603 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f603 actionTable 'out=in;
' #txt
us0 f603 actionCode 'List<java.io.File> files = new List<java.io.File>();
//for each files to upload, we look if we can take it
for(java.io.File ff: in.tmpListOfFiles){
	boolean found = false;
	String s = ff.getName();
	for(java.io.File f: in.filesToOverwrite){
		if(f.getName().equalsIgnoreCase(s)){
			found=true;
			break;
		}
	}
	if(!found){
		files.add(ff);
	}
}

in.tmpListOfFiles.clear();
in.tmpListOfFiles.addAll(files);
' #txt
us0 f603 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f603 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>We just upload the Files
that won''t overwrite others</name>
        <nameStyle>52,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f603 4086 964 36 24 23 -15 #rect
us0 f603 @|RichDialogProcessStepIcon #fIcon
us0 f604 expr in #txt
us0 f604 3798 976 4086 976 #arcP
us0 f604 0 0.7162196300362453 0 0 #arcLabel
us0 f605 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f605 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>still any Files to upload?</name>
        <nameStyle>26,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f605 4090 1122 28 28 14 0 #rect
us0 f605 @|AlternativeIcon #fIcon
us0 f606 expr out #txt
us0 f606 4104 988 4104 1122 #arcP
us0 f606 0 0.4955537994490308 0 0 #arcLabel
us0 f598 expr in #txt
us0 f598 outCond in.tmpListOfFiles.size()>0 #txt
us0 f598 4090 1136 3802 1136 #arcP
us0 f607 expr in #txt
us0 f607 4104 1150 3794 1200 #arcP
us0 f607 1 4104 1200 #addKink
us0 f607 1 0.4110820338482195 0 0 #arcLabel
us0 f608 expr in #txt
us0 f608 3798 816 4118 1136 #arcP
us0 f608 1 4336 816 #addKink
us0 f608 2 4336 1136 #addKink
us0 f608 0 0.48531454463070045 0 0 #arcLabel
us0 f602 expr in #txt
us0 f602 3794 716 4118 1136 #arcP
us0 f602 1 4032 816 #addKink
us0 f602 2 4336 816 #addKink
us0 f602 3 4336 1136 #addKink
us0 f602 1 0.0 0 0 #arcLabel
us0 f599 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f599 actionTable 'out=in;
' #txt
us0 f599 actionCode 'out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/overwriteFiles");
in.stringVariable=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/question/overwriteExistingFileByMove")+"\n\n"+in.returnedMessage.file.getName();
ivy.log.debug(in.stringVariable);
out.pressedButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/overwrite");
' #txt
us0 f599 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f599 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>WinTitle and
message</name>
        <nameStyle>20,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f599 5030 444 36 24 -31 -46 #rect
us0 f599 @|RichDialogProcessStepIcon #fIcon
us0 f609 expr in #txt
us0 f609 outCond in.returnedMessage.type==ch.ivyteam.ivy.addons.filemanager.FileHandler.INFORMATION_MESSAGE #txt
us0 f609 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>File already exits</name>
        <nameStyle>18,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f609 4918 456 5030 456 #arcP
us0 f609 0 0.37719298245614036 0 -12 #arcLabel
us0 f610 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f610 actionTable 'out=in;
' #txt
us0 f610 actionCode 'try{
	in.fileManagementHandler.lockDocument(in.selectedDocument,in.applicationUserName);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f610 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f610 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Lock with
FileManagement
Handler</name>
        <nameStyle>32,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f610 1286 284 36 24 -118 -24 #rect
us0 f610 @|RichDialogProcessStepIcon #fIcon
us0 f611 expr in #txt
us0 f611 outCond !in.responseBoolean #txt
us0 f611 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f611 1304 246 1304 284 #arcP
us0 f612 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f612 actionTable 'out=in;
' #txt
us0 f612 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/confirmdeleteDir"); #txt
us0 f612 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f612 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f612 1990 828 36 24 20 -2 #rect
us0 f612 @|RichDialogProcessStepIcon #fIcon
us0 f613 expr in #txt
us0 f613 outCond in.responseBoolean #txt
us0 f613 2008 806 2008 828 #arcP
us0 f394 expr out #txt
us0 f394 2008 852 2008 868 #arcP
us0 f614 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f614 actionTable 'out=in;
' #txt
us0 f614 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/information"); #txt
us0 f614 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f614 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>win title
information</name>
        <nameStyle>21,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f614 966 444 36 24 -86 -18 #rect
us0 f614 @|RichDialogProcessStepIcon #fIcon
us0 f615 expr in #txt
us0 f615 outCond panel.filesTable.selectedListEntries.size()>in.selectedDocuments.size() #txt
us0 f615 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Yes</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f615 984 414 984 444 #arcP
us0 f615 0 0.3333333333333333 0 0 #arcLabel
us0 f293 expr out #txt
us0 f293 984 468 984 492 #arcP
us0 f616 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f616 actionTable 'out=in;
' #txt
us0 f616 actionCode out.returnedMessage.text=""; #txt
us0 f616 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f616 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f616 3006 580 36 24 20 -2 #rect
us0 f616 @|RichDialogProcessStepIcon #fIcon
us0 f617 expr out #txt
us0 f617 3062 592 3042 592 #arcP
us0 f143 expr out #txt
us0 f143 3006 592 2989 592 #arcP
us0 f618 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f618 actionTable 'out=in;
' #txt
us0 f618 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning"); #txt
us0 f618 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f618 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f618 1766 1300 36 24 20 -2 #rect
us0 f618 @|RichDialogProcessStepIcon #fIcon
us0 f619 expr in #txt
us0 f619 1750 1312 1766 1312 #arcP
us0 f353 expr out #txt
us0 f353 1802 1312 1830 1312 #arcP
us0 f620 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f620 actionTable 'out=in;
' #txt
us0 f620 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/error"); #txt
us0 f620 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f620 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f620 1654 1412 36 24 20 -2 #rect
us0 f620 @|RichDialogProcessStepIcon #fIcon
us0 f621 expr in #txt
us0 f621 outCond in.returnedMessage.type==2 #txt
us0 f621 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Error</name>
        <nameStyle>5,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f621 1722 1424 1690 1424 #arcP
us0 f621 0 1.0 -14 -24 #arcLabel
us0 f253 expr out #txt
us0 f253 1654 1424 1648 1476 #arcP
us0 f253 1 1648 1424 #addKink
us0 f253 1 0.06760810516808677 0 0 #arcLabel
us0 f622 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f622 actionTable 'out=in;
' #txt
us0 f622 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning"); #txt
us0 f622 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f622 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f622 1718 1468 36 24 20 -2 #rect
us0 f622 @|RichDialogProcessStepIcon #fIcon
us0 f623 expr in #txt
us0 f623 outCond 'in.returnedMessage.type==2 && in.returnedMessage.text.equalsIgnoreCase(ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/fileAlreadyExists"))' #txt
us0 f623 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>File already exists</name>
        <nameStyle>19,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f623 1736 1438 1736 1468 #arcP
us0 f623 0 0.5227272727272727 17 0 #arcLabel
us0 f251 expr out #txt
us0 f251 1736 1492 1736 1508 #arcP
us0 f628 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>unload</name>
        <nameStyle>6,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f628 guid 1239D542A6AE2CD3 #txt
us0 f628 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f628 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f628 actionTable 'out=in;
' #txt
us0 f628 534 1054 20 20 13 0 #rect
us0 f628 @|RichDialogProcessStartIcon #fIcon
us0 f629 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f629 actionTable 'out=in;
' #txt
us0 f629 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileCouple;


try{
	in.fileManagementHandler.unlockFilesEdited(in.serverPath,in.applicationUserName,true);
	List<FileCouple> fcList = panel.desktopHandlerPanel.getEditedFileList();
	List<java.io.File> files = new List<java.io.File>();
	
	for(FileCouple fc:fcList){
		files.add(fc.getServerFile());
		}
	panel.fireSE_FilesUnlocked(files);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f629 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f629 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f629 526 1100 36 24 20 -2 #rect
us0 f629 @|RichDialogProcessStepIcon #fIcon
us0 f630 expr out #txt
us0 f630 544 1074 544 1100 #arcP
us0 f631 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f631 534 1158 20 20 13 0 #rect
us0 f631 @|RichDialogProcessEndIcon #fIcon
us0 f632 expr out #txt
us0 f632 544 1124 544 1158 #arcP
us0 f634 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithServerPath
AndIvyDbConnectionName
AndDbTableName(String,String,String)</name>
        <nameStyle>79,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f634 guid 1239D613DB15DE1C #txt
us0 f634 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f634 method startWithServerPathAndIvyDbConnectionNameAndDbTableName(String,String,String) #txt
us0 f634 disableUIEvents true #txt
us0 f634 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath,java.lang.String ivyDbConnectionName,java.lang.String DbTableName> param = methodEvent.getInputArguments();
' #txt
us0 f634 inParameterMapAction 'out.advancedActionsEnabled=true;
out.DbTableName=param.DbTableName;
out.isRecursive=false;
out.isToolbarVisible=true;
out.isTreeVisible=true;
out.ivyConnexionDBName=param.ivyDbConnectionName;
out.serverPath=param.serverPath;
' #txt
us0 f634 outParameterDecl '<> result;
' #txt
us0 f634 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
us0 f634 246 398 20 20 13 -9 #rect
us0 f634 @|RichDialogInitStartIcon #fIcon
us0 f637 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f637 actionTable 'out=in;
' #txt
us0 f637 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
List<DocumentOnServer> docs = new List<DocumentOnServer>();
docs.addAll(in.documentsInDb);
in.documentsInDb.clear();
for(int i=0; i<docs.size();i++){
	if(docs.get(i).path.equalsIgnoreCase(in.selectedDocument.path)){
		docs.get(i).setLocked("1");
		docs.get(i).lockingUserID=in.applicationUserName;
		break;
	}
}

out.documentsInDb.addAll(docs);' #txt
us0 f637 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f637 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh the list</name>
        <nameStyle>16,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f637 1286 484 36 24 20 -2 #rect
us0 f637 @|RichDialogProcessStepIcon #fIcon
us0 f193 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f193 1294 566 20 20 13 0 #rect
us0 f193 @|RichDialogProcessEndIcon #fIcon
us0 f640 expr in #txt
us0 f640 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f640 1432 310 1322 496 #arcP
us0 f640 1 1432 496 #addKink
us0 f640 0 0.3304842483812081 0 0 #arcLabel
us0 f214 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_fileLocked</name>
        <nameStyle>13,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f214 actionDecl 'List panelIdAndDocumentOnServer;
' #txt
us0 f214 actionTable 'panelIdAndDocumentOnServer=[in.panelId, in.selectedDocument];
' #txt
us0 f214 actionCode panel.fireSE_fileLocked(panelIdAndDocumentOnServer); #txt
us0 f214 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f214 fireEvent SE_fileLocked(List) #txt
us0 f214 1286 444 36 24 20 -2 #rect
us0 f214 @|RichDialogFireEventIcon #fIcon
us0 f641 expr out #txt
us0 f641 1352 396 1322 456 #arcP
us0 f641 1 1352 456 #addKink
us0 f641 1 0.04291620769471808 0 0 #arcLabel
us0 f638 expr out #txt
us0 f638 1304 468 1304 484 #arcP
us0 f642 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f642 actionTable 'out=in;
' #txt
us0 f642 actionCode 'for(int i=0; i<in.documentsInDb.size(); i++){
	if(in.selectedDocument.filename.equals(in.documentsInDb.get(i).filename)){
		panel.filesTable.selectedListEntry = in.documentsInDb.get(i);
	}
}' #txt
us0 f642 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f642 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>select the selectedDoc
in the table</name>
        <nameStyle>35,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f642 1286 524 36 24 26 -13 #rect
us0 f642 @|RichDialogProcessStepIcon #fIcon
us0 f643 expr out #txt
us0 f643 1304 508 1304 524 #arcP
us0 f639 expr out #txt
us0 f639 1304 548 1304 566 #arcP
us0 f645 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f645 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Doc found?</name>
        <nameStyle>10,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f645 5338 138 28 28 -82 -1 #rect
us0 f645 @|AlternativeIcon #fIcon
us0 f647 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f647 actionTable 'out=in;
' #txt
us0 f647 actionCode 'if(in.#selectedDocument != null){
	for(int i=0; i<in.documentsInDb.size(); i++){
		if(in.selectedDocument.filename.equals(in.documentsInDb.get(i).filename)){
			panel.filesTable.selectedListEntry = in.documentsInDb.get(i);
		}
	}
}' #txt
us0 f647 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f647 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f647 5334 204 36 24 20 -2 #rect
us0 f647 @|RichDialogProcessStepIcon #fIcon
us0 f648 expr in #txt
us0 f648 outCond in.updateList #txt
us0 f648 5352 166 5352 204 #arcP
us0 f649 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f649 5342 286 20 20 13 0 #rect
us0 f649 @|RichDialogProcessEndIcon #fIcon
us0 f650 expr out #txt
us0 f650 5352 228 5352 286 #arcP
us0 f651 expr in #txt
us0 f651 5366 152 5362 296 #arcP
us0 f651 1 5440 152 #addKink
us0 f651 2 5440 296 #addKink
us0 f651 1 0.3004318342397848 0 0 #arcLabel
us0 f652 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>email</name>
        <nameStyle>5,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f652 guid 1245703A69A22C7D #txt
us0 f652 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f652 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f652 actionTable 'out=in;
' #txt
us0 f652 1950 1118 20 20 13 0 #rect
us0 f652 @|RichDialogProcessStartIcon #fIcon
us0 f653 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f653 actionTable 'out=in;
' #txt
us0 f653 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
List select = panel.filesTable.getSelectedListEntries();
List<java.io.File> files=new List<java.io.File>();
for(Object o:select){
	if(o instanceof DocumentOnServer){
		DocumentOnServer doc = o as DocumentOnServer;
		files.add(new java.io.File(doc.getPath()));
	}
}
List<String> l = new List<String>();
in.emailContainer.attachments=files;
in.emailContainer.bcc=l;
in.emailContainer.to=l;
in.emailContainer.cc=l;
in.emailContainer.subject="";
in.emailContainer.body="";

panel.desktopHandlerPanel.mail(in.emailContainer);

' #txt
us0 f653 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f653 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>selected Files</name>
        <nameStyle>14,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f653 1942 1164 36 24 21 -10 #rect
us0 f653 @|RichDialogProcessStepIcon #fIcon
us0 f654 expr out #txt
us0 f654 1960 1138 1960 1164 #arcP
us0 f655 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f655 1950 1206 20 20 13 0 #rect
us0 f655 @|RichDialogProcessEndIcon #fIcon
us0 f656 expr out #txt
us0 f656 1960 1188 1960 1206 #arcP
us0 f657 guid 12457B077A3A3717 #txt
us0 f657 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f657 method mail(List<String>,List<String>,List<String>,String,String,Boolean,List<java.io.File>) #txt
us0 f657 disableUIEvents false #txt
us0 f657 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<java.lang.String> to,List<java.lang.String> cc,List<java.lang.String> bcc,java.lang.String subject,java.lang.String body,java.lang.Boolean attachmentsFromOutside,List<java.io.File> attachments> param = methodEvent.getInputArguments();
' #txt
us0 f657 inParameterMapAction 'out.emailContainer.attachments=param.attachments;
out.emailContainer.attachmentsFromOutside=param.attachmentsFromOutside;
out.emailContainer.bcc=param.bcc;
out.emailContainer.body=param.body;
out.emailContainer.cc=param.cc;
out.emailContainer.subject=param.subject;
out.emailContainer.to=param.to;
' #txt
us0 f657 outParameterDecl '<> result;
' #txt
us0 f657 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>mail(List&lt;String&gt;,List&lt;String&gt;,List&lt;String&gt;,String,String,
Boolean,List&lt;File&gt;)</name>
        <nameStyle>78,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f657 2302 1126 20 20 -49 -47 #rect
us0 f657 @|RichDialogMethodStartIcon #fIcon
us0 f41 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f41 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>insert the selected Files or 
attachments come from the outside</name>
        <nameStyle>63,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f41 2298 1170 28 28 16 -25 #rect
us0 f41 @|AlternativeIcon #fIcon
us0 f658 expr out #txt
us0 f658 2312 1146 2312 1170 #arcP
us0 f659 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f659 actionTable 'out=in;
' #txt
us0 f659 actionCode panel.desktopHandlerPanel.mail(in.emailContainer); #txt
us0 f659 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f659 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f659 2262 1212 36 24 20 -2 #rect
us0 f659 @|RichDialogProcessStepIcon #fIcon
us0 f660 expr in #txt
us0 f660 outCond in.emailContainer.attachmentsFromOutside #txt
us0 f660 2306 1192 2290 1212 #arcP
us0 f661 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f661 actionTable 'out=in;
' #txt
us0 f661 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
List select = panel.filesTable.getSelectedListEntries();
List<java.io.File> files=new List<java.io.File>();
for(Object o:select){
	if(o instanceof DocumentOnServer){
		DocumentOnServer doc = o as DocumentOnServer;
		files.add(new java.io.File(doc.getPath()));
	}
}

out.emailContainer.attachments=files;' #txt
us0 f661 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f661 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>selected Files</name>
        <nameStyle>14,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f661 2358 1212 36 24 20 -2 #rect
us0 f661 @|RichDialogProcessStepIcon #fIcon
us0 f662 expr in #txt
us0 f662 2321 1189 2358 1213 #arcP
us0 f663 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f663 2270 1254 20 20 13 0 #rect
us0 f663 @|RichDialogProcessEndIcon #fIcon
us0 f664 expr out #txt
us0 f664 2280 1236 2280 1254 #arcP
us0 f666 expr out #txt
us0 f666 2358 1224 2298 1224 #arcP
us0 f665 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>fileEditableReported</name>
        <nameStyle>20,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f665 guid 12470C7BEA8F153A #txt
us0 f665 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f665 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f665 actionTable 'out=in;
' #txt
us0 f665 actionCode 'import ch.ivyteam.ivy.richdialog.exec.RdEvent;
RdEvent e = event as RdEvent;
in.isFileEditable=false;
if(e.getParameter() != null && e.getParameter() instanceof boolean){
	in.isFileEditable = e.getParameter() as boolean;
}' #txt
us0 f665 1294 46 20 20 -71 -29 #rect
us0 f665 @|RichDialogProcessStartIcon #fIcon
us0 f668 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f668 actionTable 'out=in;
' #txt
us0 f668 actionCode 'try{
	in.responseBoolean=in.fileManagementHandler.isFileLockedByAnotherUser(in.fileToEdit, in.applicationUserName);
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f668 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f668 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>try to lock the file</name>
        <nameStyle>20,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f668 1286 156 36 24 20 -9 #rect
us0 f668 @|RichDialogProcessStepIcon #fIcon
us0 f667 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f667 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>fileToEdit null?
is editable?</name>
        <nameStyle>17,0,7,9
12,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f667 1290 98 28 28 4 -41 #rect
us0 f667 @|AlternativeIcon #fIcon
us0 f56 expr out #txt
us0 f56 1304 180 1304 218 #arcP
us0 f673 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Inform the user
that open in read
 only mode</name>
        <nameStyle>44,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f673 targetWindow NEW:card: #txt
us0 f673 targetDisplay TOP #txt
us0 f673 richDialogId ch.ivyteam.ivy.addons.commondialogs.MessageDialog #txt
us0 f673 startMethod showMessage(String) #txt
us0 f673 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f673 panelName 'nform the user' #txt
us0 f673 requestActionDecl '<String message> param;' #txt
us0 f673 requestMappingAction 'param.message=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/fileNotEditable");
' #txt
us0 f673 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f673 responseMappingAction 'out=in;
' #txt
us0 f673 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f673 isAsynch false #txt
us0 f673 isInnerRd true #txt
us0 f673 isDialog true #txt
us0 f673 1454 100 36 24 -44 -66 #rect
us0 f673 @|RichDialogIcon #fIcon
us0 f673 -985168|-1|-16777216 #nodeStyle
us0 f675 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f675 actionTable 'out=in;
' #txt
us0 f675 actionCode panel.desktopHandlerPanel.openFile(in.fileToEdit); #txt
us0 f675 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f675 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f675 1518 100 36 24 20 -2 #rect
us0 f675 @|RichDialogProcessStepIcon #fIcon
us0 f676 expr out #txt
us0 f676 1490 112 1518 112 #arcP
us0 f677 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f677 1526 142 20 20 13 0 #rect
us0 f677 @|RichDialogProcessEndIcon #fIcon
us0 f678 expr out #txt
us0 f678 1536 124 1536 142 #arcP
us0 f71 expr out #txt
us0 f71 4784 580 4784 676 #arcP
us0 f71 0 0.4910671851028315 0 0 #arcLabel
us0 f91 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f91 actionTable 'out=in;
' #txt
us0 f91 actionCode 'if(ivy.session.getSessionUser() != null){
	out.applicationUserName= ivy.session.getSessionUserName();
}else{
	out.applicationUserName="";
}
if(in.errorUtil.applicationId<=0){
	out.errorUtil.applicationId = ivy.case.getIdentifier();
}
' #txt
us0 f91 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f91 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get the session user name
if not setted:
errorUtil applicationId = case Id</name>
        <nameStyle>41,7,9
33,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f91 166 396 36 24 -165 2 #rect
us0 f91 @|RichDialogProcessStepIcon #fIcon
us0 f93 expr out #txt
us0 f93 144 74 166 408 #arcP
us0 f93 1 144 408 #addKink
us0 f93 0 0.6523133982402786 0 0 #arcLabel
us0 f96 expr out #txt
us0 f96 184 138 184 396 #arcP
us0 f4 expr out #txt
us0 f4 238 152 184 396 #arcP
us0 f4 1 184 152 #addKink
us0 f4 1 0.38496922166981523 0 0 #arcLabel
us0 f35 expr out #txt
us0 f35 238 184 184 396 #arcP
us0 f35 1 184 184 #addKink
us0 f35 1 0.2873269983312229 0 0 #arcLabel
us0 f109 expr out #txt
us0 f109 238 216 184 396 #arcP
us0 f109 1 184 216 #addKink
us0 f109 1 0.16145705682114764 0 0 #arcLabel
us0 f54 expr out #txt
us0 f54 238 248 184 396 #arcP
us0 f54 1 184 248 #addKink
us0 f54 0 0.9655981853543215 0 0 #arcLabel
us0 f110 expr out #txt
us0 f110 238 280 184 396 #arcP
us0 f110 1 184 280 #addKink
us0 f110 0 0.8017350514875173 0 0 #arcLabel
us0 f111 expr out #txt
us0 f111 238 320 184 396 #arcP
us0 f111 1 184 320 #addKink
us0 f111 0 0.6667470654492814 0 0 #arcLabel
us0 f161 expr out #txt
us0 f161 246 408 202 408 #arcP
us0 f468 expr out #txt
us0 f468 184 420 184 508 #arcP
us0 f129 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f129 actionTable 'out=in;
' #txt
us0 f129 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/information"); #txt
us0 f129 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f129 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f129 1398 100 36 24 20 -2 #rect
us0 f129 @|RichDialogProcessStepIcon #fIcon
us0 f131 expr out #txt
us0 f131 1434 112 1454 112 #arcP
us0 f236 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f236 actionTable 'out=in;
' #txt
us0 f236 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/warning"); #txt
us0 f236 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f236 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f236 1358 220 36 24 20 -2 #rect
us0 f236 @|RichDialogProcessStepIcon #fIcon
us0 f237 expr in #txt
us0 f237 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f237 1318 232 1358 232 #arcP
us0 f237 0 0.425 0 -7 #arcLabel
us0 f58 expr out #txt
us0 f58 1394 232 1414 232 #arcP
us0 f238 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f238 actionTable 'out=in;
' #txt
us0 f238 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning"); #txt
us0 f238 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f238 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>title</name>
        <nameStyle>5,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f238 2038 780 36 24 -10 -32 #rect
us0 f238 @|RichDialogProcessStepIcon #fIcon
us0 f356 expr in #txt
us0 f356 2022 792 2038 792 #arcP
us0 f364 expr out #txt
us0 f364 2074 792 2094 792 #arcP
us0 f635 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f635 actionTable 'out=in;
' #txt
us0 f635 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/error"); #txt
us0 f635 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f635 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f635 1654 1708 36 24 20 -2 #rect
us0 f635 @|RichDialogProcessStepIcon #fIcon
us0 f636 expr in #txt
us0 f636 outCond in.returnedMessage.type==2 #txt
us0 f636 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f636 1722 1720 1690 1720 #arcP
us0 f636 0 0.4728617363148975 0 0 #arcLabel
us0 f265 expr out #txt
us0 f265 1672 1732 1672 1772 #arcP
us0 f674 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f674 actionTable 'out=in;
' #txt
us0 f674 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/error"); #txt
us0 f674 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f674 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f674 3126 580 36 24 20 -2 #rect
us0 f674 @|RichDialogProcessStepIcon #fIcon
us0 f682 expr in #txt
us0 f682 3186 592 3162 592 #arcP
us0 f376 expr out #txt
us0 f376 3126 592 3098 592 #arcP
us0 f684 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f684 actionTable 'out=in;
' #txt
us0 f684 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/error"); #txt
us0 f684 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f684 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f684 2790 652 36 24 20 -2 #rect
us0 f684 @|RichDialogProcessStepIcon #fIcon
us0 f685 expr in #txt
us0 f685 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>No</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f685 2734 664 2790 664 #arcP
us0 f383 expr out #txt
us0 f383 2826 664 2862 664 #arcP
us0 f686 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f686 actionTable 'out=in;
' #txt
us0 f686 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning"); #txt
us0 f686 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f686 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f686 4598 916 36 24 20 -2 #rect
us0 f686 @|RichDialogProcessStepIcon #fIcon
us0 f687 expr in #txt
us0 f687 outCond '!panel.isFileLocked(new java.io.File(in.selectedFolderOnServer.path+in.fileUpload.getName()))' #txt
us0 f687 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f687 4616 886 4616 916 #arcP
us0 f332 expr out #txt
us0 f332 4616 940 4616 964 #arcP
us0 f688 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f688 actionTable 'out=in;
' #txt
us0 f688 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning"); #txt
us0 f688 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f688 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f688 4486 916 36 24 20 -2 #rect
us0 f688 @|RichDialogProcessStepIcon #fIcon
us0 f689 expr in #txt
us0 f689 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f689 4602 872 4504 916 #arcP
us0 f689 1 4504 872 #addKink
us0 f689 0 0.7890452858293415 0 0 #arcLabel
us0 f47 expr out #txt
us0 f47 4504 940 4504 964 #arcP
us0 f690 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f690 actionTable 'out=in;
' #txt
us0 f690 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/information"); #txt
us0 f690 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f690 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f690 4414 420 36 24 20 -2 #rect
us0 f690 @|RichDialogProcessStepIcon #fIcon
us0 f691 expr in #txt
us0 f691 4432 398 4432 420 #arcP
us0 f226 expr out #txt
us0 f226 4432 444 4432 484 #arcP
us0 f692 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f692 actionTable 'out=in;
' #txt
us0 f692 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/error"); #txt
us0 f692 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f692 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f692 4550 428 36 24 20 -2 #rect
us0 f692 @|RichDialogProcessStepIcon #fIcon
us0 f693 expr in #txt
us0 f693 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f693 4568 398 4568 428 #arcP
us0 f693 0 0.4246996788029458 0 0 #arcLabel
us0 f436 expr out #txt
us0 f436 4568 452 4568 492 #arcP
us0 f670 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f670 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>is File editable?</name>
        <nameStyle>17,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f670 1290 330 28 28 5 -18 #rect
us0 f670 @|AlternativeIcon #fIcon
us0 f695 expr out #txt
us0 f695 1304 308 1304 330 #arcP
us0 f57 expr in #txt
us0 f57 outCond in.isFileEditable #txt
us0 f57 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f57 1318 344 1352 372 #arcP
us0 f57 1 1352 344 #addKink
us0 f57 1 0.32142857142857145 0 0 #arcLabel
us0 f696 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f696 actionTable 'out=in;
' #txt
us0 f696 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

if(panel.#filesTable.getSelectedListEntry()!=null && panel.filesTable.getSelectedListEntry() instanceof DocumentOnServer){
	DocumentOnServer doc = new DocumentOnServer();
  doc = panel.filesTable.selectedListEntry as DocumentOnServer;
	
	panel.desktopHandlerPanel.openFileAndCheckForChanges(new java.io.File(doc.path));
	out.selectedDocument.locked="1";
	out.selectedDocument.lockingUserID=in.applicationUserName;

}' #txt
us0 f696 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f696 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>openFile And
CheckForChanges
Changes are going to be saved
(see inline Description)</name>
        <nameStyle>83,0,7,9
</nameStyle>
        <desc>The Java 6 Desktop Object Implementation has still
some problems with getting
if an edit program is installed at client side to edit a file.
That is why we open the File and check for changes.
If the user changes the File, those changes are going to be transmitted to the server side.</desc>
    </language>
</elementInfo>
' #txt
us0 f696 1238 372 36 24 -109 -13 #rect
us0 f696 @|RichDialogProcessStepIcon #fIcon
us0 f697 expr in #txt
us0 f697 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f697 1290 344 1256 372 #arcP
us0 f697 1 1256 344 #addKink
us0 f697 1 0.04106100623285445 0 0 #arcLabel
us0 f698 expr out #txt
us0 f698 1256 396 1286 456 #arcP
us0 f698 1 1256 456 #addKink
us0 f698 0 0.8449574367770217 0 0 #arcLabel
us0 f699 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithServerPath
AndIvyDbConnectionName
AndDbTableName
AndDBSchemaName(String,String,String,String)</name>
        <nameStyle>102,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f699 guid 126E0B8E11912075 #txt
us0 f699 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f699 method startWithServerPathAndIvyDbConnectionNameAndDbTableNameAndDBSchemaName(String,String,String,String) #txt
us0 f699 disableUIEvents true #txt
us0 f699 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath,java.lang.String IvyDbConnectioName,java.lang.String tableName,java.lang.String schemaName> param = methodEvent.getInputArguments();
' #txt
us0 f699 inParameterMapAction 'out.advancedActionsEnabled=true;
out.DbTableName=param.tableName;
out.isRecursive=false;
out.isToolbarVisible=true;
out.isTreeVisible=true;
out.ivyConnexionDBName=param.IvyDbConnectioName;
out.schemaName=param.schemaName;
out.serverPath=param.serverPath;
' #txt
us0 f699 outParameterDecl '<> result;
' #txt
us0 f699 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
us0 f699 486 470 20 20 14 -51 #rect
us0 f699 @|RichDialogInitStartIcon #fIcon
us0 f700 expr out #txt
us0 f700 486 480 195 420 #arcP
us0 f700 1 248 480 #addKink
us0 f700 0 0.5058167104889034 0 0 #arcLabel
us0 f701 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startAsPathChooserWithDBInformations
(String,String,String,String)</name>
        <nameStyle>66,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f701 guid 1274D78EDEF27C2A #txt
us0 f701 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f701 method startAsPathChooserWithDBInformations(String,String,String,String) #txt
us0 f701 disableUIEvents true #txt
us0 f701 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath,java.lang.String ivyDBConnectionname,java.lang.String DBTableName,java.lang.String DBSchemaName> param = methodEvent.getInputArguments();
' #txt
us0 f701 inParameterMapAction 'out.advancedActionsEnabled=true;
out.DbTableName=param.DBTableName;
out.isPathChooserFlowLayoutVisible=true;
out.isRecursive=false;
out.isToolbarVisible=false;
out.isTreeVisible=true;
out.ivyConnexionDBName=param.ivyDBConnectionname;
out.schemaName=param.DBSchemaName;
out.serverPath=param.serverPath;
' #txt
us0 f701 outParameterDecl '<java.lang.String choosedPath> result;
' #txt
us0 f701 outParameterMapAction 'result.choosedPath=in.pathChooserReturn;
' #txt
us0 f701 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
us0 f701 342 302 20 20 13 -7 #rect
us0 f701 @|RichDialogInitStartIcon #fIcon
us0 f702 expr out #txt
us0 f702 342 312 274 319 #arcP
us0 f703 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f703 actionTable 'out=in;
' #txt
us0 f703 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

if(in.copyOn)
{
	out.filesCopiedInThisPanel =true;
	List<DocumentOnServer> files= new List<DocumentOnServer>();
	files.addAll(in.copiedDocuments);
	
	ivy.session.setAttribute("copiedFiles",in.copiedDocuments);
}
else{
	ivy.session.removeAttribute("copiedFiles");
	out.filesCopiedInThisPanel =false;
}' #txt
us0 f703 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f703 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>make filesCopiedInThisPanel
and the copiedFiles session attribute</name>
        <nameStyle>28,7,9
37,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f703 918 1036 36 24 -199 -22 #rect
us0 f703 @|RichDialogProcessStepIcon #fIcon
us0 f704 expr out #txt
us0 f704 936 1010 936 1036 #arcP
us0 f705 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f705 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>copy in 
same Panel?</name>
        <nameStyle>20,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f705 1138 1026 28 28 15 -15 #rect
us0 f705 @|AlternativeIcon #fIcon
us0 f706 expr out #txt
us0 f706 1152 978 1152 1026 #arcP
us0 f707 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f707 actionTable 'out=in;
' #txt
us0 f707 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

Object o = ivy.session.getAttribute("copiedFiles");
if(o!= null && o instanceof List<DocumentOnServer>){
	out.copiedDocuments = o as List<DocumentOnServer>;
}' #txt
us0 f707 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f707 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getSessionAttribute
copiedFiles</name>
        <nameStyle>20,7,9
11,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f707 1422 1028 36 24 20 -2 #rect
us0 f707 @|RichDialogProcessStepIcon #fIcon
us0 f708 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>filesCopied@
Application</name>
        <nameStyle>13,7,9
11,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f708 actionDecl 'Number panelId;
' #txt
us0 f708 actionTable 'panelId=in.panelId;
' #txt
us0 f708 actionCode panel.fireFilesCopied(panelId); #txt
us0 f708 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f708 fireEvent filesCopied(Number) #txt
us0 f708 918 1084 36 24 19 2 #rect
us0 f708 @|RichDialogFireEventIcon #fIcon
us0 f709 expr out #txt
us0 f709 936 1060 936 1084 #arcP
us0 f515 expr out #txt
us0 f515 936 1108 936 1123 #arcP
us0 f710 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>filesCopied</name>
        <nameStyle>11,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f710 guid 128F27E79C73AE3A #txt
us0 f710 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f710 broadcast filesCopied #txt
us0 f710 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f710 actionTable 'out=in;
' #txt
us0 f710 actionCode 'if(param.panelId != in.panelId){
	out.filesCopiedInThisPanel=false;
	in.copyOn=true;
}' #txt
us0 f710 838 1086 20 20 -75 -11 #rect
us0 f710 @|RichDialogBroadcastStartIcon #fIcon
us0 f711 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f711 838 1134 20 20 13 0 #rect
us0 f711 @|RichDialogProcessEndIcon #fIcon
us0 f712 expr out #txt
us0 f712 848 1106 848 1134 #arcP
us0 f713 expr in #txt
us0 f713 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f713 1166 1040 1422 1040 #arcP
us0 f717 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startWithServerPathAndUseIvySystemDB(String)</name>
        <nameStyle>44,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f717 guid 1299CEB234E382B8 #txt
us0 f717 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f717 method startWithServerPathAndUseIvySystemDB(String) #txt
us0 f717 disableUIEvents true #txt
us0 f717 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath> param = methodEvent.getInputArguments();
' #txt
us0 f717 inParameterMapAction 'out.advancedActionsEnabled=true;
out.clientTempDirPath="";
out.cursor=0;
out.isRecursive=false;
out.isToolbarVisible=true;
out.isTreeVisible=true;
out.serverPath=param.serverPath;
' #txt
us0 f717 outParameterDecl '<> result;
' #txt
us0 f717 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "startVisible(Boolean)"/parameterMapping "param.visible=false;\n"/initScript ""}}' #txt
us0 f717 30 14 20 20 11 -4 #rect
us0 f717 @|RichDialogInitStartIcon #fIcon
us0 f718 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f718 actionTable 'out=in;
' #txt
us0 f718 actionCode 'import ch.ivyteam.ivy.addons.filemanager.database.FileManagementIvySystemDBHandler;
out.fileManagementHandler = new FileManagementIvySystemDBHandler();' #txt
us0 f718 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f718 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>make FileManager
DB Handler</name>
        <nameStyle>17,7,9
10,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f718 22 92 36 24 -32 15 #rect
us0 f718 @|RichDialogProcessStepIcon #fIcon
us0 f719 expr out #txt
us0 f719 40 34 40 92 #arcP
us0 f720 expr out #txt
us0 f720 40 116 166 408 #arcP
us0 f720 1 40 408 #addKink
us0 f720 0 0.7633209874301173 0 0 #arcLabel
us0 f721 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>startAsPathChooserWithIvySystemDb(String)</name>
        <nameStyle>41,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f721 guid 1299CEE9D1048323 #txt
us0 f721 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f721 method startAsPathChooserWithIvySystemDb(String) #txt
us0 f721 disableUIEvents true #txt
us0 f721 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String serverPath> param = methodEvent.getInputArguments();
' #txt
us0 f721 inParameterMapAction 'out.advancedActionsEnabled=true;
out.isPathChooserFlowLayoutVisible=true;
out.isRecursive=false;
out.isToolbarVisible=false;
out.isTreeVisible=true;
out.serverPath=param.serverPath;
' #txt
us0 f721 outParameterDecl '<java.lang.String choosedPath> result;
' #txt
us0 f721 outParameterMapAction 'result.choosedPath=in.pathChooserReturn;
' #txt
us0 f721 embeddedRdInitializations '{/desktopHandlerPanel {/fieldName "desktopHandlerPanel"/startMethod "start()"/parameterMapping ""/initScript ""}}' #txt
us0 f721 342 366 20 20 13 0 #rect
us0 f721 @|RichDialogInitStartIcon #fIcon
us0 f722 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f722 actionTable 'out=in;
' #txt
us0 f722 actionCode 'import ch.ivyteam.ivy.addons.filemanager.database.FileManagementIvySystemDBHandler;
out.fileManagementHandler = new FileManagementIvySystemDBHandler();' #txt
us0 f722 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f722 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f722 286 364 36 24 20 -2 #rect
us0 f722 @|RichDialogProcessStepIcon #fIcon
us0 f723 expr out #txt
us0 f723 342 376 322 376 #arcP
us0 f724 expr out #txt
us0 f724 294 364 266 332 #arcP
us0 f76 expr out #txt
us0 f76 5066 456 5104 492 #arcP
us0 f76 1 5104 456 #addKink
us0 f76 0 0.851597586151787 0 0 #arcLabel
us0 f725 expr out #txt
us0 f725 1304 66 1304 98 #arcP
us0 f694 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Calls the desktopHandler Panel 
unLockSelectedDocumentsOnServer(in.selectedDocuments)

When DesktopHandler finished, it fires its unlockFiles@SUBSC.
The fileManager is waiting for this event to call fire
unlockFiles event.
</name>
        <nameStyle>32,7,9
191,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f694 1484 443 360 122 -175 -56 #rect
us0 f694 @|IBIcon #fIcon
us0 f694 -657956|-1|-16777216 #nodeStyle
us0 f100 1664 565 1608 609 #arcP
us0 f101 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f101 1230 126 20 20 13 0 #rect
us0 f101 @|RichDialogProcessEndIcon #fIcon
us0 f102 expr in #txt
us0 f102 outCond 'in.#fileToEdit ==null || !in.fileToEdit.isFile()' #txt
us0 f102 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NULL</name>
        <nameStyle>4,0,7,12
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f102 1290 112 1240 126 #arcP
us0 f102 1 1240 112 #addKink
us0 f102 0 0.36278337852511755 0 -1 #arcLabel
us0 f669 expr in #txt
us0 f669 outCond in.isFileEditable #txt
us0 f669 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Editable</name>
        <nameStyle>8,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f669 1304 126 1304 156 #arcP
us0 f669 0 0.4 3 0 #arcLabel
us0 f130 expr in #txt
us0 f130 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Not Editable</name>
        <nameStyle>12,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f130 1318 112 1398 112 #arcP
us0 f130 0 0.425 0 9 #arcLabel
us0 f726 expr in #txt
us0 f726 outCond in.filesCopiedInThisPanel #txt
us0 f726 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f726 1152 1054 1152 1106 #arcP
us0 f726 0 0.5 1 0 #arcLabel
us0 f574 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f574 actionTable 'out=in;
' #txt
us0 f574 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;
in.DnDDestinationPath=FileHandler.formatPathWithEndSeparator(in.selectedFolderOnServer.path);
List<java.io.File> files = new List<java.io.File>();
for(DocumentOnServer doc: in.copiedDocuments){
	try{
		files.add(new java.io.File(doc.path));
	}catch(Throwable t){}
}

out.returnedMessage = FileHandler.pasteCopiedFile(files,in.DnDDestinationPath);' #txt
us0 f574 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f574 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>paste the copied files
in the selectedFolder</name>
        <nameStyle>23,7,9
21,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f574 1134 1196 36 24 21 -33 #rect
us0 f574 @|RichDialogProcessStepIcon #fIcon
us0 f727 expr in #txt
us0 f727 outCond in.copyOn #txt
us0 f727 1152 1134 1152 1196 #arcP
us0 f522 expr out #txt
us0 f522 1440 1052 1170 1208 #arcP
us0 f522 1 1440 1208 #addKink
us0 f522 1 0.18737769656397582 0 0 #arcLabel
us0 f520 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f520 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>all files could be copied?</name>
        <nameStyle>26,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f520 1138 1250 28 28 14 0 #rect
us0 f520 @|AlternativeIcon #fIcon
us0 f570 expr out #txt
us0 f570 1152 1220 1152 1250 #arcP
us0 f575 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f575 actionTable 'out=in;
' #txt
us0 f575 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/information"); #txt
us0 f575 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f575 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f575 1070 1300 36 24 20 -2 #rect
us0 f575 @|RichDialogProcessStepIcon #fIcon
us0 f576 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f576 actionTable 'out=in;
' #txt
us0 f576 actionCode '//in.copyOn=false;
panel.addFiles(in.returnedMessage.files);
' #txt
us0 f576 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f576 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>add the new files</name>
        <nameStyle>17,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f576 1190 1348 36 24 5 -32 #rect
us0 f576 @|RichDialogProcessStepIcon #fIcon
us0 f577 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>inform the user
that some files could not
be copied</name>
        <nameStyle>16,7,9
35,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f577 targetWindow NEW:card: #txt
us0 f577 targetDisplay TOP #txt
us0 f577 richDialogId ch.ivyteam.ivy.addons.commondialogs.MessageDialog #txt
us0 f577 startMethod showMessage(String) #txt
us0 f577 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f577 requestActionDecl '<String message> param;' #txt
us0 f577 requestMappingAction 'param.message=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/filesNotMovedBecauseLocked");
' #txt
us0 f577 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f577 responseMappingAction 'out=in;
' #txt
us0 f577 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f577 isAsynch false #txt
us0 f577 isInnerRd true #txt
us0 f577 isDialog true #txt
us0 f577 1070 1348 36 24 -155 -25 #rect
us0 f577 @|RichDialogIcon #fIcon
us0 f577 -985168|-1|-16777216 #nodeStyle
us0 f578 expr out #txt
us0 f578 1106 1360 1190 1360 #arcP
us0 f624 expr out #txt
us0 f624 1088 1324 1088 1348 #arcP
us0 f625 expr in #txt
us0 f625 outCond in.returnedMessage.files.size()==in.copiedDocuments.size() #txt
us0 f625 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,22
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f625 1166 1264 1208 1348 #arcP
us0 f625 1 1208 1264 #addKink
us0 f625 1 0.36904761904761907 13 0 #arcLabel
us0 f714 expr in #txt
us0 f714 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,0,7,12
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f714 1138 1264 1088 1300 #arcP
us0 f714 1 1088 1264 #addKink
us0 f714 0 0.54 0 -6 #arcLabel
us0 f728 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f728 1198 1390 20 20 13 0 #rect
us0 f728 @|RichDialogProcessEndIcon #fIcon
us0 f729 expr out #txt
us0 f729 1208 1372 1208 1390 #arcP
us0 f730 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f730 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>file to edit
is a File?</name>
        <nameStyle>13,7,9
10,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f730 1162 154 28 28 -19 10 #rect
us0 f730 @|AlternativeIcon #fIcon
us0 f731 expr out #txt
us0 f731 1176 82 1176 154 #arcP
us0 f55 expr in #txt
us0 f55 outCond 'in.#fileToEdit ==null || !in.fileToEdit.isFile()' #txt
us0 f55 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f55 1185 163 1231 140 #arcP
us0 f732 expr in #txt
us0 f732 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f732 1190 168 1286 168 #arcP
us0 f738 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>deleteSelectedFolder@
APP</name>
        <nameStyle>22,7,9
3,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f738 actionDecl 'Number uniquePanelId;
' #txt
us0 f738 actionTable 'uniquePanelId=in.panelId;
' #txt
us0 f738 actionCode panel.fireDeleteSelectedFolder(uniquePanelId); #txt
us0 f738 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f738 fireEvent deleteSelectedFolder(Number) #txt
us0 f738 1958 540 36 24 27 -13 #rect
us0 f738 @|RichDialogFireEventIcon #fIcon
us0 f740 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f740 1966 582 20 20 13 0 #rect
us0 f740 @|RichDialogProcessEndIcon #fIcon
us0 f741 expr out #txt
us0 f741 1976 564 1976 582 #arcP
us0 f733 guid 12B9520DCB1E4F8E #txt
us0 f733 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f733 method _deleteSelectedDirectory() #txt
us0 f733 disableUIEvents false #txt
us0 f733 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_deleteSelectedDirectory()</name>
    </language>
</elementInfo>
' #txt
us0 f733 1966 494 20 20 -91 -31 #rect
us0 f733 @|RichDialogMethodStartIcon #fIcon
us0 f734 expr out #txt
us0 f734 1976 514 1976 540 #arcP
us0 f735 guid 12B9520FCCF3AD89 #txt
us0 f735 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f735 method _deleteSelectedFiles() #txt
us0 f735 disableUIEvents false #txt
us0 f735 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_deleteSelectedFiles()</name>
    </language>
</elementInfo>
' #txt
us0 f735 726 38 20 20 -27 -29 #rect
us0 f735 @|RichDialogMethodStartIcon #fIcon
us0 f739 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f739 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>files selected?</name>
        <nameStyle>15,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f739 722 74 28 28 -76 -25 #rect
us0 f739 @|AlternativeIcon #fIcon
us0 f743 expr out #txt
us0 f743 736 58 736 74 #arcP
us0 f744 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f744 790 78 20 20 13 0 #rect
us0 f744 @|RichDialogProcessEndIcon #fIcon
us0 f745 expr in #txt
us0 f745 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f745 750 88 790 88 #arcP
us0 f742 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f742 726 238 20 20 13 0 #rect
us0 f742 @|RichDialogProcessEndIcon #fIcon
us0 f748 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f748 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>occurred
in same FileManager?</name>
        <nameStyle>9,7,9
20,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f748 850 194 28 28 -94 -4 #rect
us0 f748 @|AlternativeIcon #fIcon
us0 f751 expr in #txt
us0 f751 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f751 864 222 864 275 #arcP
us0 f51 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>deleteSelectedFolder</name>
        <nameStyle>20,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f51 guid 12B953A13635696B #txt
us0 f51 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f51 broadcast deleteSelectedFolder #txt
us0 f51 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f51 actionTable 'out=in;
out.responseBoolean=in.panelId==param.uniquePanelId;
' #txt
us0 f51 2086 614 20 20 -53 -27 #rect
us0 f51 @|RichDialogBroadcastStartIcon #fIcon
us0 f671 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f671 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>occurred
in same FileManager?</name>
        <nameStyle>29,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f671 2082 658 28 28 14 -21 #rect
us0 f671 @|AlternativeIcon #fIcon
us0 f672 expr out #txt
us0 f672 2096 634 2096 658 #arcP
us0 f752 expr in #txt
us0 f752 outCond in.responseBoolean #txt
us0 f752 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f752 2082 672 2019 732 #arcP
us0 f752 1 2072 672 #addKink
us0 f752 1 0.3906052418314566 0 0 #arcLabel
us0 f753 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f753 2086 718 20 20 13 0 #rect
us0 f753 @|RichDialogProcessEndIcon #fIcon
us0 f754 expr in #txt
us0 f754 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f754 2096 686 2096 718 #arcP
us0 f755 expr in #txt
us0 f755 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f755 1762 800 1763 920 #arcP
us0 f755 1 1696 800 #addKink
us0 f755 2 1696 920 #addKink
us0 f755 1 0.3150434959606357 0 0 #arcLabel
us0 f371 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f371 actionTable 'out=in;
' #txt
us0 f371 actionCode 'in.progressUnit=-1;
out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/confirmdeleteDir");' #txt
us0 f371 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f371 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f371 902 196 36 24 20 -2 #rect
us0 f371 @|RichDialogProcessStepIcon #fIcon
us0 f372 expr in #txt
us0 f372 outCond in.responseBoolean #txt
us0 f372 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f372 878 208 902 208 #arcP
us0 f481 expr out #txt
us0 f481 938 208 966 208 #arcP
us0 f103 guid 12B9AB2504BC39C2 #txt
us0 f103 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f103 method _close() #txt
us0 f103 disableUIEvents false #txt
us0 f103 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f103 inActionCode out.pathChooserReturn=""; #txt
us0 f103 outParameterDecl '<> result;
' #txt
us0 f103 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_close()</name>
        <nameStyle>8,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f103 854 1318 20 20 13 0 #rect
us0 f103 @|RichDialogMethodStartIcon #fIcon
us0 f104 expr out #txt
us0 f104 855 1333 770 1392 #arcP
us0 f369 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f369 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>samePanel?</name>
        <nameStyle>10,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f369 5338 410 28 28 14 0 #rect
us0 f369 @|AlternativeIcon #fIcon
us0 f483 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f483 5342 534 20 20 13 0 #rect
us0 f483 @|RichDialogProcessEndIcon #fIcon
us0 f489 expr in #txt
us0 f489 5338 424 5342 544 #arcP
us0 f489 1 5280 424 #addKink
us0 f489 2 5280 544 #addKink
us0 f489 1 0.3771217330143918 0 0 #arcLabel
us0 f521 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f521 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>error?</name>
        <nameStyle>6,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f521 170 554 28 28 4 -24 #rect
us0 f521 @|AlternativeIcon #fIcon
us0 f526 expr out #txt
us0 f526 184 531 184 554 #arcP
us0 f527 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f527 326 558 20 20 13 0 #rect
us0 f527 @|RichDialogProcessEndIcon #fIcon
us0 f528 expr in #txt
us0 f528 outCond in.errorUtil.errorOccurred #txt
us0 f528 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f528 198 568 326 568 #arcP
us0 f268 expr in #txt
us0 f268 184 582 184 596 #arcP
us0 f530 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f530 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>error?</name>
        <nameStyle>6,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f530 170 754 28 28 14 0 #rect
us0 f530 @|AlternativeIcon #fIcon
us0 f531 expr out #txt
us0 f531 184 740 184 754 #arcP
us0 f533 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f533 326 758 20 20 13 0 #rect
us0 f533 @|RichDialogProcessEndIcon #fIcon
us0 f534 expr in #txt
us0 f534 outCond in.errorUtil.errorOccurred #txt
us0 f534 198 768 326 768 #arcP
us0 f36 expr in #txt
us0 f36 184 782 184 804 #arcP
us0 f464 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>tells that no
files were not moved</name>
        <nameStyle>34,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f464 targetWindow NEW:card: #txt
us0 f464 targetDisplay TOP #txt
us0 f464 richDialogId ch.ivyteam.ivy.addons.commondialogs.MessageDialog #txt
us0 f464 startMethod showMessage(String) #txt
us0 f464 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f464 requestActionDecl '<String message> param;' #txt
us0 f464 requestMappingAction 'param.message=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/NoFilesMovedBecauseLocked");
' #txt
us0 f464 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f464 responseMappingAction 'out=in;
' #txt
us0 f464 windowConfiguration '{/title "<%=in.windowTitle%>"/width 450 /height 150 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f464 isAsynch false #txt
us0 f464 isInnerRd true #txt
us0 f464 isDialog true #txt
us0 f464 4774 308 36 24 8 -49 #rect
us0 f464 @|RichDialogIcon #fIcon
us0 f464 -985168|-1|-16777216 #nodeStyle
us0 f484 expr out #txt
us0 f484 4746 320 4774 320 #arcP
us0 f493 expr out #txt
us0 f493 4810 320 4835 320 #arcP
us0 f539 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_fileLocked</name>
        <nameStyle>13,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f539 guid 12BAC26573518ED3 #txt
us0 f539 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f539 broadcast SE_fileLocked #txt
us0 f539 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f539 actionTable 'out=in;
' #txt
us0 f539 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
List l = param.panelIdAndDocumentOnServer;
in.updateList=false;
if(l.size()==2 && l.get(0) instanceof Number && l.get(1) instanceof DocumentOnServer){
	Number n = l.get(0) as Number;
	if(n!= in.panelId){
		DocumentOnServer doc = l.get(1) as DocumentOnServer;
		String sep = (doc.path.contains("/"))?"/":"\\";
		String docPath = doc.path.substring(0,doc.path.lastIndexOf(sep));
		docPath = FileHandler.formatPathWithEndSeparator(docPath,false);
		//ivy.log.debug(docPath);
		//ivy.log.debug(doc.filename);
		
		if(in.selectedFolderOnServer.path !=null){
			String folderPath=FileHandler.formatPathWithEndSeparator(in.selectedFolderOnServer.path,false);
			if(folderPath.equalsIgnoreCase(docPath)){
				List<DocumentOnServer> docs = new List<DocumentOnServer>();
				docs.addAll(in.documentsInDb);
				in.documentsInDb.clear();
				for(int i=0; i<docs.size();i++){
					if(docs.get(i).filename.equalsIgnoreCase(doc.filename)){
						docs.get(i).setLocked("1");
						docs.get(i).lockingUserID=doc.lockingUserID;
						in.updateList=true;
						break;
					}
				}
				out.documentsInDb.addAll(docs);
			}
	
		}
	}
}

' #txt
us0 f539 5342 86 20 20 13 0 #rect
us0 f539 @|RichDialogBroadcastStartIcon #fIcon
us0 f541 expr out #txt
us0 f541 5352 106 5352 138 #arcP
us0 f269 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>errorOccurred</name>
        <nameStyle>13,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f269 guid 12BAE17CC203CFB6 #txt
us0 f269 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f269 broadcast errorOccurred #txt
us0 f269 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f269 actionTable 'out=in;
out.incomingErrorUtil=param.errorUtil;
' #txt
us0 f269 5342 350 20 20 13 0 #rect
us0 f269 @|RichDialogBroadcastStartIcon #fIcon
us0 f408 expr out #txt
us0 f408 5352 370 5352 410 #arcP
us0 f537 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>deleteSelectedFiles</name>
        <nameStyle>19,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f537 guid 12BAE1E286DCC819 #txt
us0 f537 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f537 broadcast deleteSelectedFiles #txt
us0 f537 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f537 actionTable 'out=in;
out.responseBoolean=in.panelId==param.uniquePanelId;
' #txt
us0 f537 854 78 20 20 13 0 #rect
us0 f537 @|RichDialogBroadcastStartIcon #fIcon
us0 f538 expr out #txt
us0 f538 864 98 864 194 #arcP
us0 f542 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>deleteSelectedFiles@
APP</name>
        <nameStyle>21,7,9
3,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f542 actionDecl 'Number uniquePanelId;
' #txt
us0 f542 actionTable 'uniquePanelId=in.panelId;
' #txt
us0 f542 actionCode panel.fireDeleteSelectedFiles(uniquePanelId); #txt
us0 f542 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f542 fireEvent deleteSelectedFiles(Number) #txt
us0 f542 718 148 36 24 -51 16 #rect
us0 f542 @|RichDialogFireEventIcon #fIcon
us0 f543 expr in #txt
us0 f543 outCond panel.filesTable.getSelectedListEntries().size()>0 #txt
us0 f543 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f543 736 102 736 148 #arcP
us0 f544 expr out #txt
us0 f544 736 172 736 238 #arcP
us0 f545 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Show Error Message</name>
        <nameStyle>18,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f545 targetWindow NEW:card: #txt
us0 f545 targetDisplay TOP #txt
us0 f545 richDialogId ch.ivyteam.ivy.addons.commondialogs.QuestionDialog #txt
us0 f545 startMethod askQuestion(String,String,List<String>,String) #txt
us0 f545 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f545 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
us0 f545 requestMappingAction 'param.icon="error";
param.question=in.errorUtil.message+" \n"+IF(in.#errorUtil.#throwable!=null,in.errorUtil.throwable.getMessage(),"");
param.buttons=[ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok")];
param.defaultButton=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/buttonLabels/ok");
' #txt
us0 f545 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f545 responseMappingAction 'out=in;
' #txt
us0 f545 windowConfiguration '{/title "<%=in.incomingErrorUtil.message%>"/width 600 /height 150 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f545 isAsynch false #txt
us0 f545 isInnerRd true #txt
us0 f545 5334 468 36 24 20 -2 #rect
us0 f545 @|RichDialogIcon #fIcon
us0 f546 expr in #txt
us0 f546 outCond in.panelId==in.incomingErrorUtil.panelId #txt
us0 f546 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f546 5352 438 5352 468 #arcP
us0 f448 expr out #txt
us0 f448 5352 492 5352 534 #arcP
us0 f535 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_DocumentsUnlocked</name>
        <nameStyle>20,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f535 guid 12BCF80819ADE64A #txt
us0 f535 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f535 broadcast SE_DocumentsUnlocked #txt
us0 f535 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f535 actionTable 'out=in;
' #txt
us0 f535 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

if(!in.documentsInDb.isEmpty()){
	boolean found = false;
	for(DocumentOnServer doc:param.documentsUnlocked){
		for(DocumentOnServer doc1:in.documentsInDb){
			if(doc1.path.compareToIgnoreCase(doc.path)==0 && doc1.locked=="1"){
				doc1.locked="0";
				found=true;
				break;
			}
		}
	}
	if(found){
		List<DocumentOnServer> l = new List<DocumentOnServer>();
		l.addAll(in.documentsInDb);
		in.documentsInDb.clear();
		out.documentsInDb.addAll(l);
	}
}' #txt
us0 f535 5350 622 20 20 -66 -25 #rect
us0 f535 @|RichDialogBroadcastStartIcon #fIcon
us0 f536 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f536 5350 686 20 20 13 0 #rect
us0 f536 @|RichDialogProcessEndIcon #fIcon
us0 f548 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_FilesUnlocked</name>
        <nameStyle>16,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f548 guid 12BCF883DA0EA60A #txt
us0 f548 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f548 broadcast SE_FilesUnlocked #txt
us0 f548 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f548 actionTable 'out=in;
' #txt
us0 f548 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

if(!in.documentsInDb.isEmpty()){
	boolean found = false;
	for(java.io.File file:param.files){
		for(DocumentOnServer doc1:in.documentsInDb){
			if(doc1.path.compareToIgnoreCase(in.fileManagementHandler.escapeBackSlash(file.getPath()))==0 && doc1.locked=="1"){
				doc1.locked="0";
				found=true;
				break;
			}
		}
	}
	if(found){
		List<DocumentOnServer> l = new List<DocumentOnServer>();
		l.addAll(in.documentsInDb);
		in.documentsInDb.clear();
		out.documentsInDb.addAll(l);
	}
}
' #txt
us0 f548 5462 622 20 20 13 0 #rect
us0 f548 @|RichDialogBroadcastStartIcon #fIcon
us0 f549 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f549 5462 678 20 20 13 0 #rect
us0 f549 @|RichDialogProcessEndIcon #fIcon
us0 f553 expr out #txt
us0 f553 5360 642 5360 686 #arcP
us0 f550 expr out #txt
us0 f550 5472 642 5472 678 #arcP
us0 f547 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_DocumentsDeleted</name>
        <nameStyle>19,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f547 guid 12BD0130C642E9E5 #txt
us0 f547 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f547 broadcast SE_DocumentsDeleted #txt
us0 f547 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f547 actionTable 'out=in;
' #txt
us0 f547 actionCode 'in.responseBoolean=false;
if(param.DocumentsPathAndPanelID.size()==2 && param.DocumentsPathAndPanelID.get(0) instanceof String && param.DocumentsPathAndPanelID.get(1) instanceof Number){
 Number n = param.DocumentsPathAndPanelID.get(1) as Number;
	if(in.panelId != n){
		out.responseBoolean=in.selectedFolderOnServer.path.compareTo(param.DocumentsPathAndPanelID.get(0) as String)==0;
	}
	
}' #txt
us0 f547 5462 734 20 20 13 0 #rect
us0 f547 @|RichDialogBroadcastStartIcon #fIcon
us0 f551 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f551 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Not the same Panel and same selectedFolder</name>
        <nameStyle>42,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f551 5458 786 28 28 14 0 #rect
us0 f551 @|AlternativeIcon #fIcon
us0 f552 expr out #txt
us0 f552 5472 754 5472 786 #arcP
us0 f555 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f555 actionTable 'out=in;
' #txt
us0 f555 actionCode panel.refreshActualSelectedFolder(); #txt
us0 f555 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f555 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refreshActualSelectedFolder</name>
        <nameStyle>27,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f555 5454 844 36 24 20 -2 #rect
us0 f555 @|RichDialogProcessStepIcon #fIcon
us0 f556 expr in #txt
us0 f556 outCond in.responseBoolean #txt
us0 f556 5472 814 5472 844 #arcP
us0 f557 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f557 5462 894 20 20 13 0 #rect
us0 f557 @|RichDialogProcessEndIcon #fIcon
us0 f558 expr out #txt
us0 f558 5472 868 5472 894 #arcP
us0 f559 expr in #txt
us0 f559 5458 800 5462 904 #arcP
us0 f559 1 5424 800 #addKink
us0 f559 2 5424 904 #addKink
us0 f559 1 0.3748371952672486 0 0 #arcLabel
us0 f560 guid 12BD91649B69AABB #txt
us0 f560 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f560 method _copyFiles() #txt
us0 f560 disableUIEvents false #txt
us0 f560 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
us0 f560 outParameterDecl '<> result;
' #txt
us0 f560 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_copyFiles()</name>
        <nameStyle>12,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f560 998 990 20 20 13 0 #rect
us0 f560 @|RichDialogMethodStartIcon #fIcon
us0 f563 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f563 actionTable 'out=in;
' #txt
us0 f563 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
in.copiedDocuments = new List<DocumentOnServer>();
in.copiedDocuments.addAll(panel.filesTable.selectedListEntries);

if(!in.copiedDocuments.isEmpty()){
	in.copyOn=true;
}else{
	in.copyOn=false;
}' #txt
us0 f563 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f563 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f563 990 1036 36 24 20 -2 #rect
us0 f563 @|RichDialogProcessStepIcon #fIcon
us0 f564 expr out #txt
us0 f564 1008 1010 1008 1036 #arcP
us0 f562 expr out #txt
us0 f562 990 1048 954 1048 #arcP
us0 f565 guid 12BD9229CD1237A6 #txt
us0 f565 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f565 method _pasteFiles() #txt
us0 f565 disableUIEvents false #txt
us0 f565 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_pasteFiles()</name>
    </language>
</elementInfo>
' #txt
us0 f565 1406 886 20 20 13 0 #rect
us0 f565 @|RichDialogMethodStartIcon #fIcon
us0 f566 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>pasteFiles@APP</name>
        <nameStyle>14,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f566 actionDecl 'Number uniquePanelId;
' #txt
us0 f566 actionTable 'uniquePanelId=in.panelId;
' #txt
us0 f566 actionCode panel.firePasteFiles(uniquePanelId); #txt
us0 f566 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f566 fireEvent pasteFiles(Number) #txt
us0 f566 1398 932 36 24 20 -2 #rect
us0 f566 @|RichDialogFireEventIcon #fIcon
us0 f567 expr out #txt
us0 f567 1416 906 1416 932 #arcP
us0 f568 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f568 1406 982 20 20 13 0 #rect
us0 f568 @|RichDialogProcessEndIcon #fIcon
us0 f569 expr out #txt
us0 f569 1416 956 1416 982 #arcP
us0 f571 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>pasteFiles</name>
        <nameStyle>10,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f571 guid 12BD923171D4E876 #txt
us0 f571 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f571 broadcast pasteFiles #txt
us0 f571 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f571 actionTable 'out=in;
out.samePanelFlag=in.panelId==param.uniquePanelId;
' #txt
us0 f571 1334 934 20 20 -26 -23 #rect
us0 f571 @|RichDialogBroadcastStartIcon #fIcon
us0 f572 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f572 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>same panel?</name>
        <nameStyle>11,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f572 1330 978 28 28 -33 14 #rect
us0 f572 @|AlternativeIcon #fIcon
us0 f573 expr out #txt
us0 f573 1344 954 1344 978 #arcP
us0 f626 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f626 actionTable 'out=in;
' #txt
us0 f626 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
in.responseBoolean=true;
if(in.#selectedFolderOnServer == null || in.selectedFolderOnServer.path.trim().equals("")){
	in.copyOn=false;
}
if(in.copiedDocuments.size()<=0){
	in.copyOn=false;
}' #txt
us0 f626 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f626 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f626 1238 980 36 24 20 -2 #rect
us0 f626 @|RichDialogProcessStepIcon #fIcon
us0 f627 expr in #txt
us0 f627 outCond in.samePanelFlag #txt
us0 f627 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f627 1330 992 1274 992 #arcP
us0 f633 expr out #txt
us0 f633 1238 992 1158 1032 #arcP
us0 f633 1 1184 992 #addKink
us0 f633 0 0.9505775562854722 0 0 #arcLabel
us0 f644 expr in #txt
us0 f644 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f644 1358 992 1406 992 #arcP
us0 f646 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>renameFile</name>
        <nameStyle>10,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f646 guid 12BDA703390C87EE #txt
us0 f646 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f646 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f646 actionTable 'out=in;
' #txt
us0 f646 1366 1286 20 20 -29 -28 #rect
us0 f646 @|RichDialogProcessStartIcon #fIcon
us0 f679 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f679 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check selected Doc</name>
        <nameStyle>18,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f679 1362 1338 28 28 -4 -23 #rect
us0 f679 @|AlternativeIcon #fIcon
us0 f680 expr out #txt
us0 f680 1376 1306 1376 1338 #arcP
us0 f681 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f681 1486 1342 20 20 13 0 #rect
us0 f681 @|RichDialogProcessEndIcon #fIcon
us0 f683 expr in #txt
us0 f683 outCond 'in.#selectedDocument==null' #txt
us0 f683 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NULL</name>
        <nameStyle>4,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f683 1390 1352 1486 1352 #arcP
us0 f715 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f715 actionTable 'out=in;
' #txt
us0 f715 actionCode 'import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;
import ch.ivyteam.ivy.addons.filemanager.FileHandler;

String ext = "."+FileHandler.getFileExtension(in.selectedDocument.path);
String newDest="";
try{
	java.io.File file = new java.io.File(in.selectedDocument.path);
	
	if(in.selectedDocument.path.contains("/")){
		newDest= in.selectedDocument.path.substring(0,in.selectedDocument.path.lastIndexOf("/")+1)+in.stringVariable+ext;
	}
	else
	{
		newDest= in.selectedDocument.path.substring(0,in.selectedDocument.path.lastIndexOf("\\")+1)+in.stringVariable+ext;
	}
	boolean succeed = file.renameTo(new java.io.File(newDest));
	if(succeed)
	{
		in.fileManagementHandler.renameDocument(in.selectedDocument,in.stringVariable+ext, in.applicationUserName);
		DocumentOnServer doc = new DocumentOnServer();
		doc=in.selectedDocument.clone();
		doc.filename=in.stringVariable+ext;
		doc.path = newDest;
		panel.fireSE_fileRenamed([doc,in.selectedFolderOnServer, in.panelId]);
		panel.refreshActualSelectedFolder();
		
	}
	else
	{
		in.errorUtil.panelId = in.panelId;
		in.errorUtil.errorOccurred=true;
		in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/ErrorRenamingFile");
		panel.fireErrorOccurred(in.errorUtil);
	}
}catch(Throwable t){
	in.errorUtil.panelId = in.panelId;
	in.errorUtil.errorOccurred=true;
	in.errorUtil.throwable = t;
	in.errorUtil.message =ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/error/errorOccurred");
	panel.fireErrorOccurred(in.errorUtil);
}' #txt
us0 f715 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f715 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>try
to rename</name>
        <nameStyle>4,7,9
9,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f715 1358 1532 36 24 -78 -15 #rect
us0 f715 @|RichDialogProcessStepIcon #fIcon
us0 f736 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f736 actionTable 'out=in;
' #txt
us0 f736 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/Warning"); #txt
us0 f736 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f736 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f736 1486 1428 36 24 20 -2 #rect
us0 f736 @|RichDialogProcessStepIcon #fIcon
us0 f737 expr in #txt
us0 f737 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>LOCKED</name>
        <nameStyle>6,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f737 1384 1358 1487 1428 #arcP
us0 f746 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f746 targetWindow NEW:card: #txt
us0 f746 targetDisplay TOP #txt
us0 f746 richDialogId ch.ivyteam.ivy.addons.commondialogs.MessageDialog #txt
us0 f746 startMethod showMessage(String) #txt
us0 f746 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f746 requestActionDecl '<String message> param;' #txt
us0 f746 requestMappingAction 'param.message=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/messages/information/filetoRenameLocked");
' #txt
us0 f746 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f746 responseMappingAction 'out=in;
' #txt
us0 f746 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f746 isAsynch false #txt
us0 f746 isInnerRd true #txt
us0 f746 1486 1476 36 24 20 -2 #rect
us0 f746 @|RichDialogIcon #fIcon
us0 f747 expr out #txt
us0 f747 1504 1452 1504 1476 #arcP
us0 f749 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f749 1494 1526 20 20 13 0 #rect
us0 f749 @|RichDialogProcessEndIcon #fIcon
us0 f750 expr out #txt
us0 f750 1504 1500 1504 1526 #arcP
us0 f756 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f756 1366 1590 20 20 13 0 #rect
us0 f756 @|RichDialogProcessEndIcon #fIcon
us0 f757 expr out #txt
us0 f757 1376 1556 1376 1590 #arcP
us0 f758 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_fileRenamed</name>
        <nameStyle>14,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f758 guid 12BDAAC2C5313D1E #txt
us0 f758 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f758 broadcast SE_fileRenamed #txt
us0 f758 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f758 actionTable 'out=in;
' #txt
us0 f758 actionCode 'import ch.ivyteam.ivy.addons.filemanager.FolderOnServer;
import ch.ivyteam.ivy.addons.filemanager.DocumentOnServer;

try{
if(param.renamedDocumentOnServer_SelectedFolderOnServer_PanelId.size()==3 &&
param.renamedDocumentOnServer_SelectedFolderOnServer_PanelId.get(0) instanceof DocumentOnServer &&
param.renamedDocumentOnServer_SelectedFolderOnServer_PanelId.get(1) instanceof FolderOnServer &&
param.renamedDocumentOnServer_SelectedFolderOnServer_PanelId.get(2) instanceof Number){
	Number n = param.renamedDocumentOnServer_SelectedFolderOnServer_PanelId.get(2) as Number;
	FolderOnServer dir = param.renamedDocumentOnServer_SelectedFolderOnServer_PanelId.get(1) as FolderOnServer;
	
	if(n!= in.panelId && dir.path.compareTo(in.selectedFolderOnServer.path)==0){
		//ivy.log.error("test1");
		DocumentOnServer doc = param.renamedDocumentOnServer_SelectedFolderOnServer_PanelId.get(0) as DocumentOnServer;
		boolean found = false;
		for(DocumentOnServer d: in.documentsInDb)
		{
			if(d.fileID.compareTo(doc.fileID)==0){
				//ivy.log.error("test2");
				d.filename = doc.filename;
				d.path = doc.path;
				found=true;
				break;
			}
		}
		if(found){
			List<DocumentOnServer> l = new List<DocumentOnServer>();
			l.addAll(in.documentsInDb);
			in.documentsInDb.clear();
			out.documentsInDb.addAll(l);
			//ivy.log.error("test3");
		}
	}
	
	
}
}catch(Throwable t){
	ivy.log.error("Error in SE_fileRename",t);
	}' #txt
us0 f758 5222 726 20 20 13 0 #rect
us0 f758 @|RichDialogBroadcastStartIcon #fIcon
us0 f759 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f759 5222 790 20 20 13 0 #rect
us0 f759 @|RichDialogProcessEndIcon #fIcon
us0 f760 expr out #txt
us0 f760 5232 746 5232 790 #arcP
us0 f761 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Ask for new Name</name>
        <nameStyle>16,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f761 targetWindow NEW:card: #txt
us0 f761 targetDisplay TOP #txt
us0 f761 richDialogId ch.ivyteam.ivy.addons.filemanager.FileNameDialog #txt
us0 f761 startMethod start(String,String,String) #txt
us0 f761 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f761 requestActionDecl '<String path, String freePath, String fileExtension> param;' #txt
us0 f761 requestMappingAction 'param.path=in.selectedFolderOnServer.path;
param.freePath=in.selectedFolderOnServer.path;
' #txt
us0 f761 requestActionCode 'import ch.ivyteam.ivy.addons.filemanager.FileHandler;
param.fileExtension=FileHandler.getFileExtension(in.selectedDocument.path);' #txt
us0 f761 responseActionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f761 responseMappingAction 'out=in;
out.stringVariable=result.fileName;
' #txt
us0 f761 windowConfiguration '{/title "<%=in.windowTitle%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
us0 f761 isAsynch false #txt
us0 f761 isInnerRd true #txt
us0 f761 1358 1420 36 24 -112 5 #rect
us0 f761 @|RichDialogIcon #fIcon
us0 f761 -985168|-1|-16777216 #nodeStyle
us0 f763 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f763 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
us0 f763 1362 1466 28 28 14 0 #rect
us0 f763 @|AlternativeIcon #fIcon
us0 f764 expr out #txt
us0 f764 1376 1444 1376 1466 #arcP
us0 f716 expr in #txt
us0 f716 outCond in.stringVariable.trim().length()>0 #txt
us0 f716 1376 1494 1376 1532 #arcP
us0 f765 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f765 1302 1470 20 20 13 0 #rect
us0 f765 @|RichDialogProcessEndIcon #fIcon
us0 f766 expr in #txt
us0 f766 1362 1480 1322 1480 #arcP
us0 f767 guid 12BDDCBC2845D8CB #txt
us0 f767 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f767 method _renameFile() #txt
us0 f767 disableUIEvents false #txt
us0 f767 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>_renameFile()</name>
    </language>
</elementInfo>
' #txt
us0 f767 1166 1462 20 20 -31 -26 #rect
us0 f767 @|RichDialogMethodStartIcon #fIcon
us0 f768 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_renameFile</name>
        <nameStyle>13,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f768 actionDecl 'Number uniquePanelId;
' #txt
us0 f768 actionTable 'uniquePanelId=in.panelId;
' #txt
us0 f768 actionCode panel.fireSE_renameFile(uniquePanelId); #txt
us0 f768 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f768 fireEvent SE_renameFile(Number) #txt
us0 f768 1158 1524 36 24 20 -2 #rect
us0 f768 @|RichDialogFireEventIcon #fIcon
us0 f769 expr out #txt
us0 f769 1176 1482 1176 1524 #arcP
us0 f771 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f771 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>same Panel?</name>
        <nameStyle>11,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f771 1458 1266 28 28 14 0 #rect
us0 f771 @|AlternativeIcon #fIcon
us0 f773 expr in #txt
us0 f773 outCond in.samePanelFlag #txt
us0 f773 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,0,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f773 1464 1286 1384 1346 #arcP
us0 f774 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f774 1462 1302 20 20 13 0 #rect
us0 f774 @|RichDialogProcessEndIcon #fIcon
us0 f775 expr in #txt
us0 f775 1472 1294 1472 1302 #arcP
us0 f776 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f776 1166 1582 20 20 13 0 #rect
us0 f776 @|RichDialogProcessEndIcon #fIcon
us0 f777 expr out #txt
us0 f777 1176 1548 1176 1582 #arcP
us0 f770 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_renameFile</name>
        <nameStyle>13,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f770 guid 12BDDD0C5A62A45F #txt
us0 f770 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f770 broadcast SE_renameFile #txt
us0 f770 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f770 actionTable 'out=in;
out.samePanelFlag=in.panelId==param.uniquePanelId;
' #txt
us0 f770 1462 1222 20 20 13 0 #rect
us0 f770 @|RichDialogBroadcastStartIcon #fIcon
us0 f772 expr out #txt
us0 f772 1472 1242 1472 1266 #arcP
us0 f778 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f778 actionTable 'out=in;
' #txt
us0 f778 actionCode out.windowTitle=ivy.cms.co("/ch/ivyteam/ivy/addons/filemanager/fileManagement/windowTitles/renameFile"); #txt
us0 f778 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f778 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>wintitle</name>
        <nameStyle>8,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f778 1358 1380 36 24 -67 -10 #rect
us0 f778 @|RichDialogProcessStepIcon #fIcon
us0 f779 expr in #txt
us0 f779 outCond in.selectedDocument.locked.equals("0") #txt
us0 f779 1376 1366 1376 1380 #arcP
us0 f762 expr out #txt
us0 f762 1376 1404 1376 1420 #arcP
us0 f780 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f780 actionTable 'out=in;
' #txt
us0 f780 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f780 4046 564 36 24 20 -2 #rect
us0 f780 @|RichDialogProcessStepIcon #fIcon
us0 f781 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SE_FilesDeleted</name>
        <nameStyle>15,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f781 guid 12BDEFBD2E2716AF #txt
us0 f781 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f781 broadcast SE_FilesDeleted #txt
us0 f781 actionDecl 'ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData out;
' #txt
us0 f781 actionTable 'out=in;
' #txt
us0 f781 actionCode '
if(param.applicationName_panelID_dirPath.size()==3){
	try{
		if(param.applicationName_panelID_dirPath.get(0).compareTo(ivy.case.getApplication().getName())==0 
			&& param.applicationName_panelID_dirPath.get(1).compareTo(in.panelId.toString())!=0
			&& param.applicationName_panelID_dirPath.get(2).compareTo(in.selectedFolderOnServer.path)==0){
			panel.refreshActualSelectedFolder();
		}
	}catch(Throwable t){
			//do nothing
	}
}' #txt
us0 f781 5558 86 20 20 -35 -25 #rect
us0 f781 @|RichDialogBroadcastStartIcon #fIcon
us0 f782 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f782 5558 150 20 20 13 0 #rect
us0 f782 @|RichDialogProcessEndIcon #fIcon
us0 f783 expr out #txt
us0 f783 5568 106 5568 150 #arcP
us0 f784 guid 12C3A3659EEFBE88 #txt
us0 f784 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f784 method enableRoundCornerIconsMode(Boolean) #txt
us0 f784 disableUIEvents false #txt
us0 f784 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Boolean enable> param = methodEvent.getInputArguments();
' #txt
us0 f784 inActionCode 'out.roundedCornerIconsMode = param.enable;' #txt
us0 f784 outParameterDecl '<> result;
' #txt
us0 f784 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>enableRoundCornerIconsMode(Boolean)</name>
        <nameStyle>35,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f784 2902 958 20 20 13 0 #rect
us0 f784 @|RichDialogMethodStartIcon #fIcon
us0 f785 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f785 2902 1022 20 20 13 0 #rect
us0 f785 @|RichDialogProcessEndIcon #fIcon
us0 f786 expr out #txt
us0 f786 2912 978 2912 1022 #arcP
us0 f787 guid 12C3A3AC47962019 #txt
us0 f787 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f787 method enableReadOnlyMode(Boolean) #txt
us0 f787 disableUIEvents false #txt
us0 f787 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Boolean enable> param = methodEvent.getInputArguments();
' #txt
us0 f787 inActionCode 'out.readOnlyMode = param.enable;' #txt
us0 f787 outParameterDecl '<> result;
' #txt
us0 f787 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>enableReadOnlyMode(Boolean)</name>
        <nameStyle>27,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
us0 f787 3182 958 20 20 13 0 #rect
us0 f787 @|RichDialogMethodStartIcon #fIcon
us0 f788 type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
us0 f788 3182 1022 20 20 13 0 #rect
us0 f788 @|RichDialogProcessEndIcon #fIcon
us0 f789 expr out #txt
us0 f789 3192 978 3192 1022 #arcP
>Proto us0 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <swimlaneLabel>Start methods</swimlaneLabel>
        <swimlaneLabel>Events</swimlaneLabel>
        <swimlaneLabel>Methods from the interface that are not callback methods</swimlaneLabel>
        <swimlaneLabel>Callback methods to be reached
from java Objects</swimlaneLabel>
        <swimlaneLabel>Broadcasts</swimlaneLabel>
        <swimlaneLabel></swimlaneLabel>
    </language>
    <swimlaneSize>673</swimlaneSize>
    <swimlaneSize>1529</swimlaneSize>
    <swimlaneSize>1241</swimlaneSize>
    <swimlaneSize>1748</swimlaneSize>
    <swimlaneSize>560</swimlaneSize>
    <swimlaneColor>-10027162</swimlaneColor>
    <swimlaneColor>-154</swimlaneColor>
    <swimlaneColor>-10027009</swimlaneColor>
    <swimlaneColor>-39322</swimlaneColor>
    <swimlaneColor>-103</swimlaneColor>
</elementInfo>
' #txt
>Proto us0 .rdData2UIAction 'panel.buttonGroupGridBagLayoutPane.visible=in.isToolbarVisible && !in.roundedCornerIconsMode;
panel.buttonsGridBagLayoutPane.visible=in.isToolbarVisible;
panel.delete2Button.enabled=!in.readOnlyMode;
panel.deleteDir2Button.enabled=!in.readOnlyMode;
panel.deleteDirectoryMenuItem.visible=in.advancedActionsEnabled;
panel.edit2Button.enabled=!in.readOnlyMode;
panel.fileActionsToolBar2BoxPane.visible=in.roundedCornerIconsMode;
panel.FileNameInvisibleTextField.text=in.selectedDocument.filename;
panel.filesTable.listData=in.documentsInDb;
panel.fileToolbarPane.visible=in.isToolbarVisible;
panel.fileToolbarPane2.visible=in.isToolbarVisible;
panel.fileToolbarPane3.visible=in.isToolbarVisible;
panel.makeNewDirAtRoot2Button.enabled=!in.readOnlyMode;
panel.newCopy2Button.enabled=!in.readOnlyMode;
panel.newDirAtRootMenuItem.visible=in.advancedActionsEnabled;
panel.ordnersTree.treeData=in.folderTree;
panel.pasteMenuItem.enabled=in.copyOn;
panel.pasteMenuItemTable.enabled=in.copyOn;
panel.pathChooserFlowLayoutPane.visible=in.isPathChooserFlowLayoutVisible;
panel.ProgressBar.string=in.progressText;
panel.ProgressBar.value=in.progressUnit;
panel.ProgressBar.visible=IF(in.progressUnit>=0,true,false);
panel.serverDirectoriesToolBar2BoxPane.visible=in.isToolbarVisible && in.roundedCornerIconsMode;
panel.SplitPane.dividerSize=IF(in.isTreeVisible, 5, 0);
panel.SplitPane.leftComponent.visible=in.isTreeVisible;
panel.statusLabel.iconUri=IF(in.returnedMessage.type == ch.ivyteam.ivy.addons.filemanager.FileHandler.ERROR_MESSAGE,
ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/close/16"), ivy.cms.cr("/ch/ivyteam/ivy/addons/icons/info/16"));
panel.statusLabel.text=IF(in.#returnedMessage!=null || in.returnedMessage.text.trim()!="",
in.returnedMessage.text,
"");
panel.toogleRecursiveMenuItem.text=IF(in.isRecursive,
"Only show the files directly under the selected directory",
"Show all the files that are under the selected directory path structure");
panel.toolbarGridBagLayoutPane.visible=!in.roundedCornerIconsMode;
panel.upload2Button.enabled=!in.readOnlyMode;
panel.zip2Button.enabled=!in.readOnlyMode;
panel.mail2Button.visible=false;
' #txt
>Proto us0 .type ch.ivyteam.ivy.addons.filemanager.FileManager.FileManagerData #txt
>Proto us0 .processKind RICH_DIALOG #txt
>Proto us0 -8 -8 16 16 16 26 #rect
>Proto us0 '' #fIcon
us0 f18 mainOut f20 tail #connect
us0 f20 head f19 mainIn #connect
us0 f19 mainOut f22 tail #connect
us0 f22 head f21 mainIn #connect
us0 f75 mainOut f78 tail #connect
us0 f78 head f77 in #connect
us0 f27 mainOut f86 tail #connect
us0 f86 head f85 mainIn #connect
us0 f85 mainOut f88 tail #connect
us0 f88 head f87 in #connect
us0 f87 out f29 tail #connect
us0 f29 head f28 mainIn #connect
us0 f87 out f83 tail #connect
us0 f83 head f30 mainIn #connect
us0 f77 out f106 tail #connect
us0 f106 head f105 mainIn #connect
us0 f13 out f16 tail #connect
us0 f16 head f15 mainIn #connect
us0 f13 out f121 tail #connect
us0 f121 head f11 mainIn #connect
us0 f126 mainOut f128 tail #connect
us0 f128 head f127 mainIn #connect
us0 f112 mainOut f132 tail #connect
us0 f132 head f124 mainIn #connect
us0 f124 mainOut f135 tail #connect
us0 f135 head f134 mainIn #connect
us0 f136 mainOut f138 tail #connect
us0 f138 head f137 mainIn #connect
us0 f137 mainOut f141 tail #connect
us0 f141 head f140 in #connect
us0 f92 mainOut f144 tail #connect
us0 f144 head f124 mainIn #connect
us0 f145 mainOut f147 tail #connect
us0 f147 head f146 mainIn #connect
us0 f17 mainOut f23 tail #connect
us0 f23 head f25 mainIn #connect
us0 f26 mainOut f12 tail #connect
us0 f12 head f11 mainIn #connect
us0 f150 mainOut f152 tail #connect
us0 f152 head f151 mainIn #connect
us0 f153 mainOut f155 tail #connect
us0 f155 head f154 mainIn #connect
us0 f154 mainOut f158 tail #connect
us0 f158 head f157 mainIn #connect
us0 f157 mainOut f159 tail #connect
us0 f159 head f156 mainIn #connect
us0 f162 mainOut f164 tail #connect
us0 f164 head f163 mainIn #connect
us0 f95 out f168 tail #connect
us0 f168 head f31 mainIn #connect
us0 f77 out f177 tail #connect
us0 f177 head f176 mainIn #connect
us0 f176 mainOut f89 tail #connect
us0 f89 head f81 mainIn #connect
us0 f33 mainOut f107 tail #connect
us0 f107 head f115 mainIn #connect
us0 f114 mainOut f123 tail #connect
us0 f123 head f3 mainIn #connect
us0 f10 mainOut f179 tail #connect
us0 f179 head f166 mainIn #connect
us0 f166 mainOut f24 tail #connect
us0 f24 head f94 mainIn #connect
us0 f9 mainOut f181 tail #connect
us0 f181 head f180 mainIn #connect
us0 f180 mainOut f113 tail #connect
us0 f113 head f44 mainIn #connect
us0 f182 mainOut f184 tail #connect
us0 f184 head f183 mainIn #connect
us0 f183 mainOut f186 tail #connect
us0 f186 head f185 mainIn #connect
us0 f187 mainOut f189 tail #connect
us0 f189 head f188 mainIn #connect
us0 f201 mainOut f204 tail #connect
us0 f204 head f203 in #connect
us0 f205 mainOut f207 tail #connect
us0 f207 head f206 mainIn #connect
us0 f203 out f208 tail #connect
us0 f208 head f206 mainIn #connect
us0 f206 mainOut f212 tail #connect
us0 f212 head f211 mainIn #connect
us0 f227 mainOut f229 tail #connect
us0 f229 head f228 mainIn #connect
us0 f230 mainOut f232 tail #connect
us0 f232 head f231 mainIn #connect
us0 f239 mainOut f241 tail #connect
us0 f241 head f240 mainIn #connect
us0 f240 mainOut f243 tail #connect
us0 f243 head f242 mainIn #connect
us0 f198 mainOut f245 tail #connect
us0 f245 head f244 mainIn #connect
us0 f244 mainOut f247 tail #connect
us0 f247 head f246 in #connect
us0 f246 out f248 tail #connect
us0 f248 head f234 mainIn #connect
us0 f233 mainOut f235 tail #connect
us0 f235 head f199 in #connect
us0 f252 mainOut f255 tail #connect
us0 f255 head f254 mainIn #connect
us0 f250 mainOut f259 tail #connect
us0 f259 head f258 in #connect
us0 f258 out f261 tail #connect
us0 f261 head f260 mainIn #connect
us0 f260 mainOut f263 tail #connect
us0 f263 head f262 in #connect
us0 f264 mainOut f267 tail #connect
us0 f267 head f266 mainIn #connect
us0 f258 out f270 tail #connect
us0 f270 head f244 mainIn #connect
us0 f258 out f272 tail #connect
us0 f272 head f271 mainIn #connect
us0 f257 head f273 mainIn #connect
us0 f277 mainOut f279 tail #connect
us0 f279 head f278 mainIn #connect
us0 f280 mainOut f282 tail #connect
us0 f282 head f281 mainIn #connect
us0 f28 mainOut f291 tail #connect
us0 f291 head f290 in #connect
us0 f301 mainOut f312 tail #connect
us0 f312 head f306 mainIn #connect
us0 f74 mainOut f330 tail #connect
us0 f330 head f329 in #connect
us0 f331 mainOut f333 tail #connect
us0 f333 head f176 mainIn #connect
us0 f334 mainOut f337 tail #connect
us0 f337 head f336 mainIn #connect
us0 f335 mainOut f339 tail #connect
us0 f339 head f338 mainIn #connect
us0 f340 mainOut f342 tail #connect
us0 f342 head f341 mainIn #connect
us0 f348 out f249 tail #connect
us0 f249 head f233 mainIn #connect
us0 f246 out f351 tail #connect
us0 f351 head f350 mainIn #connect
us0 f350 mainOut f349 tail #connect
us0 f349 head f348 in #connect
us0 f352 mainOut f354 tail #connect
us0 f354 head f244 mainIn #connect
us0 f355 head f273 mainIn #connect
us0 f273 mainOut f256 tail #connect
us0 f256 head f306 mainIn #connect
us0 f8 mainOut f133 tail #connect
us0 f133 head f13 in #connect
us0 f142 head f358 mainIn #connect
us0 f358 mainOut f360 tail #connect
us0 f360 head f359 mainIn #connect
us0 f361 mainOut f363 tail #connect
us0 f363 head f362 mainIn #connect
us0 f362 mainOut f367 tail #connect
us0 f367 head f366 in #connect
us0 f366 out f370 tail #connect
us0 f370 head f368 mainIn #connect
us0 f368 mainOut f374 tail #connect
us0 f374 head f373 mainIn #connect
us0 f140 out f142 tail #connect
us0 f274 mainOut f276 tail #connect
us0 f276 head f275 mainIn #connect
us0 f275 mainOut f357 tail #connect
us0 f357 head f140 in #connect
us0 f116 mainOut f378 tail #connect
us0 f378 head f377 mainIn #connect
us0 f210 mainOut f379 tail #connect
us0 f379 head f284 in #connect
us0 f284 out f381 tail #connect
us0 f381 head f380 mainIn #connect
us0 f380 mainOut f385 tail #connect
us0 f385 head f384 mainIn #connect
us0 f382 mainOut f386 tail #connect
us0 f386 head f380 mainIn #connect
us0 f393 mainOut f396 tail #connect
us0 f396 head f395 in #connect
us0 f395 out f398 tail #connect
us0 f398 head f397 mainIn #connect
us0 f397 mainOut f400 tail #connect
us0 f400 head f399 mainIn #connect
us0 f395 out f402 tail #connect
us0 f402 head f401 mainIn #connect
us0 f411 mainOut f415 tail #connect
us0 f415 head f413 in #connect
us0 f209 mainOut f418 tail #connect
us0 f418 head f411 mainIn #connect
us0 f413 out f283 tail #connect
us0 f283 head f210 mainIn #connect
us0 f403 mainOut f407 tail #connect
us0 f407 head f404 in #connect
us0 f405 mainOut f409 tail #connect
us0 f409 head f406 mainIn #connect
us0 f387 mainOut f410 tail #connect
us0 f410 head f403 mainIn #connect
us0 f413 out f417 tail #connect
us0 f417 head f416 mainIn #connect
us0 f416 mainOut f412 tail #connect
us0 f412 head f414 mainIn #connect
us0 f419 mainOut f421 tail #connect
us0 f421 head f420 mainIn #connect
us0 f422 mainOut f424 tail #connect
us0 f424 head f423 mainIn #connect
us0 f425 out f428 tail #connect
us0 f428 head f427 mainIn #connect
us0 f427 mainOut f430 tail #connect
us0 f430 head f429 in #connect
us0 f429 out f434 tail #connect
us0 f434 head f433 mainIn #connect
us0 f435 mainOut f438 tail #connect
us0 f438 head f437 in #connect
us0 f439 mainOut f441 tail #connect
us0 f441 head f429 in #connect
us0 f443 head f442 mainIn #connect
us0 f442 mainOut f444 tail #connect
us0 f444 head f427 mainIn #connect
us0 f446 head f445 mainIn #connect
us0 f445 mainOut f449 tail #connect
us0 f449 head f425 in #connect
us0 f451 head f450 mainIn #connect
us0 f450 mainOut f447 tail #connect
us0 f447 head f445 mainIn #connect
us0 f425 out f453 tail #connect
us0 f453 head f452 in #connect
us0 f455 mainOut f462 tail #connect
us0 f462 head f461 mainIn #connect
us0 f461 mainOut f460 tail #connect
us0 f460 head f458 mainIn #connect
us0 f175 out f426 tail #connect
us0 f426 head f425 in #connect
us0 f175 out f491 tail #connect
us0 f491 head f490 mainIn #connect
us0 f95 out f149 tail #connect
us0 f149 head f108 mainIn #connect
us0 f165 mainOut f167 tail #connect
us0 f167 head f108 mainIn #connect
us0 f122 mainOut f125 tail #connect
us0 f125 head f108 mainIn #connect
us0 f178 mainOut f471 tail #connect
us0 f471 head f470 mainIn #connect
us0 f473 mainOut f475 tail #connect
us0 f475 head f474 mainIn #connect
us0 f388 mainOut f390 tail #connect
us0 f390 head f389 mainIn #connect
us0 f391 mainOut f476 tail #connect
us0 f476 head f392 mainIn #connect
us0 f452 out f224 tail #connect
us0 f224 head f223 in #connect
us0 f437 out f459 tail #connect
us0 f459 head f456 mainIn #connect
us0 f437 out f443 tail #connect
us0 f437 out f446 tail #connect
us0 f456 mainOut f440 tail #connect
us0 f440 head f439 mainIn #connect
us0 f524 head f523 mainIn #connect
us0 f225 mainOut f80 tail #connect
us0 f80 head f579 mainIn #connect
us0 f223 out f454 tail #connect
us0 f454 head f579 mainIn #connect
us0 f579 mainOut f580 tail #connect
us0 f580 head f458 mainIn #connect
us0 f469 mainOut f585 tail #connect
us0 f585 head f472 mainIn #connect
us0 f472 mainOut f586 tail #connect
us0 f586 head f470 mainIn #connect
us0 f584 mainOut f587 tail #connect
us0 f587 head f377 mainIn #connect
us0 f49 out f2 tail #connect
us0 f2 head f46 mainIn #connect
us0 f49 out f45 tail #connect
us0 f45 head f1 mainIn #connect
us0 f46 mainOut f48 tail #connect
us0 f48 head f1 mainIn #connect
us0 f343 mainOut f60 tail #connect
us0 f60 head f59 mainIn #connect
us0 f59 mainOut f61 tail #connect
us0 f61 head f346 mainIn #connect
us0 f215 mainOut f62 tail #connect
us0 f62 head f14 mainIn #connect
us0 f306 mainOut f64 tail #connect
us0 f64 head f63 mainIn #connect
us0 f588 mainOut f65 tail #connect
us0 f65 head f592 mainIn #connect
us0 f494 mainOut f67 tail #connect
us0 f67 head f66 mainIn #connect
us0 f66 mainOut f68 tail #connect
us0 f68 head f508 mainIn #connect
us0 f15 mainOut f32 tail #connect
us0 f32 head f26 mainIn #connect
us0 f105 mainOut f69 tail #connect
us0 f69 head f503 mainIn #connect
us0 f503 mainOut f70 tail #connect
us0 f70 head f81 mainIn #connect
us0 f423 mainOut f72 tail #connect
us0 f72 head f175 in #connect
us0 f324 mainOut f82 tail #connect
us0 f82 head f79 mainIn #connect
us0 f79 mainOut f84 tail #connect
us0 f84 head f327 mainIn #connect
us0 f285 mainOut f97 tail #connect
us0 f97 head f90 mainIn #connect
us0 f90 mainOut f98 tail #connect
us0 f98 head f288 mainIn #connect
us0 f43 mainOut f37 tail #connect
us0 f37 head f49 in #connect
us0 f292 mainOut f38 tail #connect
us0 f38 head f95 in #connect
us0 f39 head f95 in #connect
us0 f31 mainOut f50 tail #connect
us0 f50 head f40 mainIn #connect
us0 f117 mainOut f120 tail #connect
us0 f120 head f119 mainIn #connect
us0 f118 mainOut f148 tail #connect
us0 f148 head f119 mainIn #connect
us0 f169 mainOut f171 tail #connect
us0 f171 head f170 mainIn #connect
us0 f170 mainOut f174 tail #connect
us0 f174 head f173 mainIn #connect
us0 f172 mainOut f194 tail #connect
us0 f194 head f192 mainIn #connect
us0 f192 mainOut f196 tail #connect
us0 f196 head f195 mainIn #connect
us0 f108 mainOut f200 tail #connect
us0 f200 head f197 in #connect
us0 f197 out f202 tail #connect
us0 f202 head f593 mainIn #connect
us0 f197 out f217 tail #connect
us0 f217 head f216 mainIn #connect
us0 f216 mainOut f213 tail #connect
us0 f213 head f1 mainIn #connect
us0 f221 mainOut f286 tail #connect
us0 f286 head f222 mainIn #connect
us0 f222 mainOut f289 tail #connect
us0 f289 head f287 mainIn #connect
us0 f218 mainOut f294 tail #connect
us0 f294 head f220 mainIn #connect
us0 f220 mainOut f296 tail #connect
us0 f296 head f295 mainIn #connect
us0 f219 mainOut f298 tail #connect
us0 f298 head f297 mainIn #connect
us0 f299 mainOut f300 tail #connect
us0 f300 head f377 mainIn #connect
us0 f302 mainOut f304 tail #connect
us0 f304 head f303 mainIn #connect
us0 f305 mainOut f310 tail #connect
us0 f310 head f309 mainIn #connect
us0 f309 mainOut f308 tail #connect
us0 f308 head f307 mainIn #connect
us0 f311 mainOut f313 tail #connect
us0 f313 head f329 in #connect
us0 f314 mainOut f318 tail #connect
us0 f318 head f317 in #connect
us0 f317 out f325 tail #connect
us0 f325 head f323 mainIn #connect
us0 f323 mainOut f322 tail #connect
us0 f322 head f321 mainIn #connect
us0 f321 mainOut f328 tail #connect
us0 f328 head f326 in #connect
us0 f326 out f316 tail #connect
us0 f316 head f315 mainIn #connect
us0 f315 mainOut f365 tail #connect
us0 f365 head f347 in #connect
us0 f465 head f463 mainIn #connect
us0 f463 mainOut f477 tail #connect
us0 f477 head f466 mainIn #connect
us0 f466 mainOut f478 tail #connect
us0 f478 head f432 mainIn #connect
us0 f326 out f479 tail #connect
us0 f479 head f432 mainIn #connect
us0 f344 mainOut f480 tail #connect
us0 f480 head f345 mainIn #connect
us0 f345 mainOut f485 tail #connect
us0 f485 head f317 in #connect
us0 f317 out f482 tail #connect
us0 f482 head f432 mainIn #connect
us0 f347 out f320 tail #connect
us0 f320 head f319 mainIn #connect
us0 f347 out f465 tail #connect
us0 f319 mainOut f431 tail #connect
us0 f431 head f432 mainIn #connect
us0 f486 mainOut f488 tail #connect
us0 f488 head f487 mainIn #connect
us0 f495 mainOut f498 tail #connect
us0 f498 head f497 mainIn #connect
us0 f496 mainOut f499 tail #connect
us0 f499 head f497 mainIn #connect
us0 f377 mainOut f500 tail #connect
us0 f500 head f43 mainIn #connect
us0 f5 mainOut f501 tail #connect
us0 f501 head f457 mainIn #connect
us0 f457 mainOut f7 tail #connect
us0 f7 head f6 mainIn #connect
us0 f502 mainOut f505 tail #connect
us0 f505 head f504 mainIn #connect
us0 f506 mainOut f509 tail #connect
us0 f509 head f507 mainIn #connect
us0 f507 mainOut f511 tail #connect
us0 f511 head f510 mainIn #connect
us0 f512 mainOut f518 tail #connect
us0 f518 head f517 in #connect
us0 f517 out f529 tail #connect
us0 f529 head f525 mainIn #connect
us0 f532 mainOut f561 tail #connect
us0 f561 head f554 mainIn #connect
us0 f581 mainOut f589 tail #connect
us0 f589 head f583 mainIn #connect
us0 f583 mainOut f591 tail #connect
us0 f591 head f590 in #connect
us0 f590 out f540 tail #connect
us0 f540 head f532 mainIn #connect
us0 f554 mainOut f595 tail #connect
us0 f595 head f594 mainIn #connect
us0 f594 mainOut f597 tail #connect
us0 f597 head f596 mainIn #connect
us0 f525 mainOut f601 tail #connect
us0 f601 head f600 in #connect
us0 f600 out f582 tail #connect
us0 f582 head f581 mainIn #connect
us0 f590 out f604 tail #connect
us0 f604 head f603 mainIn #connect
us0 f603 mainOut f606 tail #connect
us0 f606 head f605 in #connect
us0 f605 out f598 tail #connect
us0 f598 head f594 mainIn #connect
us0 f605 out f607 tail #connect
us0 f607 head f596 mainIn #connect
us0 f600 out f608 tail #connect
us0 f608 head f605 in #connect
us0 f517 out f602 tail #connect
us0 f602 head f605 in #connect
us0 f429 out f609 tail #connect
us0 f609 head f599 mainIn #connect
us0 f429 out f451 tail #connect
us0 f73 out f611 tail #connect
us0 f611 head f610 mainIn #connect
us0 f404 out f613 tail #connect
us0 f613 head f612 mainIn #connect
us0 f612 mainOut f394 tail #connect
us0 f394 head f393 mainIn #connect
us0 f290 out f615 tail #connect
us0 f615 head f614 mainIn #connect
us0 f290 out f39 tail #connect
us0 f614 mainOut f293 tail #connect
us0 f293 head f292 mainIn #connect
us0 f375 mainOut f617 tail #connect
us0 f617 head f616 mainIn #connect
us0 f616 mainOut f143 tail #connect
us0 f143 head f139 mainIn #connect
us0 f348 out f619 tail #connect
us0 f619 head f618 mainIn #connect
us0 f618 mainOut f353 tail #connect
us0 f353 head f352 mainIn #connect
us0 f621 head f620 mainIn #connect
us0 f620 mainOut f253 tail #connect
us0 f253 head f252 mainIn #connect
us0 f199 out f623 tail #connect
us0 f623 head f622 mainIn #connect
us0 f199 out f621 tail #connect
us0 f199 out f257 tail #connect
us0 f622 mainOut f251 tail #connect
us0 f251 head f250 mainIn #connect
us0 f628 mainOut f630 tail #connect
us0 f630 head f629 mainIn #connect
us0 f629 mainOut f632 tail #connect
us0 f632 head f631 mainIn #connect
us0 f203 out f640 tail #connect
us0 f640 head f637 mainIn #connect
us0 f191 mainOut f641 tail #connect
us0 f641 head f214 mainIn #connect
us0 f214 mainOut f638 tail #connect
us0 f638 head f637 mainIn #connect
us0 f637 mainOut f643 tail #connect
us0 f643 head f642 mainIn #connect
us0 f642 mainOut f639 tail #connect
us0 f639 head f193 mainIn #connect
us0 f645 out f648 tail #connect
us0 f648 head f647 mainIn #connect
us0 f647 mainOut f650 tail #connect
us0 f650 head f649 mainIn #connect
us0 f645 out f651 tail #connect
us0 f651 head f649 mainIn #connect
us0 f652 mainOut f654 tail #connect
us0 f654 head f653 mainIn #connect
us0 f653 mainOut f656 tail #connect
us0 f656 head f655 mainIn #connect
us0 f657 mainOut f658 tail #connect
us0 f658 head f41 in #connect
us0 f41 out f660 tail #connect
us0 f660 head f659 mainIn #connect
us0 f41 out f662 tail #connect
us0 f662 head f661 mainIn #connect
us0 f659 mainOut f664 tail #connect
us0 f664 head f663 mainIn #connect
us0 f661 mainOut f666 tail #connect
us0 f666 head f659 mainIn #connect
us0 f668 mainOut f56 tail #connect
us0 f56 head f73 in #connect
us0 f673 mainOut f676 tail #connect
us0 f676 head f675 mainIn #connect
us0 f675 mainOut f678 tail #connect
us0 f678 head f677 mainIn #connect
us0 f433 mainOut f71 tail #connect
us0 f71 head f445 mainIn #connect
us0 f99 mainOut f93 tail #connect
us0 f93 head f91 mainIn #connect
us0 f0 mainOut f96 tail #connect
us0 f96 head f91 mainIn #connect
us0 f34 mainOut f4 tail #connect
us0 f4 head f91 mainIn #connect
us0 f52 mainOut f35 tail #connect
us0 f35 head f91 mainIn #connect
us0 f53 mainOut f109 tail #connect
us0 f109 head f91 mainIn #connect
us0 f160 mainOut f54 tail #connect
us0 f54 head f91 mainIn #connect
us0 f467 mainOut f110 tail #connect
us0 f110 head f91 mainIn #connect
us0 f487 mainOut f111 tail #connect
us0 f111 head f91 mainIn #connect
us0 f634 mainOut f161 tail #connect
us0 f161 head f91 mainIn #connect
us0 f91 mainOut f468 tail #connect
us0 f468 head f3 mainIn #connect
us0 f129 mainOut f131 tail #connect
us0 f131 head f673 mainIn #connect
us0 f73 out f237 tail #connect
us0 f237 head f236 mainIn #connect
us0 f236 mainOut f58 tail #connect
us0 f58 head f201 mainIn #connect
us0 f404 out f356 tail #connect
us0 f356 head f238 mainIn #connect
us0 f238 mainOut f364 tail #connect
us0 f364 head f405 mainIn #connect
us0 f262 out f636 tail #connect
us0 f636 head f635 mainIn #connect
us0 f262 out f355 tail #connect
us0 f635 mainOut f265 tail #connect
us0 f265 head f264 mainIn #connect
us0 f140 out f682 tail #connect
us0 f682 head f674 mainIn #connect
us0 f674 mainOut f376 tail #connect
us0 f376 head f375 mainIn #connect
us0 f284 out f685 tail #connect
us0 f685 head f684 mainIn #connect
us0 f684 mainOut f383 tail #connect
us0 f383 head f382 mainIn #connect
us0 f329 out f687 tail #connect
us0 f687 head f686 mainIn #connect
us0 f686 mainOut f332 tail #connect
us0 f332 head f75 mainIn #connect
us0 f329 out f689 tail #connect
us0 f689 head f688 mainIn #connect
us0 f688 mainOut f47 tail #connect
us0 f47 head f331 mainIn #connect
us0 f223 out f691 tail #connect
us0 f691 head f690 mainIn #connect
us0 f690 mainOut f226 tail #connect
us0 f226 head f225 mainIn #connect
us0 f452 out f693 tail #connect
us0 f693 head f692 mainIn #connect
us0 f692 mainOut f436 tail #connect
us0 f436 head f455 mainIn #connect
us0 f610 mainOut f695 tail #connect
us0 f695 head f670 in #connect
us0 f670 out f57 tail #connect
us0 f57 head f191 mainIn #connect
us0 f670 out f697 tail #connect
us0 f697 head f696 mainIn #connect
us0 f696 mainOut f698 tail #connect
us0 f698 head f214 mainIn #connect
us0 f699 mainOut f700 tail #connect
us0 f700 head f91 mainIn #connect
us0 f701 mainOut f702 tail #connect
us0 f702 head f487 mainIn #connect
us0 f513 mainOut f704 tail #connect
us0 f704 head f703 mainIn #connect
us0 f516 mainOut f706 tail #connect
us0 f706 head f705 in #connect
us0 f703 mainOut f709 tail #connect
us0 f709 head f708 mainIn #connect
us0 f708 mainOut f515 tail #connect
us0 f515 head f514 mainIn #connect
us0 f710 mainOut f712 tail #connect
us0 f712 head f711 mainIn #connect
us0 f713 head f707 mainIn #connect
us0 f717 mainOut f719 tail #connect
us0 f719 head f718 mainIn #connect
us0 f718 mainOut f720 tail #connect
us0 f720 head f91 mainIn #connect
us0 f721 mainOut f723 tail #connect
us0 f723 head f722 mainIn #connect
us0 f722 mainOut f724 tail #connect
us0 f724 head f487 mainIn #connect
us0 f599 mainOut f76 tail #connect
us0 f76 head f435 mainIn #connect
us0 f665 mainOut f725 tail #connect
us0 f725 head f667 in #connect
us0 f694 ao f100 tail #connect
us0 f100 head f277 @CG|ai #connect
us0 f667 out f102 tail #connect
us0 f102 head f101 mainIn #connect
us0 f667 out f669 tail #connect
us0 f669 head f668 mainIn #connect
us0 f667 out f130 tail #connect
us0 f130 head f129 mainIn #connect
us0 f705 out f726 tail #connect
us0 f726 head f519 in #connect
us0 f705 out f713 tail #connect
us0 f519 out f727 tail #connect
us0 f727 head f574 mainIn #connect
us0 f519 out f524 tail #connect
us0 f707 mainOut f522 tail #connect
us0 f522 head f574 mainIn #connect
us0 f574 mainOut f570 tail #connect
us0 f570 head f520 in #connect
us0 f577 mainOut f578 tail #connect
us0 f578 head f576 mainIn #connect
us0 f575 mainOut f624 tail #connect
us0 f624 head f577 mainIn #connect
us0 f520 out f625 tail #connect
us0 f625 head f576 mainIn #connect
us0 f520 out f714 tail #connect
us0 f714 head f575 mainIn #connect
us0 f576 mainOut f729 tail #connect
us0 f729 head f728 mainIn #connect
us0 f190 mainOut f731 tail #connect
us0 f731 head f730 in #connect
us0 f730 out f55 tail #connect
us0 f55 head f101 mainIn #connect
us0 f730 out f732 tail #connect
us0 f732 head f668 mainIn #connect
us0 f738 mainOut f741 tail #connect
us0 f741 head f740 mainIn #connect
us0 f733 mainOut f734 tail #connect
us0 f734 head f738 mainIn #connect
us0 f735 mainOut f743 tail #connect
us0 f743 head f739 in #connect
us0 f745 head f744 mainIn #connect
us0 f751 head f30 mainIn #connect
us0 f51 mainOut f672 tail #connect
us0 f672 head f671 in #connect
us0 f671 out f752 tail #connect
us0 f752 head f403 mainIn #connect
us0 f671 out f754 tail #connect
us0 f754 head f753 mainIn #connect
us0 f366 out f755 tail #connect
us0 f755 head f373 mainIn #connect
us0 f748 out f372 tail #connect
us0 f372 head f371 mainIn #connect
us0 f748 out f751 tail #connect
us0 f371 mainOut f481 tail #connect
us0 f481 head f85 mainIn #connect
us0 f103 mainOut f104 tail #connect
us0 f104 head f497 mainIn #connect
us0 f489 head f483 mainIn #connect
us0 f3 mainOut f526 tail #connect
us0 f526 head f521 in #connect
us0 f521 out f528 tail #connect
us0 f528 head f527 mainIn #connect
us0 f521 out f268 tail #connect
us0 f268 head f108 mainIn #connect
us0 f593 mainOut f531 tail #connect
us0 f531 head f530 in #connect
us0 f530 out f534 tail #connect
us0 f534 head f533 mainIn #connect
us0 f530 out f36 tail #connect
us0 f36 head f43 mainIn #connect
us0 f490 mainOut f484 tail #connect
us0 f484 head f464 mainIn #connect
us0 f464 mainOut f493 tail #connect
us0 f493 head f492 mainIn #connect
us0 f539 mainOut f541 tail #connect
us0 f541 head f645 in #connect
us0 f269 mainOut f408 tail #connect
us0 f408 head f369 in #connect
us0 f537 mainOut f538 tail #connect
us0 f538 head f748 in #connect
us0 f739 out f543 tail #connect
us0 f543 head f542 mainIn #connect
us0 f739 out f745 tail #connect
us0 f542 mainOut f544 tail #connect
us0 f544 head f742 mainIn #connect
us0 f369 out f546 tail #connect
us0 f546 head f545 mainIn #connect
us0 f369 out f489 tail #connect
us0 f545 mainOut f448 tail #connect
us0 f448 head f483 mainIn #connect
us0 f535 mainOut f553 tail #connect
us0 f553 head f536 mainIn #connect
us0 f548 mainOut f550 tail #connect
us0 f550 head f549 mainIn #connect
us0 f547 mainOut f552 tail #connect
us0 f552 head f551 in #connect
us0 f551 out f556 tail #connect
us0 f556 head f555 mainIn #connect
us0 f555 mainOut f558 tail #connect
us0 f558 head f557 mainIn #connect
us0 f551 out f559 tail #connect
us0 f559 head f557 mainIn #connect
us0 f560 mainOut f564 tail #connect
us0 f564 head f563 mainIn #connect
us0 f563 mainOut f562 tail #connect
us0 f562 head f703 mainIn #connect
us0 f565 mainOut f567 tail #connect
us0 f567 head f566 mainIn #connect
us0 f566 mainOut f569 tail #connect
us0 f569 head f568 mainIn #connect
us0 f571 mainOut f573 tail #connect
us0 f573 head f572 in #connect
us0 f572 out f627 tail #connect
us0 f627 head f626 mainIn #connect
us0 f626 mainOut f633 tail #connect
us0 f633 head f705 in #connect
us0 f572 out f644 tail #connect
us0 f644 head f568 mainIn #connect
us0 f646 mainOut f680 tail #connect
us0 f680 head f679 in #connect
us0 f679 out f683 tail #connect
us0 f683 head f681 mainIn #connect
us0 f737 head f736 mainIn #connect
us0 f736 mainOut f747 tail #connect
us0 f747 head f746 mainIn #connect
us0 f746 mainOut f750 tail #connect
us0 f750 head f749 mainIn #connect
us0 f715 mainOut f757 tail #connect
us0 f757 head f756 mainIn #connect
us0 f758 mainOut f760 tail #connect
us0 f760 head f759 mainIn #connect
us0 f761 mainOut f764 tail #connect
us0 f764 head f763 in #connect
us0 f763 out f716 tail #connect
us0 f716 head f715 mainIn #connect
us0 f763 out f766 tail #connect
us0 f766 head f765 mainIn #connect
us0 f767 mainOut f769 tail #connect
us0 f769 head f768 mainIn #connect
us0 f771 out f773 tail #connect
us0 f773 head f679 in #connect
us0 f771 out f775 tail #connect
us0 f775 head f774 mainIn #connect
us0 f768 mainOut f777 tail #connect
us0 f777 head f776 mainIn #connect
us0 f770 mainOut f772 tail #connect
us0 f772 head f771 in #connect
us0 f679 out f779 tail #connect
us0 f779 head f778 mainIn #connect
us0 f679 out f737 tail #connect
us0 f778 mainOut f762 tail #connect
us0 f762 head f761 mainIn #connect
us0 f781 mainOut f783 tail #connect
us0 f783 head f782 mainIn #connect
us0 f784 mainOut f786 tail #connect
us0 f786 head f785 mainIn #connect
us0 f787 mainOut f789 tail #connect
us0 f789 head f788 mainIn #connect
