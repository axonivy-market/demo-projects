--- RCPTT testcase ---
Format-Version: 1.0
Contexts: _aaETQPhDEeaBd7rbMJob0A,_EFdg4NJ0EeaR9M6EuzThAQ,_uTeBUD3gEeadqZIC2MODiA,_vNHwsD3hEeadqZIC2MODiA,_iWGD0D31EeadqZIC2MODiA,_j1ZYwD4IEea1-MPAK3G86w
Element-Name: ExecuteRestMapping
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _ZJY28D3lEeadqZIC2MODiA
Runtime-Version: 2.4.2.201904290004
Save-Time: 5/15/19 8:15 AM
Testcase-Type: ecl
Verifications: _SbgVwD39EeadqZIC2MODiA

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

proc "startMappingProcess" [val processName]
{
	clearRuntimeLog
	let[val proc [format "rest\\/dataMapping\\/%s" $processName]]
	{
		startBpmProcess -projectName $project -ivpPath $proc
	}
}

let [val project "ConnectivityDemos"]
{
	// setup
	importArchive -section "Samples" -projectName $project
	showOnlyUserRuntimeLog
	startEngines
	simulationSelected false

	startBpmProcess -projectName $project -ivpPath "rest\\/callOwnPersonRestService\\/listPersons.ivp"
	assertRuntimeLogMsg "firstname=Bruno,lastname=B"

	startMappingProcess "rawJSON.ivp"
	assertRuntimeLogMsg "new ID = 101"

	startMappingProcess "formData.ivp"
	assertRuntimeLogMsg "new ID = 101"

	startMappingProcess "complexObject.ivp"
	assertRuntimeLogMsg "new ID = 101"

	startMappingProcess "readPartialObject.ivp"
	assertRuntimeLogMsg "got user = User(name=Leanne Graham, email=Sincere@april.biz, phone=1-770-736-8031 x56442)"

	startMappingProcess "queryParameters.ivp"
	assertRuntimeLogMsg "resolved 10 posts from user with id"

	startMappingProcess "pathParameters.ivp"
	assertRuntimeLogMsg "JSON:{\"id\":"

	startMappingProcess "acceptType.ivp"
	assertRuntimeLogMsg "JSON:{\"id\":"
	// yet we have no way to assert the second message which should contain XML.

	clearRuntimeLog
	startBpmProcess -projectName $project -ivpPath "rest\\/odata\\/readCollection.ivp"
	assertRuntimeLogMsg "got 20 users"

	clearRuntimeLog
	startBpmProcess -projectName $project -ivpPath "rest\\/odata\\/readById.ivp"
	assertRuntimeLogMsg "found User(UserName=russellwhyte, FirstName=Russell, LastName=Whyte, Gender=Male)"
	simulationSelected true
}
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
