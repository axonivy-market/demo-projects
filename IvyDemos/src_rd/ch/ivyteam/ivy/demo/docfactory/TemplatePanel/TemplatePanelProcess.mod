[Ivy]
[>Created: Fri Aug 09 11:08:49 EDT 2013]
124A0A18116D9EA3 3.17 #module
>Proto >Proto Collection #zClass
Ts0 TemplatePanelProcess Big #zClass
Ts0 RD #cInfo
Ts0 #process
Ts0 @TextInP .xml .xml #zField
Ts0 @TextInP .responsibility .responsibility #zField
Ts0 @AnnotationInP-0n ai ai #zField
Ts0 @TextInP .resExport .resExport #zField
Ts0 @TextInP .type .type #zField
Ts0 @TextInP .processKind .processKind #zField
Ts0 @TextInP .ui2RdDataAction .ui2RdDataAction #zField
Ts0 @TextInP .rdData2UIAction .rdData2UIAction #zField
Ts0 @MessageFlowInP-0n messageIn messageIn #zField
Ts0 @MessageFlowOutP-0n messageOut messageOut #zField
Ts0 @RichDialogInitStart f0 '' #zField
Ts0 @RichDialogProcessEnd f1 '' #zField
Ts0 @PushWFArc f2 '' #zField
Ts0 @RichDialogInitStart f3 '' #zField
Ts0 @RichDialogInitStart f4 '' #zField
Ts0 @RichDialogMethodStart f5 '' #zField
Ts0 @RichDialogMethodStart f6 '' #zField
Ts0 @RichDialogMethodStart f7 '' #zField
Ts0 @RichDialogMethodStart f8 '' #zField
Ts0 @RichDialogProcessStep f9 '' #zField
Ts0 @PushWFArc f10 '' #zField
Ts0 @RichDialogProcessStep f12 '' #zField
Ts0 @PushWFArc f13 '' #zField
Ts0 @RichDialogProcessStep f14 '' #zField
Ts0 @PushWFArc f16 '' #zField
Ts0 @RichDialogProcessEnd f20 '' #zField
Ts0 @RichDialogProcessEnd f22 '' #zField
Ts0 @PushWFArc f23 '' #zField
Ts0 @RichDialogProcessStep f24 '' #zField
Ts0 @PushWFArc f25 '' #zField
Ts0 @RichDialogProcessEnd f26 '' #zField
Ts0 @PushWFArc f27 '' #zField
Ts0 @RichDialogMethodStart f28 '' #zField
Ts0 @RichDialogMethodStart f29 '' #zField
Ts0 @RichDialogProcessEnd f30 '' #zField
Ts0 @PushWFArc f31 '' #zField
Ts0 @RichDialogProcessEnd f32 '' #zField
Ts0 @PushWFArc f33 '' #zField
Ts0 @RichDialogMethodStart f34 '' #zField
Ts0 @RichDialogProcessStep f35 '' #zField
Ts0 @PushWFArc f36 '' #zField
Ts0 @RichDialogProcessEnd f37 '' #zField
Ts0 @PushWFArc f38 '' #zField
Ts0 @RichDialogMethodStart f39 '' #zField
Ts0 @RichDialogProcessStep f40 '' #zField
Ts0 @PushWFArc f41 '' #zField
Ts0 @RichDialogProcessEnd f42 '' #zField
Ts0 @PushWFArc f43 '' #zField
Ts0 @Alternative f44 '' #zField
Ts0 @RichDialogProcessStep f47 '' #zField
Ts0 @PushWFArc f48 '' #zField
Ts0 @PushWFArc f15 '' #zField
Ts0 @RichDialogMethodStart f49 '' #zField
Ts0 @RichDialogProcessStep f50 '' #zField
Ts0 @Alternative f54 '' #zField
Ts0 @RichDialogProcessStep f56 '' #zField
Ts0 @PushWFArc f57 '' #zField
Ts0 @RichDialogProcessStep f58 '' #zField
Ts0 @PushWFArc f59 '' #zField
Ts0 @RichDialogProcessEnd f60 '' #zField
Ts0 @PushWFArc f61 '' #zField
Ts0 @PushWFArc f62 '' #zField
Ts0 @CallSub f63 '' #zField
Ts0 @PushWFArc f64 '' #zField
Ts0 @PushWFArc f52 '' #zField
Ts0 @Alternative f53 '' #zField
Ts0 @PushWFArc f55 '' #zField
Ts0 @RichDialogProcessStep f65 '' #zField
Ts0 @PushWFArc f66 '' #zField
Ts0 @PushWFArc f67 '' #zField
Ts0 @Alternative f68 '' #zField
Ts0 @PushWFArc f69 '' #zField
Ts0 @RichDialogProcessEnd f11 '' #zField
Ts0 @PushWFArc f70 '' #zField
Ts0 @RichDialogProcessStep f72 '' #zField
Ts0 @PushWFArc f73 '' #zField
Ts0 @PushWFArc f71 '' #zField
Ts0 @RichDialogProcessStart f74 '' #zField
Ts0 @RichDialogMethodStart f79 '' #zField
Ts0 @RichDialogEnd f80 '' #zField
Ts0 @RichDialogProcessStart f84 '' #zField
Ts0 @RichDialogInitStart f86 '' #zField
Ts0 @RichDialogInitStart f87 '' #zField
Ts0 @PushWFArc f88 '' #zField
Ts0 @PushWFArc f89 '' #zField
Ts0 @RichDialogMethodStart f90 '' #zField
Ts0 @RichDialogProcessStep f91 '' #zField
Ts0 @PushWFArc f92 '' #zField
Ts0 @RichDialogProcessEnd f93 '' #zField
Ts0 @PushWFArc f94 '' #zField
Ts0 @RichDialogProcessStep f95 '' #zField
Ts0 @PushWFArc f21 '' #zField
Ts0 @RichDialogProcessStep f46 '' #zField
Ts0 @PushWFArc f98 '' #zField
Ts0 @PushWFArc f51 '' #zField
Ts0 @PushWFArc f99 '' #zField
Ts0 @RichDialogProcessStart f75 '' #zField
Ts0 @Alternative f76 '' #zField
Ts0 @PushWFArc f77 '' #zField
Ts0 @RichDialogProcessStep f78 '' #zField
Ts0 @PushWFArc f100 '' #zField
Ts0 @RichDialogProcessEnd f101 '' #zField
Ts0 @PushWFArc f102 '' #zField
Ts0 @PushWFArc f103 '' #zField
Ts0 @RichDialogMethodStart f104 '' #zField
Ts0 @RichDialogProcessStep f105 '' #zField
Ts0 @PushWFArc f106 '' #zField
Ts0 @RichDialogMethodStart f107 '' #zField
Ts0 @RichDialogMethodStart f108 '' #zField
Ts0 @RichDialogProcessEnd f109 '' #zField
Ts0 @PushWFArc f110 '' #zField
Ts0 @RichDialogProcessEnd f111 '' #zField
Ts0 @PushWFArc f112 '' #zField
Ts0 @RichDialogProcessEnd f113 '' #zField
Ts0 @PushWFArc f114 '' #zField
Ts0 @RichDialogProcessStep f117 '' #zField
Ts0 @PushWFArc f118 '' #zField
Ts0 @PushWFArc f116 '' #zField
Ts0 @PushWFArc f45 '' #zField
Ts0 @PushWFArc f81 '' #zField
Ts0 @PushWFArc f82 '' #zField
Ts0 @PushWFArc f83 '' #zField
Ts0 @RichDialog f85 '' #zField
Ts0 @PushWFArc f97 '' #zField
Ts0 @PushWFArc f17 '' #zField
Ts0 @PushWFArc f115 '' #zField
Ts0 @RichDialogProcessStep f19 '' #zField
>Proto Ts0 Ts0 TemplatePanelProcess #zField
Ts0 f0 guid 124A0A1812656503 #txt
Ts0 f0 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f0 method start() #txt
Ts0 f0 disableUIEvents true #txt
Ts0 f0 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Ts0 f0 outParameterDecl '<> result;
' #txt
Ts0 f0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start()</name>
    </language>
</elementInfo>
' #txt
Ts0 f0 90 40 20 20 13 0 #rect
Ts0 f0 @|RichDialogInitStartIcon #fIcon
Ts0 f1 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f1 90 102 20 20 13 0 #rect
Ts0 f1 @|RichDialogProcessEndIcon #fIcon
Ts0 f2 expr out #txt
Ts0 f2 100 60 100 102 #arcP
Ts0 f3 guid 124A1DBBC6710879 #txt
Ts0 f3 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f3 method start(List<ch.ivyteam.ivy.addons.docfactory.TemplateMergeField>) #txt
Ts0 f3 disableUIEvents true #txt
Ts0 f3 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<ch.ivyteam.ivy.addons.docfactory.TemplateMergeField> listMergedFields> param = methodEvent.getInputArguments();
' #txt
Ts0 f3 inParameterMapAction 'out.areButtonsVisible=false;
out.mergeFieldsList=param.listMergedFields;
out.showOptions=false;
' #txt
Ts0 f3 outParameterDecl '<> result;
' #txt
Ts0 f3 embeddedRdInitializations '* ' #txt
Ts0 f3 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start(List&lt;TemplateMergeField&gt;)</name>
        <nameStyle>31,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f3 94 198 20 20 -80 -34 #rect
Ts0 f3 @|RichDialogInitStartIcon #fIcon
Ts0 f4 guid 124A1DBCC0724901 #txt
Ts0 f4 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f4 method start(String) #txt
Ts0 f4 disableUIEvents true #txt
Ts0 f4 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String templatePath> param = methodEvent.getInputArguments();
' #txt
Ts0 f4 inParameterMapAction 'out.areButtonsVisible=false;
out.showOptions=false;
out.templatePath=param.templatePath;
' #txt
Ts0 f4 outParameterDecl '<> result;
' #txt
Ts0 f4 embeddedRdInitializations '* ' #txt
Ts0 f4 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start(String)</name>
        <nameStyle>13,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f4 262 310 20 20 13 -6 #rect
Ts0 f4 @|RichDialogInitStartIcon #fIcon
Ts0 f5 guid 124A1DBF5691495E #txt
Ts0 f5 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f5 method getMergeFieldsList() #txt
Ts0 f5 disableUIEvents false #txt
Ts0 f5 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Ts0 f5 outParameterDecl '<List<ch.ivyteam.ivy.addons.docfactory.TemplateMergeField> mergeFieldsList> result;
' #txt
Ts0 f5 outParameterMapAction 'result.mergeFieldsList=in.mergeFieldsList;
' #txt
Ts0 f5 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getMergeFieldsList()</name>
        <nameStyle>20,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f5 718 734 20 20 20 -13 #rect
Ts0 f5 @|RichDialogMethodStartIcon #fIcon
Ts0 f6 guid 124A1DC15B38A27F #txt
Ts0 f6 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f6 method getTemplatePath() #txt
Ts0 f6 disableUIEvents false #txt
Ts0 f6 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Ts0 f6 outParameterDecl '<java.lang.String templatePath> result;
' #txt
Ts0 f6 outParameterMapAction 'result.templatePath=in.templatePath;
' #txt
Ts0 f6 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getTemplatePath()</name>
        <nameStyle>17,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f6 430 46 20 20 13 0 #rect
Ts0 f6 @|RichDialogMethodStartIcon #fIcon
Ts0 f7 guid 124A1DC2E8AD1103 #txt
Ts0 f7 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f7 method setMergeFieldsList(List<ch.ivyteam.ivy.addons.docfactory.TemplateMergeField>) #txt
Ts0 f7 disableUIEvents false #txt
Ts0 f7 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<ch.ivyteam.ivy.addons.docfactory.TemplateMergeField> mergeFieldsList> param = methodEvent.getInputArguments();
' #txt
Ts0 f7 inParameterMapAction 'out.mergeFieldsList=param.mergeFieldsList;
' #txt
Ts0 f7 outParameterDecl '<> result;
' #txt
Ts0 f7 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setMergeFieldsList
(List&lt;TemplateMergeField&gt;)</name>
        <nameStyle>45,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f7 470 478 20 20 19 -16 #rect
Ts0 f7 @|RichDialogMethodStartIcon #fIcon
Ts0 f8 guid 124A1DC65E6812CA #txt
Ts0 f8 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f8 method setTemplatePath(String) #txt
Ts0 f8 disableUIEvents false #txt
Ts0 f8 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String templatePath> param = methodEvent.getInputArguments();
' #txt
Ts0 f8 inParameterMapAction 'out.templatePath2=param.templatePath;
' #txt
Ts0 f8 outParameterDecl '<> result;
' #txt
Ts0 f8 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setTemplatePath(String)</name>
        <nameStyle>23,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f8 438 278 20 20 -45 -33 #rect
Ts0 f8 @|RichDialogMethodStartIcon #fIcon
Ts0 f9 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f9 actionTable 'out=in;
' #txt
Ts0 f9 actionCode 'import ch.ivyteam.ivy.addons.docfactory.BaseDocFactory;
in.documentFactory=BaseDocFactory.getInstance();' #txt
Ts0 f9 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f9 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>make the 
documentFactory</name>
        <nameStyle>25,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f9 254 364 36 24 -120 -10 #rect
Ts0 f9 @|RichDialogProcessStepIcon #fIcon
Ts0 f10 expr out #txt
Ts0 f10 272 330 272 364 #arcP
Ts0 f12 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f12 actionTable 'out=in;
' #txt
Ts0 f12 actionCode 'import ch.ivyteam.ivy.addons.docfactory.TemplateMergeField;
in.mergeFieldsList.clear();
List<String> mergFieldsNames = new List<String>();
List<int> mergFieldsPosToReject = new List<int>();
//if the template can be found
if(in.#documentFactory!=null && new java.io.File(in.templatePath).exists()){
	mergFieldsNames.addAll(in.documentFactory.getTemplateFields(in.templatePath));
	
	for(int i=0; i<mergFieldsNames.size(); i++){
		if(mergFieldsNames.get(i).toLowerCase().startsWith("tablestart:"))
		{//We have to reject all the mergefields contained into a table (Merge with Regions)
			List<String> sublist = mergFieldsNames.subList(i,mergFieldsNames.size()) as List<String>;
			int j=0;
			while(j<sublist.size() && !sublist.get(j).toLowerCase().startsWith("tableend:"))
			{
				//ivy.log.info("We have to remove "+ sublist.get(j));
				mergFieldsPosToReject.add(i+j);
				j++;
			}
			
			if((i+j)<mergFieldsNames.size())
			{
				ivy.log.info("We have to remove "+ sublist.get(j));
				mergFieldsPosToReject.add(i+j);
			}
		}
	}
	
	for(int i=0; i<mergFieldsPosToReject.size(); i++){
		int x = mergFieldsPosToReject.get(i)-i;
		if(x<mergFieldsNames.size()){
			ivy.log.info("Remove position "+ x +" "+mergFieldsNames.get(x)+" remaining items "+mergFieldsNames.size());
			mergFieldsNames.removeAt(x);
		}
	}
	
}else{
	panel.setInfoLabelText(ivy.cms.co("/ch/ivyteam/ivy/addons/docfactory/messages/templateIndicatedNotExist"));
	panel.Label.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/docfactory/icons/error/24"));
}

for(String s: mergFieldsNames){
	//in.mergeFieldsList.add(new ch.ivyteam.ivy.addons.docfactory.TemplateMergeField(s,""));
	in.mergeFieldsList.add(new TemplateMergeField(s,""));
}
if(in.#documentFactory!=null){
	in.outputFormatList.addAll(in.documentFactory.getSupportedFormats());
	panel.formatsComboBox.setListData(in.outputFormatList);
}' #txt
Ts0 f12 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f12 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>parse the template to get
the MergeFieldsList</name>
        <nameStyle>45,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f12 254 412 36 24 20 -19 #rect
Ts0 f12 @|RichDialogProcessStepIcon #fIcon
Ts0 f13 expr out #txt
Ts0 f13 272 388 272 412 #arcP
Ts0 f14 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f14 actionTable 'out=in;
' #txt
Ts0 f14 actionCode 'import ch.ivyteam.ivy.demo.docfactory.TemplateMergeFieldPanel.TemplateMergeFieldPanelPanel;
import com.ulcjava.base.application.ULCComponent;

List<ULCComponent> ulcs = panel.ListDisplay.getComponents();
for(ULCComponent ulc: ulcs){
	if(ulc instanceof TemplateMergeFieldPanelPanel){
		TemplateMergeFieldPanelPanel tmfp = ulc as TemplateMergeFieldPanelPanel;
		tmfp.close();
	}
}' #txt
Ts0 f14 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f14 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>if there are some
displayed MergeFields, 
remove them</name>
        <nameStyle>53,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f14 254 476 36 24 -34 13 #rect
Ts0 f14 @|RichDialogProcessStepIcon #fIcon
Ts0 f16 expr out #txt
Ts0 f16 272 436 272 476 #arcP
Ts0 f20 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f20 174 774 20 20 13 0 #rect
Ts0 f20 @|RichDialogProcessEndIcon #fIcon
Ts0 f22 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f22 430 102 20 20 13 0 #rect
Ts0 f22 @|RichDialogProcessEndIcon #fIcon
Ts0 f23 expr out #txt
Ts0 f23 440 66 440 102 #arcP
Ts0 f24 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f24 actionTable 'out=in;
' #txt
Ts0 f24 actionCode 'import com.ulcjava.base.application.ULCBorderLayoutPane;
import ch.ivyteam.ivy.demo.docfactory.TemplateMergeFieldPanel.TemplateMergeFieldPanelPanel;
import com.ulcjava.base.application.ULCComponent;

in.mergeFieldsList.clear();

List ulcs = panel.ListDisplay.getPanels();
for(Object o: ulcs){
	
	if(o instanceof TemplateMergeFieldPanelPanel){
		TemplateMergeFieldPanelPanel tmfp = o as TemplateMergeFieldPanelPanel;
		in.mergeFieldsList.add(tmfp.getMergeField());
	}
		
	
}
/*
List test = panel.ListDisplay.getPanels();
for(Object o : test){
	ivy.log.info(o.getClass().toString());
}
*/' #txt
Ts0 f24 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f24 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getAll the MergeFields
edited by the user</name>
        <nameStyle>41,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f24 710 772 36 24 22 -12 #rect
Ts0 f24 @|RichDialogProcessStepIcon #fIcon
Ts0 f25 expr out #txt
Ts0 f25 728 754 728 772 #arcP
Ts0 f26 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f26 718 814 20 20 13 0 #rect
Ts0 f26 @|RichDialogProcessEndIcon #fIcon
Ts0 f27 expr out #txt
Ts0 f27 728 796 728 814 #arcP
Ts0 f28 guid 124A3F7A00599A59 #txt
Ts0 f28 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f28 method getButtonsVisible() #txt
Ts0 f28 disableUIEvents false #txt
Ts0 f28 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Ts0 f28 outParameterDecl '<java.lang.Boolean areButtonsVisible> result;
' #txt
Ts0 f28 outParameterMapAction 'result.areButtonsVisible=in.areButtonsVisible;
' #txt
Ts0 f28 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getButtonsVisible()</name>
        <nameStyle>19,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f28 782 46 20 20 13 0 #rect
Ts0 f28 @|RichDialogMethodStartIcon #fIcon
Ts0 f29 guid 124A3F7D974DC91A #txt
Ts0 f29 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f29 method getInfoLabelText() #txt
Ts0 f29 disableUIEvents false #txt
Ts0 f29 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Ts0 f29 outParameterDecl '<java.lang.String info> result;
' #txt
Ts0 f29 outParameterMapAction 'result.info=in.info;
' #txt
Ts0 f29 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getInfoLabelText()</name>
        <nameStyle>18,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f29 782 118 20 20 13 0 #rect
Ts0 f29 @|RichDialogMethodStartIcon #fIcon
Ts0 f30 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f30 782 78 20 20 13 0 #rect
Ts0 f30 @|RichDialogProcessEndIcon #fIcon
Ts0 f31 expr out #txt
Ts0 f31 792 66 792 78 #arcP
Ts0 f32 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f32 782 158 20 20 13 0 #rect
Ts0 f32 @|RichDialogProcessEndIcon #fIcon
Ts0 f33 expr out #txt
Ts0 f33 792 138 792 158 #arcP
Ts0 f34 guid 124A3F82987478D6 #txt
Ts0 f34 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f34 method setButtonsVisible(Boolean) #txt
Ts0 f34 disableUIEvents false #txt
Ts0 f34 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Boolean areButtonsVisible> param = methodEvent.getInputArguments();
' #txt
Ts0 f34 inParameterMapAction 'out.areButtonsVisible=param.areButtonsVisible;
' #txt
Ts0 f34 outParameterDecl '<> result;
' #txt
Ts0 f34 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setButtonsVisible(Boolean)</name>
        <nameStyle>26,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f34 670 230 20 20 -68 -28 #rect
Ts0 f34 @|RichDialogMethodStartIcon #fIcon
Ts0 f35 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f35 actionTable 'out=in;
' #txt
Ts0 f35 actionCode panel.buttonFlowLayoutPane.visible=in.areButtonsVisible; #txt
Ts0 f35 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f35 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set ButtonsFlowLayoutContainer
visivbility</name>
        <nameStyle>42,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f35 662 284 36 24 23 -18 #rect
Ts0 f35 @|RichDialogProcessStepIcon #fIcon
Ts0 f36 expr out #txt
Ts0 f36 680 250 680 284 #arcP
Ts0 f37 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f37 670 350 20 20 13 0 #rect
Ts0 f37 @|RichDialogProcessEndIcon #fIcon
Ts0 f38 expr out #txt
Ts0 f38 680 308 680 350 #arcP
Ts0 f39 guid 124A3F938F2A403D #txt
Ts0 f39 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f39 method setInfoLabelText(String) #txt
Ts0 f39 disableUIEvents false #txt
Ts0 f39 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String info> param = methodEvent.getInputArguments();
' #txt
Ts0 f39 inParameterMapAction 'out.info=param.info;
' #txt
Ts0 f39 outParameterDecl '<> result;
' #txt
Ts0 f39 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setInfoLabelText(String)</name>
        <nameStyle>24,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f39 670 406 20 20 -59 -30 #rect
Ts0 f39 @|RichDialogMethodStartIcon #fIcon
Ts0 f40 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f40 actionTable 'out=in;
' #txt
Ts0 f40 actionCode 'String s="<html>";
s+=in.info.replaceAll("\n","<br>");
s+="</html>";

panel.infoLabel.setText(s);' #txt
Ts0 f40 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f40 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set the info text
display as HTML code</name>
        <nameStyle>38,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f40 662 452 36 24 26 -19 #rect
Ts0 f40 @|RichDialogProcessStepIcon #fIcon
Ts0 f41 expr out #txt
Ts0 f41 680 426 680 452 #arcP
Ts0 f42 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f42 670 502 20 20 13 0 #rect
Ts0 f42 @|RichDialogProcessEndIcon #fIcon
Ts0 f43 expr out #txt
Ts0 f43 680 476 680 502 #arcP
Ts0 f44 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f44 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>for each merge field
represent a MergeField Panel</name>
        <nameStyle>49,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f44 90 562 28 28 -88 -50 #rect
Ts0 f44 @|AlternativeIcon #fIcon
Ts0 f47 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f47 actionTable 'out=in;
' #txt
Ts0 f47 actionCode '/*
if(in.mergeFieldsPanelsList.size()>0){
	panel.setInfoLabelText(ivy.cms.co("/ch/ivyteam/ivy/addons/docfactory/messages/mergeFieldListEmpty"));
}else{
	panel.setInfoLabelText(ivy.cms.co("/ch/ivyteam/ivy/addons/docfactory/messages/fillTheMergeFields"));
}
*/
panel.Label.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/docfactory/icons/info/24"));' #txt
Ts0 f47 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f47 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set Info</name>
        <nameStyle>8,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f47 382 476 36 24 -5 13 #rect
Ts0 f47 @|RichDialogProcessStepIcon #fIcon
Ts0 f48 expr out #txt
Ts0 f48 470 488 418 488 #arcP
Ts0 f15 expr out #txt
Ts0 f15 382 488 290 488 #arcP
Ts0 f15 0 0.5281897874385261 0 0 #arcLabel
Ts0 f49 guid 124A42059384346D #txt
Ts0 f49 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f49 method makeTheLetter(String,String,String,String) #txt
Ts0 f49 disableUIEvents false #txt
Ts0 f49 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String templatePath,java.lang.String outputFormat,java.lang.String letterName,java.lang.String outputPath> param = methodEvent.getInputArguments();
' #txt
Ts0 f49 inParameterMapAction 'out.letterName=param.letterName;
out.outputFormat=param.outputFormat;
out.outputPath=param.outputPath;
out.templatePath2=param.templatePath;
' #txt
Ts0 f49 outParameterDecl '<ch.ivyteam.ivy.addons.docfactory.FileOperationMessage fileOperationMessage> result;
' #txt
Ts0 f49 outParameterMapAction 'result.fileOperationMessage=in.fileOperationMessage;
' #txt
Ts0 f49 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>makeTheLetter(String,String,String,String)</name>
        <nameStyle>42,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f49 1078 102 20 20 -35 -28 #rect
Ts0 f49 @|RichDialogMethodStartIcon #fIcon
Ts0 f50 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f50 actionTable 'out=in;
' #txt
Ts0 f50 actionCode 'panel.getMergeFieldsList();
if(!in.templatePath2.trim().equalsIgnoreCase("")){
	out.templatePath = in.templatePath2;
}' #txt
Ts0 f50 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f50 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getTheMergeFields</name>
        <nameStyle>17,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f50 1070 236 36 24 20 -2 #rect
Ts0 f50 @|RichDialogProcessStepIcon #fIcon
Ts0 f54 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f54 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Wich kind of Message ? 
(ERROR OR SUCCESS)</name>
        <nameStyle>42,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f54 1074 330 28 28 61 -8 #rect
Ts0 f54 @|AlternativeIcon #fIcon
Ts0 f56 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f56 actionTable 'out=in;
' #txt
Ts0 f56 actionCode 'panel.setInfoLabelText(in.fileOperationMessage.message);
panel.Label.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/docfactory/icons/info/24"));' #txt
Ts0 f56 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f56 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Ts0 f56 1038 388 36 24 20 -2 #rect
Ts0 f56 @|RichDialogProcessStepIcon #fIcon
Ts0 f57 expr in #txt
Ts0 f57 outCond 'in.fileOperationMessage.type == ch.ivyteam.ivy.addons.docfactory.FileOperationMessage.SUCCESS_MESSAGE' #txt
Ts0 f57 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SUCCESS</name>
        <nameStyle>7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f57 1074 344 1056 388 #arcP
Ts0 f57 1 1056 344 #addKink
Ts0 f57 0 1.0 -14 -14 #arcLabel
Ts0 f58 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f58 actionTable 'out=in;
' #txt
Ts0 f58 actionCode 'panel.setInfoLabelText(in.fileOperationMessage.message);
panel.Label.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/docfactory/icons/error/24"));' #txt
Ts0 f58 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f58 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Ts0 f58 1102 388 36 24 20 -2 #rect
Ts0 f58 @|RichDialogProcessStepIcon #fIcon
Ts0 f59 expr in #txt
Ts0 f59 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>ERROR</name>
        <nameStyle>5,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f59 1102 344 1120 388 #arcP
Ts0 f59 1 1120 344 #addKink
Ts0 f59 0 1.0 4 -12 #arcLabel
Ts0 f60 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f60 1078 454 20 20 13 0 #rect
Ts0 f60 @|RichDialogProcessEndIcon #fIcon
Ts0 f61 expr out #txt
Ts0 f61 1056 412 1078 464 #arcP
Ts0 f61 1 1056 464 #addKink
Ts0 f61 0 0.7718549419985796 0 0 #arcLabel
Ts0 f62 expr out #txt
Ts0 f62 1120 412 1098 464 #arcP
Ts0 f62 1 1120 464 #addKink
Ts0 f62 0 0.7809330127703641 0 0 #arcLabel
Ts0 f63 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f63 processCall 'Functional Processes/writeSerialLetterToOneCorrespondent:writeSerialLetterToOneCorrespondant(List<ch.ivyteam.ivy.addons.docfactory.TemplateMergeField>,String,String,String,String)' #txt
Ts0 f63 doCall true #txt
Ts0 f63 requestActionDecl '<List<ch.ivyteam.ivy.addons.docfactory.TemplateMergeField> listOfTemplateMergeFields,java.lang.String optionalOutputpath,java.lang.String optionalLetterName,java.lang.String optionalOutputFormat,java.lang.String templatePath> param;
' #txt
Ts0 f63 requestMappingAction 'param.listOfTemplateMergeFields=in.mergeFieldsList;
param.optionalOutputpath=in.outputPath;
param.optionalLetterName=in.letterName;
param.optionalOutputFormat=in.outputFormat;
param.templatePath=in.templatePath;
' #txt
Ts0 f63 responseActionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f63 responseMappingAction 'out=in;
out.fileOperationMessage=result.fileOperationMessage;
' #txt
Ts0 f63 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>WriteSerialLetterToOneCorrespondent</name>
        <nameStyle>35,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f63 1070 285 36 23 20 -2 #rect
Ts0 f63 @|CallSubIcon #fIcon
Ts0 f63 -14336|-1|-16777216 #nodeStyle
Ts0 f64 expr out #txt
Ts0 f64 1088 260 1088 284 #arcP
Ts0 f52 expr out #txt
Ts0 f52 1088 307 1088 330 #arcP
Ts0 f53 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f53 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>IF the given templatePath is not the same as
the one used for filling in the MergeFields
than show ERROR.</name>
        <nameStyle>105,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f53 1074 138 28 28 19 -34 #rect
Ts0 f53 @|AlternativeIcon #fIcon
Ts0 f55 expr out #txt
Ts0 f55 1088 122 1088 138 #arcP
Ts0 f65 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f65 actionTable 'out=in;
' #txt
Ts0 f65 actionCode 'panel.setInfoLabelText(ivy.cms.co("/ch/ivyteam/ivy/addons/docfactory/messages/templateNotCorrespondingWithMergeFields"));
panel.Label.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/docfactory/icons/error/24"));' #txt
Ts0 f65 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f65 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Ts0 f65 982 140 36 24 20 -2 #rect
Ts0 f65 @|RichDialogProcessStepIcon #fIcon
Ts0 f65 -65536|-1|-16777216 #nodeStyle
Ts0 f66 expr in #txt
Ts0 f66 outCond '!in.templatePath.trim().equalsIgnoreCase("") && !in.templatePath.trim().equalsIgnoreCase(in.templatePath2.trim())' #txt
Ts0 f66 1074 152 1018 152 #arcP
Ts0 f67 expr out #txt
Ts0 f67 1000 164 1078 464 #arcP
Ts0 f67 1 1000 464 #addKink
Ts0 f67 0 0.9817195085750012 0 0 #arcLabel
Ts0 f68 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f68 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Template has Changed ???</name>
        <nameStyle>24,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f68 434 362 28 28 6 16 #rect
Ts0 f68 @|AlternativeIcon #fIcon
Ts0 f69 expr out #txt
Ts0 f69 448 298 448 362 #arcP
Ts0 f69 0 0.5020300581667175 0 0 #arcLabel
Ts0 f11 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f11 510 366 20 20 13 0 #rect
Ts0 f11 @|RichDialogProcessEndIcon #fIcon
Ts0 f70 expr in #txt
Ts0 f70 outCond in.templatePath.trim().equalsIgnoreCase(in.templatePath2.trim()) #txt
Ts0 f70 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f70 462 376 510 376 #arcP
Ts0 f72 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f72 actionTable 'out=in;
' #txt
Ts0 f72 actionCode out.templatePath=in.templatePath2; #txt
Ts0 f72 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f72 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Ts0 f72 358 364 36 24 20 -2 #rect
Ts0 f72 @|RichDialogProcessStepIcon #fIcon
Ts0 f73 expr in #txt
Ts0 f73 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f73 434 376 394 376 #arcP
Ts0 f71 expr out #txt
Ts0 f71 358 376 290 376 #arcP
Ts0 f74 guid 124A451D8C5F754F #txt
Ts0 f74 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f74 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f74 actionTable 'out=in;
' #txt
Ts0 f74 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Make document</name>
        <nameStyle>13,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f74 1382 110 20 20 -42 -27 #rect
Ts0 f74 @|RichDialogProcessStartIcon #fIcon
Ts0 f79 guid 124A45414C487872 #txt
Ts0 f79 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f79 method close() #txt
Ts0 f79 disableUIEvents false #txt
Ts0 f79 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>close()</name>
    </language>
</elementInfo>
' #txt
Ts0 f79 1078 518 20 20 -19 -31 #rect
Ts0 f79 @|RichDialogMethodStartIcon #fIcon
Ts0 f80 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f80 guid 124A4542B59E2432 #txt
Ts0 f80 1078 558 20 20 13 0 #rect
Ts0 f80 @|RichDialogEndIcon #fIcon
Ts0 f84 guid 124A454ED739EBA9 #txt
Ts0 f84 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f84 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f84 actionTable 'out=in;
' #txt
Ts0 f84 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Close</name>
        <nameStyle>5,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f84 1318 558 20 20 13 0 #rect
Ts0 f84 @|RichDialogProcessStartIcon #fIcon
Ts0 f86 guid 124A45F6C949002C #txt
Ts0 f86 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f86 method start(String,Boolean) #txt
Ts0 f86 disableUIEvents true #txt
Ts0 f86 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String templatePath,java.lang.Boolean areButtonsVisible> param = methodEvent.getInputArguments();
' #txt
Ts0 f86 inParameterMapAction 'out.areButtonsVisible=param.areButtonsVisible;
out.showOptions=false;
out.templatePath=param.templatePath;
' #txt
Ts0 f86 outParameterDecl '<> result;
' #txt
Ts0 f86 embeddedRdInitializations '* ' #txt
Ts0 f86 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start(String,Boolean)</name>
        <nameStyle>21,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f86 230 270 20 20 13 0 #rect
Ts0 f86 @|RichDialogInitStartIcon #fIcon
Ts0 f87 guid 124A45F77CF9A662 #txt
Ts0 f87 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f87 method start(String,Boolean,Boolean) #txt
Ts0 f87 disableUIEvents true #txt
Ts0 f87 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String templatePath,java.lang.Boolean areButtonsVisible,java.lang.Boolean showAdvancedOption> param = methodEvent.getInputArguments();
' #txt
Ts0 f87 inParameterMapAction 'out.areButtonsVisible=param.areButtonsVisible;
out.showOptions=param.showAdvancedOption;
out.templatePath=param.templatePath;
' #txt
Ts0 f87 outParameterDecl '<> result;
' #txt
Ts0 f87 embeddedRdInitializations '* ' #txt
Ts0 f87 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start(String,Boolean,Boolean)</name>
        <nameStyle>29,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f87 198 230 20 20 13 0 #rect
Ts0 f87 @|RichDialogInitStartIcon #fIcon
Ts0 f88 expr out #txt
Ts0 f88 240 290 254 376 #arcP
Ts0 f88 1 240 376 #addKink
Ts0 f88 0 0.6016048736627782 0 0 #arcLabel
Ts0 f89 expr out #txt
Ts0 f89 208 250 254 376 #arcP
Ts0 f89 1 208 376 #addKink
Ts0 f89 0 0.6124887691871594 0 0 #arcLabel
Ts0 f90 guid 124A461DDE41DE26 #txt
Ts0 f90 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f90 method setShowAdvancedOptions(Boolean) #txt
Ts0 f90 disableUIEvents false #txt
Ts0 f90 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.Boolean showAdvancedOptions> param = methodEvent.getInputArguments();
' #txt
Ts0 f90 inParameterMapAction 'out.showOptions=param.showAdvancedOptions;
' #txt
Ts0 f90 outParameterDecl '<> result;
' #txt
Ts0 f90 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setShowAdvancedOptions(Boolean)</name>
        <nameStyle>31,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f90 614 590 20 20 -78 -31 #rect
Ts0 f90 @|RichDialogMethodStartIcon #fIcon
Ts0 f91 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f91 actionTable 'out=in;
' #txt
Ts0 f91 actionCode panel.optionsGridBagLayoutPane.visible=in.showOptions; #txt
Ts0 f91 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f91 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Ts0 f91 606 636 36 24 20 -2 #rect
Ts0 f91 @|RichDialogProcessStepIcon #fIcon
Ts0 f92 expr out #txt
Ts0 f92 624 610 624 636 #arcP
Ts0 f93 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f93 614 686 20 20 13 0 #rect
Ts0 f93 @|RichDialogProcessEndIcon #fIcon
Ts0 f94 expr out #txt
Ts0 f94 624 660 624 686 #arcP
Ts0 f95 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f95 actionTable 'out=in;
' #txt
Ts0 f95 actionCode '
panel.buttonFlowLayoutPane.visible=in.areButtonsVisible;
panel.optionsGridBagLayoutPane.visible=in.showOptions;

if(panel.formatsComboBox.getListData().size()>0){
	panel.formatsComboBox.setSelectedIndex(0);
}
/*
import ch.ivyteam.ivy.addons.docfactory.TemplateMergeFieldPanel;

int i=100;
for(TemplateMergeFieldPanel t: in.mergeFieldsPanelsList){
	int j = t.getLabelLength();
	if(j>i){
		i=j;
	}
}

for(TemplateMergeFieldPanel t: in.mergeFieldsPanelsList){
	t.setLabelWidth(i);
}
*/
//ivy.log.info(i);' #txt
Ts0 f95 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f95 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>panels visibility
Combobox selected</name>
        <nameStyle>35,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f95 38 692 36 24 10 12 #rect
Ts0 f95 @|RichDialogProcessStepIcon #fIcon
Ts0 f21 expr out #txt
Ts0 f21 56 716 174 784 #arcP
Ts0 f21 1 56 784 #addKink
Ts0 f21 1 0.2007616910520715 0 0 #arcLabel
Ts0 f46 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f46 actionTable 'out=in;
' #txt
Ts0 f46 actionCode 'import ch.ivyteam.ivy.addons.docfactory.FileUtil;


if(in.showOptions){
	String s= panel.letterNameTextField.getText().trim();
	if(s.length()>0 && FileUtil.isFileNameValid(s)){
		in.letterName= s;
	}
	if(panel.formatsComboBox.#selectedListEntry!=null  && panel.formatsComboBox.selectedListEntry instanceof String){
		in.outputFormat = panel.formatsComboBox.selectedListEntry as String;
	}
}' #txt
Ts0 f46 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f46 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>if options shown,
we take the letter name 
and selected format</name>
        <nameStyle>62,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f46 1070 188 36 24 22 -23 #rect
Ts0 f46 @|RichDialogProcessStepIcon #fIcon
Ts0 f98 expr in #txt
Ts0 f98 1088 166 1088 188 #arcP
Ts0 f51 expr out #txt
Ts0 f51 1088 212 1088 236 #arcP
Ts0 f99 expr out #txt
Ts0 f99 1392 130 1106 200 #arcP
Ts0 f99 1 1392 200 #addKink
Ts0 f99 1 0.3625412617144357 0 0 #arcLabel
Ts0 f75 guid 124A4A0E3473E7D6 #txt
Ts0 f75 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f75 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f75 actionTable 'out=in;
' #txt
Ts0 f75 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Key and Value changed for letter name
ASYNCHRONOUS</name>
        <nameStyle>50,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f75 1382 302 20 20 -51 -45 #rect
Ts0 f75 @|RichDialogProcessStartIcon #fIcon
Ts0 f76 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f76 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>options shown?</name>
        <nameStyle>14,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f76 1378 346 28 28 14 0 #rect
Ts0 f76 @|AlternativeIcon #fIcon
Ts0 f77 expr out #txt
Ts0 f77 1392 322 1392 346 #arcP
Ts0 f78 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f78 actionTable 'out=in;
' #txt
Ts0 f78 actionCode 'import ch.ivyteam.ivy.addons.docfactory.FileUtil;
String s=panel.letterNameTextField.getText();
if(!FileUtil.isFileNameValid(s)){
	panel.makeDocButton.enabled=false;
	panel.setInfoLabelText(ivy.cms.co("/ch/ivyteam/ivy/addons/docfactory/messages/fileNameInvalid"));
	panel.Label.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/docfactory/icons/error/24"));
}else{
	panel.makeDocButton.enabled=true;
	panel.setInfoLabelText(ivy.cms.co("/ch/ivyteam/ivy/addons/docfactory/messages/fillTheMergeFields"));
	panel.Label.setIconUri(ivy.cms.cr("/ch/ivyteam/ivy/addons/docfactory/icons/info/24"));
}' #txt
Ts0 f78 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f78 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check if valid letter name
if not warning message and diseble the button</name>
        <nameStyle>72,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f78 1374 396 36 24 28 -18 #rect
Ts0 f78 @|RichDialogProcessStepIcon #fIcon
Ts0 f100 expr in #txt
Ts0 f100 outCond in.showOptions #txt
Ts0 f100 1392 374 1392 396 #arcP
Ts0 f101 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f101 1382 454 20 20 13 0 #rect
Ts0 f101 @|RichDialogProcessEndIcon #fIcon
Ts0 f102 expr out #txt
Ts0 f102 1392 420 1392 454 #arcP
Ts0 f103 expr in #txt
Ts0 f103 1378 360 1382 464 #arcP
Ts0 f103 1 1336 360 #addKink
Ts0 f103 2 1336 464 #addKink
Ts0 f103 1 0.3538510138949923 0 0 #arcLabel
Ts0 f104 guid 124A5C2EF68F8B8A #txt
Ts0 f104 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f104 method getDocumentTemplateObject() #txt
Ts0 f104 disableUIEvents false #txt
Ts0 f104 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Ts0 f104 outParameterDecl '<ch.ivyteam.ivy.addons.docfactory.DocumentTemplate documentTemplate> result;
' #txt
Ts0 f104 outParameterMapAction 'result.documentTemplate=in.documentTemplate;
' #txt
Ts0 f104 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getDocumentTemplateObject()</name>
        <nameStyle>27,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f104 830 582 20 20 -80 -28 #rect
Ts0 f104 @|RichDialogMethodStartIcon #fIcon
Ts0 f105 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f105 actionTable 'out=in;
' #txt
Ts0 f105 actionCode 'in.documentTemplate.mergeFields = panel.getMergeFieldsList();
if(in.showOptions){
	if(panel.formatsComboBox.getSelectedListEntry() != null && panel.formatsComboBox.getSelectedListEntry() instanceof String){
		in.documentTemplate.outputFormat = panel.formatsComboBox.getSelectedListEntry() as String;
	}
	in.documentTemplate.outputName = panel.letterNameTextField.getText().trim();
	
}
in.documentTemplate.templatePath = in.templatePath;
in.documentTemplate.outputPath = in.outputPath;' #txt
Ts0 f105 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f105 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Ts0 f105 822 628 36 24 20 -2 #rect
Ts0 f105 @|RichDialogProcessStepIcon #fIcon
Ts0 f106 expr out #txt
Ts0 f106 840 602 840 628 #arcP
Ts0 f107 guid 124A5C953CEF0F8C #txt
Ts0 f107 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f107 method getOutputPath() #txt
Ts0 f107 disableUIEvents false #txt
Ts0 f107 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Ts0 f107 outParameterDecl '<java.lang.String outputPath> result;
' #txt
Ts0 f107 outParameterMapAction 'result.outputPath=in.outputPath;
' #txt
Ts0 f107 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getOutputPath()</name>
        <nameStyle>15,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f107 622 46 20 20 13 0 #rect
Ts0 f107 @|RichDialogMethodStartIcon #fIcon
Ts0 f108 guid 124A5C9611D99DFE #txt
Ts0 f108 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f108 method setOutputPath(String) #txt
Ts0 f108 disableUIEvents false #txt
Ts0 f108 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String outputPath> param = methodEvent.getInputArguments();
' #txt
Ts0 f108 inParameterMapAction 'out.outputPath=param.outputPath;
' #txt
Ts0 f108 outParameterDecl '<> result;
' #txt
Ts0 f108 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setOutputPath(String)</name>
        <nameStyle>21,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f108 622 118 20 20 13 0 #rect
Ts0 f108 @|RichDialogMethodStartIcon #fIcon
Ts0 f109 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f109 622 78 20 20 13 0 #rect
Ts0 f109 @|RichDialogProcessEndIcon #fIcon
Ts0 f110 expr out #txt
Ts0 f110 632 66 632 78 #arcP
Ts0 f111 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f111 622 158 20 20 13 0 #rect
Ts0 f111 @|RichDialogProcessEndIcon #fIcon
Ts0 f112 expr out #txt
Ts0 f112 632 138 632 158 #arcP
Ts0 f113 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f113 830 678 20 20 13 0 #rect
Ts0 f113 @|RichDialogProcessEndIcon #fIcon
Ts0 f114 expr out #txt
Ts0 f114 840 652 840 678 #arcP
Ts0 f117 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f117 actionTable 'out=in;
' #txt
Ts0 f117 actionCode 'if (! (in.displayId is initialized))
{
	in.displayId=System.nanoTime().toString();
	panel.ListDisplay.setDisplayId(in.displayId);
}	

in.counter=0;' #txt
Ts0 f117 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f117 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set Listdisplay Id unique</name>
        <nameStyle>25,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f117 86 476 36 24 -70 -38 #rect
Ts0 f117 @|RichDialogProcessStepIcon #fIcon
Ts0 f118 expr out #txt
Ts0 f118 104 218 104 476 #arcP
Ts0 f116 expr out #txt
Ts0 f116 254 488 122 488 #arcP
Ts0 f116 0 0.7777888488117504 0 0 #arcLabel
Ts0 f45 expr out #txt
Ts0 f45 104 500 104 562 #arcP
Ts0 f81 expr out #txt
Ts0 f81 1318 568 1098 568 #arcP
Ts0 f82 expr out #txt
Ts0 f82 1088 538 1088 558 #arcP
Ts0 f83 expr in #txt
Ts0 f83 90 576 56 692 #arcP
Ts0 f83 1 56 576 #addKink
Ts0 f83 1 0.30568879866520343 0 0 #arcLabel
Ts0 f85 targetWindow THIS #txt
Ts0 f85 targetDisplay EXISTING:<%=in.displayId%> #txt
Ts0 f85 richDialogId ch.ivyteam.ivy.demo.docfactory.TemplateMergeFieldPanel #txt
Ts0 f85 startMethod start(String,String) #txt
Ts0 f85 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f85 requestActionDecl '<String mergeFieldName, String mergeFieldValue> param;' #txt
Ts0 f85 requestMappingAction 'param.mergeFieldName=in.mergeFieldsList.get(in.counter).mergeFieldName;
param.mergeFieldValue=in.mergeFieldsList.get(in.counter).mergeFieldValue;
' #txt
Ts0 f85 responseActionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f85 responseMappingAction 'out=in;
' #txt
Ts0 f85 windowConfiguration '* ' #txt
Ts0 f85 isAsynch true #txt
Ts0 f85 isInnerRd true #txt
Ts0 f85 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Ts0 f85 206 564 36 24 20 -2 #rect
Ts0 f85 @|RichDialogIcon #fIcon
Ts0 f97 expr in #txt
Ts0 f97 outCond in.counter<in.mergeFieldsList.size() #txt
Ts0 f97 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name></name>
    </language>
</elementInfo>
' #txt
Ts0 f97 118 576 206 576 #arcP
Ts0 f97 0 0.0 -5 49 #arcLabel
Ts0 f17 expr out #txt
Ts0 f17 224 588 224 652 #arcP
Ts0 f115 expr out #txt
Ts0 f115 206 664 104 590 #arcP
Ts0 f115 1 104 664 #addKink
Ts0 f115 0 0.8396317725605814 0 0 #arcLabel
Ts0 f19 actionDecl 'ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData out;
' #txt
Ts0 f19 actionTable 'out=in;
' #txt
Ts0 f19 actionCode 'out.counter= in.counter+1;' #txt
Ts0 f19 type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
Ts0 f19 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>counter++</name>
        <nameStyle>9,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f19 206 652 36 24 20 -2 #rect
Ts0 f19 @|RichDialogProcessStepIcon #fIcon
>Proto Ts0 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <swimlaneLabel></swimlaneLabel>
        <swimlaneLabel>GETTER AND SETTER</swimlaneLabel>
        <swimlaneLabel>Action Methods</swimlaneLabel>
        <swimlaneLabel>Events</swimlaneLabel>
        <swimlaneLabel></swimlaneLabel>
    </language>
    <swimlaneSize>337</swimlaneSize>
    <swimlaneSize>557</swimlaneSize>
    <swimlaneSize>392</swimlaneSize>
    <swimlaneSize>197</swimlaneSize>
    <swimlaneColor>-13369549</swimlaneColor>
    <swimlaneColor>-3355393</swimlaneColor>
    <swimlaneColor>-103</swimlaneColor>
    <swimlaneColor>-6710887</swimlaneColor>
</elementInfo>
' #txt
>Proto Ts0 .type ch.ivyteam.ivy.demo.docfactory.TemplatePanel.TemplatePanelData #txt
>Proto Ts0 .processKind RICH_DIALOG #txt
>Proto Ts0 .rdData2UIAction 'panel.formatsComboBox.listData=in.outputFormatList;
' #txt
>Proto Ts0 -8 -8 16 16 16 26 #rect
>Proto Ts0 '' #fIcon
Ts0 f0 mainOut f2 tail #connect
Ts0 f2 head f1 mainIn #connect
Ts0 f4 mainOut f10 tail #connect
Ts0 f10 head f9 mainIn #connect
Ts0 f9 mainOut f13 tail #connect
Ts0 f13 head f12 mainIn #connect
Ts0 f12 mainOut f16 tail #connect
Ts0 f16 head f14 mainIn #connect
Ts0 f6 mainOut f23 tail #connect
Ts0 f23 head f22 mainIn #connect
Ts0 f5 mainOut f25 tail #connect
Ts0 f25 head f24 mainIn #connect
Ts0 f24 mainOut f27 tail #connect
Ts0 f27 head f26 mainIn #connect
Ts0 f28 mainOut f31 tail #connect
Ts0 f31 head f30 mainIn #connect
Ts0 f29 mainOut f33 tail #connect
Ts0 f33 head f32 mainIn #connect
Ts0 f34 mainOut f36 tail #connect
Ts0 f36 head f35 mainIn #connect
Ts0 f35 mainOut f38 tail #connect
Ts0 f38 head f37 mainIn #connect
Ts0 f39 mainOut f41 tail #connect
Ts0 f41 head f40 mainIn #connect
Ts0 f40 mainOut f43 tail #connect
Ts0 f43 head f42 mainIn #connect
Ts0 f7 mainOut f48 tail #connect
Ts0 f48 head f47 mainIn #connect
Ts0 f47 mainOut f15 tail #connect
Ts0 f15 head f14 mainIn #connect
Ts0 f54 out f57 tail #connect
Ts0 f57 head f56 mainIn #connect
Ts0 f54 out f59 tail #connect
Ts0 f59 head f58 mainIn #connect
Ts0 f56 mainOut f61 tail #connect
Ts0 f61 head f60 mainIn #connect
Ts0 f58 mainOut f62 tail #connect
Ts0 f62 head f60 mainIn #connect
Ts0 f50 mainOut f64 tail #connect
Ts0 f64 head f63 mainIn #connect
Ts0 f63 mainOut f52 tail #connect
Ts0 f52 head f54 in #connect
Ts0 f49 mainOut f55 tail #connect
Ts0 f55 head f53 in #connect
Ts0 f53 out f66 tail #connect
Ts0 f66 head f65 mainIn #connect
Ts0 f65 mainOut f67 tail #connect
Ts0 f67 head f60 mainIn #connect
Ts0 f8 mainOut f69 tail #connect
Ts0 f69 head f68 in #connect
Ts0 f68 out f70 tail #connect
Ts0 f70 head f11 mainIn #connect
Ts0 f68 out f73 tail #connect
Ts0 f73 head f72 mainIn #connect
Ts0 f72 mainOut f71 tail #connect
Ts0 f71 head f9 mainIn #connect
Ts0 f86 mainOut f88 tail #connect
Ts0 f88 head f9 mainIn #connect
Ts0 f87 mainOut f89 tail #connect
Ts0 f89 head f9 mainIn #connect
Ts0 f90 mainOut f92 tail #connect
Ts0 f92 head f91 mainIn #connect
Ts0 f91 mainOut f94 tail #connect
Ts0 f94 head f93 mainIn #connect
Ts0 f95 mainOut f21 tail #connect
Ts0 f21 head f20 mainIn #connect
Ts0 f53 out f98 tail #connect
Ts0 f98 head f46 mainIn #connect
Ts0 f46 mainOut f51 tail #connect
Ts0 f51 head f50 mainIn #connect
Ts0 f74 mainOut f99 tail #connect
Ts0 f99 head f46 mainIn #connect
Ts0 f75 mainOut f77 tail #connect
Ts0 f77 head f76 in #connect
Ts0 f76 out f100 tail #connect
Ts0 f100 head f78 mainIn #connect
Ts0 f78 mainOut f102 tail #connect
Ts0 f102 head f101 mainIn #connect
Ts0 f76 out f103 tail #connect
Ts0 f103 head f101 mainIn #connect
Ts0 f104 mainOut f106 tail #connect
Ts0 f106 head f105 mainIn #connect
Ts0 f107 mainOut f110 tail #connect
Ts0 f110 head f109 mainIn #connect
Ts0 f108 mainOut f112 tail #connect
Ts0 f112 head f111 mainIn #connect
Ts0 f105 mainOut f114 tail #connect
Ts0 f114 head f113 mainIn #connect
Ts0 f19 mainOut f115 tail #connect
Ts0 f115 head f44 in #connect
Ts0 f3 mainOut f118 tail #connect
Ts0 f118 head f117 mainIn #connect
Ts0 f14 mainOut f116 tail #connect
Ts0 f116 head f117 mainIn #connect
Ts0 f117 mainOut f45 tail #connect
Ts0 f45 head f44 in #connect
Ts0 f84 mainOut f81 tail #connect
Ts0 f81 head f80 mainIn #connect
Ts0 f79 mainOut f82 tail #connect
Ts0 f82 head f80 mainIn #connect
Ts0 f83 head f95 mainIn #connect
Ts0 f44 out f97 tail #connect
Ts0 f97 head f85 mainIn #connect
Ts0 f44 out f83 tail #connect
Ts0 f85 mainOut f17 tail #connect
Ts0 f17 head f19 mainIn #connect
